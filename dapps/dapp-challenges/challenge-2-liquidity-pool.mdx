---
sidebar_position: 2
title: Liquidity Pool Dapp Challenge
description: Deploy an example dapp, add liquidity! Beat the Challenge!
---

import mint_tokens from "../../static/img/mint_tokens.png";
import approveTokenMint from "../../static/img/approveTokenMint.png";
import updatedBalances from "../../static/img/updatedBalances.png";
import deposit50 from "../../static/img/deposit50.png";
import updatedBalances50 from "../../static/img/updatedBalances50.png";
import swap from "../../static/img/swap.png";
import swapComplete from "../../static/img/swapComplete.png";
import futurenetDeployment from "../../static/img/futurenetDeployment.png";
import wdraw from "../../static/img/wdraw.png";
import { ParentChallengeForm } from "../../src/components/atoms/challenge-form";
import { ParentChallengeContractForm } from "../../src/components/atoms/challenge-contract-form";
import CompleteStepButton from "../../src/components/atoms/complete-step-button";
import StartChallengeButton from "../../src/components/atoms/start-challenge-button";

<StartChallengeButton id={2} />

This challenge is designed for educational purposes and helps you understand how a dapp can be built and interacted with in a sandbox environment.

This challenge will walk you through the step-by-step journey of creating and launching a liquidity pool dapp on Stellar, all while using Soroban in a sandbox environment. You will learn how to deploy smart contracts to a sandbox environment and how to interact with them through a web frontend. In this context, the term "ship" refers to finalizing the development process of your dapp, ensuring that it functions as expected, and is accessible for user interaction and testing through a hosted frontend. However, it's crucial to clarify that despite its functionality, the dapp is not promoted nor intended for deployment in a production-level setting on Futurenet.

## Checkpoint 0: 📦 Install 📚

Start by installing the required dependencies.

Required:

- `soroban-cli`: [Download Soroban-CLI](https://soroban.stellar.org/docs/getting-started/setup#install-the-soroban-cli)
- `Node` v18: [Download Node](https://nodejs.org/en/download/)
- `Freighter Wallet`: [Freighter Wallet](https://freighter.app/)

First, clone the Soroban example dapp repo and navigate to the `liquidity-pool` directory:

```bash
git clone https://github.com/stellar/soroban-dapps-challenge
cd soroban-dapps-challenge
git checkout liquidity-pool
```

Then, install soroban-cli alias by running the following command:

```sh
cargo install_soroban
```

## Checkpoint 1: 🎬 Deploy Smart Contracts

Now that you have the Liquidity Pool branch checked out, it's time to deploy the smart contracts to a Sandbox environment.

In your terminal, load the contracts and initialize them in the Sandbox environment by running the following commands:

```bash
./initialize.sh futurenet
```

If the command runs successfully, your terminal will return a series of messages notifying you about the successful initialization of the contracts and the post-installation sequence.

```bash
Contract deployed successfully with ID: CBXHU5BWWTOCZRYX3DMSSKCFG7B3K2YG2I5F75ALPQ6GCY6ZES2XKLTI
Deploy the liquidity pool contract
Contract deployed successfully with ID: CBKY7UN5VGD4LIQFOBOTSUSQWK67BZZTA23NIEVWSWRR5SAT26JQN2BN
Initialize the abundance token contract

Initialize the liquidity pool contract

Done

> soroban-example-dapp@0.1.0 build-contracts
...
```

<ParentChallengeContractForm id={2} progress={1} />

## Checkpoint 2: 🤝 Connect the Frontend to the Backend

Navigate to the frontend folder and run the development server:

```bash
cd frontend
make setup && make start_dev
```

> Note: This may require admin privileges on some systems.

Now open your browser and visit [http://localhost:5173](http://localhost:5173/). You should be able to see the frontend of your dapp.

> Note: Follow the instructions below and ensure that you have funded your wallet address that you intend to use from browser. If you are using Freighter, be sure that you have properly configured the Freighter Wallet by following the instructions [here](../guides/wallets#connect-a-wallet-freighter).

Now that you have the frontend running, it's time to connect it with your smart contracts.

You will need to add some Futurenet network lumens to your wallet to interact with the dapp. Visit https://laboratory.stellar.org/#account-creator?network=futurenet, and follow the instructions to create and or fund an account on Futurenet.

> Note: These are test lumens for use on Futurenet and cannot be used on Mainnet

## Checkpoint 3: 🌊 Dive into the Liquidity Pool

Embark on a tidal journey! In this step you will mint, deposit, swap, and withdraw tokens from the liquidity pool.

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs defaultValue="mintTokens" values={[
    {label: '🏦 Mint Tokens', value: 'mintTokens'},
    {label: '💰 Add Liquidity', value: 'depositLiquidity'},
    {label: '🔄 Make a Swap', value: 'makeSwap'},
    {label: '⤴️ Remove Liquidity', value: 'makeWithdrawal'},
]}>

<TabItem value="mintTokens">

<Tabs defaultValue="openDappMint" values={[
    {label: 'Mint', value: 'openDappMint'},
    {label: 'Approve', value: 'approveTxMint'},
    {label: 'Check', value: 'checkBalanceMint'},
]}>

<TabItem value="openDappMint">

#### Mint USDC and BTC

Open the dapp frontend and click the "MINT" button for USDC and BTC.

<img src={mint_tokens} width="40%" />
</TabItem>

<TabItem value="approveTxMint">

#### Approve Transaction

You should see a popup from Freighter asking you to sign the transactions. Click on "Approve" and wait for the transaction to be confirmed.

<img src={approveTokenMint} width="40%" />
</TabItem>

<TabItem value="checkBalanceMint">

#### Check Updated Balance

You should see an updated balance in the account balance component.

<img src={updatedBalances} width="40%" />
</TabItem>

</Tabs>

</TabItem>

<TabItem value="depositLiquidity">

<Tabs defaultValue="openDappDeposit" values={[
    {label: 'Deposit', value: 'openDappDeposit'},
    {label: 'Approve', value: 'approveTxDeposit'},
    {label: 'Check', value: 'checkBalanceDeposit'},
]}>

<TabItem value="openDappDeposit">

#### Deposit into the Liquidity Pool

Open the frontend, enter the desired token amounts, and click the "Deposit" button. You should see a popup from Freighter asking you to sign the transaction.

<img src={deposit50} width="75%" />
</TabItem>

<TabItem value="approveTxDeposit">

#### Approve Transaction

Click on "Approve" and wait for the transaction to be confirmed. Once the transaction is confirmed, you should see your balances updated.

</TabItem>

<TabItem value="checkBalanceDeposit">

#### Check Updated Balance

You should see an updated balance in the amounts you have deposited in the account and reserve balance components, respectively. Following the example, you should see 50 USDC, 50 BTC, and 50 POOL.

<img src={updatedBalances50} width="40%" />

</TabItem>

</Tabs>

</TabItem>

<TabItem value="makeSwap">

<Tabs defaultValue="openDappSwap" values={[
    {label: 'Swap', value: 'openDappSwap'},
    {label: 'Approve', value: 'approveTxSwap'},
    {label: 'Check', value: 'checkBalanceSwap'},
]}>

<TabItem value="openDappSwap">

#### Swap Tokens

Now that you have funded the liquidity pool, you can make a swap.

Open the swap tab, input the desired token swap amounts, and click the "Swap" button. You should see a popup from Freighter asking you to sign the transaction.

<img src={swap} width="75%" />

</TabItem>

<TabItem value="approveTxSwap">

#### Approve Transaction

Click on "Approve" and wait for the transaction to be confirmed.

</TabItem>

<TabItem value="checkBalanceSwap">

#### Check Updated Balance

Once the transaction is confirmed, you should see updated balances on the frontend.

<img src={swapComplete} width="75%" />

</TabItem>

</Tabs>

</TabItem>

<TabItem value="makeWithdrawal">

<Tabs defaultValue="openDappWithdraw" values={[
    {label: 'Withdraw', value: 'openDappWithdraw'},
    {label: 'Approve', value: 'approveTxWithdraw'},
    {label: 'Check', value: 'checkBalanceWithdraw'},
]}>

<TabItem value="openDappWithdraw">

#### Withdraw Tokens from the Liquidity Pool

Now that you have funded the liquidity pool, you can make a withdrawal.

Open the withdraw tab, select how much liquidity you want to remove with the sliding bar, and click the "Withdraw" button. You should see a popup from Freighter asking you to sign the transaction.

<img src={wdraw} width="75%" />

</TabItem>

<TabItem value="approveTxWithdraw">

#### Approve Transaction

Click on "Approve" and wait for the transaction to be confirmed.

</TabItem>

<TabItem value="checkBalanceWithdraw">

#### Check Updated Balance

Once the transaction is confirmed, you should see updated balances on the frontend.

<img src={updatedBalances} width="40%" />

</TabItem>
</Tabs>

</TabItem>
</Tabs>

> Note: These are test tokens for use on Futurenet or Mainnet.

<CompleteStepButton id={2} progress={2}>
  Transactions completed
</CompleteStepButton>

## Checkpoint 4: 🚢 Ship It! 🚁

Now that your dapp is fully functional , it's time to prepare it for new deployment on Futurenet using Vercel.

First, run the following commands to initialize the contracts on Futurenet:

```bash
rm -rf .soroban
./initialize.sh futurenet
```

> Note: This will remove the existing contracts and initialize new ones on Futurenet.

Then, navigate to the `frontend` directory and run the development server:

```bash
cd frontend
make setup && make start_dev
```

Now, open your browser and visit [http://localhost:5173](http://localhost:5173/).

Ensure that Freighter is connected to Futurenet, and you should be able to see the frontend of your dapp!

Next, you will remove the target directory, as it is not used by Vercel to deploy your site. To do this, navigate to the `liquidity-pool` directory and run the following:

```
rm -rf target
```

Next, you must move your `.soroban` directory to the frontend directory.

From a terminal in the `liquidity-pool` directory, run the following command:

```bash
mv .soroban frontend/.soroban
```

Then, you need to update the `package.json` file in the frontend directory to point to the new contract binding locations.

```diff
-"liquidity-pool-contract": "file:../.soroban/contracts/liquidity-pool",
-"share-token-contract": "file:../.soroban/contracts/share-token",
-"token-a-contract": "file:../.soroban/contracts/token-a",
-"token-b-contract": "file:../.soroban/contracts/token-b",

+"liquidity-pool-contract": "file:.soroban/contracts/liquidity-pool",
+"share-token-contract": "file:.soroban/contracts/share-token",
+"token-a-contract": "file:.soroban/contracts/token-a",
+"token-b-contract": "file:.soroban/contracts/token-b",
```

Next, you will use the Vercel CLI to complete your deployment.

> Note: If you don’t already have a [Vercel account], you should create one and link it to your GitHub account.

[Vercel account]: https://vercel.com/login

First, install the Vercel CLI:

```bash
npm i --global vercel
```

Then, open a terminal in the `liquidity-pool` directory and run the following command to deploy your example dapp:

```bash
npx vercel --prod
```

Then, continue through the prompts until you see the following message about setting overrides:

```bash
? Want to override the settings? [y/N] y
? Which settings would you like to override? (Press <space> to select, <a> to toggle all, <i> to invert selection)
❯◯ Build Command
 ◯ Development Command
 ◯ Output Directory
```

Select each entry (type "a") and set the following values:

**build command**

```bash
cd frontend && make build
```

**development command**

```bash
cd frontend && make start_dev
```

**output directory**

```bash
frontend/dist
```

Once the deployment is complete, you should see a message similar to the following:

```bash
🔗  Linked to julian-dev28/liquidity-pool (created .vercel)
🔍  Inspect: https://vercel.com/julian-dev28/liquidity-pool/FfsAJdgUR9LKH5EmGiuMCMYUMTi2 [2s]
✅  Production: https://liquidity-pool.vercel.app [54s]
```

You can now visit the preview link to see your deployed dapp! 🎉

<img src={futurenetDeployment} width="90%" />

You must add Futurenet network lumens to your Freighter wallet to interact with the deployed example dapp. Visit https://laboratory.stellar.org/#account-creator?network=futurenet, and follow the instructions to create your Freighter account on Futurenet.

## Checkpoint 5: ✅ Complete the Challenge!

Submit your public URL to the challenge form.

<ParentChallengeForm id={2} />

## Checkpoint 6: 💪 Flex!

🍴 [Fork the liquidity pool repo] and make your own changes to the dapp.

Customize the code and submit a pull request for the Liquidity Pool Dapp Challenge. You can experiment with new fee strategies, improve the user interface, or integrate additional token pair options.

Take this opportunity to showcase your skills and make your mark on the Liquidity Pool Dapp. Good luck!

[Stellar Laboratory]: https://laboratory.stellar.org/#explorer?network=futurenet
[Fork the liquidity pool repo]: https://github.com/stellar/soroban-dapps-challenge/fork

## 📚 User Workflows Checklist

During this exercise, you should be able to:

- Clone the example repo (Liquidity Pool Dapp)
- Deploy your contract to a sandbox environment.
- Deploy the example web UI somewhere (e.g., Netlify, Vercel, Surge, etc.)

Then, via the web UI, you should be able to:

- Connect your wallet
- See your current balance(s)
- Mint assets
- Deposit assets
- Swap assets
- Withdraw assets
- See your transaction(s) appear on the page as the transactions are confirmed

## 🛡️🗡️ Take On More Challenges

View your progress and take on more challenges by visiting your [User Dashboard!](/dashboard)
