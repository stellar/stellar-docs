 so Darth do you want to give us a so Darth do you want to give us a quick overview on the scalable. Quick overview on the scalable quick overview on the scalable configuration issue yeah I can do that. Configuration issue yeah I can do that configuration issue yeah I can do that can you hear me yes I can hear you okay. Can you hear me yes I can hear you okay can you hear me yes I can hear you okay perfect so yeah the issue at the. Perfect so yeah the issue at the perfect so yeah the issue at the moment is that all current Network. Moment is that all current Network moment is that all current Network related settings are stored in The. Related settings are stored in The related settings are stored in The Ledger header and this isn't a good. Ledger header and this isn't a good Ledger header and this isn't a good place to store you know the Soroban. Place to store you know the Soroban place to store you know the Soroban settings because they can be quite large. Settings because they can be quite large settings because they can be quite large. I think the current estimate for meeting I think the current estimate for meeting. I think the current estimate for meeting or alone sorry for metering alone is or alone sorry for metering alone is. Or alone sorry for metering alone is when kilobyte so before we go through when kilobyte so before we go through. When kilobyte so before we go through the approaches I'll mention that they the approaches I'll mention that they. The approaches I'll mention that they all assume the use of dedicated Ledger all assume the use of dedicated Ledger. All assume the use of dedicated Ledger entries for storing settings as entries for storing settings as. Entries for storing settings as described in cap 46-9 and that the described in cap 46-9 and that the. Described in cap 46-9 and that the settings will be created on protocol settings will be created on protocol. Settings will be created on protocol upgrades the only differences in these upgrades the only differences in these. Upgrades the only differences in these approaches are how the settings approaches are how the settings. Approaches are how the settings themselves are upgraded themselves are upgraded themselves are upgraded. So approach one which is described in so approach one which is described in so approach one which is described in. Cap 46-9 this requires a mechanism cap 46-9 this requires a mechanism cap 46-9 this requires a mechanism. For validators to introduce and for validators to introduce and for validators to introduce and. Distribute setting upgrades directly to distribute setting upgrades directly to distribute setting upgrades directly to. The overlay the validators will then the overlay the validators will then the overlay the validators will then. Vote on the hash of the flooded settings vote on the hash of the flooded settings. Vote on the hash of the flooded settings approach 2 allows users to use Soroban to. Approach 2 allows users to use Soroban to approach 2 allows users to use Soroban to. Introduce possible setting upgrades into introduce possible setting upgrades into. Introduce possible setting upgrades into the system using arbitrary Ledger the system using arbitrary Ledger. The system using arbitrary Ledger entries allowing validators to vote on entries allowing validators to vote on. Entries allowing validators to vote on one of these entries to overwrite an one of these entries to overwrite an. One of these entries to overwrite an existing setting we use Soroban here so existing setting we use Soroban here so. Existing setting we use Soroban here so accurate fees will be charged for the accurate fees will be charged for the. Accurate fees will be charged for the large for the larger operation and large for the larger operation and. Large for the larger operation and Ledger entries that will be introduced Ledger entries that will be introduced. Ledger entries that will be introduced there's still a question of how the user there's still a question of how the user. There's still a question of how the user will interact with sore button we can will interact with sore button we can. Will interact with sore button we can add a new operation add a new operation add a new operation. Add a new option to the invoke host add a new option to the invoke host add a new option to the invoke host. Function up or rely on a smart contract function up or rely on a smart contract function up or rely on a smart contract. Itself to create these entries itself to create these entries itself to create these entries. approach three is similar to approach approach three is similar to approach. approach three is similar to approach two except that a new Stellar classic two except that a new Stellar classic. Two except that a new Stellar classic operation will be used to create the operation will be used to create the. Operation will be used to create the entries that validators will vote to use entries that validators will vote to use. Entries that validators will vote to use to make this Opera to make sure this to make this Opera to make sure this. To make this Opera to make sure this operation isn't spanned the idea here is operation isn't spanned the idea here is. Operation isn't spanned the idea here is to make sure the to make the operation to make sure the to make the operation. To make sure the to make the operation withdraw a large amount of excellent withdraw a large amount of excellent. Withdraw a large amount of excellent from The Source account from The Source account. From The Source account but this idea needs some additional work but this idea needs some additional work. But this idea needs some additional work to guarantee that the operation always to guarantee that the operation always. To guarantee that the operation always has a sufficient balance for the has a sufficient balance for the. Has a sufficient balance for the withdrawal once the operation has been withdrawal once the operation has been. Withdrawal once the operation has been flooded because you don't want the flooded because you don't want the. Flooded because you don't want the operation to get flooded and fail operation to get flooded and fail . Operation to get flooded and fail because the network will have already because the network will have already. Because the network will have already flooded the that doesn't work for the flooded the that doesn't work for the. Flooded the that doesn't work for the operation operation operation so yeah that's the summary of the. so yeah that's the summary of the so yeah that's the summary of the three approaches. Three approaches three approaches and I know their their opinions on and I know their their opinions on. and I know their their opinions on all these so the yeah this is Homer all these so the yeah this is Homer. all these so the yeah this is Homer do you have a do you have any do you have a do you have any. Do you have a do you have any opinions on what would you prefer Sid I have a question. Sid I have a question so can you tell us a little bit more so can you tell us a little bit more. So can you tell us a little bit more about what is stored in that in these about what is stored in that in these. About what is stored in that in these Network configurations like concretely Network configurations like concretely. Network configurations like concretely and why is it important to preserve and why is it important to preserve. And why is it important to preserve these that data so for example from you know for. So for example from you know for metering we need we have different metering we need we have different . Metering we need we have different parameters on how specific things get parameters on how specific things get. Parameters on how specific things get charged charged charged and so the structure will have you. and so the structure will have you and so the structure will have you know say like you know a bunch of . Know say like you know a bunch of know say like you know a bunch of u64s u64s. U64s that that indicate how like specific that that indicate how like specific. that that indicate how like specific settings should be charged and that that settings should be charged and that that. Settings should be charged and that that is what sorbonne will use is what sorbonne will use. Is what sorbonne will use when deciding how metering should be when deciding how metering should be. When deciding how metering should be used but we want these settings to be used but we want these settings to be. Used but we want these settings to be configurable that's why it's not just configurable that's why it's not just. Configurable that's why it's not just hard-coded in Soroban the settings hard-coded in Soroban the settings. Hard-coded in Soroban the settings will be stored somewhere and which and will be stored somewhere and which and. Will be stored somewhere and which and the value should be able to upgrade the value should be able to upgrade . The value should be able to upgrade the settings whenever they want the settings whenever they want. The settings whenever they want if all the validators agree if all the validators agree. if all the validators agree does that make sense does that make sense does that make sense. Yes yes yes it just it's it doesn't sound like it just it's it doesn't sound like. It just it's it doesn't sound like something that would something that would something that would. change frequently between two subsequent change frequently between two subsequent. Change frequently between two subsequent Legends right but it's more something. Legends right but it's more something Legends right but it's more something like yeah when we'll go to upgrade to. Like yeah when we'll go to upgrade to like yeah when we'll go to upgrade to protocol Version Y then we need to make. Protocol Version Y then we need to make protocol Version Y then we need to make that update. That update that update am I cool we don't want so we don't want am I cool we don't want so we don't want. Am I cool we don't want so we don't want to tie the upgrading of the settings to to tie the upgrading of the settings to. To tie the upgrading of the settings to protocol upgrades protocol upgrades protocol upgrades. Right for example right now we can right for example right now we can right for example right now we can. Update update update I believe like at the Base reserve if I believe like at the Base reserve if. I believe like at the Base reserve if we want to without updating the protocol. We want to without updating the protocol we want to without updating the protocol. Right so that we want this to work the right so that we want this to work the right so that we want this to work the. Same way and well I agree that we we won't update and well I agree that we we won't update. The settings very often it I wouldn't be the settings very often it I wouldn't be. The settings very often it I wouldn't be surprised if we you know did it twice in. Surprised if we you know did it twice in surprised if we you know did it twice in. This specific protocol version it's just it's just generalizing what it's just it's just generalizing what. We're already doing a letter header to a we're already doing a letter header to a. We're already doing a letter header to a much larger number of number like this much larger number of number like this. Much larger number of number like this it's in a potentially unbounded number it's in a potentially unbounded number. It's in a potentially unbounded number of numbers although it's not it's not of numbers although it's not it's not. Of numbers although it's not it's not like enormous it's not thousands and like enormous it's not thousands and. Like enormous it's not thousands and thousands of entries but it's probably thousands of entries but it's probably. Thousands of entries but it's probably tens or or possibly as much as 100 so tens or or possibly as much as 100 so. Tens or or possibly as much as 100 so yeah does it make sense to do something yeah does it make sense to do something. Yeah does it make sense to do something in the in the like of in the in the like of. In the in the like of having an optional field in the having an optional field in the. Having an optional field in the Ledger that would have that data and in Ledger that would have that data and in. Ledger that would have that data and in any subsequent any subsequent any subsequent. Ledger header just say hey in the in Ledger header just say hey in the in. Ledger header just say hey in the in Ledger number XYZ we've last updated Ledger number XYZ we've last updated. Ledger number XYZ we've last updated these parameters so I mean that's how I think we're. So I mean that's how I think we're describing is how like current upgrades describing is how like current upgrades. Describing is how like current upgrades currently work currently work currently work. like you just you submit the upgrade like you just you submit the upgrade like you just you submit the upgrade. To upgrade specific setting the issue to upgrade specific setting the issue to upgrade specific setting the issue. Here is that the the settings can be here is that the the settings can be here is that the the settings can be. Quite large right so it's not it quite large right so it's not it quite large right so it's not it. Doesn't like you know sending a doesn't like you know sending a doesn't like you know sending a. one kilowatt xdr blob one kilowatt xdr blob one kilowatt xdr blob in the current mechanism wouldn't work. In the current mechanism wouldn't work in the current mechanism wouldn't work it actually wouldn't work at all next in. It actually wouldn't work at all next in it actually wouldn't work at all next in. The with the current xcr because we have the with the current xcr because we have. The with the current xcr because we have a limit of I think 128 bytes per upgrade. A limit of I think 128 bytes per upgrade a limit of I think 128 bytes per upgrade. but which is why we're exploring but which is why we're exploring but which is why we're exploring . Like a more scalable solution like a more scalable solution like a more scalable solution. Ed can I can I ask you a question about Ed can I can I ask you a question about Ed can I can I ask you a question about. the other approaches that that are the other approaches that that are the other approaches that that are. Not approach number one here in not approach number one here in not approach number one here in. Approach number two for example is this approach number two for example is this approach number two for example is this. Is you you sort of you've got you've got is you you sort of you've got you've got. Is you you sort of you've got you've got two things that are in play one of them two things that are in play one of them. Two things that are in play one of them is sort of propagating promulgating the is sort of propagating promulgating the. Is sort of propagating promulgating the the proposed changes the set of options the proposed changes the set of options. The proposed changes the set of options and one of them is is and one of them is is . and one of them is is a consensus vote if a consensus vote if a consensus vote if. People vote on two different config people vote on two different config people vote on two different config. Settings you know what happens in settings you know what happens in settings you know what happens in. Approach to like there's still there's approach to like there's still there's approach to like there's still there's. Still a consensus conflict resolution still a consensus conflict resolution still a consensus conflict resolution. Problem the same as you would have in problem the same as you would have in. Problem the same as you would have in the first one where there's this the first one where there's this. The first one where there's this arbitrary you know take the largest arbitrary you know take the largest. Arbitrary you know take the largest upgrade choice that the consensus layer upgrade choice that the consensus layer. Upgrade choice that the consensus layer is doing in approach two what does a is doing in approach two what does a. Is doing in approach two what does a consensus player do if there's if consensus player do if there's if. Consensus player do if there's if there's two con two conflicting votes there's two con two conflicting votes. There's two con two conflicting votes it would be the same as what it is today. It would be the same as what it is today it would be the same as what it is today. Right like if you if two if there's two right like if you if two if there's two right like if you if two if there's two. Different votes on say the Base reserve different votes on say the Base reserve different votes on say the Base reserve. I don't I don't actually know what I don't I don't actually know what I don't I don't actually know what. Conflict resolution is on the Base conflict resolution is on the Base conflict resolution is on the Base. Reserve right now my point is that it is reserve right now my point is that it is. Reserve right now my point is that it is currently happening in the consensus currently happening in the consensus. Currently happening in the consensus layer and it approach too it sounds like layer and it approach too it sounds like. Layer and it approach too it sounds like you're trying to take it out of the you're trying to take it out of the. You're trying to take it out of the consensus layer so then oh consensus layer so then oh. Consensus layer so then oh I want to say that all the approaches I want to say that all the approaches. I want to say that all the approaches actually are the same in terms of voting actually are the same in terms of voting. Actually are the same in terms of voting like in any case what leaders would vote. Like in any case what leaders would vote like in any case what leaders would vote. On the hash of the upgrade set of the on the hash of the upgrade set of the on the hash of the upgrade set of the. Config upgrade set config upgrade set config upgrade set and the reason for that is that well. and the reason for that is that well and the reason for that is that well we don't want to blow the SCP values as. We don't want to blow the SCP values as we don't want to blow the SCP values as well. Well well because you have plenty of them and because you have plenty of them and. because you have plenty of them and even the update upgrades are rare even the update upgrades are rare. Even the update upgrades are rare event we don't really want to have huge event we don't really want to have huge. Event we don't really want to have huge spines during this forever spines during this forever. Spines during this forever so voting always happens on the hash so voting always happens on the hash. so voting always happens on the hash of the config upgrade set and the of the config upgrade set and the. Of the config upgrade set and the default mechanism for consensus is that default mechanism for consensus is that. Default mechanism for consensus is that if you don't agree this is upgrade if you don't agree this is upgrade . If you don't agree this is upgrade evolved against it and then there is not evolved against it and then there is not. Evolved against it and then there is not an upholds yes yeah but so all of this an upholds yes yeah but so all of this. An upholds yes yeah but so all of this happens very quickly all this happens happens very quickly all this happens. Happens very quickly all this happens very quickly during the voting round and very quickly during the voting round and. Very quickly during the voting round and I'm not concerned with the the I'm not concerned with the the. I'm not concerned with the the like I object to this to this vote like I object to this to this vote. Like I object to this to this vote because that that's not likely to happen because that that's not likely to happen. Because that that's not likely to happen very often unless someone just you know very often unless someone just you know. Very often unless someone just you know doesn't schedule their validator it's doesn't schedule their validator it's. Doesn't schedule their validator it's it's the combining thing if if validator it's the combining thing if if validator. It's the combining thing if if validator a uses you know arms upgrade a uses you know arms upgrade. A uses you know arms upgrade for upgrade set a and and validator B for upgrade set a and and validator B. For upgrade set a and and validator B for B then when someone hears those for B then when someone hears those. For B then when someone hears those two or or nominator here's those two or or nominator here's those. Two or or nominator here's those two or whatever they do a two or whatever they do a. Two or whatever they do a a value combined right they do a SCP a value combined right they do a SCP. A value combined right they do a SCP value combined yeah this is this a not value combined yeah this is this a not. Value combined yeah this is this a not combinable right like that okay you need combinable right like that okay you need. Combinable right like that okay you need a vote and for the contract upgrades is a vote and for the contract upgrades is. A vote and for the contract upgrades is a hash of the whole set of upgrades that a hash of the whole set of upgrades that. A hash of the whole set of upgrades that need to be upgraded atomically like so need to be upgraded atomically like so. Need to be upgraded atomically like so any conflict just fails immediately any any conflict just fails immediately any. Any conflict just fails immediately any conflict just goes immediately as we conflict just goes immediately as we. Conflict just goes immediately as we don't try like in option one I guess don't try like in option one I guess. Don't try like in option one I guess it is possible to do something weird it is possible to do something weird. It is possible to do something weird there or you can you know have some there or you can you know have some. There or you can you know have some fuzzy matching of the upgrades you know fuzzy matching of the upgrades you know. Fuzzy matching of the upgrades you know you say like this operation should take you say like this operation should take. You say like this operation should take thousand units of gas and I say it thousand units of gas and I say it. Thousand units of gas and I say it should take a thousand one unit of gas should take a thousand one unit of gas. Should take a thousand one unit of gas and maybe it doesn't matter in sand but and maybe it doesn't matter in sand but. And maybe it doesn't matter in sand but it kind of introduces too much it kind of introduces too much. It kind of introduces too much unnecessary unnecessary unnecessary surface for potential issues and bugs. Surface for potential issues and bugs surface for potential issues and bugs and sure I'm just saying that looking at. And sure I'm just saying that looking at and sure I'm just saying that looking at. The document that I'm reading right here the document that I'm reading right here. The document that I'm reading right here it says that the cap picks the largest it says that the cap picks the largest. It says that the cap picks the largest upgrades which is arbitrary and requires upgrades which is arbitrary and requires. Upgrades which is arbitrary and requires some sort of conflict resolution it may some sort of conflict resolution it may. Some sort of conflict resolution it may want to only vote for a specific hash so want to only vote for a specific hash so. Want to only vote for a specific hash so that sounds to me like a conflict that sounds to me like a conflict. That sounds to me like a conflict resolution mechanism but I'm just I'm resolution mechanism but I'm just I'm. Resolution mechanism but I'm just I'm just trying to clarify whether that just trying to clarify whether that. Just trying to clarify whether that that's that's real or whether it's yeah that's that's real or whether it's yeah. That's that's real or whether it's yeah maybe that's not one or maybe that's not one or. Maybe that's not one or yeah maybe that's how it is but I think yeah maybe that's how it is but I think. Yeah maybe that's how it is but I think in all approaches idea for voting is in all approaches idea for voting is. In all approaches idea for voting is the same like revolt on the hash of the the same like revolt on the hash of the. The same like revolt on the hash of the whole upgrade set and Valderas have two whole upgrade set and Valderas have two. Whole upgrade set and Valderas have two agree on this hash exactly agree on this hash exactly. Agree on this hash exactly and then the question is normally how we and then the question is normally how we. And then the question is normally how we distribute the premature of this hash instead I do have a question on kind. Instead I do have a question on kind of like the implementation burden like of like the implementation burden like. Of like the implementation burden like what is between the different what is between the different. What is between the different approaches what is you know what's the approaches what is you know what's the. Approaches what is you know what's the what's the low hanging fruit and what's what's the low hanging fruit and what's. What's the low hanging fruit and what's what requires like additional what requires like additional. what requires like additional mechanics I would so I would say approach to. I would so I would say approach to should be the simplest should be the simplest. Should be the simplest correct me if I'm wrong but it correct me if I'm wrong but it. correct me if I'm wrong but it shouldn't be hard to you know add a shouldn't be hard to you know add a. Shouldn't be hard to you know add a function sore bond to you know create function sore bond to you know create. Function sore bond to you know create these entries these entries these entries. And then you know when the like any and then you know when the like any and then you know when the like any. Mechanism to interact with that function mechanism to interact with that function. Mechanism to interact with that function should be simple either a new operation should be simple either a new operation. Should be simple either a new operation or the invo coast function up or I think or the invo coast function up or I think. Or the invo coast function up or I think using smart contract is a little more using smart contract is a little more. Using smart contract is a little more complex because I think there's some complex because I think there's some . Complex because I think there's some some there there are more details some there there are more details. Some there there are more details around that but I don't think like I around that but I don't think like I. Around that but I don't think like I think in my opinion approach to the think in my opinion approach to the. Think in my opinion approach to the simplest approach approach three simplest approach approach three. Simplest approach approach three yeah I think we have to be careful yeah I think we have to be careful. yeah I think we have to be careful and to make sure that it's not spammable and to make sure that it's not spammable. And to make sure that it's not spammable an approach one requires work in the an approach one requires work in the. An approach one requires work in the overlay in the consensus layer overlay in the consensus layer. Overlay in the consensus layer and is the reason approach to is the and is the reason approach to is the. And is the reason approach to is the simplest because it used it reuses the simplest because it used it reuses the. Simplest because it used it reuses the metering mechanics that we have in in metering mechanics that we have in in. Metering mechanics that we have in in Soroban Soroban Soroban yeah that's that's the only reason we're. Yeah that's that's the only reason we're yeah that's that's the only reason we're. Putting it in in Soroban itself so what does that I would say I mean so what does that I would say I mean. Approach one is not hard either in the approach one is not hard either in the approach one is not hard either in the. Series to protect care for that and they series to protect care for that and they. Series to protect care for that and they both approaches I don't think there is both approaches I don't think there is. Both approaches I don't think there is too much work anyways too much work anyways. Too much work anyways this one problem is there for this one problem is there for. this one problem is there for surabana too like we figured it out surabana too like we figured it out. Surabana too like we figured it out discussing this discussing this discussing this. concerns for example concerns for example concerns for example you know by the transactions it install. You know by the transactions it install you know by the transactions it install vasms they can be pretty big too and we. Vasms they can be pretty big too and we vasms they can be pretty big too and we don't want to flood them for free. Don't want to flood them for free don't want to flood them for free basically and . Basically and basically and I guess in this sense I like it's maybe I guess in this sense I like it's maybe. I guess in this sense I like it's maybe not necessarily a very easy problem to not necessarily a very easy problem to. Not necessarily a very easy problem to solve but we need to solve it anyways so solve but we need to solve it anyways so. Solve but we need to solve it anyways so kind of option to just piggybacks on kind of option to just piggybacks on. Kind of option to just piggybacks on this file with options three I guess we this file with options three I guess we. This file with options three I guess we need to change something in classic need to change something in classic. Need to change something in classic mechanisms to make appropriately so mechanisms to make appropriately so. Mechanisms to make appropriately so yeah I kind of from drinks it probably yeah I kind of from drinks it probably. Yeah I kind of from drinks it probably too is the best it's a long time for the too is the best it's a long time for the. Too is the best it's a long time for the week week week and use the amount of work additional. And use the amount of work additional and use the amount of work additional work required yeah. Work required yeah work required yeah could you could you speak to the could you could you speak to the. Could you could you speak to the complexity of the consensus change complexity of the consensus change. Complexity of the consensus change that's described in in verse one it says that's described in in verse one it says. That's described in in verse one it says the consensus changes it would be the consensus changes it would be. The consensus changes it would be complex is that like complex is that like complex is that like. Because it involves the item fetcher because it involves the item fetcher because it involves the item fetcher. Because we would have to have a second because we would have to have a second because we would have to have a second. Like like the way we do DX pitching is like like the way we do DX pitching is like like the way we do DX pitching is. That it yeah I mean it's again I that it yeah I mean it's again I that it yeah I mean it's again I I. Haven't traveled I haven't triven this haven't traveled I haven't triven this haven't traveled I haven't triven this. Point about consensus layer complexity point about consensus layer complexity point about consensus layer complexity. It doesn't it's complex per se just it doesn't it's complex per se just it doesn't it's complex per se just. Literally reuses the TX set logic but literally reuses the TX set logic but literally reuses the TX set logic but. The except logic is arguably not very the except logic is arguably not very the except logic is arguably not very. Simple either yeah simple either yeah simple either yeah replicating replicating replicating. Yeah I mean on one hand it's trivial yeah I mean on one hand it's trivial yeah I mean on one hand it's trivial. That that we copy something that exists that that we copy something that exists that that we copy something that exists. But we are copying something complex so but we are copying something complex so but we are copying something complex so. Maybe it's really better to just use maybe it's really better to just use maybe it's really better to just use. Normal Ledger mechanisms to put this normal Ledger mechanisms to put this normal Ledger mechanisms to put this. Interest into lecture and yeah not interest into lecture and yeah not interest into lecture and yeah not. Bother about I didn't yet another bother about I didn't yet another bother about I didn't yet another. Flooding problem flooding problem flooding problem the one question I have about that is. The one question I have about that is the one question I have about that is that that. That the consensus module has to actually the consensus module has to actually. the consensus module has to actually be able to judge when it has a given be able to judge when it has a given. Be able to judge when it has a given hash right if there's if there's a vote hash right if there's if there's a vote. Hash right if there's if there's a vote for hash X it has to then ask The Ledger for hash X it has to then ask The Ledger. For hash X it has to then ask The Ledger hey the hash X actually exist hey the hash X actually exist. Hey the hash X actually exist because I'm not going to vote on a because I'm not going to vote on a. Because I'm not going to vote on a config setting that I don't have config setting that I don't have. Config setting that I don't have right like in The Ledger right so this right like in The Ledger right so this. Right like in The Ledger right so this is this is just moving it from moving is this is just moving it from moving. Is this is just moving it from moving that question from item fetcher over to that question from item fetcher over to. That question from item fetcher over to a ledger inquiry and that's a a ledger inquiry and that's a. A ledger inquiry and that's a synchronous Ledger inquiry in the middle synchronous Ledger inquiry in the middle. Synchronous Ledger inquiry in the middle of consensus right of consensus right of consensus right. Yes okay yes okay yes okay I have no idea if this is a big problem I have no idea if this is a big problem. I have no idea if this is a big problem or not hopefully are we okay with that I or not hopefully are we okay with that I. Or not hopefully are we okay with that I mean that's kind of the risk of my mind mean that's kind of the risk of my mind. Mean that's kind of the risk of my mind but maybe the maybe that's okay I but maybe the maybe that's okay I. But maybe the maybe that's okay I think that's probably less pain think that's probably less pain. Think that's probably less pain yeah yeah yeah yeah the thing that is kind of yeah the thing that is kind of . Yeah the thing that is kind of annoying I mentioned that in the in the annoying I mentioned that in the in the. Annoying I mentioned that in the in the dock with the dock with the dock with the . Approach that relies on on consensus is approach that relies on on consensus is approach that relies on on consensus is. That that that we would have to to to secure the we would have to to to secure the . We would have to to to secure the upgrades in some way right now upgrades in some way right now . Upgrades in some way right now upgrades because they are small we don't upgrades because they are small we don't. Upgrades because they are small we don't actually actually actually they are not actually signed so you. They are not actually signed so you they are not actually signed so you know values in SCP they are actually. Know values in SCP they are actually know values in SCP they are actually signed so that you you if some valid. Signed so that you you if some valid signed so that you you if some valid data all goes Rogue you can basically. Data all goes Rogue you can basically data all goes Rogue you can basically blame you know who introduced that . Blame you know who introduced that blame you know who introduced that . The value that is kind of spamming the the value that is kind of spamming the the value that is kind of spamming the. validators validators validators so you can basically decide okay I'm. so you can basically decide okay I'm so you can basically decide okay I'm going to remove this validator from my. Going to remove this validator from my going to remove this validator from my Quorum set that's kind of the idea. Quorum set that's kind of the idea Quorum set that's kind of the idea with the signature. With the signature with the signature upgrades are not part of this because upgrades are not part of this because. Upgrades are not part of this because it's today they are small so if we. It's today they are small so if we it's today they are small so if we. Start to make to have to and the the start to make to have to and the the start to make to have to and the the. Reason for upgrades not being included reason for upgrades not being included reason for upgrades not being included. In the sign payload is the in the sign payload is the in the sign payload is the there's an option for validator to. there's an option for validator to there's an option for validator to remove the upgrade from the value if. Remove the upgrade from the value if remove the upgrade from the value if they don't agree with it so for you know. They don't agree with it so for you know they don't agree with it so for you know. So that basically you can still close so that basically you can still close so that basically you can still close. Ledgers ledgers ledgers you know with transactions even if you know with transactions even if. you know with transactions even if there is no consensus on the on the there is no consensus on the on the. There is no consensus on the on the actual upgrades actual upgrades actual upgrades. which yeah I mean we didn't have which yeah I mean we didn't have which yeah I mean we didn't have. you know so much of those problems you know so much of those problems you know so much of those problems. You know until now there's like you you know until now there's like you you know until now there's like you. Know broad agreement on on like for know broad agreement on on like for know broad agreement on on like for. Example if you want to upgrade the example if you want to upgrade the example if you want to upgrade the. Network right to a specific protocol network right to a specific protocol network right to a specific protocol. Version there was no contention I think version there was no contention I think version there was no contention I think. We'll have potentially more contention we'll have potentially more contention we'll have potentially more contention. In the future as we think of network in the future as we think of network in the future as we think of network. Parameters that maybe are impacting parameters that maybe are impacting parameters that maybe are impacting. Certain contracts right like as every certain contracts right like as every certain contracts right like as every. Time we change like fees I mean like time we change like fees I mean like time we change like fees I mean like. The yeah metering schedule right like the yeah metering schedule right like the yeah metering schedule right like. We're going to cause maybe certain we're going to cause maybe certain we're going to cause maybe certain. Contracts to become more expensive contracts to become more expensive contracts to become more expensive. Therefore there is maybe a higher chance therefore there is maybe a higher chance. Therefore there is maybe a higher chance of disagreement between between very of disagreement between between very. Of disagreement between between very data so I think this the the chance data so I think this the the chance. Data so I think this the the chance of conflict is higher in you know of conflict is higher in you know. Of conflict is higher in you know post-organ post-organ post-organ and and that's why yeah I think. and and that's why yeah I think and and that's why yeah I think we may have yeah multiplications. We may have yeah multiplications we may have yeah multiplications where somebody there are going to say. Where somebody there are going to say where somebody there are going to say Hey you know I'm I don't agree with this. Hey you know I'm I don't agree with this Hey you know I'm I don't agree with this. Thing so I'm going to drop that upgrade thing so I'm going to drop that upgrade thing so I'm going to drop that upgrade. And and and and then until the conflict is resolved and then until the conflict is resolved. And then until the conflict is resolved you don't want to be in a situation you don't want to be in a situation. You don't want to be in a situation where the network is not agreeing on where the network is not agreeing on. Where the network is not agreeing on basically anything right basically anything right. Basically anything right anyway so so that's kind of why you can anyway so so that's kind of why you can. Anyway so so that's kind of why you can drop those those upgrades and drop those those upgrades and. Drop those those upgrades and and right now they are not signed so we. And right now they are not signed so we and right now they are not signed so we would have to either make them signed . Would have to either make them signed would have to either make them signed . If we want to make them bigger if we want to make them bigger if we want to make them bigger. or just not you know keep them small or just not you know keep them small or just not you know keep them small. And you know that's kind of the option and you know that's kind of the option and you know that's kind of the option. Too so I do have a question that relates to so I do have a question that relates to. The the the the user experience of of changing the user experience of of changing. The user experience of of changing the configuration right now you know the configuration right now you know. The configuration right now you know validators you know just have like validators you know just have like. Validators you know just have like Stellar core Commands to control this is Stellar core Commands to control this is. Stellar core Commands to control this is the idea to maintain the same experience. The idea to maintain the same experience the idea to maintain the same experience. Across all of these different approaches across all of these different approaches. Across all of these different approaches or do different approaches mandate or do different approaches mandate. Or do different approaches mandate different user experience I think I can answer that I mean it's. I think I can answer that I mean it's easier to arm an upgrade for a hash like easier to arm an upgrade for a hash like. Easier to arm an upgrade for a hash like it doesn't require any changes because it doesn't require any changes because. It doesn't require any changes because hash is a small like if you needed to hash is a small like if you needed to. hash is a small like if you needed to distribute the whole upgrade set as in distribute the whole upgrade set as in. Distribute the whole upgrade set as in option one and that's durable but it's option one and that's durable but it's. Option one and that's durable but it's annoying like it's annoying to do this annoying like it's annoying to do this. Annoying like it's annoying to do this as a or command you need to maybe extend as a or command you need to maybe extend. As a or command you need to maybe extend the command interface to take a file the command interface to take a file. The command interface to take a file instead of you know just to get request instead of you know just to get request. Instead of you know just to get request or something like this so approaches or something like this so approaches. Or something like this so approaches like two and following a SIM for like two and following a SIM for. Like two and following a SIM for instance because it doesn't require any instance because it doesn't require any. Instance because it doesn't require any exchanges like we say Hey you like you exchanges like we say Hey you like you. Exchanges like we say Hey you like you want to upgrade to this set of configs want to upgrade to this set of configs. Want to upgrade to this set of configs with hash X here is a link to the with hash X here is a link to the. With hash X here is a link to the lectures that actually contains this lectures that actually contains this. Lectures that actually contains this entry so I think the distribution is entry so I think the distribution is. Entry so I think the distribution is kind of linear in this it's easier to kind of linear in this it's easier to. Kind of linear in this it's easier to arm these upgrades arm these upgrades arm these upgrades. But it introduces the transactions that but it introduces the transactions that but it introduces the transactions that. Needs to be submitted needs to be submitted needs to be submitted yes someone needs to submit a. Yes someone needs to submit a yes someone needs to submit a transaction this is true. Transaction this is true transaction this is true yeah so the US does change so in all. Yeah so the US does change so in all yeah so the US does change so in all approaches right because in the approach. Approaches right because in the approach approaches right because in the approach. Two and three you need to you know two and three you need to you know two and three you need to you know. Submit this operation but in approach submit this operation but in approach. Submit this operation but in approach one the the initial set of upgrades one the the initial set of upgrades. One the the initial set of upgrades needs to be distributed as well right needs to be distributed as well right. Needs to be distributed as well right I guess that would be maybe another I guess that would be maybe another. I guess that would be maybe another solid core command that the validator solid core command that the validator. Solid core command that the validator would would would would would would . Would submit and then that that's how would submit and then that that's how would submit and then that that's how. That would be flooded right but to be that would be flooded right but to be that would be flooded right but to be. Honest I do feel like approach one is honest I do feel like approach one is honest I do feel like approach one is. An extension of the current experience an extension of the current experience an extension of the current experience. We have which is you know the validators we have which is you know the validators. We have which is you know the validators will coordinate the validators always will coordinate the validators always. Will coordinate the validators always need to coordinate regardless outside of need to coordinate regardless outside of. Need to coordinate regardless outside of the network right so you know they the network right so you know they. The network right so you know they coordinate on a Channel right now you coordinate on a Channel right now you. Coordinate on a Channel right now you know Justin tells people hey if you want. Know Justin tells people hey if you want know Justin tells people hey if you want. to upgrade or to change this value to upgrade or to change this value to upgrade or to change this value. You this is the command you use right so you this is the command you use right so. You this is the command you use right so maybe the the maybe the the maybe the the. Mechanics are going to be a bit mechanics are going to be a bit mechanics are going to be a bit. Different we're going to say hey this is different we're going to say hey this is. Different we're going to say hey this is you know an xdr take a look at it at a you know an xdr take a look at it at a. You know an xdr take a look at it at a Stellar lab or SDC or whatever and this Stellar lab or SDC or whatever and this. Stellar lab or SDC or whatever and this is the hash vote on it is the hash vote on it. Is the hash vote on it so it's still like you you don't so it's still like you you don't. so it's still like you you don't introduce like another introduce like another. Introduce like another step of step of step of of you know submitting transactions to. Of you know submitting transactions to of you know submitting transactions to the network. Well only one person needs to submit the well only one person needs to submit the. Transaction it's not like value there transaction it's not like value there transaction it's not like value there. Was once you know the thing is populated was once you know the thing is populated. Was once you know the thing is populated you know it's basically like today you know it's basically like today. You know it's basically like today yeah basically whoever initiates the yeah basically whoever initiates the. Yeah basically whoever initiates the upgrade should send the transaction upgrade should send the transaction. Upgrade should send the transaction which I don't think is a huge View which I don't think is a huge View. Which I don't think is a huge View because it's a big thing they need to because it's a big thing they need to. Because it's a big thing they need to propagate any weightages propagate any weightages. Propagate any weightages foreign got it okay that makes sense yeah by the got it okay that makes sense yeah by the. Way this closes a kind of a a potential way this closes a kind of a a potential way this closes a kind of a a potential. You know you know you know communication problem that we have today communication problem that we have today. Communication problem that we have today right like today right like today right like today. When we for example when you know we when we for example when you know we when we for example when you know we. As SDF say Hey you know we are proposing as SDF say Hey you know we are proposing. As SDF say Hey you know we are proposing to upgrade the network to you know to upgrade the network to you know. To upgrade the network to you know version 19 right like we did last year version 19 right like we did last year. Version 19 right like we did last year people look at that message is like . People look at that message is like people look at that message is like it it and it's not signed we don't. It it and it's not signed we don't it it and it's not signed we don't publish that with you know digital. Publish that with you know digital publish that with you know digital signatures or anything so in theory you. Signatures or anything so in theory you signatures or anything so in theory you could imagine somebody faking you know. Could imagine somebody faking you know could imagine somebody faking you know us and then getting people to vote. us and then getting people to vote us and then getting people to vote. For something else I think the chance of for something else I think the chance of. For something else I think the chance of that again increases as you increase the. That again increases as you increase the that again increases as you increase the. Complexity of those things that people complexity of those things that people complexity of those things that people. Are voting on are voting on are voting on and the benefit of the and the benefit of the. and the benefit of the of the having the The Entity that is of the having the The Entity that is. Of the having the The Entity that is kind of championing for a specific kind of championing for a specific . Kind of championing for a specific change is that because this is actually change is that because this is actually. Change is that because this is actually an actual transaction on the network an actual transaction on the network. An actual transaction on the network it's it's also signed by The Entity it's it's also signed by The Entity. It's it's also signed by The Entity so that's kind of you know one of the so that's kind of you know one of the. So that's kind of you know one of the extra extra extra pre-free benefit from option two and. Pre-free benefit from option two and pre-free benefit from option two and three three. Three so essentially a configuration change so essentially a configuration change. So essentially a configuration change proposals become on-chain activity proposals become on-chain activity. Proposals become on-chain activity yeah and actually so that's something yeah and actually so that's something. Yeah and actually so that's something I wanted to kind of maybe because we I wanted to kind of maybe because we. I wanted to kind of maybe because we didn't talk about that too much like didn't talk about that too much like . Didn't talk about that too much like in in the doc we only kind of mention it in in the doc we only kind of mention it. In in the doc we only kind of mention it that option two like one of the things I. That option two like one of the things I that option two like one of the things I. I think I think I think that this opens the possibility for that this opens the possibility for. that this opens the possibility for in the future to have a in the future to have a. In the future to have a like a point the validators to to like like a point the validators to to like. Like a point the validators to to like Ledger entries that are controlled by Ledger entries that are controlled by. Ledger entries that are controlled by those those those so that you can so that you can. so that you can form many validators there's well there form many validators there's well there. Form many validators there's well there is a concept that we discussed before is a concept that we discussed before. Is a concept that we discussed before right that is actually in a paper that right that is actually in a paper that. Right that is actually in a paper that that was published a few years ago that was published a few years ago. that was published a few years ago about the notion of governing and about the notion of governing and. About the notion of governing and non-governing validators non-governing validators. Non-governing validators and I think this and I think this and I think this . For certain things this will this may for certain things this will this may for certain things this will this may. Actually become actually become actually become like like like more interesting you know in the. More interesting you know in the more interesting you know in the context of yeah Dell's that are. Context of yeah Dell's that are context of yeah Dell's that are not the tier one validators. Not the tier one validators not the tier one validators that are kind of managing certain. That are kind of managing certain that are kind of managing certain aspects certain parameters that you. Aspects certain parameters that you aspects certain parameters that you know of the network. Know of the network know of the network and then the the the the validators and then the the the the validators. and then the the the the validators that are interested in actively that are interested in actively. That are interested in actively participating this of course you know participating this of course you know. Participating this of course you know they get to they would not just blindly they get to they would not just blindly. They get to they would not just blindly vote for those things but otherwise vote for those things but otherwise. vote for those things but otherwise otherwise other validators just might otherwise other validators just might. otherwise other validators just might do that right for for those do that right for for those. Do that right for for those like maybe not as like maybe not as like maybe not as. As coupled to to to to network as coupled to to to to network as coupled to to to to network . Operators right or maybe even need like operators right or maybe even need like operators right or maybe even need like. additional voting or something right additional voting or something right additional voting or something right. And you want that to to happen on chain and you want that to to happen on chain and you want that to to happen on chain. Because you want more transparency or because you want more transparency or because you want more transparency or. Something right something right something right got it so yeah it does sound like. Got it so yeah it does sound like got it so yeah it does sound like there's some added benefits to. There's some added benefits to there's some added benefits to approach too and it seems like from an. Approach too and it seems like from an approach too and it seems like from an implementation perspective it's it's. Implementation perspective it's it's implementation perspective it's it's it's fairly simple do we have any. It's fairly simple do we have any it's fairly simple do we have any concern about. Concern about concern about you know it's not it's not immediately you know it's not it's not immediately. You know it's not it's not immediately obvious that Stellar configuration obvious that Stellar configuration. Obvious that Stellar configuration changes should be proposed on Soroban changes should be proposed on Soroban . Changes should be proposed on Soroban it feels a bit like we're using just it feels a bit like we're using just. It feels a bit like we're using just Soroban because it's it's there Soroban because it's it's there. Sorbon because it's it's there and you know I don't I don't find it and you know I don't I don't find it. and you know I don't I don't find it offensive but but like can there be offensive but but like can there be. Offensive but but like can there be you know issues from it and things like you know issues from it and things like. You know issues from it and things like we want to do like in pure Stellar and we want to do like in pure Stellar and. We want to do like in pure Stellar and and now we're introducing them to the and now we're introducing them to the. and now we're introducing them to the storybond I think this kind of ties into like. I think this kind of ties into like subtopic I wanted to talk about is subtopic I wanted to talk about is. Subtopic I wanted to talk about is whether or not to be as separating sort whether or not to be as separating sort. Whether or not to be as separating sort of an operations of an operations of an operations. into like different operations in the into like different operations in the. into like different operations in the transaction because currently you have transaction because currently you have. Transaction because currently you have just one golden vocalist function that just one golden vocalist function that. Just one golden vocalist function that does a bunch of stuff and this changes does a bunch of stuff and this changes. Does a bunch of stuff and this changes it would do even more stuff it would do even more stuff. It would do even more stuff so I'd say using suraban is just an so I'd say using suraban is just an. so I'd say using suraban is just an implementation detail here implementation detail here. Implementation detail here and nothing prevents wake up an option and nothing prevents wake up an option. And nothing prevents wake up an option two from being a separate operation two from being a separate operation. Two from being a separate operation and also we may want to do this to all and also we may want to do this to all. And also we may want to do this to all the operations anyway just to you know the operations anyway just to you know. The operations anyway just to you know have a single flat hierarchy of things have a single flat hierarchy of things. Have a single flat hierarchy of things you can do to discover you can do to discover. You can do to discover which basically would make it pretty which basically would make it pretty. which basically would make it pretty opaque in terms of like how exactly opaque in terms of like how exactly. Opaque in terms of like how exactly transactions have been executed transactions have been executed. Transactions have been executed I think improves the the X sound would I think improves the the X sound would. I think improves the the X sound would so I can so the derived question here is whether. So the derived question here is whether we want to split the invoke host we want to split the invoke host. We want to split the invoke host operation into like multiple types of operation into like multiple types of. Operation into like multiple types of cerebon invoking operations yeah right cerebon invoking operations yeah right. Cerebon invoking operations yeah right like in this particular case like I feel like in this particular case like I feel. Like in this particular case like I feel like it's a race a strong case for like it's a race a strong case for. Like it's a race a strong case for making it a separate operation it was making it a separate operation it was. Making it a separate operation it was very explicitly namely containing very explicitly namely containing. Very explicitly namely containing internal assumptions that you know internal assumptions that you know. Internal assumptions that you know people don't randomly submitted and people don't randomly submitted and . People don't randomly submitted and for all the existing operations there for all the existing operations there. For all the existing operations there is the same consideration I know people is the same consideration I know people. Is the same consideration I know people have any opinions on this would be accessible from from the story. Would be accessible from from the story about environment in addition to being about environment in addition to being. About environment in addition to being accessible through the this dedicated accessible through the this dedicated. Accessible through the this dedicated operation operation operation no I mean the same about the current. No I mean the same about the current no I mean the same about the current invoke host function transaction. Invoke host function transaction invoke host function transaction operations that annoys me and which is. Operations that annoys me and which is operations that annoys me and which is why I'm proposing this is that we are. Why I'm proposing this is that we are why I'm proposing this is that we are not actually invoking a host function in. Not actually invoking a host function in not actually invoking a host function in. The same way you can invoke it on yeah the same way you can invoke it on yeah the same way you can invoke it on yeah. From from the contract like they are from from the contract like they are from from the contract like they are. Divergent they like the cost functions Divergent they like the cost functions Divergent they like the cost functions. That we invoke from Stellar core are not that we invoke from Stellar core are not. That we invoke from Stellar core are not the same course functions that are more the same course functions that are more. The same course functions that are more invoked from contracts so the name invoked from contracts so the name. Invoked from contracts so the name doesn't make too much sense I mean even doesn't make too much sense I mean even. Doesn't make too much sense I mean even though initial intent kind of made sense though initial intent kind of made sense. Though initial intent kind of made sense but is there any implementation and but is there any implementation and. But is there any implementation and requirements ended up they're not quite requirements ended up they're not quite. Requirements ended up they're not quite consistent and consistent and consistent and. The the the convinced we should keep it this is in convinced we should keep it this is in. Convinced we should keep it this is in this cost functional this cost functional this cost functional. You know we could just be a bit more you know we could just be a bit more you know we could just be a bit more. Explicit and just say the operations and explicit and just say the operations and. Explicit and just say the operations and the adapter lessons you are doing the adapter lessons you are doing. The adapter lessons you are doing without involved in the Waterhouse at without involved in the Waterhouse at. Without involved in the Waterhouse at all all all yeah my opinion yeah my opinion. Yeah my opinion yeah I think I think the original the yeah I think I think the original the. Yeah I think I think the original the original intent was to make calls original intent was to make calls. Original intent was to make calls uniform and I think we may be paying a. Uniform and I think we may be paying a uniform and I think we may be paying a fairly high price to try to make. Fairly high price to try to make fairly high price to try to make two entry paths to call look the same. Two entry paths to call look the same two entry paths to call look the same you know we're sort of orienting. You know we're sort of orienting you know we're sort of orienting everything in order to make that one. Everything in order to make that one everything in order to make that one that one path prior to use code. Well I think maybe like the this is more well I think maybe like the this is more. Related to I saw there was like related to I saw there was like related to I saw there was like . If we have a dedicated host function for if we have a dedicated host function for. If we have a dedicated host function for all this stuff I agree maybe we need to all this stuff I agree maybe we need to. All this stuff I agree maybe we need to maybe we need to think about this but maybe we need to think about this but. Maybe we need to think about this but like I I'm not actually convinced that like I I'm not actually convinced that. Like I I'm not actually convinced that this is the necessary to have anything this is the necessary to have anything. This is the necessary to have anything first class for for those Network first class for for those Network. First class for for those Network upgrades inside suraban like I think we upgrades inside suraban like I think we. Upgrades inside suraban like I think we should be able to point to basically should be able to point to basically. Should be able to point to basically any saruban State should be any saruban State should be. Any saruban State should be considered valid for like as long as considered valid for like as long as. Considered valid for like as long as we can you know like I was saying in the we can you know like I was saying in the. We can you know like I was saying in the dock like it's basically a byte you dock like it's basically a byte you. Dock like it's basically a byte you know a byte array know a byte array know a byte array. That we happen to be able to decode that we happen to be able to decode that we happen to be able to decode. you know using because it's some xdr you know using because it's some xdr you know using because it's some xdr. Right that we can understand that the right that we can understand that the right that we can understand that the. Network level but that in from a Solomon network level but that in from a Solomon. Network level but that in from a Solomon point of view I think it's just a byte point of view I think it's just a byte. Point of view I think it's just a byte array array array and if we do it like that there's. And if we do it like that there's and if we do it like that there's nothing special about. Nothing special about nothing special about like any of that stuff okay this is an. Like any of that stuff okay this is an like any of that stuff okay this is an important point that I didn't understand. Important point that I didn't understand important point that I didn't understand. So from the approach number to your so from the approach number to your so from the approach number to your. Perspective we're not actually perspective we're not actually perspective we're not actually. Introducing changes to Soroban in order introducing changes to Soroban in order introducing changes to Soroban in order. To facilitate this so what is in the to facilitate this so what is in the to facilitate this so what is in the. Dock right now it talks about having dock right now it talks about having dock right now it talks about having. Special Ledger entries that are like you know so you need like you know so you need like. You know so you need like a host function to basically a host function to basically. a host function to basically manage to the special entries but I'm manage to the special entries but I'm. Manage to the special entries but I'm not at you know when we originally not at you know when we originally. Not at you know when we originally discussed that I didn't think we would discussed that I didn't think we would. Discussed that I didn't think we would actually have dedicated legendaries actually have dedicated legendaries. Actually have dedicated legendaries for the for as input to for the for as input to. For the for as input to to to the upgrade I thought that at the end yes you. I thought that at the end yes you know when the when upgrades are actually know when the when upgrades are actually. Know when the when upgrades are actually when those network settings are actually. When those network settings are actually when those network settings are actually. Active yes there are special entries on active yes there are special entries on active yes there are special entries on. Ledger but in terms of like how do we Ledger but in terms of like how do we Ledger but in terms of like how do we. How do you get did they get fed into the how do you get did they get fed into the. How do you get did they get fed into the upgrade function upgrade function. upgrade function that I don't think we I don't think that I don't think we I don't think. that I don't think we I don't think we need to have a dedicated dedicated we need to have a dedicated dedicated. We need to have a dedicated dedicated Ledger entries you know with that Ledger entries you know with that. Ledger entries you know with that specific format as input would that be specific format as input would that be. Specific format as input would that be at that point in the dark was more to at that point in the dark was more to . At that point in the dark was more to specify that it's not a config setting specify that it's not a config setting. Specify that it's not a config setting entry entry entry I guess it wasn't you know it wasn't. I guess it wasn't you know it wasn't I guess it wasn't you know it wasn't clear what it actually is because I. Clear what it actually is because I clear what it actually is because I wasn't expected out but what Nico's. Wasn't expected out but what Nico's wasn't expected out but what Nico's saying is probably the best way to do. Saying is probably the best way to do saying is probably the best way to do. This where we specify that you know for this where we specify that you know for this where we specify that you know for. An upgrade it'd be a byte array of a an upgrade it'd be a byte array of a an upgrade it'd be a byte array of a. Config setting entry or a byte array of config setting entry or a byte array of config setting entry or a byte array of. A vector of config segment entries right I'm not sure I'm good at the point I'm not sure I'm good at the point. Because they don't have an entry like because they don't have an entry like because they don't have an entry like. Sent to me it would just be I think with sent to me it would just be I think with. Sent to me it would just be I think with Nico's things it'd just be a contract Nico's things it'd just be a contract. Nico's things it'd just be a contract data entry it's not a contract we don't data entry it's not a contract we don't. Data entry it's not a contract we don't have a contract so it cannot be contract have a contract so it cannot be contract. Have a contract so it cannot be contract data data data you know you can no like is anybody like. You know you can no like is anybody like you know you can no like is anybody like. You know as part of this right like you you know as part of this right like you you know as part of this right like you. Can imagine that's why I think like as can imagine that's why I think like as can imagine that's why I think like as. If you if you think of if you if you think of if you if you think of in the future you want to have some. In the future you want to have some in the future you want to have some doubts doing that like it's just a. Doubts doing that like it's just a doubts doing that like it's just a special case like like if I want to. Special case like like if I want to special case like like if I want to in the first iteration of this the way. In the first iteration of this the way in the first iteration of this the way you would do it is you have a dummy. You would do it is you have a dummy you would do it is you have a dummy contract you know that has like . Contract you know that has like contract you know that has like State you know associated with it. State you know associated with it State you know associated with it that is just a single. That is just a single that is just a single you know that has a single value in. you know that has a single value in you know that has a single value in it and that allows you to to basically. It and that allows you to to basically it and that allows you to to basically you know as a user I can persist I can. You know as a user I can persist I can you know as a user I can persist I can yes like kind of like a balance right . Yes like kind of like a balance right yes like kind of like a balance right . For for for you know for token contract but you know for token contract but. you know for token contract but instead of a balance it's basically a instead of a balance it's basically a. Instead of a balance it's basically a binary blob binary blob binary blob and then in the upgrade that's how. And then in the upgrade that's how and then in the upgrade that's how you get it on The Ledger all right and. You get it on The Ledger all right and you get it on The Ledger all right and then the upgrade just points to that. Then the upgrade just points to that then the upgrade just points to that specific Ledger entry that contains. Specific Ledger entry that contains specific Ledger entry that contains the binary problem of Interest. So what do you guys suggesting we would so what do you guys suggesting we would have a contract specific cost function. Have a contract specific cost function have a contract specific cost function no there's nothing specific to this. No there's nothing specific to this no there's nothing specific to this it's it's just like yeah to in order. It's it's just like yeah to in order it's it's just like yeah to in order to construct how how would we vote and. To construct how how would we vote and to construct how how would we vote and wait like it has to be special right. Wait like it has to be special right wait like it has to be special right like a similar proposal and option for. Like a similar proposal and option for like a similar proposal and option for opposite. Opposite opposite there needs to be a way like since we there needs to be a way like since we. there needs to be a way like since we are voting on a hash or something you are voting on a hash or something you. Are voting on a hash or something you need a straightforward way of finding need a straightforward way of finding. Need a straightforward way of finding this hash in The Ledger yeah that's why this hash in The Ledger yeah that's why. This hash in The Ledger yeah that's why you you can you can point to any you you can you can point to any. You you can you can point to any arbitrary contract arbitrary contract arbitrary contract . Data right you're using the Ledger key a hash a hash yeah you bought an electric key. Yeah you bought an electric key yeah you bought an electric key you would vote on a pair Ledger key hash. You would vote on a pair Ledger key hash you would vote on a pair Ledger key hash. Probably right like maybe you can make probably right like maybe you can make probably right like maybe you can make. It work with just a ledger key but like it work with just a ledger key but like it work with just a ledger key but like. That I you know for now I think it's that I you know for now I think it's that I you know for now I think it's. Still a joke right right right right maybe we need to yeah we need we need to maybe we need to yeah we need we need to. Maybe we need to yeah we need we need to maybe like sketch that a little bit so maybe like sketch that a little bit so. Maybe like sketch that a little bit so that I can so basically you would vote that I can so basically you would vote. That I can so basically you would vote on say I mean that's quite inefficient on say I mean that's quite inefficient. On say I mean that's quite inefficient right right right I guess the best you can do is contract. I guess the best you can do is contract I guess the best you can do is contract 80 plus some data ID and accurate format. 80 plus some data ID and accurate format 80 plus some data ID and accurate format. Actually I do but so I think I actually I do but so I think I actually I do but so I think I. Think this has been super informative it think this has been super informative it. Think this has been super informative it sounds like there's a very strong sounds like there's a very strong. Sounds like there's a very strong bias towards approach number two here bias towards approach number two here. Bias towards approach number two here and there are some details that we and there are some details that we. and there are some details that we need to figure out like whether this is need to figure out like whether this is. Need to figure out like whether this is actually something that's special cased actually something that's special cased. Actually something that's special cased in Soroban or it's just a a general in Soroban or it's just a a general. In Soroban or it's just a a general ledger entry and then the validators ledger entry and then the validators. Ledger entry and then the validators is part of the upgrade process just is part of the upgrade process just. Is part of the upgrade process just pointing at this Ledger team so pointing at this Ledger team so . Pointing at this Ledger team so let's I think we can take this let's I think we can take this. Let's I think we can take this conversation offline about the details conversation offline about the details. Conversation offline about the details and and if needed we can we can bring and and if needed we can we can bring. And and if needed we can we can bring these up in one of the next meetings these up in one of the next meetings. These up in one of the next meetings we have around 20 minutes left we have around 20 minutes left. we have around 20 minutes left and so before we go on that Siddharth and so before we go on that Siddharth. And so before we go on that Siddharth do you think we have enough to do you think we have enough to. Do you think we have enough to to keep prototyping here to keep prototyping here. to keep prototyping here yeah we should be good yeah we should be good yeah we should be good. Okay okay okay so we don't have a lot of time we so we don't have a lot of time we. so we don't have a lot of time we have 20 minutes have 20 minutes have 20 minutes. and Garand is here today to start and Garand is here today to start and Garand is here today to start. Talking about State expiration which is talking about State expiration which is talking about State expiration which is. A very big hairy topic so garen's a very big hairy topic so garen's a very big hairy topic so garen's. Gonna give a very brief overview about gonna give a very brief overview about gonna give a very brief overview about. This today if we have time we're going this today if we have time we're going this today if we have time we're going. To do q a I imagine that we're going to to do q a I imagine that we're going to to do q a I imagine that we're going to. Be talking about these about this be talking about these about this be talking about these about this. Specific issue a few more times so no specific issue a few more times so no specific issue a few more times so no. Big decisions will be made today big decisions will be made today big decisions will be made today. during the stages during the stages during the stages yeah so I guess we want the time in. Yeah so I guess we want the time in yeah so I guess we want the time in time so I just wanted to kind of start. Time so I just wanted to kind of start time so I just wanted to kind of start out with the general motivation and then. Out with the general motivation and then out with the general motivation and then. Talk about more about the interface and talk about more about the interface and talk about more about the interface and. Then we'll leave the implementation then we'll leave the implementation then we'll leave the implementation. Details to probably future conversations details to probably future conversations. Details to probably future conversations so essentially the issue we're trying to. So essentially the issue we're trying to so essentially the issue we're trying to. Solve with archival state is this issue solve with archival state is this issue solve with archival state is this issue. Of unbounded Ledger State size at least of unbounded Ledger State size at least of unbounded Ledger State size at least. Right now it's not a classic the number right now it's not a classic the number right now it's not a classic the number. Of Ledger entries we have to store is of Ledger entries we have to store is of Ledger entries we have to store is. Growing and there's not a strong growing and there's not a strong growing and there's not a strong. Incentive for users to delete entries incentive for users to delete entries incentive for users to delete entries. Additionally a large amount of those additionally a large amount of those additionally a large amount of those. Entries that exist on The Ledger are entries that exist on The Ledger are entries that exist on The Ledger are. Either outdated or just won't ever be either outdated or just won't ever be either outdated or just won't ever be. Used again for instance we have a lot of used again for instance we have a lot of. Used again for instance we have a lot of climbable balances that are more climbable balances that are more. Climbable balances that are more spam-like entries that aren't used very spam-like entries that aren't used very. Spam-like entries that aren't used very often or won't be used at all they're often or won't be used at all they're. Often or won't be used at all they're taking up this Ledger space and taking up this Ledger space and. Taking up this Ledger space and increasing larger bloat and so for the increasing larger bloat and so for the. Increasing larger bloat and so for the healthy skill patterns of the network we healthy skill patterns of the network we. Healthy skill patterns of the network we want to be able to essentially cap want to be able to essentially cap. Want to be able to essentially cap Ledger State size and not allow for this Ledger State size and not allow for this. Ledger State size and not allow for this arbitrary growth and to do that we want arbitrary growth and to do that we want. Arbitrary growth and to do that we want to essentially delete entries that to essentially delete entries that. To essentially delete entries that aren't being used but somehow not delete aren't being used but somehow not delete. Aren't being used but somehow not delete and keep the entries that are being used. And keep the entries that are being used and keep the entries that are being used. Often and so in order to do that what we often and so in order to do that what we. Often and so in order to do that what we do is we want to implement this concept do is we want to implement this concept. Do is we want to implement this concept of rent so essentially for all Soroban of rent so essentially for all Soroban. Of rent so essentially for all Soroban smart contract data entries the data smart contract data entries the data. Smart contract data entries the data entry will have a rent balance which is entry will have a rent balance which is. Entry will have a rent balance which is some amount of xlm that is reserved for some amount of xlm that is reserved for. Some amount of xlm that is reserved for that entry to pay a rent fee and then as that entry to pay a rent fee and then as. That entry to pay a rent fee and then as that entry lives on The Ledger it will that entry lives on The Ledger it will. That entry lives on The Ledger it will have a rent fee deducted from that rent have a rent fee deducted from that rent. Have a rent fee deducted from that rent balance and then whenever that entries balance and then whenever that entries. Balance and then whenever that entries rent balance goes to zero the entry is rent balance goes to zero the entry is. Rent balance goes to zero the entry is deleted from The Ledger answers if it deleted from The Ledger answers if it. Deleted from The Ledger answers if it never existed before never existed before never existed before. Now this is obviously it opens up now this is obviously it opens up now this is obviously it opens up. Some issues right so imagine you have a some issues right so imagine you have a some issues right so imagine you have a. Wallet or a balance that stores a lot of wallet or a balance that stores a lot of. Wallet or a balance that stores a lot of tokens that are valuable you wouldn't tokens that are valuable you wouldn't. Tokens that are valuable you wouldn't want this entry to be permanently want this entry to be permanently. Want this entry to be permanently deleted and lost just because you forgot deleted and lost just because you forgot. Deleted and lost just because you forgot to pay rent and forgot to up to rent to pay rent and forgot to up to rent. To pay rent and forgot to up to rent balance and so instead of even though balance and so instead of even though. Balance and so instead of even though the entry is permanently deleted from the entry is permanently deleted from. The entry is permanently deleted from The Bucket List what we do is we take The Bucket List what we do is we take. The Bucket List what we do is we take that entry and we send it to a special that entry and we send it to a special. That entry and we send it to a special kind of node called an archiver node kind of node called an archiver node. Kind of node called an archiver node and this archiver node is essentially and this archiver node is essentially. And this archiver node is essentially storing all of these entries and then if storing all of these entries and then if. Storing all of these entries and then if a user then wants to use an entry that a user then wants to use an entry that. A user then wants to use an entry that has defaulted on rent and then been sent has defaulted on rent and then been sent. Has defaulted on rent and then been sent to an archiver node then what they have to an archiver node then what they have. To an archiver node then what they have to do is they have to go pay a fee and to do is they have to go pay a fee and. To do is they have to go pay a fee and then retrieve that entry from the then retrieve that entry from the. Then retrieve that entry from the archive node and then give that entry archive node and then give that entry. Archive node and then give that entry back to the validators and then once back to the validators and then once. Back to the validators and then once that fee has been paid the validators that fee has been paid the validators. That fee has been paid the validators will then take that archive entry put it will then take that archive entry put it. Will then take that archive entry put it back on the bucket list and then this back on the bucket list and then this. Back on the bucket list and then this entry can be used as if it was never entry can be used as if it was never. Entry can be used as if it was never deleted deleted deleted and so kind of the implementation. And so kind of the implementation and so kind of the implementation details as to how this work is the. Details as to how this work is the details as to how this work is the archive is implemented in a Merkle. Archive is implemented in a Merkle archive is implemented in a Merkle tree-like structure and then in order to. Tree-like structure and then in order to tree-like structure and then in order to. Restore an entry from the archive and restore an entry from the archive and restore an entry from the archive and. Then put it back on the ledger so it can then put it back on the ledger so it can. Then put it back on the ledger so it can be used again you have to provide a be used again you have to provide a. Be used again you have to provide a proof of inclusion that this entry that proof of inclusion that this entry that. Proof of inclusion that this entry that you say was archived actually does exist you say was archived actually does exist. You say was archived actually does exist in the archive and so this Merkle in the archive and so this Merkle. In the archive and so this Merkle structure is very powerful because it structure is very powerful because it. Structure is very powerful because it means that validators are able to check means that validators are able to check. Means that validators are able to check and make sure that the entry you say is and make sure that the entry you say is. And make sure that the entry you say is in the archive is actually legitimate in the archive is actually legitimate. In the archive is actually legitimate but the validators don't need to store but the validators don't need to store. But the validators don't need to store the archive all they need to do is store the archive all they need to do is store. The archive all they need to do is store this root Merkel hash and then they are this root Merkel hash and then they are. This root Merkel hash and then they are able to validate proofs that are able to validate proofs that are. Able to validate proofs that are generated from the archive so kind of generated from the archive so kind of. Generated from the archive so kind of high level how this works is the high level how this works is the. High level how this works is the validators themselves don't store any of validators themselves don't store any of. Validators themselves don't store any of the archive State and cannot produce the archive State and cannot produce. The archive State and cannot produce these proofs but the archive of the these proofs but the archive of the. These proofs but the archive of the archive nodes do store the entire archive nodes do store the entire. Archive nodes do store the entire archive State and have enough archive State and have enough. Archive State and have enough information to produce these proofs and information to produce these proofs and. Information to produce these proofs and so the archive nodes we kind of Envision so the archive nodes we kind of Envision. So the archive nodes we kind of Envision to serve a similar purposes kind of to serve a similar purposes kind of. To serve a similar purposes kind of horizon where they are supporting the horizon where they are supporting the. Horizon where they are supporting the validators but are not directly involved validators but are not directly involved. Validators but are not directly involved in consensus in consensus in consensus and so from an interface perspective. And so from an interface perspective and so from an interface perspective this has a couple of issues that we kind. This has a couple of issues that we kind this has a couple of issues that we kind. Of need to discuss especially when it of need to discuss especially when it of need to discuss especially when it. Comes to security comes to security comes to security and so because the we want the. And so because the we want the and so because the we want the validators to store as little State as. Validators to store as little State as validators to store as little State as this archive is possible. This archive is possible this archive is possible they don't store any of the keys and. They don't store any of the keys and they don't store any of the keys and they don't know what's in or not in the. They don't know what's in or not in the they don't know what's in or not in the archive and so if you can imagine an. Archive and so if you can imagine an archive and so if you can imagine an example say we have like this token. Example say we have like this token example say we have like this token contract right and you have a balance on. Contract right and you have a balance on contract right and you have a balance on. That token contract but you don't use it that token contract but you don't use it. That token contract but you don't use it and So eventually the rent balance on and So eventually the rent balance on. And So eventually the rent balance on that entry will go to zero and that that entry will go to zero and that. That entry will go to zero and that entry will be deleted from The Ledger entry will be deleted from The Ledger. Entry will be deleted from The Ledger and then stored in the archive now once and then stored in the archive now once. And then stored in the archive now once you default on rent from the perspective you default on rent from the perspective. You default on rent from the perspective of the validator it's as if this entry of the validator it's as if this entry. Of the validator it's as if this entry has never existed before and because the has never existed before and because the. Has never existed before and because the validator doesn't actually store the validator doesn't actually store the. Validator doesn't actually store the archive it has no way of knowing that archive it has no way of knowing that. Archive it has no way of knowing that this entry used to be in the bucket list this entry used to be in the bucket list. This entry used to be in the bucket list or that this entry is currently in the or that this entry is currently in the. Or that this entry is currently in the archive and so this means that if say archive and so this means that if say. Archive and so this means that if say the smart contract was to create another the smart contract was to create another. The smart contract was to create another balance with that exact same address balance with that exact same address. Balance with that exact same address this would be allowed right because the this would be allowed right because the. This would be allowed right because the archive or because the validator doesn't archive or because the validator doesn't. Archive or because the validator doesn't know that this entry and this key exists. Know that this entry and this key exists know that this entry and this key exists. In the archive it will create and in the archive it will create and in the archive it will create and. Generate new keys which means that we generate new keys which means that we generate new keys which means that we. Have this issue of key collisions where have this issue of key collisions where have this issue of key collisions where. You can imagine if this process was you can imagine if this process was you can imagine if this process was. Repeated several times it's possible to repeated several times it's possible to repeated several times it's possible to. Have an entry with multiple different have an entry with multiple different have an entry with multiple different. Versions of that entry with the exact versions of that entry with the exact versions of that entry with the exact. Same key that exists I'm simultaneously same key that exists I'm simultaneously same key that exists I'm simultaneously. On The Ledger and also in the archive on The Ledger and also in the archive on The Ledger and also in the archive. Now for some types of data these key now for some types of data these key now for some types of data these key. Collisions aren't that big of a deal collisions aren't that big of a deal collisions aren't that big of a deal. Right so if you can imagine if you have right so if you can imagine if you have right so if you can imagine if you have. Say a balance of some amount of token say a balance of some amount of token say a balance of some amount of token. With your given key and there are with your given key and there are with your given key and there are. Multiple different balances you have so multiple different balances you have so multiple different balances you have so. Say you have 10 xlm in an account and say you have 10 xlm in an account and say you have 10 xlm in an account and. Then that 10xl imbalance gets archived then that 10xl imbalance gets archived then that 10xl imbalance gets archived. And then someone sends you another 5xlm and then someone sends you another 5xlm and then someone sends you another 5xlm. And eventually that entry gets archived and eventually that entry gets archived and eventually that entry gets archived. With your key there are two entries in with your key there are two entries in with your key there are two entries in. The archive that corresponds your the archive that corresponds your the archive that corresponds your. Balance one with 10 xlm one with 5xlm balance one with 10 xlm one with 5xlm balance one with 10 xlm one with 5xlm. But this isn't that big of a deal but this isn't that big of a deal but this isn't that big of a deal. Because both of them are valid right you because both of them are valid right you. Because both of them are valid right you can just restore the 5x on them balance can just restore the 5x on them balance. Can just restore the 5x on them balance spend that 5x Alum and then restore the spend that 5x Alum and then restore the. Spend that 5x Alum and then restore the 10 xlm spend that no problem because 10 xlm spend that no problem because. 10 xlm spend that no problem because both of those balances are valid even both of those balances are valid even. Both of those balances are valid even though they have the same key but for though they have the same key but for. Though they have the same key but for some data types that's not the case some data types that's not the case. Some data types that's not the case right so if you can imagine a smart right so if you can imagine a smart. Right so if you can imagine a smart contract implementation that uses a contract implementation that uses a. Contract implementation that uses a nonce value so let's say that we have nonce value so let's say that we have. Nonce value so let's say that we have something like usdc that uses a nonce to something like usdc that uses a nonce to. Something like usdc that uses a nonce to protect against double spends and make protect against double spends and make. Protect against double spends and make sure that transactions can't be played sure that transactions can't be played. Sure that transactions can't be played say that this nonce value is something say that this nonce value is something. Say that this nonce value is something like 10 a non-zero value and then gets like 10 a non-zero value and then gets. Like 10 a non-zero value and then gets archived well now this token contract archived well now this token contract. Archived well now this token contract when it needs to do something the token when it needs to do something the token. When it needs to do something the token contract will see that there does not contract will see that there does not. Contract will see that there does not exist in nonce because from the exist in nonce because from the. Exist in nonce because from the perspective of the validators the perspective of the validators the. Perspective of the validators the contract itself has no way of knowing contract itself has no way of knowing. Contract itself has no way of knowing what's in the archive because the what's in the archive because the. What's in the archive because the contract is running on a validator and contract is running on a validator and. Contract is running on a validator and the validation store the archive and so the validation store the archive and so. The validation store the archive and so whenever the contract sees that there whenever the contract sees that there. Whenever the contract sees that there doesn't exist a nonsense on The Ledger doesn't exist a nonsense on The Ledger. Doesn't exist a nonsense on The Ledger instead of going to the archive and instead of going to the archive and. Instead of going to the archive and restoring the nonce with a correct value restoring the nonce with a correct value. Restoring the nonce with a correct value of 10 what the contract will do is just of 10 what the contract will do is just. Of 10 what the contract will do is just create a new nonce with a value of zero create a new nonce with a value of zero. Create a new nonce with a value of zero and so what you can imagine is say that and so what you can imagine is say that. And so what you can imagine is say that we have the correct notes value which is we have the correct notes value which is. We have the correct notes value which is 10 in the archive and this new zero 10 in the archive and this new zero. 10 in the archive and this new zero nonce because this nonce is incorrect nonce because this nonce is incorrect. Nonce because this nonce is incorrect and is essentially shadowing a valid and is essentially shadowing a valid. And is essentially shadowing a valid version of the nonce in the archive version of the nonce in the archive. version of the nonce in the archive this allows malicious users to execute a this allows malicious users to execute a. This allows malicious users to execute a replay attack because they can take a replay attack because they can take a. Replay attack because they can take a transaction that says hey if nonce is transaction that says hey if nonce is. Transaction that says hey if nonce is equal to zero this transaction is okay equal to zero this transaction is okay. Equal to zero this transaction is okay and even though the correct non's value and even though the correct non's value. And even though the correct non's value in the archive is 10 the knots value on in the archive is 10 the knots value on. In the archive is 10 the knots value on The Ledger is zero and so they can The Ledger is zero and so they can. The Ledger is zero and so they can replay this transaction and maliciously replay this transaction and maliciously. Replay this transaction and maliciously use this nonce value use this nonce value. Use this nonce value and so we have this challenging problem and so we have this challenging problem. And so we have this challenging problem that for certain types of values like that for certain types of values like. That for certain types of values like nonsense there needs to make sure that nonsense there needs to make sure that. Nonsense there needs to make sure that you only have a single version of that you only have a single version of that. You only have a single version of that entry between both the bucket list and entry between both the bucket list and. Entry between both the bucket list and the archive the archive the archive this is a problem because the validators. This is a problem because the validators this is a problem because the validators. Don't store the archive and so there's don't store the archive and so there's don't store the archive and so there's. No way of checking if a key exists or no way of checking if a key exists or no way of checking if a key exists or. Not directly from the archive not directly from the archive not directly from the archive. So that's issue number one so that's issue number one so that's issue number one this thing like nonsense where you want. This thing like nonsense where you want this thing like nonsense where you want to make sure there's only one version of. To make sure there's only one version of to make sure there's only one version of. The entry that exists and then the the entry that exists and then the the entry that exists and then the. Second or the second issue that comes up second or the second issue that comes up. Second or the second issue that comes up with security is something where you with security is something where you. With security is something where you restore an outdated version of an entry restore an outdated version of an entry. Restore an outdated version of an entry so similarly let's think of a token so similarly let's think of a token. So similarly let's think of a token where you have some sort of kyc Entry where you have some sort of kyc Entry. Where you have some sort of kyc Entry right and so say that you have a kyc right and so say that you have a kyc. Right and so say that you have a kyc entry that allows a user to spend their entry that allows a user to spend their. Entry that allows a user to spend their tokens and then that kyc entry isn't tokens and then that kyc entry isn't. Tokens and then that kyc entry isn't touched for a while and So eventually it touched for a while and So eventually it. Touched for a while and So eventually it runs out rent balance and gets sent to runs out rent balance and gets sent to. Runs out rent balance and gets sent to the archive the archive the archive now a new kyc entry is generated on the. Now a new kyc entry is generated on the now a new kyc entry is generated on the bucket list but this kyc entry revokes. Bucket list but this kyc entry revokes bucket list but this kyc entry revokes access to those funds now let's say that. Access to those funds now let's say that access to those funds now let's say that. This new kyc entry that revokes access this new kyc entry that revokes access this new kyc entry that revokes access. Isn't used for a while and it too falls isn't used for a while and it too falls isn't used for a while and it too falls. Into the archive but a malicious user into the archive but a malicious user into the archive but a malicious user. Might do is go into the archive instead might do is go into the archive instead might do is go into the archive instead. Of restoring the most recent version of restoring the most recent version of restoring the most recent version. That revokes access instead restore the that revokes access instead restore the that revokes access instead restore the. Earlier version of that kyc entry that earlier version of that kyc entry that earlier version of that kyc entry that. Gives the user access to spend those gives the user access to spend those gives the user access to spend those. Funds and so by restoring an out-of-date funds and so by restoring an out-of-date. Funds and so by restoring an out-of-date entry what you can do is essentially entry what you can do is essentially. Entry what you can do is essentially do a versioning attack where you take an do a versioning attack where you take an. Do a versioning attack where you take an out of date entry restored onto the out of date entry restored onto the. Out of date entry restored onto the bucket list and then you're essentially bucket list and then you're essentially. Bucket list and then you're essentially able to pretend as if it is newer than able to pretend as if it is newer than. Able to pretend as if it is newer than the kyc entry that revoked access the kyc entry that revoked access. The kyc entry that revoked access and so essentially we have two issues we and so essentially we have two issues we. And so essentially we have two issues we need to solve here first we need to make. Need to solve here first we need to make need to solve here first we need to make. Sure that you can only restore the sure that you can only restore the sure that you can only restore the. Latest version of an entry so you can't latest version of an entry so you can't latest version of an entry so you can't. Do this like kyc rollback attack and do this like kyc rollback attack and do this like kyc rollback attack and. Second for certain types of data we need second for certain types of data we need. Second for certain types of data we need to make sure that there's only one to make sure that there's only one. To make sure that there's only one version that exists in the archive in version that exists in the archive in. Version that exists in the archive in the bucket list the bucket list the bucket list. Now we don't need that guarantee of the now we don't need that guarantee of the now we don't need that guarantee of the. Uniqueness guarantee for all types of uniqueness guarantee for all types of uniqueness guarantee for all types of. Data for example the balance example data for example the balance example data for example the balance example. I talked about earlier it's completely I talked about earlier it's completely I talked about earlier it's completely. Fine if you have multiple different fine if you have multiple different fine if you have multiple different. Balances but for things like nonsense balances but for things like nonsense balances but for things like nonsense. You need to make sure you only have one you need to make sure you only have one you need to make sure you only have one. And so essentially because we have these and so essentially because we have these. And so essentially because we have these two different requirements we expose two. Two different requirements we expose two two different requirements we expose two. Different types of storage at the Soroban different types of storage at the Soroban. Different types of storage at the Soroban interface level right now we're calling interface level right now we're calling. Interface level right now we're calling this unique storage and recreatable this unique storage and recreatable. This unique storage and recreatable storage now essentially the differences storage now essentially the differences. Storage now essentially the differences here is that unique storage guarantees here is that unique storage guarantees. Here is that unique storage guarantees that whatever entry you have there's that whatever entry you have there's. That whatever entry you have there's only ever one copy of so in our non's only ever one copy of so in our non's. Only ever one copy of so in our non's example if you're using unique storage example if you're using unique storage. Example if you're using unique storage and you say you know I use unique and you say you know I use unique. And you say you know I use unique storage to create announce value and storage to create announce value and. Storage to create announce value and that Knox value gets sent to the archive that Knox value gets sent to the archive. That Knox value gets sent to the archive if you try to recreate that value the if you try to recreate that value the. If you try to recreate that value the function will panic because it says hey function will panic because it says hey. Function will panic because it says hey this is unique storage and entry already this is unique storage and entry already. This is unique storage and entry already exists in the archive so I'm not going exists in the archive so I'm not going. Exists in the archive so I'm not going to let you to recreate that to let you to recreate that. To let you to recreate that under the hood how we do that and under the hood how we do that and. Under the hood how we do that and again this is an implementation detail again this is an implementation detail. Again this is an implementation detail for later is we use a combination of for later is we use a combination of. For later is we use a combination of proofs of inclusion and also proofs of proofs of inclusion and also proofs of. Proofs of inclusion and also proofs of exclusion so for instance whenever you exclusion so for instance whenever you. Exclusion so for instance whenever you create a unique data entry for the first create a unique data entry for the first. Create a unique data entry for the first time you need to also provide a proof time you need to also provide a proof. Time you need to also provide a proof that this entry has never existed before that this entry has never existed before. That this entry has never existed before and so this proof needs to become from and so this proof needs to become from. And so this proof needs to become from the archive nodes because the validators the archive nodes because the validators. The archive nodes because the validators don't store enough information to prove don't store enough information to prove. Don't store enough information to prove that something never existed but if you that something never existed but if you. That something never existed but if you provide this proof to the validators provide this proof to the validators. Provide this proof to the validators they are able to check the proof and they are able to check the proof and. They are able to check the proof and make sure it's legitimate and so because make sure it's legitimate and so because. Make sure it's legitimate and so because you have this extra step for Unique data. You have this extra step for Unique data you have this extra step for Unique data. And needing to prove that nature never and needing to prove that nature never and needing to prove that nature never. Existed it's more expensive existed it's more expensive existed it's more expensive. Now the recreatable data doesn't have now the recreatable data doesn't have now the recreatable data doesn't have. This guarantee and so for a thing for this guarantee and so for a thing for this guarantee and so for a thing for. Entries like nonsense that have security entries like nonsense that have security. Entries like nonsense that have security implementation implications you wouldn't. Implementation implications you wouldn't implementation implications you wouldn't. Want to use recreatable data because you want to use recreatable data because you. Want to use recreatable data because you could have multiple versions of your could have multiple versions of your. Could have multiple versions of your nonsense and you could recreate nonsense nonsense and you could recreate nonsense. Nonsense and you could recreate nonsense and have security issues and have security issues. And have security issues however you would want to use however you would want to use. However you would want to use recreatable data for something like a recreatable data for something like a. Recreatable data for something like a balance that doesn't have this issue balance that doesn't have this issue. Balance that doesn't have this issue because recreatable data is much cheaper because recreatable data is much cheaper. Because recreatable data is much cheaper because you don't need the security because you don't need the security. Because you don't need the security guarantees you don't need to provide all guarantees you don't need to provide all. Guarantees you don't need to provide all these proofs of exclusion and whenever these proofs of exclusion and whenever. These proofs of exclusion and whenever you create a recreatable entry you don't you create a recreatable entry you don't. You create a recreatable entry you don't need to prove that's never existed need to prove that's never existed. Need to prove that's never existed before before before and so essentially we tried to provide. And so essentially we tried to provide and so essentially we tried to provide these two classes of data so that users. These two classes of data so that users these two classes of data so that users who need some sort of security guarantee. Who need some sort of security guarantee who need some sort of security guarantee. Can use the more expensive and slower can use the more expensive and slower can use the more expensive and slower. Unique data but for entries that don't unique data but for entries that don't unique data but for entries that don't. Require those strict guarantees you can require those strict guarantees you can require those strict guarantees you can. Use recreatable data use recreatable data use recreatable data now in addition to these two data types. Now in addition to these two data types now in addition to these two data types we also introduce a third storage type. We also introduce a third storage type we also introduce a third storage type called temporary storage and what. Called temporary storage and what called temporary storage and what temporary storage is is it kind of just. Temporary storage is is it kind of just temporary storage is is it kind of just does what's the name sounds like it's. Does what's the name sounds like it's does what's the name sounds like it's entries that are meant to be temporary. Entries that are meant to be temporary entries that are meant to be temporary and so essentially if you have a. And so essentially if you have a and so essentially if you have a temporary storage entry whenever its. Temporary storage entry whenever its temporary storage entry whenever its rent balance goes to zero instead of. Rent balance goes to zero instead of rent balance goes to zero instead of being sent to an archive it is. Being sent to an archive it is being sent to an archive it is permanently deleted and because you. Permanently deleted and because you permanently deleted and because you don't need to worry about sending this. Don't need to worry about sending this don't need to worry about sending this to the archive and there's not this. To the archive and there's not this to the archive and there's not this archival cost the temporary entries are. Archival cost the temporary entries are archival cost the temporary entries are the least expensive storage type. The least expensive storage type the least expensive storage type now you wouldn't want to use this for. Now you wouldn't want to use this for now you wouldn't want to use this for sensitive data such as balances because. Sensitive data such as balances because sensitive data such as balances because if a balance defaulted on rent it would. If a balance defaulted on rent it would if a balance defaulted on rent it would then be lost forever but for temporary. Then be lost forever but for temporary then be lost forever but for temporary entries such as if you want to give. Entries such as if you want to give entries such as if you want to give another user authority to use your funds. Another user authority to use your funds another user authority to use your funds. For say 100 days you could use a for say 100 days you could use a for say 100 days you could use a. Temporary entry that automatically temporary entry that automatically temporary entry that automatically. Deletes itself deletes itself deletes itself or if you had some sort of data that is. Or if you had some sort of data that is or if you had some sort of data that is easily recreatable such as like a. Easily recreatable such as like a easily recreatable such as like a payment Channel you could also use. Payment Channel you could also use payment Channel you could also use temporary data for that because whenever. Temporary data for that because whenever temporary data for that because whenever. It was deleted you could just regenerate it was deleted you could just regenerate. It was deleted you could just regenerate the exact same entry again the exact same entry again. The exact same entry again and so these are the three data types in and so these are the three data types in. And so these are the three data types in the storage mediums we're trying to the storage mediums we're trying to. The storage mediums we're trying to present to the end user now the issue is present to the end user now the issue is. Present to the end user now the issue is we have these security issues that are we have these security issues that are. We have these security issues that are generated from the archive interface and generated from the archive interface and. Generated from the archive interface and they can be very tricky to protect they can be very tricky to protect. They can be very tricky to protect against for instance it's a very tricky against for instance it's a very tricky. Against for instance it's a very tricky to think about examples like kyc to think about examples like kyc. To think about examples like kyc rollback and nonce attacks in the rollback and nonce attacks in the. Rollback and nonce attacks in the context of this archive especially since context of this archive especially since. Context of this archive especially since archival state is not only a new archival state is not only a new. Archival state is not only a new interface for Stellar but a pretty new interface for Stellar but a pretty new. Interface for Stellar but a pretty new interface for blockchains in general and interface for blockchains in general and. Interface for blockchains in general and so we want to provide an interface and so we want to provide an interface and. So we want to provide an interface and Define use cases as clearly as possible Define use cases as clearly as possible. Define use cases as clearly as possible for each type of storage for each type of storage. For each type of storage and try to make this as seamless as and try to make this as seamless as. And try to make this as seamless as possible for the end developer and possible for the end developer and. Possible for the end developer and trying to abstract away as much of the trying to abstract away as much of the. Trying to abstract away as much of the complexity from the archival interface complexity from the archival interface. Complexity from the archival interface as possible as possible as possible so I think this is a pretty tricky. So I think this is a pretty tricky so I think this is a pretty tricky problem. Problem problem but I think that's the high level but I think that's the high level. but I think that's the high level issue I want to talk about today is just issue I want to talk about today is just. Issue I want to talk about today is just the security issues that arise from this. The security issues that arise from this the security issues that arise from this. Archival state and then the three types archival state and then the three types archival state and then the three types. Of storage that we've tried to implement of storage that we've tried to implement. Of storage that we've tried to implement so far and so I think I'd be open to any. So far and so I think I'd be open to any so far and so I think I'd be open to any. Questions or if anyone has anything I'd questions or if anyone has anything I'd questions or if anyone has anything I'd. Like to talk a little bit more in depth like to talk a little bit more in depth like to talk a little bit more in depth. About about about bro bro bro thanks for that just a quick thanks for that just a quick. thanks for that just a quick question you just you were talking about question you just you were talking about. Question you just you were talking about unique storage and having to supply unique storage and having to supply . Unique storage and having to supply proofs that does that mean that in order proofs that does that mean that in order. Proofs that does that mean that in order to create a unique storage entry to create a unique storage entry. To create a unique storage entry I need to have access to an archival I need to have access to an archival. I need to have access to an archival node node node yeah so essentially how that works is. Yeah so essentially how that works is yeah so essentially how that works is out when you actually from the. Out when you actually from the out when you actually from the perspective of the validator itself . Perspective of the validator itself perspective of the validator itself so yes you do need to have access to a. So yes you do need to have access to a so yes you do need to have access to a an archiver node to produce these and so. An archiver node to produce these and so an archiver node to produce these and so. Kind of what we're Imagining the kind of what we're Imagining the kind of what we're Imagining the. Interface would look like is that RPC interface would look like is that RPC interface would look like is that RPC. Nodes nodes nodes kind of double as pre-flight nodes kind of double as pre-flight nodes. kind of double as pre-flight nodes and archiver nodes and so during the and archiver nodes and so during the. And archiver nodes and so during the free PreFlight process if you generate a free PreFlight process if you generate a. Free PreFlight process if you generate a unique entry or if you want to access an. Unique entry or if you want to access an unique entry or if you want to access an. Entry that's in the archive of the entry that's in the archive of the entry that's in the archive of the. PreFlight note itself will carry PreFlight note itself will carry PreFlight note itself will carry. Archival data and so the PreFlight note archival data and so the PreFlight note archival data and so the PreFlight note. Will be able to essentially kind of work will be able to essentially kind of work. Will be able to essentially kind of work similarly to the footprint when it similarly to the footprint when it. Similarly to the footprint when it generates Footprints for a read write generates Footprints for a read write. Generates Footprints for a read write data accesses that the pre-flight node data accesses that the pre-flight node. Data accesses that the pre-flight node will be able to retrieve the proofs that will be able to retrieve the proofs that. Will be able to retrieve the proofs that are required for your transaction and are required for your transaction and. Are required for your transaction and then give those Trend or give those then give those Trend or give those. Then give those Trend or give those proofs to the validator and so because proofs to the validator and so because. Proofs to the validator and so because the PreFlight node is generating and the PreFlight node is generating and. The PreFlight node is generating and providing these proofs whenever you providing these proofs whenever you. Providing these proofs whenever you actually go to apply that transaction on actually go to apply that transaction on. Actually go to apply that transaction on the validator the proofs are available the validator the proofs are available. The validator the proofs are available because they've already been made in because they've already been made in. Because they've already been made in advance by the previous flight node and just a bit here for recreatable. And just a bit here for recreatable storage I don't need that right yeah so storage I don't need that right yeah so. Storage I don't need that right yeah so for recreable storage it's cheaper for recreable storage it's cheaper. For recreable storage it's cheaper because you don't need to provide any because you don't need to provide any. Because you don't need to provide any proofs and there's no work to be done proofs and there's no work to be done. Proofs and there's no work to be done you can just if a key doesn't exist on you can just if a key doesn't exist on. You can just if a key doesn't exist on The Bucket List you can just generate The Bucket List you can just generate. The Bucket List you can just generate that new key without any checks or that new key without any checks or. That new key without any checks or balances no problem balances no problem balances no problem. Well to make an amendment like it's not well to make an amendment like it's not well to make an amendment like it's not. Like nothing has to be done through a like nothing has to be done through a like nothing has to be done through a. Created both storage because if you want created both storage because if you want. Created both storage because if you want to benefit from the fact that it's to benefit from the fact that it's. To benefit from the fact that it's recreatable you need to write some codes recreatable you need to write some codes. Recreatable you need to write some codes that allows you to nurse entries for that allows you to nurse entries for. That allows you to nurse entries for example if you have a token contract and example if you have a token contract and. Example if you have a token contract and your balances are creatable your balances are creatable. Your balances are creatable you probably want to provide a you probably want to provide a. you probably want to provide a contract function that allows users to contract function that allows users to. Contract function that allows users to recreate there is a balance given recreate there is a balance given. Recreate there is a balance given approve basically approve basically approve basically. so like both involve something to be so like both involve something to be. So like both involve something to be done but in case of unique storage it done but in case of unique storage it. Done but in case of unique storage it would need to be done every time you would need to be done every time you. Would need to be done every time you create a new entry while for a tradeable create a new entry while for a tradeable. Create a new entry while for a tradeable it's only if your entry has got archived. It's only if your entry has got archived it's only if your entry has got archived. And you actually want to restore it and you actually want to restore it and you actually want to restore it. Which hopefully shouldn't be the case which hopefully shouldn't be the case which hopefully shouldn't be the case. Too frequently too frequently too frequently yeah kind of the difference is in unique. Yeah kind of the difference is in unique yeah kind of the difference is in unique. Storage if something exists on the storage if something exists on the storage if something exists on the. Archive you must restore it in archive you must restore it in archive you must restore it in. Recreatable storage if the entry exists recreatable storage if the entry exists recreatable storage if the entry exists. In the archive you have the option of in the archive you have the option of in the archive you have the option of. Either restoring it or just if the either restoring it or just if the either restoring it or just if the. Restore would be too expensive or you restore would be too expensive or you restore would be too expensive or you. Don't want to restore it for some reason don't want to restore it for some reason. Don't want to restore it for some reason just creating a new entry with the same just creating a new entry with the same. Just creating a new entry with the same key key key but but just to be clear with regards. But but just to be clear with regards but but just to be clear with regards. To what Dima just said if I do have an to what Dima just said if I do have an to what Dima just said if I do have an. Existing if the Ledger entry has been existing if the Ledger entry has been existing if the Ledger entry has been. Recreated with the same key recreated with the same key recreated with the same key. when I try to restore it right now when I try to restore it right now. when I try to restore it right now will it will it will it will it fail or will it like use some. will it fail or will it like use some will it fail or will it like use some. Sort of like custom merge capability sort of like custom merge capability sort of like custom merge capability. What's what's gonna happen yeah so when what's what's gonna happen yeah so when what's what's gonna happen yeah so when. It comes to recreatable data there's a it comes to recreatable data there's a it comes to recreatable data there's a. Function that we Define called function that we Define called function that we Define called . An archive latest version and an archive latest version and an archive latest version and. Essentially how this works is whenever essentially how this works is whenever essentially how this works is whenever. You restore unique data it's you restore unique data it's you restore unique data it's. Automatically automatically automatically add to the bucket list immediately add to the bucket list immediately. add to the bucket list immediately because unique or for Unique data because unique or for Unique data. Because unique or for Unique data because unique data is known to be because unique data is known to be. Because unique data is known to be unique and so you know you won't have a unique and so you know you won't have a. Unique and so you know you won't have a key collision between the archive and key collision between the archive and. Key collision between the archive and the bucket list so you can just the bucket list so you can just. The bucket list so you can just automatically add to the bucket list for automatically add to the bucket list for. Automatically add to the bucket list for recreatable storage this isn't true recreatable storage this isn't true. Recreatable storage this isn't true there could be a key collision and so there could be a key collision and so. There could be a key collision and so whenever you restore a recreatable whenever you restore a recreatable. Whenever you restore a recreatable storage entry storage entry storage entry it's not immediately add to the bucket. It's not immediately add to the bucket it's not immediately add to the bucket list but instead this function . List but instead this function list but instead this function restore latest archived entry just. Restore latest archived entry just restore latest archived entry just Returns the unarchived version right and. Returns the unarchived version right and Returns the unarchived version right and. So in the doc if you look at the last so in the doc if you look at the last. So in the doc if you look at the last two pages there are two example two pages there are two example. Two pages there are two example functions on how to restore our functions on how to restore our. Functions on how to restore our recreatable data recreatable data recreatable data. to example implementations that to example implementations that to example implementations that. Contract might do but essentially contract might do but essentially contract might do but essentially. Because of these key collisions it's the because of these key collisions it's the. Because of these key collisions it's the responsibility of the smart contract responsibility of the smart contract. Responsibility of the smart contract implementation to resolve these implementation to resolve these. Implementation to resolve these collisions and so for instance what you collisions and so for instance what you. Collisions and so for instance what you can do is after you get the restore can do is after you get the restore. Can do is after you get the restore latest or the unarchived entry returned latest or the unarchived entry returned. Latest or the unarchived entry returned from this function you can check the from this function you can check the. From this function you can check the bucket list and see if there's a bucket list and see if there's a. Bucket list and see if there's a collision and then if there's no collision and then if there's no. Collision and then if there's no Collision the smart contract can just Collision the smart contract can just. Collision the smart contract can just write the key immediately no problem but write the key immediately no problem but. Write the key immediately no problem but if there is a collision then what the if there is a collision then what the. If there is a collision then what the smart contract might do is compare the smart contract might do is compare the. Smart contract might do is compare the values of the recently unarchived values of the recently unarchived. Values of the recently unarchived version and the bucket list version and version and the bucket list version and. Version and the bucket list version and pick one or discard the other or in the pick one or discard the other or in the. Pick one or discard the other or in the example of balances there could be some example of balances there could be some. Example of balances there could be some sort of merge operation defined by the sort of merge operation defined by the. Sort of merge operation defined by the smart contract and so if you have two smart contract and so if you have two. Smart contract and so if you have two balances the unarchived behavior balances the unarchived behavior. Balances the unarchived behavior might be okay take the unarchived might be okay take the unarchived. Might be okay take the unarchived version sum the balances of the version version sum the balances of the version. Version sum the balances of the version that's live on the bucket list and the that's live on the bucket list and the. That's live on the bucket list and the recently unarchived version and then recently unarchived version and then. Recently unarchived version and then just write the result which is the sum just write the result which is the sum. Just write the result which is the sum of those two balances and so because of those two balances and so because. Of those two balances and so because there are different use cases depending there are different use cases depending. There are different use cases depending on the contract that's a contract on the contract that's a contract. On the contract that's a contract implementation that this contract implementation that this contract. Implementation that this contract developer itself might think must think developer itself might think must think. Developer itself might think must think of it and is there a I see you have a it and is there a I see you have a. Section on default implementation section on default implementation section on default implementation. what should be the default what should be the default what should be the default. Implementation yes I think the the implementation yes I think the the implementation yes I think the the. Safest default implementation is just if safest default implementation is just if. Safest default implementation is just if there's no key Collision IE if you want there's no key Collision IE if you want. There's no key Collision IE if you want to restore something and there's no key to restore something and there's no key. To restore something and there's no key on the bucket list then you restore it on the bucket list then you restore it. On the bucket list then you restore it and add to the bucket list if there is a and add to the bucket list if there is a. And add to the bucket list if there is a collision just panic and fail because collision just panic and fail because. Collision just panic and fail because you don't want it to be a no up you don't want it to be a no up. you don't want it to be a no up because the an archive function does because the an archive function does. Because the an archive function does delete the entry from the archive delete the entry from the archive. Delete the entry from the archive right because you can't unarchive and right because you can't unarchive and. Right because you can't unarchive and entry twice from the archive once you've entry twice from the archive once you've. Entry twice from the archive once you've unarchived it once it's gone forever and. Unarchived it once it's gone forever and unarchived it once it's gone forever and. So you won't want to lose entries if so you won't want to lose entries if so you won't want to lose entries if. You can't if there's a key collision and you can't if there's a key collision and. You can't if there's a key collision and so I think the safest option so I think the safest option. So I think the safest option that preserves all the data is for that preserves all the data is for. that preserves all the data is for the default just if there's a collision the default just if there's a collision. The default just if there's a collision just panic and then you either have to just panic and then you either have to. Just panic and then you either have to wait for the entry that's on the bucket wait for the entry that's on the bucket. Wait for the entry that's on the bucket list to be archived or delete the entry list to be archived or delete the entry. List to be archived or delete the entry yourself on the bucket list and then the yourself on the bucket list and then the. Yourself on the bucket list and then the default default default unarchive will work. Okay I imagine there are a lot of okay I imagine there are a lot of questions unfortunately we are at time. Questions unfortunately we are at time questions unfortunately we are at time so this discussion is going to . so this discussion is going to so this discussion is going to carry on feel free to ask questions on. Carry on feel free to ask questions on carry on feel free to ask questions on live chat Garen if you can hang out. Live chat Garen if you can hang out live chat Garen if you can hang out there and ask any questions and answer. There and ask any questions and answer there and ask any questions and answer any questions that'll be great. Any questions that'll be great any questions that'll be great and yeah thank you all this has. And yeah thank you all this has and yeah thank you all this has been a very productive hour and we'll. Been a very productive hour and we'll been a very productive hour and we'll. See you all next week.
