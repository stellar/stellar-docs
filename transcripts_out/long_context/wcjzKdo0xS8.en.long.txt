Foreign foreign  welcome to the Stellar open protocol welcome to the Stellar open protocol. Discussion in these meetings we discussion in these meetings we discussion in these meetings we. Discuss core advancement proposals aka discuss core advancement proposals aka discuss core advancement proposals aka. Caps these are technical specs that caps these are technical specs that caps these are technical specs that. Suggest changes to the Stellar protocol suggest changes to the Stellar protocol suggest changes to the Stellar protocol. Necessary to allow that protocol to necessary to allow that protocol to necessary to allow that protocol to. Continue to evolve to meet ecosystem continue to evolve to meet ecosystem continue to evolve to meet ecosystem. Needs needs needs we live stream these meetings so that we live stream these meetings so that. We live stream these meetings so that anyone who is interested can follow anyone who is interested can follow. Anyone who is interested can follow along I do want to note it's a technical along I do want to note it's a technical. Along I do want to note it's a technical discussion so if you're watching you discussion so if you're watching you. Discussion so if you're watching you should take a look at the cap we're should take a look at the cap we're. Should take a look at the cap we're planning to discuss which is linked to planning to discuss which is linked to. Planning to discuss which is linked to in the show description it's cap 38. In the show description it's cap 38. In the show description it's cap 38. Also we do keep an eye on the discussion also we do keep an eye on the discussion. Also we do keep an eye on the discussion box and your comments there they do help. Box and your comments there they do help box and your comments there they do help. Inform our decisions that said inform our decisions that said inform our decisions that said. Today's discussion focuses on reviewing today's discussion focuses on reviewing today's discussion focuses on reviewing. Final changes to a cap that's already final changes to a cap that's already final changes to a cap that's already. Been approved and our goal is to been approved and our goal is to been approved and our goal is to. Acknowledge and validate those exchanges acknowledge and validate those exchanges. Acknowledge and validate those exchanges so you know we'll again pay attention to. So you know we'll again pay attention to so you know we'll again pay attention to. That discussion box and if relevant that discussion box and if relevant that discussion box and if relevant. Questions come in we may try to questions come in we may try to questions come in we may try to. Incorporate them but we do have this incorporate them but we do have this incorporate them but we do have this. Very specific goal very specific goal very specific goal as I said today's discussion focuses on. As I said today's discussion focuses on as I said today's discussion focuses on a single cap cap 38 and this meeting is. A single cap cap 38 and this meeting is a single cap cap 38 and this meeting is basically the end of its life cycle that. Basically the end of its life cycle that basically the end of its life cycle that. Life cycle started with the discussion life cycle started with the discussion life cycle started with the discussion. On the Stellar dev mailing list and on the Stellar dev mailing list and on the Stellar dev mailing list and. There's a link to that mailing list in there's a link to that mailing list in there's a link to that mailing list in. The event description for anyone the event description for anyone the event description for anyone. Interested in joining and participating interested in joining and participating interested in joining and participating. In future discussions in future discussions in future discussions after that discussion the cap was. after that discussion the cap was after that discussion the cap was drafted and then iterated on based on. Drafted and then iterated on based on drafted and then iterated on based on feedback and suggestions that came in. Feedback and suggestions that came in feedback and suggestions that came in and once it's settled it was approved by. And once it's settled it was approved by and once it's settled it was approved by. The cap committee entered into a the cap committee entered into a the cap committee entered into a. One-week final comment period and then one-week final comment period and then one-week final comment period and then. It got through that period it was it got through that period it was it got through that period it was. Implemented in a major Stellar core implemented in a major Stellar core implemented in a major Stellar core. Release release release it is now officially part of protocol it is now officially part of protocol. It is now officially part of protocol 18. 18. 18. Now there's still a final step before now there's still a final step before now there's still a final step before. That protocol hits the network which is that protocol hits the network which is that protocol hits the network which is. That validators have to vote to upgrade that validators have to vote to upgrade that validators have to vote to upgrade. The network to protocol 18 and that vote the network to protocol 18 and that vote. The network to protocol 18 and that vote is currently scheduled for november 3rd is currently scheduled for november 3rd. Is currently scheduled for november 3rd before that day anyone and everyone who before that day anyone and everyone who. Before that day anyone and everyone who builds on Stellar needs to install new builds on Stellar needs to install new. Builds on Stellar needs to install new versions of any Stellar related software versions of any Stellar related software. Versions of any Stellar related software they rely on including Stellar core they rely on including Stellar core. They rely on including Stellar core horizon also including all the Stellar horizon also including all the Stellar. Horizon also including all the Stellar sdks there are breaking changes in sdks there are breaking changes in. Sdks there are breaking changes in protocol 18. if you aren't running protocol 18. if you aren't running. Protocol 18. if you aren't running up-to-date software with the network up-to-date software with the network. Up-to-date software with the network upgrades you will run into trouble so if upgrades you will run into trouble so if. Upgrades you will run into trouble so if you're watching this you haven't already. You're watching this you haven't already you're watching this you haven't already. Please make sure to update all your please make sure to update all your please make sure to update all your. Stellar related software content okay Stellar related software content okay Stellar related software content okay. Enough preamble today we're returning enough preamble today we're returning. Enough preamble today we're returning to cap 38 automated market makers it to cap 38 automated market makers it. To cap 38 automated market makers it introduces a powerful new feature that introduces a powerful new feature that. Introduces a powerful new feature that has the potential to really transform has the potential to really transform. Has the potential to really transform the network which is the ability to the network which is the ability to. The network which is the ability to create automated market makers or amfs create automated market makers or amfs. Create automated market makers or amfs amms allow users to create deposits into amms allow users to create deposits into. Amms allow users to create deposits into liquidity pools they also allow buyers liquidity pools they also allow buyers. Liquidity pools they also allow buyers and sellers to trade against those pools and sellers to trade against those pools. And sellers to trade against those pools they use in the underlying formula to they use in the underlying formula to. They use in the underlying formula to value two assets relative to one another value two assets relative to one another. Value two assets relative to one another when trades execute and change the when trades execute and change the. When trades execute and change the amount of each asset in the pool the amount of each asset in the pool the. Amount of each asset in the pool the relative prices shift based on a formula relative prices shift based on a formula. Relative prices shift based on a formula it all happens automatically so in the it all happens automatically so in the. It all happens automatically so in the case of cap 38 trading against a case of cap 38 trading against a. Case of cap 38 trading against a liquidity goal is done using existing liquidity goal is done using existing. Liquidity goal is done using existing path payment operations which is pretty path payment operations which is pretty. Path payment operations which is pretty neat because it automatically gives neat because it automatically gives. Neat because it automatically gives applications built on Stellar access to applications built on Stellar access to. Applications built on Stellar access to this new source of liquidity this new source of liquidity. This new source of liquidity it also means that liquidity pools it also means that liquidity pools. It also means that liquidity pools benefit from real-world cross-border benefit from real-world cross-border. Benefit from real-world cross-border payments and Stellar is the first layer payments and Stellar is the first layer. Payments and Stellar is the first layer one blockchain to incorporate a m one blockchain to incorporate a m. One blockchain to incorporate a m functionality at the protocol level and functionality at the protocol level and. Functionality at the protocol level and the first to combine it in this way with the first to combine it in this way with. The first to combine it in this way with cross-border payments cross-border payments. Cross-border payments obviously we're super excited to see obviously we're super excited to see. Obviously we're super excited to see what this feature can do to boost what this feature can do to boost. What this feature can do to boost overall network liquidity overall network liquidity. Overall network liquidity that said back to the technical that said back to the technical. That said back to the technical discussion as I mentioned at this point discussion as I mentioned at this point. Discussion as I mentioned at this point cap38 has already been approved and cap38 has already been approved and. Cap38 has already been approved and implemented but during implementation implemented but during implementation. Implemented but during implementation there's always a bit of tweaking that there's always a bit of tweaking that. There's always a bit of tweaking that needs to happen and the goal today is to needs to happen and the goal today is to. Needs to happen and the goal today is to take a look at the tweets that happen take a look at the tweets that happen. Take a look at the tweets that happen during during during cat 38's implementation and verify that. Cat 38's implementation and verify that cat 38's implementation and verify that the final adjustments are safe and sound. The final adjustments are safe and sound the final adjustments are safe and sound. That they make sense so this is the post that they make sense so this is the post. That they make sense so this is the post implementation validation phase and implementation validation phase and. Implementation validation phase and hopefully the final phase for cap 38 hopefully the final phase for cap 38. Hopefully the final phase for cap 38 and so what we're going to do and so what we're going to do. And so what we're going to do is we're going to look through the is we're going to look through the. Is we're going to look through the changes that have happened changes that have happened. Changes that have happened in this post in this post in this post implementation implementation. Implementation review review review so before we do that I I'm just. so before we do that I I'm just so before we do that I I'm just gonna walk through them one by one but. Gonna walk through them one by one but gonna walk through them one by one but before we do that does anyone have any. Before we do that does anyone have any before we do that does anyone have any questions. Questions questions we're good so so here we go the agenda is to walk through the xtr. The agenda is to walk through the xtr changes and we're going to do it in changes and we're going to do it in. Changes and we're going to do it in approximate chronological order so the approximate chronological order so the. Approximate chronological order so the first change removed liquidity pool id first change removed liquidity pool id. First change removed liquidity pool id from union in liquidity pool entry from union in liquidity pool entry. From union in liquidity pool entry and so I guess my question is does and so I guess my question is does. And so I guess my question is does anyone have any questions about this anyone have any questions about this. Anyone have any questions about this does this change make sense does this change make sense. Does this change make sense are there any concerns so when we did this I think siddharth. So when we did this I think siddharth might have made this change yes might have made this change yes. Might have made this change yes siddharth made this change but siddharth made this change but. Siddharth made this change but sir do you want to talk about or do you sir do you want to talk about or do you. Sir do you want to talk about or do you want me to want me to want me to yeah I can talk about it so the. Yeah I can talk about it so the yeah I can talk about it so the reasoning for this is that the. Reasoning for this is that the reasoning for this is that the in the original capital. In the original capital in the original capital in the original capital liquidity pool. In the original capital liquidity pool in the original capital liquidity pool id was under a union. Id was under a union id was under a union but the liquidity the but the liquidity the. but the liquidity the electric key didn't have the liquidity electric key didn't have the liquidity. Electric key didn't have the liquidity pool id under a union so pool id under a union so. Pool id under a union so you know which means that every type of you know which means that every type of. You know which means that every type of liquidity pool entry would need that liquidity pool entry would need that. Liquidity pool entry would need that that id that id that id so you might as well just take it to the. So you might as well just take it to the so you might as well just take it to the. The level above that the level above that the level above that instead of specifying it for each new. Instead of specifying it for each new instead of specifying it for each new union we specify in the future so. Union we specify in the future so union we specify in the future so that was the reason for this. And the general assumption here is like and the general assumption here is like probably we're going to keep referencing. Probably we're going to keep referencing probably we're going to keep referencing. Things by hash anyway there's no reason things by hash anyway there's no reason things by hash anyway there's no reason. To think that we would change the to think that we would change the to think that we would change the. Liquidity pool id liquidity pool id liquidity pool id so we might change our hash function. So we might change our hash function so we might change our hash function right if if we decide to move to ketchup. Right if if we decide to move to ketchup right if if we decide to move to ketchup. From like shot 256 or something from like shot 256 or something from like shot 256 or something. Yeah does this make that harder or is it yeah does this make that harder or is it. Yeah does this make that harder or is it just going to be a pain anyway just going to be a pain anyway. Just going to be a pain anyway I think it would be pain no matter what I think it would be pain no matter what. I think it would be pain no matter what because we do a lot of hashing in a because we do a lot of hashing in a. because we do a lot of hashing in a lot of places probably it would be lot of places probably it would be. Lot of places probably it would be sufficiently disruptive that we would sufficiently disruptive that we would. Sufficiently disruptive that we would end up introducing new ledger keys end up introducing new ledger keys. End up introducing new ledger keys anyway for that so anyway for that so anyway for that so. That's my intuition at least that's my intuition at least that's my intuition at least. I see nico nodding so I think he I see nico nodding so I think he I see nico nodding so I think he. Probably agrees with that okay I think we're fine then if nobody okay I think we're fine then if nobody. Objects I mean objects I mean objects I mean I don't expect any of these changes to. I don't expect any of these changes to I don't expect any of these changes to be really objectionable. Be really objectionable be really objectionable I just think this is kind of one of. I just think this is kind of one of I just think this is kind of one of those those . Those better safe than sorry type of things better safe than sorry type of things. Better safe than sorry type of things that makes sense okay that makes sense okay. That makes sense okay second change use clean adam and manage second change use clean adam and manage. Second change use clean adam and manage offer success results this one was a change that I made the. this one was a change that I made the the main gap here was that like when i. The main gap here was that like when I the main gap here was that like when I originally. Originally originally when I originally drew up the cap when I originally drew up the cap. When I originally drew up the cap I had kind of assumed like oh we I had kind of assumed like oh we. I had kind of assumed like oh we should make the minimum changes that we should make the minimum changes that we. Should make the minimum changes that we would have to make to do this would have to make to do this. Would have to make to do this it would be less annoying for downstream it would be less annoying for downstream. It would be less annoying for downstream systems and stuff like that but then systems and stuff like that but then. Systems and stuff like that but then there were two realizations the first there were two realizations the first. There were two realizations the first realization was well then downstream realization was well then downstream. Realization was well then downstream systems need to know how to handle both systems need to know how to handle both. Systems need to know how to handle both kinds of claim atoms independently kinds of claim atoms independently. Kinds of claim atoms independently anyway so they will end up with code anyway so they will end up with code. Anyway so they will end up with code duplication duplication duplication and they'll need to know which ones to. And they'll need to know which ones to and they'll need to know which ones to expect in different scenarios. Expect in different scenarios expect in different scenarios and we'll have to maintain both in. And we'll have to maintain both in and we'll have to maintain both in Stellar core so it's like all the bad. Stellar core so it's like all the bad Stellar core so it's like all the bad and none of the good. And none of the good and none of the good the only catch was that it was like the only catch was that it was like. the only catch was that it was like slightly breaking for people who slightly breaking for people who. Slightly breaking for people who actually parse xdr results actually parse xdr results. Actually parse xdr results so my so when I my so when I that's a good question justin. That's a good question justin that's a good question justin when I wrote this I thought the answer. When I wrote this I thought the answer when I wrote this I thought the answer was like approximately no one I thought. Was like approximately no one I thought was like approximately no one I thought that it was basically just like horizon. That it was basically just like horizon that it was basically just like horizon and a few other like very specifically. And a few other like very specifically and a few other like very specifically written downstream tools like like. Written downstream tools like like written downstream tools like like Stellar expert. Stellar expert Stellar expert that were doing things like that that were doing things like that. That were doing things like that but it actually turns out that a lot of but it actually turns out that a lot of. But it actually turns out that a lot of the sdks actually had this kind of the sdks actually had this kind of . The sdks actually had this kind of this kind of like result parsing code this kind of like result parsing code. This kind of like result parsing code for trading operations rolled into them for trading operations rolled into them. For trading operations rolled into them I don't interact with the sdks that much. I don't interact with the sdks that much I don't interact with the sdks that much. So I wasn't aware of that so I wasn't aware of that so I wasn't aware of that. perhaps I would have changed the perhaps I would have changed the perhaps I would have changed the. Calculus a little bit on this but having calculus a little bit on this but having. Calculus a little bit on this but having already done the work I think it doesn't. Already done the work I think it doesn't already done the work I think it doesn't. But at this point i'd my expectation is but at this point i'd my expectation is but at this point i'd my expectation is. Basically anybody who's using one of basically anybody who's using one of basically anybody who's using one of. Those sdks and interacts with like those sdks and interacts with like those sdks and interacts with like. Trading operations probably needs to trading operations probably needs to trading operations probably needs to. Update prior to the release update prior to the release update prior to the release. Or prior to the vote excuse me or prior to the vote excuse me or prior to the vote excuse me. It needs so the sdk itself can handle it needs so the sdk itself can handle it needs so the sdk itself can handle. The xdr person and those people will the xdr person and those people will the xdr person and those people will. Need to upgrade their sdk exactly and need to upgrade their sdk exactly and need to upgrade their sdk exactly and. That will generally solve the problem that will generally solve the problem that will generally solve the problem. For people that don't have some custom for people that don't have some custom for people that don't have some custom. Xdr parser which it seems like it's not xdr parser which it seems like it's not xdr parser which it seems like it's not. A ton of downstream systems since most a ton of downstream systems since most a ton of downstream systems since most. People rely on sdks this sounds like a good precedent to set this sounds like a good precedent to set. That like if you're parsing xdr keep up that like if you're parsing xdr keep up that like if you're parsing xdr keep up. With protocol and the whole point of xcr is it's not and the whole point of xcr is it's not. Hard to do the upgrade but yeah hard to do the upgrade but yeah hard to do the upgrade but yeah. Just need to update your xcr files I like that precedent I like that precedent it's official. It's official it's official it's the official press don't know okay okay any other questions about that change. Looks like the next two are added new looks like the next two are added new results to revoke sponsorship mail forms. Results to revoke sponsorship mail forms results to revoke sponsorship mail forms. And changed validation results for and changed validation results for and changed validation results for. Revoke sponsorship to all be malformed you understand or should I you made one you understand or should I you made one. Of the changes I made the other of the changes I made the other of the changes I made the other. You can go ahead okay you can go ahead okay you can go ahead okay so basically. so basically so basically this this change is a bit of a this this change is a bit of a. this this change is a bit of a throwback actually throwback actually throwback actually. To to to to I guess that was protocol 15 or 14 to I guess that was protocol 15 or 14. To I guess that was protocol 15 or 14 when there was a a side issue with the when there was a a side issue with the. When there was a a side issue with the release and we had to make some release and we had to make some. Release and we had to make some retroactive changes and that became retroactive changes and that became. Retroactive changes and that became protocol 15. Protocol 15. Protocol 15. and when we did that we didn't want and when we did that we didn't want and when we did that we didn't want. To change the xdr to change the xdr to change the xdr because because because. That would have required us to basically that would have required us to basically. That would have required us to basically force everybody to update even more than. Force everybody to update even more than force everybody to update even more than. They had to like all their clients and they had to like all their clients and they had to like all their clients and. Everything like that everything like that everything like that we elected not to do that and so. We elected not to do that and so we elected not to do that and so basically there were validation results. Basically there were validation results basically there were validation results for revoked sponsorship that didn't. For revoked sponsorship that didn't for revoked sponsorship that didn't return malformed which is like a. Return malformed which is like a return malformed which is like a violation of our convention even though. Violation of our convention even though violation of our convention even though it doesn't matter in the grand scheme of. It doesn't matter in the grand scheme of it doesn't matter in the grand scheme of. Things things things so these two changes one adds the so these two changes one adds the. so these two changes one adds the malformed thing that was missing malformed thing that was missing. Malformed thing that was missing and the second one just retroactively and the second one just retroactively. And the second one just retroactively applies it to all things that were not applies it to all things that were not. Applies it to all things that were not correct as a protocol 15. Should have should have zero impact basically zero impact basically zero impact basically.  okay any anyone have any thoughts okay any anyone have any thoughts questions. All right the next one is changed all right the next one is changed to m32t in liquidity pool use count. Yeah I can take this this is this is yeah I can take this this is this is following. Following following our convention of using our convention of using our convention of using. signed ins and the xdr and we like signed ins and the xdr and we like signed ins and the xdr and we like. This this this this number will never get this number will never get . This number will never get close to you when like even in 32 max so close to you when like even in 32 max so. Close to you when like even in 32 max so like like like this just made sense david you're muted if you're trying to. David you're muted if you're trying to talk talk talk why it's not inconceivable to have. why it's not inconceivable to have why it's not inconceivable to have two billion trust lines. Two billion trust lines two billion trust lines and so it makes me pretty and so it makes me pretty. And so it makes me pretty nervous that you changed signed unsigned nervous that you changed signed unsigned. Nervous that you changed signed unsigned but none of the like none of the actual but none of the like none of the actual. But none of the like none of the actual range checks seem to have changed range checks seem to have changed. Range checks seem to have changed so the reason so the reason so the reason this is so an account can have a trust. This is so an account can have a trust this is so an account can have a trust line right but when it when it wants to. Line right but when it when it wants to line right but when it when it wants to deposit into a pool it has to create. Deposit into a pool it has to create deposit into a pool it has to create you know a pool share trust line . you know a pool share trust line you know a pool share trust line so you can't have more than. So you can't have more than so you can't have more than I don't know I'm not sure what the exact. I don't know I'm not sure what the exact I don't know I'm not sure what the exact. Number is but you can't have more than a number is but you can't have more than a. Number is but you can't have more than a couple hundred full share trust lines couple hundred full share trust lines. Couple hundred full share trust lines right right right why not you can have why not you can have. Why not you can have just do it you can subscribe just do it you can subscribe just do it you can subscribe. If you have a billion accounts that are if you have a billion accounts that are if you have a billion accounts that are. Or if you have three billion accounts or if you have three billion accounts or if you have three billion accounts. That all own shares in the same pool that all own shares in the same pool that all own shares in the same pool. Wouldn't you that will have its own wouldn't you that will have its own wouldn't you that will have its own. Trust lines trust lines trust lines right this is on the trust lines like the pool. This is on the trust lines like the pool share trust lines not on the pool itself. Share trust lines not on the pool itself share trust lines not on the pool itself. So it's like a per account counter so it's like a per account counter so it's like a per account counter. Yeah sorry okay maybe say what this yeah sorry okay maybe say what this yeah sorry okay maybe say what this. What is a count what is the use of a what is a count what is the use of a what is a count what is the use of a. Truss line what does this thing actually truss line what does this thing actually. Truss line what does this thing actually count so this is making so we have this so this is making so we have this. Requirement where you can't delete requirement where you can't delete requirement where you can't delete . What is an an asset trust line what is an an asset trust line what is an an asset trust line. Until the pool share trust line is until the pool share trust line is until the pool share trust line is. Deleted deleted deleted right and this this enforces that right and this this enforces that. Right and this this enforces that sorry sorry totally makes sense yes this sorry sorry totally makes sense yes this. Sorry sorry totally makes sense yes this change is innocuous yeah completely misunderstood sorry. Yeah completely misunderstood sorry about that about that about that no problem I feel like that's what we're. No problem I feel like that's what we're no problem I feel like that's what we're. Here for it's just like make sure that here for it's just like make sure that here for it's just like make sure that. These things are clear and that there's these things are clear and that there's these things are clear and that there's. Not some not some not some something that we're overlooking okay the next one is added new liquidity. Okay the next one is added new liquidity pool deposit pool deposit pool deposit result which is the result is line full. this was just a small bug in the xdr this was just a small bug in the xdr the the pseudo code already. The the pseudo code already the the pseudo code already considered the case where. Considered the case where considered the case where you could get line full upon deposit. You could get line full upon deposit you could get line full upon deposit which let me just look at this for. Which let me just look at this for which let me just look at this for one second to make sure I'm about to say. One second to make sure I'm about to say one second to make sure I'm about to say. The right thing the right thing the right thing oh sorry this is oh sorry this is. Oh sorry this is yes mindful yes mindful yes mindful it was already possible that you would. It was already possible that you would it was already possible that you would have like the maximum number of pool. Have like the maximum number of pool have like the maximum number of pool shares that you could hold relative to. Shares that you could hold relative to shares that you could hold relative to your limit. Your limit your limit and then when you deposit and then when you deposit and then when you deposit. You you you wait wait wait let me read this for once yes this is let me read this for once yes this is. Let me read this for once yes this is deposit deposit deposit sorry about that little confusion yes. Sorry about that little confusion yes sorry about that little confusion yes you already have the maximum number. you already have the maximum number you already have the maximum number of of pool shares that you're willing. Of of pool shares that you're willing of of pool shares that you're willing. To hold you deposit you can't hold to hold you deposit you can't hold to hold you deposit you can't hold. The pool shares that you would have the pool shares that you would have the pool shares that you would have. Received until you get mine full it was received until you get mine full it was received until you get mine full it was. Already handled in the pseudocode already handled in the pseudocode already handled in the pseudocode. Missing from the xdr so just a missing from the xdr so just a missing from the xdr so just a. Correction again that just seems to again that just seems to implement expected behavior as far as i. Implement expected behavior as far as I implement expected behavior as far as I can tell. Can tell can tell is there I mean well I think this is a is there I mean well I think this is a. Is there I mean well I think this is a more general question I feel like at more general question I feel like at. More general question I feel like at some point we may want to some point we may want to. Some point we may want to revise what the use of the revise what the use of the revise what the use of the. Limit is on trust lines limit is on trust lines limit is on trust lines let's not go down that rabbit hole. Let's not go down that rabbit hole let's not go down that rabbit hole I totally agree with you on both. I totally agree with you on both I totally agree with you on both sentiments that we probably need to talk. Sentiments that we probably need to talk sentiments that we probably need to talk. About that and also that we probably about that and also that we probably about that and also that we probably. Don't want to talk about it right now don't want to talk about it right now don't want to talk about it right now. Nico and I have been talking about it a nico and I have been talking about it a nico and I have been talking about it a. Bit actually and it it turns out that bit actually and it it turns out that bit actually and it it turns out that. There's some tricky tricky details when there's some tricky tricky details when there's some tricky tricky details when. You try to change how this works plus line limits plus line limits we'll get back to that. Next make liquidity pool deposit and next make liquidity pool deposit and withdraw. Withdraw withdraw semantic match the semantics match semantic match the semantics match. Semantic match the semantics match offers offers offers yeah this was a yeah this was a . Yeah this was a this was just like a this was just like a this was just like a . So just a design flaw in the original so just a design flaw in the original so just a design flaw in the original. Thing you know our goal has been to make thing you know our goal has been to make. Thing you know our goal has been to make to make to make to make you know liquidity pools work. You know liquidity pools work you know liquidity pools work exactly analogous to offers in as many. Exactly analogous to offers in as many exactly analogous to offers in as many ways as possible. Ways as possible ways as possible and this was just a gap there where and this was just a gap there where. And this was just a gap there where basically like basically like basically like we were ignoring the fact that there's. We were ignoring the fact that there's we were ignoring the fact that there's asymmetry and awe semantics for. Asymmetry and awe semantics for asymmetry and awe semantics for for offers where you can. for offers where you can for offers where you can delete even if you're not fully. Delete even if you're not fully delete even if you're not fully authorized but you can't create when you. Authorized but you can't create when you authorized but you can't create when you. Are fully when you're not fully are fully when you're not fully are fully when you're not fully. Authorized authorized authorized but for but for but for liquidity pools we were just saying like. Liquidity pools we were just saying like liquidity pools we were just saying like. If you're not fully authorized you can't if you're not fully authorized you can't. If you're not fully authorized you can't do anything do anything do anything and that doesn't quite make sense. And that doesn't quite make sense and that doesn't quite make sense so yeah so I believe that the. Yeah so I believe that the so so so one like the I think the biggest one like the I think the biggest . One like the I think the biggest change that you can withdraw if you're change that you can withdraw if you're. Change that you can withdraw if you're in the in the in the authorized to maintain liability state. Authorized to maintain liability state authorized to maintain liability state right so you can it's the same thing as. Right so you can it's the same thing as right so you can it's the same thing as pulling offers right. Pulling offers right pulling offers right and and and if I'm not sure if this is specified. If I'm not sure if this is specified if I'm not sure if this is specified here but if you're in the unauthorized. Here but if you're in the unauthorized here but if you're in the unauthorized state. State state your pool shares are redeemed your pool shares are redeemed your pool shares are redeemed. Automatically automatically automatically right so you can't be in a unauthorized. Right so you can't be in a unauthorized right so you can't be in a unauthorized state with pool shares and you're. State with pool shares and you're state with pool shares and you're allowed to pull pool shares if you're in. Allowed to pull pool shares if you're in allowed to pull pool shares if you're in. The off maintained liability state the off maintained liability state the off maintained liability state. And you can't but you can't deposit and you can't but you can't deposit and you can't but you can't deposit . Which is I think was the old behavior as which is I think was the old behavior as. Which is I think was the old behavior as well you can't deposit if you're not well you can't deposit if you're not. Well you can't deposit if you're not authorized authorized authorized so just to check my understanding this. So just to check my understanding this so just to check my understanding this means that for example. Means that for example means that for example if I am an if I am an if I am an issuer. Issuer issuer of an author required asset and I don't of an author required asset and I don't. Of an author required asset and I don't want there to be an asset between like want there to be an asset between like. Want there to be an asset between like my mark my market between my asset and my mark my market between my asset and. My mark my market between my asset and say asset x I could basically revoke say asset x I could basically revoke. Say asset x I could basically revoke authorization from everyone who's authorization from everyone who's. Authorization from everyone who's contributed to the liquidity pool and contributed to the liquidity pool and. Contributed to the liquidity pool and that would just automatically kill the that would just automatically kill the. That would just automatically kill the liquidity pool is that right liquidity pool is that right. Liquidity pool is that right okay okay okay yeah and that's the intention that's the. And that's the intention that's the intended behavior great next is added new results to allow. Great next is added new results to allow trust and set trustline flags trust and set trustline flags. Trust and set trustline flags which is low reserve and clarify what which is low reserve and clarify what. Which is low reserve and clarify what happens with zero amount yeah one sec yeah one sec . Let's see sorry I need to take a look at this sorry I need to take a look at this. Change so I believe that this change is so I believe that this change is specifying. Specifying specifying so originally in the in the original so originally in the in the original. so originally in the in the original invitation we assumed that the revoke invitation we assumed that the revoke. Invitation we assumed that the revoke was guaranteed to work was guaranteed to work. Was guaranteed to work for well when you were like the for well when you were like the. for well when you were like the redeemed from the pollution trust line redeemed from the pollution trust line. Redeemed from the pollution trust line is guaranteed to work is guaranteed to work. Is guaranteed to work when you revoke off but there are when you revoke off but there are. when you revoke off but there are some some some cases where this isn't true . Cases where this isn't true cases where this isn't true specifically specifically. Specifically if if if the account that needs to sponsor the the account that needs to sponsor the. The account that needs to sponsor the claimable balance is in itself being is claimable balance is in itself being is. Claimable balance is in itself being is this in itself is in a sponsorship this in itself is in a sponsorship. This in itself is in a sponsorship sandwich sandwich we can't guarantee the sandwich sandwich we can't guarantee the. Sandwich sandwich we can't guarantee the state of the sponsor state of the sponsor. State of the sponsor so it's possible to hit the low reserve so it's possible to hit the low reserve. So it's possible to hit the low reserve or too many sponsoring or too many sponsoring. Or too many sponsoring error codes so we this is adding that error codes so we this is adding that. error codes so we this is adding that and is there there might be a second and is there there might be a second. And is there there might be a second change here change here change here yeah and the other change is that. Yeah and the other change is that yeah and the other change is that it's you you're not always it's always. It's you you're not always it's always it's you you're not always it's always guaranteed that a claimable bouncer will. Guaranteed that a claimable bouncer will guaranteed that a claimable bouncer will. Be created on revoke for example if the be created on revoke for example if the be created on revoke for example if the. the claimant will be the issuer or if the claimant will be the issuer or if. the claimant will be the issuer or if the amount being withdrawn is zero for the amount being withdrawn is zero for. The amount being withdrawn is zero for that asset so this just specifies that asset so this just specifies . That asset so this just specifies those those cases I'm actually confused I didn't. I'm actually confused I didn't understand understand understand what this does how do how do claimable. What this does how do how do claimable what this does how do how do claimable balances come into play here. Balances come into play here balances come into play here so when so when so when . When when when you revoke you revoke you revoke on a trust line and that trust line. On a trust line and that trust line on a trust line and that trust line had had deposited into a liquidity pool. Had had deposited into a liquidity pool had had deposited into a liquidity pool right. Right right the way this works is the way this works is the way this works is. Those pool shares will be withdrawn those pool shares will be withdrawn those pool shares will be withdrawn. It will be redeemed automatically it will be redeemed automatically it will be redeemed automatically. and then it's but we can't just we and then it's but we can't just we and then it's but we can't just we. Can't guarantee like originally we can't guarantee like originally we can't guarantee like originally we. Wanted to send it back to the the trust wanted to send it back to the the trust wanted to send it back to the the trust. Line right line right line right but we can't always do that because you but we can't always do that because you. But we can't always do that because you know the trust line might be full know the trust line might be full. Know the trust line might be full so the solution here is just create a so the solution here is just create a. So the solution here is just create a claimable balance for that claimable balance for that. Claimable balance for that for that asset and then the owner of for that asset and then the owner of. For that asset and then the owner of that trust line can come in and claim it that trust line can come in and claim it. That trust line can come in and claim it whenever they want to whenever they want to. Whenever they want to and the reserve for the claimable and the reserve for the claimable. And the reserve for the claimable balance comes from the previous balance comes from the previous. Balance comes from the previous trust line for the trust line for the trust line for the. Pool shares exactly yeah pool shares exactly yeah pool shares exactly yeah but so yeah. But so yeah but so yeah it seems like a little bit of a foot gun it seems like a little bit of a foot gun. It seems like a little bit of a foot gun though because now though because now though because now. This is like a this is like a case this is like a this is like a case this is like a this is like a case. That's like not going to happen very that's like not going to happen very that's like not going to happen very. Often and when it does happen like often and when it does happen like often and when it does happen like. Probably a lot of wallets and other probably a lot of wallets and other probably a lot of wallets and other. Software is like not going to do the software is like not going to do the software is like not going to do the. Right thing or it's just you're not right thing or it's just you're not right thing or it's just you're not. Going to notice it going to notice it going to notice it are you talking about are you talking about. Are you talking about like managing claimable balances like managing claimable balances. Like managing claimable balances well sorry this is a situation where well sorry this is a situation where. Well sorry this is a situation where usually you just get the funds back and usually you just get the funds back and. Usually you just get the funds back and and like you know in weird edge cases and like you know in weird edge cases. And like you know in weird edge cases you get a claimable balance instead you get a claimable balance instead. You get a claimable balance instead sorry I wasn't clear we create camel sorry I wasn't clear we create camel. Sorry I wasn't clear we create camel bounce every time we don't even attempt bounce every time we don't even attempt. Bounce every time we don't even attempt to send it back to send it back to send it back. Oh I see okay yeah yeah that was the oh I see okay yeah yeah that was the oh I see okay yeah yeah that was the. Game game game okay so that's actually good so it's okay so that's actually good so it's. Okay so that's actually good so it's uniform behavior it's a little bit more uniform behavior it's a little bit more. Uniform behavior it's a little bit more complicated than just refunding it complicated than just refunding it. Complicated than just refunding it but it at least it doesn't have this but it at least it doesn't have this. But it at least it doesn't have this edge case edge case edge case yeah yeah yeah. And we acknowledge that this is like and we acknowledge that this is like and we acknowledge that this is like. Really really quirky really really quirky really really quirky like siddharth and I spent many many. Like siddharth and I spent many many like siddharth and I spent many many hours on the phone trying to figure out. Hours on the phone trying to figure out hours on the phone trying to figure out if there was a way to not do this. If there was a way to not do this if there was a way to not do this and it turns out that basically the crux. And it turns out that basically the crux and it turns out that basically the crux. Of the issue here is like you can do you of the issue here is like you can do you. Of the issue here is like you can do you can avoid this issue when you have can avoid this issue when you have. Can avoid this issue when you have offers involved because offers have offers involved because offers have. Offers involved because offers have fixed liabilities and they never grow fixed liabilities and they never grow. Fixed liabilities and they never grow or they only grow upon like a manage or they only grow upon like a manage. Or they only grow upon like a manage offer operation that you can control but offer operation that you can control but. Offer operation that you can control but here like imagine I deposit into a here like imagine I deposit into a. Here like imagine I deposit into a liquidity pool liquidity pool liquidity pool somebody immediately trades it into some. Somebody immediately trades it into some somebody immediately trades it into some. Crazy price and now you can't withdraw crazy price and now you can't withdraw crazy price and now you can't withdraw. so it's very easy to get into like a so it's very easy to get into like a. So it's very easy to get into like a unwithdrawable state so it would have unwithdrawable state so it would have. Unwithdrawable state so it would have been great if we knew how to avoid this been great if we knew how to avoid this. Been great if we knew how to avoid this but it is all we could do but it is all we could do. But it is all we could do is this gonna be mysterious to is this gonna be mysterious to. Is this gonna be mysterious to developers that they're getting these developers that they're getting these. Developers that they're getting these claimable balances instead of claimable balances instead of. Claimable balances instead of direct transfers of funds direct transfers of funds. Direct transfers of funds I would think it will be kind of I would think it will be kind of. I would think it will be kind of mysterious mysterious mysterious I think there could be I mean. I think there could be I mean I think there could be I mean if we were starting from scratch I feel. If we were starting from scratch I feel if we were starting from scratch I feel like a better design would be to say you. Like a better design would be to say you like a better design would be to say you. Can't have more than like you know two can't have more than like you know two can't have more than like you know two. To the 63 of any asset and there's no to the 63 of any asset and there's no to the 63 of any asset and there's no. There's the limits are either there's there's the limits are either there's there's the limits are either there's. Only only only a trust line or like we get rid of a trust line or like we get rid of. A trust line or like we get rid of limits on trust lines and whatever but I limits on trust lines and whatever but i. Limits on trust lines and whatever but I mean like given where we're starting mean like given where we're starting. Mean like given where we're starting like maybe this is reasonable like maybe this is reasonable. Like maybe this is reasonable probably the least bad like situation probably the least bad like situation. Probably the least bad like situation a lot of weird quirky things it turns a lot of weird quirky things it turns. A lot of weird quirky things it turns out could have been avoided with asset out could have been avoided with asset. Out could have been avoided with asset issuance limits like david was saying issuance limits like david was saying. Issuance limits like david was saying it could have helped in a whole bunch it could have helped in a whole bunch. it could have helped in a whole bunch of different avenues actually of different avenues actually. Of different avenues actually but that's not the world we reside in but that's not the world we reside in. But that's not the world we reside in but maybe in the future it will be but maybe in the future it will be. But maybe in the future it will be so and by the way I just did a so and by the way I just did a. So and by the way I just did a looked at the ledger I think yesterday looked at the ledger I think yesterday. Looked at the ledger I think yesterday and it was like thousands of accounts at and it was like thousands of accounts at. And it was like thousands of accounts at this point have this point have this point have. Some whether some whether some whether you have like more than in 64 you have like more than in 64. You have like more than in 64 max max max it's actually a thing that people do now. It's actually a thing that people do now it's actually a thing that people do now. It was it was in the tens the last it was it was in the tens the last it was it was in the tens the last. Time I checked which I think was in time I checked which I think was in time I checked which I think was in. March or april when we were issuing march or april when we were issuing march or april when we were issuing. Accounts accounts accounts tons of assets basically tons of assets basically tons of assets basically. And now it's thousands you're saying and now it's thousands you're saying and now it's thousands you're saying. Yeah yeah yeah hug hug hug maybe we should say that there's there maybe we should say that there's there. Maybe we should say that there's there should be a flag on the asset saying should be a flag on the asset saying. Should be a flag on the asset saying whether you can whether you can whether you can. Flag an asset saying you can't create flag an asset saying you can't create flag an asset saying you can't create. More than two to the 63 of them and then more than two to the 63 of them and then. More than two to the 63 of them and then you get access to all these good you get access to all these good. You get access to all these good features only when that flag is set or features only when that flag is set or. Features only when that flag is set or something but anyway we are where we are something but anyway we are where we are. Something but anyway we are where we are so I'm just wondering if there's this when. I'm just wondering if there's this when I look at this I'm like oh shoot is I look at this I'm like oh shoot is. I look at this I'm like oh shoot is there some education does this imply there some education does this imply. There some education does this imply that there's some sort of education that there's some sort of education. That there's some sort of education clarification outreach that needs to clarification outreach that needs to. Clarification outreach that needs to happen so that people understand this happen so that people understand this. Happen so that people understand this quirk quirk quirk I mean one thing we could do is we like. I mean one thing we could do is we like I mean one thing we could do is we like this is not really a protocol discussion. This is not really a protocol discussion this is not really a protocol discussion. But I agree that like education is a but I agree that like education is a but I agree that like education is a. Part of what we do and so it's it's not part of what we do and so it's it's not part of what we do and so it's it's not. Necessarily something we should ignore necessarily something we should ignore necessarily something we should ignore. It would not be unreasonable to create it would not be unreasonable to create it would not be unreasonable to create. Like a tiny javascript program or python like a tiny javascript program or python. Like a tiny javascript program or python program or whatever uses one of the program or whatever uses one of the. Program or whatever uses one of the sdks and basically what it does is it sdks and basically what it does is it. Sdks and basically what it does is it goes it connects to the the test net goes it connects to the the test net. Goes it connects to the the test net you set you pointed at a wallet and you set you pointed at a wallet and. You set you pointed at a wallet and basically it like goes through the steps basically it like goes through the steps. Basically it like goes through the steps of of of making this happen making this happen. Making this happen and basically we can give it to wallet and basically we can give it to wallet. And basically we can give it to wallet developers as a tool it's like hey like developers as a tool it's like hey like. Developers as a tool it's like hey like this is we want to make sure you handle this is we want to make sure you handle. This is we want to make sure you handle this is something that can happen this is something that can happen. This is something that can happen like run this program if your wallet like run this program if your wallet. Like run this program if your wallet works you're good to go if it doesn't works you're good to go if it doesn't. Works you're good to go if it doesn't you have a bug the other thing i'll you have a bug the other thing i'll. You have a bug the other thing i'll say is that like this like the claimable say is that like this like the claimable. Say is that like this like the claimable balances you receive will look exactly balances you receive will look exactly. Balances you receive will look exactly like claimable balances you would like claimable balances you would. Like claimable balances you would receive in any other setting so wallets receive in any other setting so wallets. Receive in any other setting so wallets that handle that that handle that that handle that. Will probably do the right thing even if will probably do the right thing even if. Will probably do the right thing even if they might not reveal it to users in the. They might not reveal it to users in the they might not reveal it to users in the. Most most most like sensible way yeah I guess like the the the yeah I guess like the the the. Question here is more like yeah what's question here is more like yeah what's question here is more like yeah what's. The level of support of for claimable the level of support of for claimable the level of support of for claimable. Balances in the ecosystem today I think balances in the ecosystem today I think balances in the ecosystem today I think. It's much better than it's much better than it's much better than like even like two months ago. Like even like two months ago like even like two months ago but I don't know where we are yeah i. But I don't know where we are yeah I but I don't know where we are yeah I feel like a few months ago there was. Feel like a few months ago there was feel like a few months ago there was zero support and now there's increasing. Zero support and now there's increasing zero support and now there's increasing support because people understand what. Support because people understand what support because people understand what claimable balances are. Claimable balances are claimable balances are I mean unlike this time right where. I mean unlike this time right where I mean unlike this time right where we're spending time with an adoption. We're spending time with an adoption we're spending time with an adoption plan that was no. Plan that was no plan that was no we didn't really have a clear we didn't really have a clear. We didn't really have a clear sort of sort of sort of and this is not related to this. And this is not related to this and this is not related to this discussion earlier to this group but i. Discussion earlier to this group but I discussion earlier to this group but I was just saying like we didn't have a. Was just saying like we didn't have a was just saying like we didn't have a clear adoption plan for claimable. Clear adoption plan for claimable clear adoption plan for claimable balances so it took a little longer for. Balances so it took a little longer for balances so it took a little longer for people to catch on. People to catch on people to catch on but but but you know maybe maybe now you know maybe maybe now. You know maybe maybe now claimable balance support gets folded claimable balance support gets folded. Claimable balance support gets folded into the education about liquidity pools into the education about liquidity pools. Into the education about liquidity pools given that this is a fact  . Okay well that's very helpful for me okay well that's very helpful for me okay well that's very helpful for me. I know it's not strictly protocol I know it's not strictly protocol I know it's not strictly protocol. Discussion but thank you and I believe we're at we are where we and I believe we're at we are where we. Landed at this is what it is this is the landed at this is what it is this is the. Landed at this is what it is this is the world we live in this is okay world we live in this is okay. World we live in this is okay all right then all right then all right then next added missing validation conditions. Next added missing validation conditions next added missing validation conditions. For liquidity pool deposit this was a another bug fix but a this was a another bug fix but a. Pretty a pretty bad bug fix or pretty pretty a pretty bad bug fix or pretty. Pretty a pretty bad bug fix or pretty bad bug bad bug bad bug basically would have been possible to. basically would have been possible to basically would have been possible to. Do things like do things like do things like I mean submit very nonsensical. I mean submit very nonsensical I mean submit very nonsensical I guess very nonsensical . I guess very nonsensical I guess very nonsensical operations where you could just say like. Operations where you could just say like operations where you could just say like. Hey like you know my min price is bigger hey like you know my min price is bigger. Hey like you know my min price is bigger than my max price so it's impossible to than my max price so it's impossible to. Than my max price so it's impossible to succeed succeed succeed but you would still actually go. but you would still actually go but you would still actually go through you'd make it through validation. Through you'd make it through validation through you'd make it through validation. You'd actually get to a bot time you'd you'd actually get to a bot time you'd you'd actually get to a bot time you'd. Actually do some of the apply stuff only actually do some of the apply stuff only. Actually do some of the apply stuff only to find out quite through the way of the. To find out quite through the way of the to find out quite through the way of the. Work work work that you would fail that you would fail that you would fail unconditionally. Unconditionally unconditionally so so so just a bug fix that just makes things just a bug fix that just makes things. Just a bug fix that just makes things sane great great fixed incorrect error specification for. Fixed incorrect error specification for fixed incorrect error specification for path payments. Oh yeah I remember this one oh yeah I remember this one probably though I would not be surprised. Probably though I would not be surprised probably though I would not be surprised. If people have things to say about this if people have things to say about this if people have things to say about this. One one one just because it is just because it is just because it is it was very hard to express. It was very hard to express it was very hard to express what actually happens what actually happens. What actually happens the original draft of this that we the original draft of this that we. The original draft of this that we accepted on like june accepted on like june accepted on like june. 23rd or something like that 23rd or something like that 23rd or something like that. basically what it said is like if you basically what it said is like if you. Basically what it said is like if you make a path payment make a path payment make a path payment. And and and it fails because of stuff happening in it fails because of stuff happening in. It fails because of stuff happening in the liquidity pools you would get the the liquidity pools you would get the. The liquidity pools you would get the exact same result as if the liquidity exact same result as if the liquidity. Exact same result as if the liquidity pools had never existed at all pools had never existed at all. Pools had never existed at all but this is like but this is like but this is like. It doesn't take a lot of thinking to it doesn't take a lot of thinking to it doesn't take a lot of thinking to. Think like this is actually probably not think like this is actually probably not. Think like this is actually probably not possible possible possible because for example like what if. because for example like what if because for example like what if like imagine you know the original like. Like imagine you know the original like like imagine you know the original like the original draft of the original. The original draft of the original the original draft of the original language I should say it's like in the. Language I should say it's like in the language I should say it's like in the first hop you know you're going from a. First hop you know you're going from a first hop you know you're going from a to b and you have both a liquidity pool. To b and you have both a liquidity pool to b and you have both a liquidity pool and an order book and you can do it. And an order book and you can do it and an order book and you can do it through either path. Through either path through either path but then on the second half but then on the second half. But then on the second half it fails because of something to do with it fails because of something to do with. It fails because of something to do with the the the liquidity pools liquidity pools. Liquidity pools and then it's like well actually if I in and then it's like well actually if I in. And then it's like well actually if I in the first path if I had actually take or. The first path if I had actually take or the first path if I had actually take or. Sorry in the first hop if I had taken sorry in the first hop if I had taken sorry in the first hop if I had taken. The path to the liquidity pool I'm not the path to the liquidity pool I'm not the path to the liquidity pool I'm not. Necessarily going to end up in the same necessarily going to end up in the same necessarily going to end up in the same. State as if I had taken the path to the state as if I had taken the path to the state as if I had taken the path to the. Other side other side other side and then I'm not necessarily going to and then I'm not necessarily going to. And then I'm not necessarily going to get the same error code regardless get the same error code regardless. Get the same error code regardless so things get pretty got pretty hairy so things get pretty got pretty hairy. So things get pretty got pretty hairy and it was all about just like and it was all about just like. And it was all about just like this change was all about just like this change was all about just like. This change was all about just like designing or not even designing defining designing or not even designing defining. Designing or not even designing defining a set of rules that we could actually a set of rules that we could actually. A set of rules that we could actually follow follow follow to make it predictable what kind of. To make it predictable what kind of to make it predictable what kind of error codes you would get. Error codes you would get error codes you would get I don't know if we need to get into the. I don't know if we need to get into the I don't know if we need to get into the details of like how it actually does. Details of like how it actually does details of like how it actually does that that. That because like from any user's perspective because like from any user's perspective. Because like from any user's perspective they're just error codes but it was all they're just error codes but it was all. They're just error codes but it was all about making a specification that we about making a specification that we. About making a specification that we could actually follow and check that we could actually follow and check that we. Could actually follow and check that we did correctly when implementing starcore we learned a lot while dealing with this. We learned a lot while dealing with this problem though actually that was problem though actually that was . Problem though actually that was in that sense it was really enlightening in that sense it was really enlightening. In that sense it was really enlightening to try to understand this and try to to try to understand this and try to. To try to understand this and try to figure out how to write the right stuff figure out how to write the right stuff. Figure out how to write the right stuff but I don't know if it's very but I don't know if it's very. But I don't know if it's very enlightening to get into the weeds about enlightening to get into the weeds about. Enlightening to get into the weeds about how it works how it works how it works I'm just curious can you give an example. I'm just curious can you give an example I'm just curious can you give an example. How is it that a liquidity pool can make how is it that a liquidity pool can make. How is it that a liquidity pool can make a path payment fail or you're saying. A path payment fail or you're saying a path payment fail or you're saying like it would have failed without the. Like it would have failed without the like it would have failed without the liquidity pool it also fails with the. Liquidity pool it also fails with the liquidity pool it also fails with the liquidity pool. Liquidity pool liquidity pool but therefore give the same error but therefore give the same error. But therefore give the same error message if you didn't have liquidity message if you didn't have liquidity. Message if you didn't have liquidity pool or just an example would help here pool or just an example would help here. Pool or just an example would help here yes so there is an example here but I yes so there is an example here but i. Yes so there is an example here but I can definitely give you an example I can definitely give you an example. I can definitely give you an example that might be more pertinent that might be more pertinent. that might be more pertinent you could well actually you know what you could well actually you know what. You could well actually you know what I'm gonna mess it up if I try and do it I'm gonna mess it up if I try and do it. I'm gonna mess it up if I try and do it off the top of my head let me look at off the top of my head let me look at. Off the top of my head let me look at the example that I wrote here and just the example that I wrote here and just. The example that I wrote here and just walk through that walk through that walk through that. give me 10 seconds to review it unfortunately it unfortunately it unfortunately it doesn't give the. unfortunately it doesn't give the unfortunately it doesn't give the example of the weird thing happening so. Example of the weird thing happening so example of the weird thing happening so you've put me on the spot but I'm. you've put me on the spot but I'm you've put me on the spot but I'm gonna try to produce an example for you. Gonna try to produce an example for you gonna try to produce an example for you . Okay here's an example you have no okay here's an example you have no order book at all. Order book at all order book at all in this case it's a single hop in this case it's a single hop. In this case it's a single hop but you do have a but you do have a but you do have a. a liquidity pool the liquidity pool a liquidity pool the liquidity pool a liquidity pool the liquidity pool. Has some liquidity in it but not enough has some liquidity in it but not enough has some liquidity in it but not enough. To give you a good enough price when you to give you a good enough price when you. To give you a good enough price when you say no no order so the path payment say no no order so the path payment. Say no no order so the path payment meaning is from a to b there's two meaning is from a to b there's two. Meaning is from a to b there's two assets involved and there's currently no assets involved and there's currently no. Assets involved and there's currently no offer no traditional offers right no offer no traditional offers right no. Offer no traditional offers right no traditional offers exactly traditional offers exactly. Traditional offers exactly there is a liquidity it's very small there is a liquidity it's very small. There is a liquidity it's very small and so there's a ton of slippage when and so there's a ton of slippage when. and so there's a ton of slippage when you trade against it and as a you trade against it and as a. You trade against it and as a consequence you you like you can do consequence you you like you can do. Consequence you you like you can do the hop you can do the conversion you the hop you can do the conversion you. The hop you can do the conversion you want to do but you don't get a good want to do but you don't get a good. Want to do but you don't get a good price price price and so and so and so in the old world. In the old world in the old world like you know if you only went through like you know if you only went through. Like you know if you only went through the path payment like if you only went the path payment like if you only went. The path payment like if you only went through the traditional order book you through the traditional order book you. Through the traditional order book you would have gotten too few offers would have gotten too few offers. Would have gotten too few offers but now you go through the liquidity but now you go through the liquidity. But now you go through the liquidity pool side you actually can do the pool side you actually can do the. Pool side you actually can do the conversion so too few offers is not a conversion so too few offers is not a. Conversion so too few offers is not a factor but then you get to the end and factor but then you get to the end and. Factor but then you get to the end and you don't satisfy the the constru the you don't satisfy the the constru the. You don't satisfy the the constru the price constraints on the path payment price constraints on the path payment. Price constraints on the path payment and so the original language said like and so the original language said like. And so the original language said like well I should have returned to the too well I should have returned to the too. Well I should have returned to the too few offers few offers few offers but that's obviously not something that. But that's obviously not something that but that's obviously not something that I could even like. I could even like I could even like if in a long multi-hop payment it might if in a long multi-hop payment it might. If in a long multi-hop payment it might not even be possible for me to figure not even be possible for me to figure. Not even be possible for me to figure out what I should have returned without out what I should have returned without. Out what I should have returned without having to go and rerun it all in the having to go and rerun it all in the. Having to go and rerun it all in the absence of liquidity pools which is absence of liquidity pools which is. Absence of liquidity pools which is obviously super inefficient for no gains so so. Yeah okay and so to be totally clear yeah okay and so to be totally clear yeah okay and so to be totally clear. There's no such thing as a path payment there's no such thing as a path payment there's no such thing as a path payment. That would have succeeded except for the that would have succeeded except for the. That would have succeeded except for the liquidity pool liquidity pool liquidity pool. There's no way the liquidity pool could there's no way the liquidity pool could there's no way the liquidity pool could. Make something fail it would otherwise make something fail it would otherwise make something fail it would otherwise. Have succeeded right have succeeded right have succeeded right  .  I think that is correct yes okay because I think that is correct yes okay because. I think that is correct yes okay because you always get better prices yeah with you always get better prices yeah with. You always get better prices yeah with the liquidity so it's another option so the liquidity so it's another option so. The liquidity so it's another option so it's not it's not it's not okay okay okay okay. Okay okay I do believe that is correct yeah I think the first time I said it I yeah I think the first time I said it i. Said something that would have implied said something that would have implied said something that would have implied. That that wasn't true but that's right I that that wasn't true but that's right i. That that wasn't true but that's right I think that's where I was getting think that's where I was getting. Think that's where I was getting confused confused confused so basically now so basically now. So basically now you won't get too few offers because you won't get too few offers because. You won't get too few offers because that's doesn't make sense because it's a that's doesn't make sense because it's a. That's doesn't make sense because it's a liquidity pool not an order not an order. Liquidity pool not an order not an order liquidity pool not an order not an order. Book right you got some other error book right you got some other error book right you got some other error. It is still possible to get too few it is still possible to get too few it is still possible to get too few. Offers actually even in the case offers actually even in the case offers actually even in the case. Of the liquidity pool of the liquidity pool of the liquidity pool like if the look. like if the look like if the look this can only I don't remember for which this can only I don't remember for which. This can only I don't remember for which this can only happen for path payment this can only happen for path payment. This can only happen for path payment strict receive strict receive strict receive. imagine that you have a liquidity imagine that you have a liquidity imagine that you have a liquidity. Pool that has a hundred dollars in it pool that has a hundred dollars in it pool that has a hundred dollars in it. And 115 euros in it that's not like and 115 euros in it that's not like and 115 euros in it that's not like. Exactly the exchange rate but it's exactly the exchange rate but it's exactly the exchange rate but it's. Pretty close so let's pretend pretty close so let's pretend pretty close so let's pretend . And and then I sent a pass payment and and then I sent a pass payment and and then I sent a pass payment. Strict receive strict receive strict receive where the destination receives where the destination receives. Where the destination receives two hundred dollars two hundred dollars two hundred dollars. and I'm trying to send euros this is and I'm trying to send euros this is and I'm trying to send euros this is. Obviously impossible in the liquidity obviously impossible in the liquidity obviously impossible in the liquidity. Pool there aren't two hundred dollars to pool there aren't two hundred dollars to. Pool there aren't two hundred dollars to come out so the trade can't be done if come out so the trade can't be done if. Come out so the trade can't be done if there was no traditional order book you there was no traditional order book you. There was no traditional order book you still end up getting too few offers still end up getting too few offers. Still end up getting too few offers because when we can't do the trade because when we can't do the trade. Because when we can't do the trade in the liquidity pool like on a given in the liquidity pool like on a given. In the liquidity pool like on a given step we will use the result from the step we will use the result from the. Step we will use the result from the order book side that sounds a little weird but basically. That sounds a little weird but basically like the logic here is like try to do like the logic here is like try to do. Like the logic here is like try to do the trade on the liquidity pool the trade on the liquidity pool. The trade on the liquidity pool if you get a good result good to go if you get a good result good to go. if you get a good result good to go if you get an error just like throw if you get an error just like throw. if you get an error just like throw the error out who cares then go to the the error out who cares then go to the. The error out who cares then go to the order book order book order book try to do the trade there if you get a. Try to do the trade there if you get a try to do the trade there if you get a better price and you got the liquidity. Better price and you got the liquidity better price and you got the liquidity pool assuming the liquidity pool was. Pool assuming the liquidity pool was pool assuming the liquidity pool was possible do the order book. Possible do the order book possible do the order book if you get a worse price but the. If you get a worse price but the if you get a worse price but the liquidity pool was possible due to the. Liquidity pool was possible due to the liquidity pool was possible due to the liquidity pool and if they were both. Liquidity pool and if they were both liquidity pool and if they were both errors return the error from the . Errors return the error from the errors return the error from the from the order book. Yeah this makes sense yeah this makes sense it's weird it's not like weird to think. It's weird it's not like weird to think it's weird it's not like weird to think about but it was hard to express all of. About but it was hard to express all of about but it was hard to express all of this but we're hitting the exact. This but we're hitting the exact this but we're hitting the exact examples that we walked through when we. Examples that we walked through when we examples that we walked through when we were working this out. Were working this out were working this out but it's just like a reasoned decision. But it's just like a reasoned decision but it's just like a reasoned decision about where the errors come from and. About where the errors come from and about where the errors come from and what the order is okay exactly. What the order is okay exactly what the order is okay exactly just need to do something. Just need to do something just need to do something consistent and predictable basically. Yeah I can take this so this is I yeah I can take this so this is I mentioned this earlier but. Mentioned this earlier but mentioned this earlier but we in a previous line that we just. we in a previous line that we just we in a previous line that we just. Reviewed we added a reviewed we added a reviewed we added a a low reserve error which is like on. A low reserve error which is like on a low reserve error which is like on revoke if. Revoke if revoke if the account that is going to sponsor the the account that is going to sponsor the. The account that is going to sponsor the cranial bounds is cranial bounds is cranial bounds is. already isn't a sponsorship sandwich already isn't a sponsorship sandwich already isn't a sponsorship sandwich. This is essentially adding at the this is essentially adding at the this is essentially adding at the. Another error code where it's possible another error code where it's possible another error code where it's possible. To get too many sponsoring as well if to get too many sponsoring as well if to get too many sponsoring as well if. That account if this account sponsoring that account if this account sponsoring that account if this account sponsoring. Is is is has is already sponsoring too many has is already sponsoring too many. Has is already sponsoring too many entries entries entries so yeah so yeah. So yeah that's it so we have a counter that says like so we have a counter that says like. How many how many how many entries you are currently sponsoring entries you are currently sponsoring . Entries you are currently sponsoring and that has a limit I believe it's and that has a limit I believe it's. And that has a limit I believe it's in 32 max or you and 32 max in 32 max or you and 32 max. In 32 max or you and 32 max most importantly it's limited by your most importantly it's limited by your. Most importantly it's limited by your lumen balance isn't it lumen balance isn't it. Lumen balance isn't it yeah yeah yeah all right but you can you can all right but you can you can. All right but you can you can theoretically get to that amount theoretically get to that amount. Theoretically get to that amount I see if you have a lot of that yeah I see if you have a lot of that yeah. I see if you have a lot of that yeah yeah the limit if I should be a little yeah the limit if I should be a little. Yeah the limit if I should be a little more accurate the limit is actually more accurate the limit is actually. More accurate the limit is actually too many sponsoring plus nub sub entries too many sponsoring plus nub sub entries. Too many sponsoring plus nub sub entries which is a detail that allows this. Which is a detail that allows this which is a detail that allows this allows the revoked to be guarant the. Allows the revoked to be guarant the allows the revoked to be guarant the revoke revoke. Revoke to work like guaranteed if you're not to work like guaranteed if you're not. To work like guaranteed if you're not in a sponsorship sandwich in a sponsorship sandwich. In a sponsorship sandwich but that which is a detail in the cap but that which is a detail in the cap. But that which is a detail in the cap but if but if but if obviously we don't obviously we don't . Obviously we don't like in this case it's a little like in this case it's a little. Like in this case it's a little different different different which is why we we need to check for. which is why we we need to check for which is why we we need to check for that error code. That error code that error code the reality is exactly what you say the reality is exactly what you say. The reality is exactly what you say david though like the only limit that we david though like the only limit that we. David though like the only limit that we ever expect anybody to hit is the sub ever expect anybody to hit is the sub. Ever expect anybody to hit is the sub entry limit all the other limits they entry limit all the other limits they. Entry limit all the other limits they exist purely because like we have to do exist purely because like we have to do. Exist purely because like we have to do something that has to be well defined something that has to be well defined. Something that has to be well defined but like but like but like the circumstances under which you would. The circumstances under which you would the circumstances under which you would have to be and to hit those limits are. Have to be and to hit those limits are have to be and to hit those limits are like so unusual you have to have like. Like so unusual you have to have like like so unusual you have to have like like like. Like three billion base reserves or something three billion base reserves or something. Three billion base reserves or something exactly one and a half billion lumens exactly one and a half billion lumens. Exactly one and a half billion lumens like well like it's possible but like like well like it's possible but like. Like well like it's possible but like why would you be in that situation why why would you be in that situation why. Why would you be in that situation why would you be why would you be sponsoring would you be why would you be sponsoring. Would you be why would you be sponsoring so much stuff like it's just weird so and then we interview the person who got. And then we interview the person who got to that state to that state to that state. Well there's a you know most like 20 well there's a you know most like 20 well there's a you know most like 20. People or something who can do that people or something who can do that people or something who can do that. Right if there's 50 billion lumens right if there's 50 billion lumens right if there's 50 billion lumens. Available so all right the final change removed new all right the final change removed new. Claimable balance id type claimable balance id type claimable balance id type yeah so I can I can take this as well so. Yeah so I can I can take this as well so yeah so I can I can take this as well so. In the original cap invitation in the original cap invitation in the original cap invitation. We added a new we added a new we added a new claimable balance id type claimable balance id type. Claimable balance id type and also and also and also the balance id is hashed off of a. The balance id is hashed off of a the balance id is hashed off of a different different. Different objects essentially or a different objects essentially or a different. objects essentially or a different union in a union in a union in a struct. Struct struct and and and this is actually unnecessary because this is actually unnecessary because. This is actually unnecessary because we're already like the hash already is we're already like the hash already is. We're already like the hash already is that has a different type in it so that has a different type in it so. That has a different type in it so why why were we at the higher level also why why were we at the higher level also. Why why were we at the higher level also include a different kind of bounce id include a different kind of bounce id. Include a different kind of bounce id type when it's not necessary so we just type when it's not necessary so we just. Type when it's not necessary so we just remove the remove the remove the the new claimable balance id type. The new claimable balance id type the new claimable balance id type yes because we still have the. Yes because we still have the yes because we still have the new new new type and the object that we had the. Type and the object that we had the type and the object that we had the passion yeah I think originally we thought that. Yeah I think originally we thought that maybe by having this extra type we could maybe by having this extra type we could. Maybe by having this extra type we could basically derive the reason on where the. Basically derive the reason on where the basically derive the reason on where the. Where this where this where this where this came from but where this came from but. Where this came from but then we realized well actually then we realized well actually. Then we realized well actually you already have to go to the you already have to go to the. You already have to go to the transaction that created the transaction that created the. Transaction that created the claimable balance anyways so claimable balance anyways so. Claimable balance anyways so this was actually this was actually this was actually . Kind of useless I mean like kind of useless I mean like kind of useless I mean like. Like for existing playmobil balances you like for existing playmobil balances you. Like for existing playmobil balances you already have to go through this process already have to go through this process. Already have to go through this process so so so there was like there was like . There was like it was a shortcut that was not it was a shortcut that was not it was a shortcut that was not. Actually doing anything useful well that's all the well that's all the changes that happen between acceptance. Changes that happen between acceptance changes that happen between acceptance and now. And now and now and I feel like you know I definitely and I feel like you know I definitely. And I feel like you know I definitely learned something about some of the learned something about some of the. Learned something about some of the choices that we made and implications choices that we made and implications. Choices that we made and implications that they have really outside of the that they have really outside of the. That they have really outside of the protocol protocol protocol mainly in terms of what we can be. Mainly in terms of what we can be mainly in terms of what we can be telling people . Telling people telling people but basically it doesn't seem like but basically it doesn't seem like. But basically it doesn't seem like there's any work that needs to be done there's any work that needs to be done. There's any work that needs to be done to revise or to revise or to revise or undo any of those changes does that seem. Undo any of those changes does that seem undo any of those changes does that seem. Correct yeah I have yeah I have I mean maybe it's just too late for this. I mean maybe it's just too late for this I mean maybe it's just too late for this. But like but like but like the one thing that would be nice the one thing that would be nice. The one thing that would be nice like it doesn't say anything about what like it doesn't say anything about what. Like it doesn't say anything about what happened suppose like 0.3 turns out to happened suppose like 0.3 turns out to. Happened suppose like 0.3 turns out to be like the wrong be like the wrong be like the wrong. Number or something like it would be number or something like it would be number or something like it would be. Nice to say somewhere to just in terms nice to say somewhere to just in terms nice to say somewhere to just in terms. Of setting expectations like that of setting expectations like that of setting expectations like that. Future protocols are allowed to like future protocols are allowed to like future protocols are allowed to like. Completely cancel your liquidity pool completely cancel your liquidity pool completely cancel your liquidity pool. Shares or refund them to you or shares or refund them to you or shares or refund them to you or. Something like give people like something like give people like something like give people like. Basically like I want to avoid like the basically like I want to avoid like the basically like I want to avoid like the. Next time we revise this being in a next time we revise this being in a next time we revise this being in a. Situation where situation where situation where like because people are using the. Like because people are using the like because people are using the previous amm and we didn't give them. Previous amm and we didn't give them previous amm and we didn't give them enough warning like we're like reluctant. Enough warning like we're like reluctant enough warning like we're like reluctant. To make changes so I'm wondering if we to make changes so I'm wondering if we to make changes so I'm wondering if we. Could just add could just add could just add like like like one sentence to the future work . One sentence to the future work one sentence to the future work section like it. Section like it section like it like that like you can't you can't count like that like you can't you can't count. Like that like you can't you can't count on your shares continuing to trade in on your shares continuing to trade in. On your shares continuing to trade in perpetuity if if like we upgrade perpetuity if if like we upgrade. Perpetuity if if like we upgrade the protocol or something the protocol or something. The protocol or something that's a good point that's a good point that's a good point. That's a good point because that's also that's a good point because that's also that's a good point because that's also. Like the kind of the like the kind of the like the kind of the the the the kind of . Kind of kind of we have a similar expectation with the we have a similar expectation with the. We have a similar expectation with the other book today that other book today that . Other book today that it can basically like disappear any day it can basically like disappear any day. It can basically like disappear any day so people should not so people should not. so people should not rely on that in smart contracts or rely on that in smart contracts or. Rely on that in smart contracts or things like that right and we did do that with the order book. And we did do that with the order book once and once and once and it was fine and I could imagine needing. It was fine and I could imagine needing it was fine and I could imagine needing to do the same thing in this context i. To do the same thing in this context I to do the same thing in this context I think that's a really really good. Think that's a really really good think that's a really really good insight david. So they take so somebody just writes so they take so somebody just writes essentially a sentence that explains. Essentially a sentence that explains essentially a sentence that explains this this. This too the liquidity of poor shares can you too the liquidity of poor shares can you. Too the liquidity of poor shares can you may get cancelled then you may have to may get cancelled then you may have to. May get cancelled then you may have to like claim you claim the claimable like claim you claim the claimable. Like claim you claim the claimable balances and like reissue if balances and like reissue if. Balances and like reissue if you know if if we upgrade the amm you know if if we upgrade the amm. You know if if we upgrade the amm algorithms or parameters that are in use got it which again just for anyone. Got it which again just for anyone listening would require listening would require. Listening would require valid would require a protocol upgrade valid would require a protocol upgrade. Valid would require a protocol upgrade that would require the consent of that would require the consent of. That would require the consent of validators yes it's not a decision well validators yes it's not a decision well. Validators yes it's not a decision well that would be a cap actually it's a new that would be a cap actually it's a new. That would be a cap actually it's a new cap too cap too cap too yeah and a new cab right so there would. Yeah and a new cab right so there would yeah and a new cab right so there would be a whole process that would lead to. Be a whole process that would lead to be a whole process that would lead to that it would be out in the open and it. That it would be out in the open and it that it would be out in the open and it would be this. Would be this would be this like development life cycle so I guess that then there is an. So I guess that then there is an additive request which makes sense and additive request which makes sense and. Additive request which makes sense and someone's going to take that but other someone's going to take that but other. Someone's going to take that but other than that we feel that these than that we feel that these. Than that we feel that these these changes these changes these changes I mean am I okay voting for this but. I mean am I okay voting for this but I mean am I okay voting for this but authorizing like one sentence to be. Authorizing like one sentence to be authorizing like one sentence to be inserted before it's you know. Inserted before it's you know inserted before it's you know finalized like I don't want to drag this. Finalized like I don't want to drag this finalized like I don't want to drag this. Into another protocol meeting it's like into another protocol meeting it's like into another protocol meeting it's like. A very minor thing that doesn't matter a very minor thing that doesn't matter a very minor thing that doesn't matter. For today so for today so for today so and if if we didn't do this I would and if if we didn't do this I would. and if if we didn't do this I would still be okay with this I just think it still be okay with this I just think it. Still be okay with this I just think it would be nice to do would be nice to do would be nice to do. Yeah it sounds like everyone agrees yeah it sounds like everyone agrees yeah it sounds like everyone agrees. Right right right I'm gonna go and do it when we get off I'm gonna go and do it when we get off. I'm gonna go and do it when we get off the phone probably so or get off the the phone probably so or get off the. The phone probably so or get off the call get off the phone so old school thank you john. Thank you john okay cool is there anything else that okay cool is there anything else that. Okay cool is there anything else that that is pressing that that anyone wants that is pressing that that anyone wants. That is pressing that that anyone wants to bring up if not I think we're done to bring up if not I think we're done. To bring up if not I think we're done for today for today for today there were any questions in the chat. There were any questions in the chat there were any questions in the chat before we hang out I don't know. Before we hang out I don't know before we hang out I don't know everything was so congratulations. Everything was so congratulations great we did it let's great we did it let's . Great we did it let's everybody this is a big big deal everybody this is a big big deal. Everybody this is a big big deal yeah and so there we go yeah and so there we go yeah and so there we go. Has reached the end of its development has reached the end of its development has reached the end of its development. Life cycle and now it is ready life cycle and now it is ready life cycle and now it is ready. To go out into the world I mean it's to go out into the world I mean it's to go out into the world I mean it's. Already on the test net in protocol 18 already on the test net in protocol 18 already on the test net in protocol 18. And soon it will be voted on by public and soon it will be voted on by public and soon it will be voted on by public. Network validators which is network validators which is network validators which is. Pretty exciting so great work everybody pretty exciting so great work everybody pretty exciting so great work everybody. I'll see you all soon i'll see you all soon i'll see you all soon thanks everyone. Thanks everyone thanks everyone thank you thanks.
