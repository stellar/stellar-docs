 so these protocol discussions are where we have go over caps which are core advancement proposals these are. Basically specifications for how to update Stellar core and the Stellar protocol in order to implement new. Features and make major changes any cap actually goes through a process where it's drafted it's. Discussed in open on the Stellar Dev mailing list which you can join and then eventually it's brought to this meeting. When it's time for a synchronous discussion all caps go through a review process get vetted and eventually before. They're approved there there's a pretty lengthy engagement with the the greater Stellar ecosystem. finally when they are approved they actually get bundled up into a new major protocol release and before that. Protocol release actually hits the network goes live on the network validators have to agree to accept that. Change so there is also a validator governance step that's required before the. Actual turning on of a new feature on Stellar So lately we have not had that many. Protocol meetings and that's because we've been I'm just gonna see if I can invite some people up to speak . and that is because the the Caps that we've been working on relate to Soroban which is the smart contracts. Platform that we're building that will bring smart contracts to Stellar and a lot of work has been done on the. Implementation side right so earlier this year we were talking through about eight caps and for now we've sort of. Worked on implementation of those we have launched them on the futurenet so if you're listening to this and you want. To experiment with saurabhan you can on a Dev Network a Dev test Network that exists right now. but today we do have a discussion that we want to have around a cap which hit the mailing list there were some. Changes that hit the mailing list earlier actually I think yesterday and so that cap is capped 46-06 smart. Contract standardized asset there's a link to the actual cap in the show notes or in the event description so if you. Want to follow this discussion which will be technical I definitely advise reading the cap we're going to get into. The details today and so I is there anyone else who needs to be brought up to the stage I guess we. Can go ahead and start and we can bring people on stage as necessary I think to start with cap 4606. so Darth do you want to just start out by talking a little bit about the cap by walking through the changes and. just sort of set up the discussion for the rest of the meeting yeah I can do that so this cap is. About a standardized token contract on Soroban or what we call now the the built-in token contract. and you know we already have an initial implementation of this that people are using on feature net and this. Cap has been out for a while but I'll go over the recent changes at a high level so the most significant one is that. The token balances have been updated from bigint to u128 and again these. Are just updates of the cap not the actual implementation yet approve the approved function was. Replaced with increased allowance and decreased allowance methods there are some naming changes to make sore Bond. Terminology match up with Stellar classic like burn was change the cloud back for use of the authorize. Unfreeze to authorize we allow the admin to disable clawback along with rules on how it's. Set for wrapped assets and then there's this wasn't explicitly out of the cap it was in the mailing. List discussions around how auth required should be handled and I had two ideas there that we can discuss. and it sounds like author bride is something that we will need to handle yeah so does anyone have any. Questions Russians comments yeah it started something simple the naming conventions I understand they. Align with with Stellar classic do they also align with the you know the greater kind of like. Cryptocurrency ecosystem and equivalent contracts on say ethereum so the burn to clavac the that that. Actually matches up with erc20 for example just burn on the OpenZeppelin erc20. Standard actually refers to a user burning their own balance which is not what burn does it does in the total. Contract today in the sermon tone contract that matches clawback for freeze unfreeze. it this is a question we had it was like I switched it to authorized the author. Just because we want to be we want clawback to be able to be used on Frozen balances and we didn't want someone to. Make the assumption that a you know a frozen balance can change because it can through callback. I believe on on the ethereum side it's actually called I think it's blue it's not possible and you unpause it . So it's a little different from that do you have concerns over those differences. yeah I think the the the blacklistable contracts that for example uscc adheres to actually use as. A completely different language which is blacklisting which yeah its own issues. Yeah that's unique to usdc right that's not even you know like like a common erc20 implementation. that's a good question I haven't looked at others I'll I'll take a look at that. Okay yeah I definitely think that it makes sense to just like choose something and then go with it but. Maybe just like survey the ecosystem and and make sure that there are no standards that were. overlooking it doesn't look like we have okay you mentioned some the the issue with auth required and. Potential Solutions can you talk a bit about a what the issue is to reiterate. That and what are some potential Solutions yeah so currently on solar classic if. The issuer has has the auth required flag set any new trust line will be deauthorized by default. and the reason for this is that you know the issuer may want to verify the the owner of the trust line to make sure. That you know they can go they go through kyc and you know you go through you pass whatever regulations that they. Need to and then you enable the the trust line and they can do what they want that concept does not exist at. The moment in the built-in token contract so if you've sent to a New Balance if you send an asset that is. Author card on the classic side that's wrapped and so our body you send it to a new balance that this new entity can. Receive it and this breaks the you know the author required semantics so the one idea I had was that in in the Tome. Contract there are no balances by default in the beginning and they only exist once they are you. Know once it's actually written into a ledger entry and so you can kind of you can treat. That right as the initialization of the balance my idea was to tie like when you do that. New like the when you create this New Balance you check the issuer and if it does exist then you block it. And you require the issue explicitly proves that trust all right it's not that trust line approves that balance or. That identifier before it's created there are some issues around this related to. how you would actually indicate that it's authorized but this is like that's that's the best idea I have so far the. Other one is to just not allow it's just disable add-on controls or not admin controls on sarban contract. for wrapped assets that that have auth required set but this makes it much more difficult for author guard. Assets to be used on seller I'm sorry but I'm sorry there's also an maybe an ax-like. Approach in which we just don't enable sorobond like importing exporting at all to. Off acquired assets that's true but I Jake has mentioned that there are some partners that are off the choir. That want to participate in Soroban so that wouldn't be possible in that case it depend you know it depends on what. We what we want to do with those assets are there drawbacks to the first approach that you outlined. it it adds it just adds some complexity like for example how do you store this I. Made this change in the cap but it actually isn't ideal where before we had this a flag for when things are frozen. Which is not the normal case so if you never freeze the balance in the current tone contract you never write. This extra Ledger entry but that writes a specific flag but I changed the cap to write the authorized flag so every. Balance will have a new entry that says authorized so which is not necessary by default for. Non-auth required assets I have an idea to fix this you know you can tie the balance and this flag in a single Ledger. Entry but it just it just adds some complexity but I but I think we do need to either not allow author required. Assets in Soroban or you know allow them using using a mechanism like this so I feel like if you want to allow. Author required that's a story about like this is probably the best or something similar is the best thing we. Can do it I said just to be on the same page this means we effectively increase the complexity of the these rap token. Contracts but the standard token contract that you can still you know like issue that's pure. Sorobond does it also inherit these complexities I think we can we can do it in a way. Where it doesn't right like it if because you can if you can tell that it's a wrap token contract and in that. Case then you can check the issuer and check them out the required but if if it's not a. Wrapped token then you can ignore all of this right and from a contract developer's. Perspective that wants to interact from their perspective it's just the standard like are we changing the. Standard token interface or from their perspective it's just another erc20 like standard token. implementer the interface shouldn't have to change maybe the semantics around. Authorization the authorization would I think we can do it in a way where it wouldn't it would be transparent to . Soroban tokens that make sense yes one thing I'll just say quickly is that you know in today's today on the. Network the assets that use author required they there are a lot of account holders. But we are seeing organizations that are looking to have health required assets be used on soar bomb balls so used by a. Fairly large audience so I would I don't know if you know going forward with an approach where. Arth required assets just simply aren't usable on Soroban is is I mean we could do it. but it's going to cut off some some use cases or for organizations that you know from a Regulatory Compliance. Perspective like need to have that this requirement kyc like holders before holding their asset. So Jake just to be on the same page like you're saying that there is a group of issuers that is growing and is. author required or planning to issue author card assets and out of this group there is a. Non-trivial subgroup that is interested in having their assets available and and for like Defiance. Orban exactly yeah we have a partner today that's looking to you know participate in like amms. And and other like deep iconstructs on Soroban but the asset they would like to. To use they are planning on using author required okay one one aspect of this which I. Think is a good thing but it's good to know is if you go to the first approach I mentioned the issuer will need to. Approve any address and any any identifier on Soroban that wants to accept the balance so even if it's like. A liquidity pool the issuer must you know approve that that liquidity pool's address in the token contract. Yeah understood I think that's actually exactly what they're looking for yeah there are a couple questions in the live. Chat too I don't know if you want to take a look at them sit or you want me to just read them out. Let's see so where's the yeah I well one is oh yeah yeah and then if you look below that there's. Some there's three there's a yeah two questions so for Quebec sorry tomorrow do you wanna go. Yep okay clawback is I think it's it's something we wanted to support because it's supported on the . The classic side and right if you have a an asset that is clawbackable on classic and you move it over to. Sorbon then you know it's a control you want to give the issue and it can be it can be disabled. I do agree that quadak versus Burns is a little confusing we don't actually like the cap doesn't specify a burn in. The ERC 20 cents and maybe it should right now I think that like what you could do is. Send to a zero u25519 address but maybe that's not sufficient but I agree maybe we can I can. Think about like naming differences there a little more so for the so vermouth's question for the decimals. I agree so yeah the cap is actually missed I believe it's missing decimals for the. The non-wrapped case and the idea there was that you know you the user could specify whatever. Whatever they want but we should specify a standard and I don't we haven't discussed that yet this still depends on. The discussion that you know we moved from big into U1 128 but I think there's still some . Discussions have to go on there with what we think a default decimal should be so. Maybe we can start by is there anyone that objects to u128 as the as a standard token contract. number type okay going gone okay and so that's moot's next question for the auth required Solutions when we. Run into weird situations where only Stellar accounts can participate or other non-auth required built-in tokens. Support Stellar accounts contracts and basic 825519 keys I can't think of a reason why this would. Happen off the top of my head there's no difference you know this author required mechanism. That I mentioned and a identifier that is is the authorized so I'm not I can't think of an example like this if you. Have one let me know and I can think about that what about looking at wrapped smart. Contract as an on off ramp I'm not sure what that what that means okay yeah Lee. Yeah I'm just thinking about the term callback and and you know if that is a problematic term I mean it's I feel like. The term is understood in other Financial ecosystems but maybe yeah if it if. It's not a good term to be using sort of going forward in a in a blockchain world. here would it be termed because do you think if if we said that the admin could. Do a transfer from one from any account to any account like it's sort of the same thing as clawback. and it's sort of maybe bad to do that because we're overloading an operation that can suddenly do. Something that might be surprising yeah I'm one way to like try to eliminate that term without needing to. Replace it yeah I mean that sounds like a little more complex right it's not even the same thing because. In club in the cloud back the balance gets burned right which is how it works on classic and currently in the token. Contract in your example it wouldn't get burned right it would get sent to another address I guess you could send. It to the zero eighty two five five one nine key I think this is something we should. Discuss because to me you know clawback already exists on Stellar right so and it works. Almost the same on Soroban so it made sense to me to to change the name but if enough people it like I think it's. Something we should discuss yeah I'm yeah I'm not I personally think clawback's probably fine because we. Already have that definition and I think it sounds like the folks who are planning to use. this today already understand what it means sorry I have a bit of a question on a. Tangent to why you just mentioned you said that so callback what so on Stellar if you transfer to the. Issuer you're essentially burning because the answer disappears because the issue can't hold the balance of the. Asset the issue what happens if you transfer to the admin I get the or transferred to the issuer. on the sorbin ation it doesn't get burnt it just it updates the issue with balance like the issue or. The admin account doesn't have any exception when it comes to like transfers or anything like that. Big other things so authorized trust and inheritance classic in case you need a slower account detain. Authorized flag so that that is how it works on classic like you need the trust line to to get authorized by the. Issuer and on Soroban we would imitate the same at the the admin or the the admin. On sorbond would need to explicitly authorize on Soroban we'll have we have this method called authorize and we'll. Authorize that balance does that answer your question oops okay and I the the naming there. Like maybe you need to think about that some more about the fact that there's you know you have you can authorize it. On classic I mean also authorize on sorbond but server authorization doesn't work the same like it's much simpler. Than design could you elaborate what's the differences just so we're all clear on. That yeah so you know in classic you can there's a lot of different levels of authorization that's what I mean. You can have you know fully authorized through the authorized you can be you can authorize to maintain. Liabilities right maintain offers and liquidity pool deposits but you can't do anything with your balance. And I believe there's also a flag that says you can actually cloud back from the trust line and that flag is. Maintained currently in the proposal in Soroban like the clawback flag but it's at the. Contract level and not at a balanced level because my the thought process was I don't think it needs to be at the. Balance level and it would add a lot more complexity but yeah those are the differences. All right any any other questions any concerns do you have the answers that you need to. Move forward I believe I do so before the author choir solution I think I need to. Rework what I have a little bits to make sure that the the non-wrap scenario doesn't doesn't. Change or get any worse other than that it doesn't sound like oh that and I need I should like naming. Right looking at burnt versus clawback in the ecosystem yeah about other than those two. Things I don't think there's anything else I need to look at well I think there is maybe like a. Symmetry question there right like that I was just thinking about that is. When I think of the building token contract versus the more generic interface right that we are exposing. That people can use when they implement the the contract isn't there like if we have like this. Auth required thing right like it basically limits the the the way you can do payments right from the outside. So like is is that pointing to like a I don't know like having it's basically an implicit. like like yeah like hook you know I know the original cap had like this like. Section on cooks are evil you know we should never do that but at the same time this looks like actually like a. Hook to me that happens to be a classic hook and I'm just wondering like when we. Say also that people that are that are today looking at implementing Earth required assets want to. Move some of the functionality into Soroban are they really going to be satisfied. With those limited semantics as opposed to I know like a lot of the the things that people were asking in the past. Around programmatic you know being able to basically control the flow of assets was hey I want to put limits you know on. on transaction on transactions like you know you can only move ten thousand dollars a day or whatever right. Like things like that so yeah wondering about that where does that fit in this picture. The you know the first requirement at least I was that I was following is that. You you'd like to be able to support anything that can happen on classic in Soroban right in the bold and tone. Contract which is the you know the goal of adding support throughout the Acquired and clawback. what you're saying is an interesting idea adding hooks to soak admin's can customize what happens but one. You know one concern there is you would you would end up executing like the the one of the nice things. With the built-in tone contract is built in right it doesn't execute wasn't but if you have these hooks they would be in. Wasm right so you would you take the performance set and in that case I don't know you. Could argue that they should you should be using a different tone contract altogether like. One that just adheres to the interface do you agree on that you mean like yeah yeah I guess like as. Soon as you have hooks you can't do like a classic payment for example because you're bypassing the hook is that what. You're talking about I'm I'm not sure what you mean by that I'm saying that if you add a hook the. Hook would be in wasn't right like you've called into another contract yeah so for the built-in yeah I guess. For like the default Behavior you would yeah he would just call the built-in token contract that would have. A default implementation right to implement those what required type of semantics but. I could see like the need for maybe like final control in general and oh the Fire Control that we would. Provide later on or that like anything issuers would want to yeah to have yeah. I guess maybe those end up just being like separate you know they are not using the built-in token contract at. That point so that's kind of what I'm trying to wonder I'm wondering about is like those use cases without required. Assets in suraban they are not people are not going to be able to actually implement. I think the type of things that I'm looking after that is like like I said like people asked before the the. Feature requests are on the the hooks were things like maximum our conditions on the transaction right like. not just it was not just a flag it was basically like you know open-ended type of conditions. And then use the built-in token contract which may be okay but you know I then I'm kind of questioning the. Are you talking about from the perspective on net new issuers or from the perspective of existing issuers that. Want to introduce new constraints or like new yeah that's kind of I'm just wondering like. Like the people that have like those like as out required assets if they think that they can basically. Over time add more conditions this is actually not going to work right you got it so to some extent I. Hear like a question to Jake if it's still here which is you know these new issuers that are. Coming on board and are interesting and auth required assets maybe the solution for them. Is to actually issue a custom contract on Soroban rather than an off-acquired acid on classic and kind. Of like trying to constrain it to be what they want it to be yeah we we've talked about you know. Something similar with like regulated assets assets that need much more defined Grant control. and in those cases I think it makes sense to to use a new token contract all right the middle to the built-in. Tone contract can't do everything right and I don't think adding these I don't think adding these hooks is a good idea. Into the built-in token contract yeah just my opinion yeah I think their position should be. That if you want these type of conditions and restraints you should definitely deploy your own. contract that adheres to the standard token interface you know assembly that we're seeing in ethereum and other. Ecosystems okay so let me you know said I think we're we're at a relatively good place with this with. This cap I do think there's a there's like this parallel discussion that probably hasn't matured to bringing. It up right now on you know this versus like a more discussions you know we we abandoned. A few months ago to make progress but we need to go back to in terms of you know single balance versus two. Balance approach but I think we need to have a better understanding of what the. Possibilities are there before we can actually make like a you know like the go-ahead decision. With regards to this specific cap yeah I agree anything else anyone wants to discuss or. Are we done for the day okay cool I think we might be done I'm just checking the live chat to. See if there are any unanswered questions there's one more from moods which is in the event issuers are pushed. To write a custom token contract would there be any core support to migrate between a classic slash custom token. I would I would say no that's an interesting question but my intuition would be that you know you're. Trying to do something that you know it isn't even supported in classic so it makes sense to be a separate token. but that's something that we need to think about more yeah I haven't thought much about how you know how these. Custom token contracts would work and so this isn't and responds to mooch's question on how. These if there would be core support between class and custom tokens yeah I think this is an interesting. Question because with the built-in contract that we have now you there is a swap essentially a swap capability. You have the import export functions which you know allow you to essentially swap. A token in classic with one in Soroban and if we are if the story that we're developing. is that if you want to you know be able to build a custom token that provides all these. Custom auth auth required type capabilities I think we do need to have some sort. Of story for how do you replicate that import export how do you swap something that's on classic with something that is. Over on Sovereign so that because I can imagine that issuers even if they want that more custom. Capability on sarban they probably still want to get access to things like the things on classic like they probably. Don't want to be siled into only the sorrow and ecosystem yeah that's a good point. And without something without some sort of swap capability and without the ability to. Because we're not we're not going to allow classic operations and solvent operations to run in the same. Transaction I think we're talking about some sort of off-chain swap capability which sort of it's not. Great yeah this is something to think about like we you know you and I'm not sure. How this would work but you could offer import export big host functions but that. That doesn't sound like a good idea to me but or do it off chain as like you mentioned. yeah it's something to think about any other thoughts okay it looks like there's. On one new one in the live chat from Demetrio Stellar why not just have the same sort of one-to-one swap between. The rap classic asset token and the new token not the best ux but it's doable right. Now I think you'd have I gotta think about this you might have issues with. Like how would you do a lot like that would have to exist as a wait no I'm not I'm not sure how if that. Would work like you would have to call import export and like and like if I write a. Contract right now Custom Contract I wouldn't be able to call that right well I think the the issuer there would. Be the contract right kind of yeah yeah right so you don't actually need special. Anything it just happens that yeah like the that that's true you would have complete. Control over it well it's yeah complete control now because you can get the authorized but yeah that's true. Okay yeah let me let me think about this okay it feels like we're sort of winding. Down here so I think we're done for the day thanks Sid for for putting this out. There thanks for answering the questions thanks for thinking about it and to everyone else. I realized that today's protocol discussion was sort of ad hoc and popped out of nowhere next year or after. Thanksgiving as as we start to have these meetings I'll try to be better about just setting them up more in. Advance and just being a little bit more making people a little bit more aware of. What we're doing what we're talking about so that everyone can sort of get a bit of context for the discussion. Starts but for today again if you want to sort of keep up with these discussions join the Stellar. Dev mailing list if you want to read this particular cap it's in the cap repository which you can find on GitHub. This is Cap 4606 the smart contract standardized asset and with that I will say goodbye to all. Of you thanks.
