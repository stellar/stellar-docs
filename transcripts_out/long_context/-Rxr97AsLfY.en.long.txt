All right everybody welcome to the Stellar open protocol discussion thanks for being here thanks to all the. Panelists just a reminder the goal of these meetings is to talk about and plan for. Changes to upcoming versions of the Stellar protocol specifically we go over core advancement. Proposals caps for short which are open source specs that describe suggested new features designed. To evolve the protocol to meet ecosystem needs so caps they have a life cycle they go. Through various phases discussion draft final comment period acceptance and implementation. Before they're finalized added to a major release of Stellar core and put forward to validators who. Ultimately decide whether or not to accept the changes by upgrading the network so actually if all goes well today we. May attempt to move a cap from draft to final comment period we'll see what happens very exciting. Procedural stuff there if we do we'll post a notice on the Stellar dev mailing list and there's a. Link to that in the meeting description at which point anyone who has comments or questions or suggestions. Has one week to respond before we decide to either reopen the discussion or mark the cap as accepted so that's. What happens if we move this cap into final comment period so last time we started the meeting with. Personal introductions but today I think we'll skip that just to keep things moving along. All the participants are listed in the event description so if you want to know who's who just do a quick search. Or look at last last protocol meeting where a lot of the same participants there's also a q a box where you can. Submit questions we probably won't go through them one by one during the meeting but we do look at them. They do inform our discussions and decisions so if you have a question about what we're discussing and again. Please about what we're discussing feel free to raise it there so fair warning this is a technical discussion. About a specific proposal and if you want to keep up I suggest reading through the cap. Which is also linked to in the meeting description that will give you context now today today we will continue our. Discussion from the last meeting about cap 35 which defines a method for allowing an. Issuer to claw back an asset in order to support regulatory requirements so it can be used for. Instance to recover assets that have been fraudulently obtained to respond to regulatory actions or to. Enable someone who can improve their identity to recover an asset in the event of key loss or theft. Now remember I said we do actually pay attention to the qa well based on some questions that came. In last time it seems like there's a bit of confusion about this proposal so before we begin I just want to give a. Quick overview to attempt to clarify a few things so based on questions that came in last. Time this is kind of what I want to point out right the proposal would introduce an optional. Feature for assets and it does that by creating new authorization flags and new operations to take advantage of them. The goal is to add new functionality to Stellar that would make it easy to issue regulated assets now these new. Flags will have no effect on accounts that already hold an asset that means if clawback is not enabled. When you obtain an asset it can't be enabled for you issuer can't just come in and change the. Rules after the fact also when an asset has clawback enabled that fact will be clearly visible on the. Issuing account and on the holders account in other words a potential holder will know in advance that an asset has. Clawback enabled they'll look at the asset they'll see that it has clawback enabled and if they. Decide to they can hold it and they do so fully informed with eyes wide open right. People opt into holding these assets and that's a pretty pretty important point I sort of. Mentioned all that just to clarify some some some questions that came up last time does anyone else before we dig in. Does anyone else have anything to add are we just ready to go cool so cap 35. the current state of this it. Is in draft mode the question that I think we're ultimately trying to get to is is it. Ready to move into final comment period pending acceptance but there are a couple of changes that. Have happened since last time there are some bug fixes that address comments and there's a new set trustline's flag set. Trustline flags up that allows an issuer to remove clawback the clawback flag so I think just open up does anyone. Have any comments or questions about the changes since we last met so I think that the first of all i. Just want to congratulate the authors I think it's gotten a lot better I have kind of like I don't know three. Quick comments that like maybe are just changes you can make or or not and then one like. Point for more detailed discussion so I don't know how how you want to go through this if we should. Start raising points or go around robin or what why don't you start with the three quick points. Let's just hear what those are okay so one again this is kind of trivial but in this. Set trust line flags off the clear flags and set flags or pointers and I was wondering. Why that is is that for future extensibility in case we have like multiple banks of flags or something we. Want to turn it into a union because otherwise if you just have a an integer if you. Zero then you're not setting any flags or clearing any flags so it seems like the optionality had was. There's like redundant mechanisms to not do anything I'm just curious for the rationale. So it matches what set options does right which is like if you if you don't want to change clear options. Or like like you don't want to clear any flags you can just set it to no right so I just follow that I don't i. Think your approach is fine as well I do think we there's an advantage in keeping it the same. As set options but sorry I thought that instead options that actually actually. Set the thing to a particular value whereas here we're actually setting or clearing bits. So it's like a different so set options it is the same as set trustline flag so I think you're thinking about allow. Trust that sets it oh right right so yeah the goal here was to make it make it. Similar to set options and that you you control specific bits okay well it's not it's not again this. Is pretty minor point I raise it it sounds like there's a rationale so it's not not a huge deal the. the other question so another question is should we deprecate allow trust stop now. That we have set trustline flags up I think so I think we should but that would be just something to mention. Like you know we don't have to like remove it or anything but we can just deprecate it and like. Slowly you know eventually maybe like you know way down the line remove some some of these obsolete. Operations so third kind of quick point or suggestion is in the set line trustline flags op. Instead of having an asset code should we think about putting an asset there and let me make the case so it's not cut. And dry but there are advantages obviously you might say well right now it's like completely redundant because. The issuer should be implicit in whatever the source account is for the operation. However I can imagine situations where down the line we might not want that to be the case and here's kind of two. Scenarios where having the full asset in there would would make this easier so one is maybe. There's certain flags that like the issuer can like add the flag or remove the flag but you can add the flag. Or something so we actually want the owner of the trust line to be able to change some of the flags and the issuer. To be able to change other flags or maybe the owner can do it in one direction the. Issue or in another direction the second thing which kind of comes back to this point. Of feedback that i've gotten a lot from talking to people which is the annoying thing that if you issue a. Bunch of assets you and you want a fixed quantity that if you lock the the high threshold. Of the account to known as high threshold you can no longer rotate the keys that are used to like authorize. Trust lines and so I don't think we want to fix this today but one thing that one can imagine down the. Line maybe is adding like a super user flag to like your trust line which allows you to. Not only hold the asset but actually authorize other people to hold the asset right I realized like. Maybe we do want to do this maybe we don't want to do this it means looking at another. entry in the database when you're transaction processing so there's arguments against it but but but that. Would solve this problem you could like issue an asset you could like create you could. Basically create a super user account to to manipulate trust lines and then you could completely lock the original. Account and then you could still rotate keys in the other account so just having the full asset in there. Would allow us to do that because it would allow us this level of indirection that a different account. Could be the one authorizing at the authorizing trust lines and I just just to clarify you mean. The asset code versus the full asset you mean the aztec code say usd versus having usd colon issuer of that. Asset exactly exactly and so the issuer is redundant because it's the source account always but. I can imagine future situations where we don't want to require that to be the case. Actually I would say I would support that like originally actually in the original proposal I didn't I didn't care. For the clawback operation so to not specify the full asset because at the time we only had our. Trust but if we're going to make the change to this new adult trust like we would also make the change to. Clawback right and then now we end up with like this is completely open and and in the. Future we can easily make that without having to add new operations basically so yeah I totally support that I just. Want to echo this i've been hearing from partners this desire to basically delegate. delegate the ability to allow trust to separate accounts right now we you know we we we. Promote this idea of everyone needs to have access to the issue or account and a low threshold but there are a lot of. Issues with this so if the issuer can actually delegate this authority to other accounts. then I think that is great cool so I have one more issue that probably is might require more. Discussion so i'll maybe defer if other people have quicker things we can come back to the longer running ones. I think I thought something I want to comment on this is I think this is really great the idea that we can we can. In the future possibly delegate who could run these operations as opposed to being the issuer I think. That that relates in some ways back to a previous conversation we had about clawback and the fact that. right now clawback is only going to return the asset to the issuer and there's no. Ability to specify a destination because I think if we if we start thinking and I think that decision was. Completely fine if we think about clawback being something only that the issuer operates. because if they claw something back they can always then issue the asset themselves again. But when we start talking about making it flexible enough so that a delegated account could cause. The clawback then the clawback is going to return to the issuer so then then we have that no no in that case it. Would have to go back to the source account right which would be this this other account so I think it would. Be consistent with the behavior okay in a in a thick attack situation you would actually not be burning . Assets in this situation you would actually be moving assets from the account being called back to the. This kind of you know type of account so is the clawback mechanism set up to claw back to the source account. Currently why it's implicit right it's implicit okay I mean we could add a destination. Account so imagine a situation where whenever you claw back you actually want to send it to some. Like arbitrator who's gonna like decide whether this is just or not or something as a way to although. Really you'd want to kind of force that so maybe that's not such a good idea I think it's better to have it like. Go back to the source icon if you're the issuer you end up burning it and then if you want to send it to an arbitrator. That's actually the second operation and then you do have clear kind of separation of like. What is actually happening the history so it sounds like we do we do need to change the definition. In the cup slightly just to be more clear that the clawback is returning the asset to the source. Account and right now the source count is only the issuer but like because I think right now. This language that talks more is more focused on clawback burning the asset rather than moving it. So so to be clear like in in cap 35 would not be like it actually doesn't make sense. To do clawback from a non-issue icon because you know you can't actually you don't have the right to do it but. I agree in terms of wording I can actually say so second right it will just work because. You know adding this functionality is actually adds a bunch of complexity that I don't want to do in capital e5. Because you have like limits and all that stuff that the shirt doesn't have so you have like. New fader modes and so the suggestion is just to slightly tweak the language so it's. Clear that while we're at it I did notice one really nitpicky thing which is that . This new operation that was added recently set trust lines flag op does appear in. The semantics but not in the abstract so while someone's going to tweet that language. My request is please add that to the abstract portion of the cap I can take that cool does does anything does anyone have. Anything else before we take here david's more potentially rabbit hole question so I have I have. One comment related to the the suggestion to make the asset code an asset we in in the original subtraction. Flags proposal there was there's a similar change allowed you allowed either the issuer or the owner of the trust line to. Operate on the operation or operate on the on the trustline flag and one concern that came. Up that john brought up was that he would he preferred he would prefer it if we just use a. Different operation for if the owner wanted to modify the trustline flag because he. Said you know it would be it would make it would be clearer than allowing this like this other this brand new. Functionality which we don't even allow at the moment right I personally I don't think it's. It matters that much I think it's fine if we if we enable the the owner of the trustline to modify a flag in the. Future but that that is one concern that he had so that's a decision we're not taking that decision today. Like that may be perfectly fine all we're saying is we're gonna leave the flexibility not otherwise we'd be. Making a decision today that we have to do it that way and we're leaving our options open. That was only one of the two uses that I could think of off the top of my head of. Having a full asset instead of the asset code the other one being this delegation. Which both tomer and I guess have heard requests for from people okay yeah i. Think that makes sense all right david I think we're ready for your bigger question okay. So the so the bigger question is and I don't know what to do about this and maybe it's not that big a deal but. The the when you when you're clawing back a claimable balance the the problem is that that whether. Or not you can clawback a claimable balance depends on the person who created the. Claimable balance not the person who can redeem it right who can claim it and this seems. Like a little bit unfortunate in terms of for example you know how you arbitrate a situation where like you. Know I sent you a clamo balance and then like I couldn't claim it anymore so I considered it was yours but it somehow. Got clawed back before you were able to claim the money and and maybe you had some special. Arrangement where like you didn't have clawback or or something so so this is so this is bad and another thing. Where I think this would come a lot is kind of at the end of some complicated protocol. Like a payment channel or something where you kind of like at the end of the day I give you a bunch of assets and you. Give me a bunch of assets now it's sort of like I would expect one of those oh you know you both either both to. Happen or neither and now there's a possibility that kind of the wrong one could get clawed back like my funds. Could get caught back because you were subject to clawback but you were the one who'd like. Created this claimable balance so given that the claimant you know given that you can't. You don't necessarily know who can well anyway so that that's the problem so should we do something about this and. Do we care and if so you know what should we do I mean like to me that's that's that's actually why I wanted to. Have this flag in the first place on the on the balance entry because you know if. You have if you don't have a clawback enabled on the balanced entry basically it's immune to kind of interference. Like that from for smart contracts yeah for the for the ones that do have that flag enabled i. Agree as soon as you as you touch it as an issuer you're actually kind of blowing up a whole. Smart contract and I yeah but the problem is like it feels like in most cases you'll be. Blowing up the wrong leg of a smart contract you don't know the problem is that you. Don't know yeah so you have to do a lot of like offline type of kind of work before actually doing this claim. Can you explain to me what the use case would be in this situation how you'd be using payment channel. Payment channels with claimable balances for assets that had clawback enabled like is this something that there's that. A reasonable person would be using these assets in that way sure I mean this like whether or not you want to use. The payment channel on an asset should be kind of independent of whether you can claw it back or not. but but the point is that like most in most of these protocols you kind of assume that the funds are yours once. You can claim them and we're now slightly changing that situation and that like they they could. Still get clawed back because of something bad that the issuer did even if the recipient. Has some kind of a non-clawback agreement with the issuer that would be on the recipient's account. Right on their trustline flags so like the sender and the recipient both have this clawback flag they can be set or. Onset in their trust line so if the recipient doesn't have it set in their trust line then they know ahead. Of time that it can't be changed for them right except that except that they're the the claimable. Balance that they can claim can be clawed back unless I'm misunderstanding right and only if it has the flag only. If the sender had the flag enabled right so in a way it's like you wish that the policy had to do with the recipient. Rather than the sender I guess is is kind of what I'm saying but but that also doesn't work right because you. Don't want to just be you I shouldn't be able to like protect my funds by like sending them. All making a bunch of you know claimable balances that people can't claim and then reclaiming them. Afterwards so I don't know what the solution is it just it seems like it's something slightly . Annoying recipients recipients also don't have to exist at the time the claim will balance yeah. Exactly exactly so there's a lot but there's no guarantee we even have that information. I think the only the only things we can guarantee exists on the network when the claim balance is created is that the. Issuer exists and the the account holder exists the original account the sender exists. and I think if we were to choose from one or the other where to get that information from the sender is better. Because if we use the issuer then if the issuer enables clawback then a sender whenever they create a claim or balance. It's become going to become clawback enabled even though they maybe have an agreement with the issuer. That when they hold the asset it isn't can't be called back so I guess my question is what what does. This where does this conversation lead what what action needs to be taken to sort of resolve this issue. I mean you know maybe we can't resolve it right maybe it's just yeah you know it's not there there doesn't. Seem to be any ideal solution here and you know I agree that it's it's kind of at least as reasonable to have. The flag and a claimable balance be based on the sender than to have it be based on the issuer so if. The given that those are kind of the only two options I can see on the table maybe we just live with it. The spec currently specify using the sender I can't remember it is yeah in everything the. Yeah okay so that's the standard because that way like like the reason I wanted that in the. First place was because if you're going to engage in a payment channel let's say at the beginning like you can. Actually look at those flags that people have on their trust lines and decide at this point. You actually want to basically take the risk or not in that payment channel right. If people don't have the flag set you know that basically you're taking a zero risk. If you have the flag then you have a question I don't see but the flag can change. Like during the execution of a protocol right so you no no no no that's the point is that if the flag. Once you have if you have the flag not set people cannot like issue I cannot set it back. It can only be on set okay that's a that makes it that's that's why this this works right. Like if we are allowing the issuer to to basically renege on the on this it also breaks that so that. Yeah so so anyone would be up they would understand this fact they would opt in to choosing. To use the asset in that way again eyes wide open yeah like but here the important bit is like you can. Imagine having some accounts on the network that don't have that flag enabled even though it is. like the issuer has the callback enabled but they're like you know maybe privileged accounts or. Something like you know better cheers basically of accounts that can actually engage into those payment channels. Or whatever I like to yeah I agree that it's not ideal because like really what you would want is like. Any any asset I mean any account should be able to to participate to payment channels but. Like the thing is that as soon as you you potentially have this third party kind of interfering. it gets really complicated I don't see yeah so I can basically live with it I think you guys have. Convinced me that this is probably fine and anything else is going to be worse. I think I also want to mention I think this is a limitation of claimable balances in general in the. Claimant balances the only the only place they can go is into the account is into a claim. Is into the an account that's defined as a claimant and so for their use in smart. Contracts there's that limitation already and may like maybe there's room for improvement. In the future for claimable balances to have other destinations so you know you could take funds from a. Claim balance and move them into another claim will balance all into multiple claimable balances and if you know if. That is ever a possibility in the future you know that opens up more flexibility for. Smart contracts because you know then we can start talking about you know they can inherit. The attributes of their previous kind of balances or different things like that but that's I think that's like that's. Off topic a bit but I think there is some limitation that we're inheriting from the fact that. Claimable balances only have accounts as a destination okay well I'm satisfied nothing needs to. Change in the in the cap basically after this so the one there's basically one minor change which is to. Replace the asset code with that oh sorry I meant for the last part of the decision. Sounds like for the other one we agreed that we'll add a note that allow trust stop is deprecated and we. Will we will add to turn the ass in two places we'll turn an asset code into an. Asset I guess right that's correct I think those are the changes that we've suggested making does. It does that seem accurate to everyone else yeah and if so those feel like pretty. Correct me if I'm wrong sid for instance those feel like pretty minor changes to execute is that correct yeah. They should be like that like we could move this into final comment period pinning those. Changes does that seem correct yeah all right guys I say we I say we move this from draft and final comment. Period I kind of want to do like a formal process here we have to say I or nay so let's do that let's do that. nico yes sid yes david chalmer yes eric yep is that is that everybody I think that's everybody who's on this. Call guys I actually have a gavel so I'm going to strike this gavel and can you see it and. And now it's officially moved into final comment period I happen to have that gavel in this room. Full of junk I did not go buy it especially for this I promise and so that's mostly it I mean the only other. Thing that I guess we could do which we can also decide not to do is we could talk a bit about where this cap. Is because I know that some implementation has already been done do you want to walk us does anyone. Want to walk us through that or should we just be happy with this sort of procedural. Vote that we just had and close the meeting I think that's probably enough for now. Like in the context of this meeting okay cool meetings that end early are great there's. Just no reason to stretch out to the full time if you're done okay cool so we're going to move into. Final comment period pinning those changes so when they're done I will send out the official notice on the Stellar. Dev list and again anyone who's watching that gives you a week to for final suggestions we can reopen. The discussion if it seems necessary but this is final comment period pending acceptance. Great well we answer the questions we move this along I think we're done everybody feel good. Great yeah thanks thanks everyone for coming thanks everyone for watching see you next time cheers. You.
