Hello everyone and welcome to the hello everyone and welcome to the Stellar open protocol discussion so. Stellar open protocol discussion so Stellar open protocol discussion so in these meetings. In these meetings in these meetings we discuss core advancement proposals we discuss core advancement proposals. We discuss core advancement proposals aka caps aka caps aka caps these are technical specs that suggest. These are technical specs that suggest these are technical specs that suggest changes to the Stellar protocol. Changes to the Stellar protocol changes to the Stellar protocol necessary to allow the protocol to. Necessary to allow the protocol to necessary to allow the protocol to continue to evolve to meet the needs of. Continue to evolve to meet the needs of continue to evolve to meet the needs of the ecosystem. The ecosystem the ecosystem and we live stream these meetings so and we live stream these meetings so. And we live stream these meetings so that anyone who's interested in watching that anyone who's interested in watching. That anyone who's interested in watching they can follow along although I do want. They can follow along although I do want they can follow along although I do want. To know it is a technical discussion so to know it is a technical discussion so to know it is a technical discussion so. If you are watching if you are watching if you are watching you may want to take a look at the caps. You may want to take a look at the caps you may want to take a look at the caps themselves and they're linked to in the. Themselves and they're linked to in the themselves and they're linked to in the show description. Show description show description also we do keep an eye on the also we do keep an eye on the. also we do keep an eye on the discussion box and your comments there discussion box and your comments there. Discussion box and your comments there they do help us inform our decisions they do help us inform our decisions. They do help us inform our decisions going forward going forward going forward today's discussion will focus on two. Today's discussion will focus on two today's discussion will focus on two caps and our goal is really. Caps and our goal is really caps and our goal is really as as it is generally in these meetings. As as it is generally in these meetings as as it is generally in these meetings to try to resolve some outstanding. To try to resolve some outstanding to try to resolve some outstanding questions about them. Questions about them questions about them so we may not address questions that you. So we may not address questions that you so we may not address questions that you. Ask directly but if some relevant ask directly but if some relevant ask directly but if some relevant. Ones come in I may actually try to ones come in I may actually try to ones come in I may actually try to. Incorporate them into the conversation incorporate them into the conversation incorporate them into the conversation. So as I said we are focusing on caps and so as I said we are focusing on caps and. So as I said we are focusing on caps and this meeting is just part of the cap this meeting is just part of the cap. This meeting is just part of the cap life cycle so generally caps are life cycle so generally caps are. Life cycle so generally caps are discussed on the Stellar depth mailing discussed on the Stellar depth mailing. Discussed on the Stellar depth mailing list list list there's a link to that mailing list in. There's a link to that mailing list in there's a link to that mailing list in the event description for anyone who's. The event description for anyone who's the event description for anyone who's interested in joining the discussion. Interested in joining the discussion interested in joining the discussion then caps are drafted and iterated on. then caps are drafted and iterated on then caps are drafted and iterated on. Based on feedback and suggestions based on feedback and suggestions based on feedback and suggestions. And they end up here in this protocol and they end up here in this protocol and they end up here in this protocol. Meeting and based on what happens in meeting and based on what happens in meeting and based on what happens in. This meeting this meeting this meeting they may be put up for a vote by the cap they may be put up for a vote by the cap. They may be put up for a vote by the cap committee who decides whether or not to committee who decides whether or not to. Committee who decides whether or not to accept a rejected cap accept a rejected cap. Accept a rejected cap which point they move into final comment which point they move into final comment. Which point they move into final comment period so there's everyone has a period so there's everyone has a. Period so there's everyone has a last chance to raise questions on the last chance to raise questions on the. Last chance to raise questions on the Stellar debt mailing list and if it Stellar debt mailing list and if it. Stellar debt mailing list and if it makes it through final comment period a makes it through final comment period a. Makes it through final comment period a cap is implemented into a major Stellar cap is implemented into a major Stellar. Cap is implemented into a major Stellar core release core release core release then there's still one final step which. Then there's still one final step which then there's still one final step which is that every major release every. Is that every major release every is that every major release every protocol upgrade. Protocol upgrade protocol upgrade is voted on by the validators and has to is voted on by the validators and has to. Is voted on by the validators and has to be accepted before it's applied to the be accepted before it's applied to the. Be accepted before it's applied to the network network network and so all of that is to say this is a. And so all of that is to say this is a and so all of that is to say this is a long process where there's a lot of. Long process where there's a lot of long process where there's a lot of public participation. Public participation public participation and ultimately the network decides to and ultimately the network decides to. And ultimately the network decides to accept major protocol changes so accept major protocol changes so. Accept major protocol changes so enough preamble today we are discussing enough preamble today we are discussing. Enough preamble today we are discussing cap 21 and cap 40. Cap 21 and cap 40. Cap 21 and cap 40. both of these lay the groundwork for both of these lay the groundwork for both of these lay the groundwork for. Building payment channels on Stellar so building payment channels on Stellar so building payment channels on Stellar so. Payment channels payment channels payment channels they allow multiple parties to securely. They allow multiple parties to securely they allow multiple parties to securely transact off chain and periodically. Transact off chain and periodically transact off chain and periodically settle on chain. Settle on chain settle on chain and among other things that could make and among other things that could make. And among other things that could make it easier to build high volume use cases it easier to build high volume use cases. It easier to build high volume use cases on Stellar so on Stellar so on Stellar so. If today's discussion seems dense at any if today's discussion seems dense at any. If today's discussion seems dense at any point keep that in mind point keep that in mind. Point keep that in mind these caps make technical changes geared these caps make technical changes geared. These caps make technical changes geared towards payment channels and payment towards payment channels and payment. Towards payment channels and payment channels channels channels are important for scaling network. Are important for scaling network are important for scaling network throughput throughput. Throughput so without further ado we will look at so without further ado we will look at. So without further ado we will look at the actual caps we're going to start by the actual caps we're going to start by. The actual caps we're going to start by talking about cap 21. Talking about cap 21. Talking about cap 21. this proposal generalizes the time this proposal generalizes the time this proposal generalizes the time. Balance field in transaction balance field in transaction balance field in transaction. To support other conditions including to support other conditions including to support other conditions including. Conditions that relax sequence number conditions that relax sequence number conditions that relax sequence number. Checking checking checking and provide relative time locks and and provide relative time locks and. And provide relative time locks and since we last discussed this there were since we last discussed this there were. Since we last discussed this there were some small technical changes some small technical changes. Some small technical changes there was also the addition of extra there was also the addition of extra. there was also the addition of extra signers and I think we should start signers and I think we should start. Signers and I think we should start there there there the new precondition extra signers has. The new precondition extra signers has the new precondition extra signers has been added lee can you just explain. Been added lee can you just explain been added lee can you just explain what that. What that what that why why that edition happened and sort why why that edition happened and sort. Why why that edition happened and sort of talk us through any questions that of talk us through any questions that. Of talk us through any questions that you have about it yes so extra signers was. yes so extra signers was initially added to initially added to initially added to. Support stateless htlc's so the support stateless htlc's so the support stateless htlc's so the. Ability to ability to ability to just to say that this transaction just to say that this transaction. just to say that this transaction needs to be signed by needs to be signed by needs to be signed by. Or a hash needs to be included with this or a hash needs to be included with this. Or a hash needs to be included with this transaction to make it valid transaction to make it valid. Transaction to make it valid without having to store that hash as a without having to store that hash as a. Without having to store that hash as a signer on the account so right now you signer on the account so right now you. Signer on the account so right now you can use the hashtag signer can use the hashtag signer. Can use the hashtag signer to to say that you need this you need to to say that you need this you need. To to say that you need this you need a hash a hash a hash included with transactions to be able to. Included with transactions to be able to included with transactions to be able to. Transact with an account transact with an account transact with an account and instead of needing to store that. and instead of needing to store that and instead of needing to store that on the account it can now just be stored. On the account it can now just be stored on the account it can now just be stored. Within the transaction within the transaction within the transaction and then second it's it's also being. and then second it's it's also being and then second it's it's also being used. Used used for cat 40 which we'll talk about later would help for me to like overview the. Would help for me to like overview the other changes to cap 21 other changes to cap 21. Other changes to cap 21 just because you know I think it was just because you know I think it was. Just because you know I think it was already people were kind of generally already people were kind of generally. Already people were kind of generally okay with it the last time we discussed okay with it the last time we discussed. Okay with it the last time we discussed it and so a lot of these changes are it and so a lot of these changes are. It and so a lot of these changes are kind of kind of kind of in response to leads like specific. In response to leads like specific in response to leads like specific implementation and experience like. Implementation and experience like implementation and experience like things that just came up because of. Things that just came up because of things that just came up because of implementing it. Implementing it implementing it I think that would be super helpful yeah I think that would be super helpful yeah. I think that would be super helpful yeah great when you're working so yeah great when you're working so yeah. Great when you're working so yeah so one of the changes so one of the changes . So one of the changes is that the previous version didn't is that the previous version didn't. Is that the previous version didn't really talk about the really talk about the really talk about the. Results and there's new failure modes results and there's new failure modes results and there's new failure modes. Now because you've got these multiple now because you've got these multiple now because you've got these multiple. Preconditions and so you might have sort preconditions and so you might have sort. Preconditions and so you might have sort of multiple preconditions failing of multiple preconditions failing. Of multiple preconditions failing and in particular you know you could and in particular you know you could. And in particular you know you could have preconditions failing have preconditions failing. Have preconditions failing because it's too early or preconditions because it's too early or preconditions. Because it's too early or preconditions failing because it's too late or both failing because it's too late or both. Failing because it's too late or both and so what we basically said is if a and so what we basically said is if a. And so what we basically said is if a transaction can transaction can transaction can. Never be valid again then even if never be valid again then even if never be valid again then even if. There's other things that are too early there's other things that are too early there's other things that are too early. We'll still call it too late we'll still call it too late we'll still call it too late. And we'll give the result code tx2 early and we'll give the result code tx2 early. And we'll give the result code tx2 early only in the case that only in the case that. Only in the case that there is the possibility that the there is the possibility that the. There is the possibility that the transaction can be valid again if if transaction can be valid again if if. Transaction can be valid again if if resubmitted at some later time resubmitted at some later time. Resubmitted at some later time so basically if you have said a thing so basically if you have said a thing. So basically if you have said a thing that's too early and a thing that's too that's too early and a thing that's too. That's too early and a thing that's too late that gets combined to a too late late that gets combined to a too late. Late that gets combined to a too late error error error and so that fits it into like the. And so that fits it into like the and so that fits it into like the existing error codes and I think. Existing error codes and I think existing error codes and I think you know preserves the sort of the. You know preserves the sort of the you know preserves the sort of the intuition if you're too late you can. Intuition if you're too late you can intuition if you're too late you can never resubmit and if you're too early. Never resubmit and if you're too early never resubmit and if you're too early there might be a chance of of. there might be a chance of of there might be a chance of of resubmitting at some later point. Resubmitting at some later point resubmitting at some later point so other things that we changed. so other things that we changed so other things that we changed there's some some some. there's some some some there's some some some clarifications oh yeah the. Clarifications oh yeah the clarifications oh yeah the the the we kind of rearranged the stuff. The we kind of rearranged the stuff that's dangling off that's dangling off that's dangling off. the account of the account entry the account of the account entry the account of the account entry . In the ledger because it turns out that in the ledger because it turns out that in the ledger because it turns out that. Kind of the sponsorship kind of the sponsorship kind of the sponsorship information is only there . Information is only there information is only there if you're actually sponsoring things. If you're actually sponsoring things if you're actually sponsoring things and so otherwise it's it's currently. And so otherwise it's it's currently and so otherwise it's it's currently null or it's. Null or it's null or it's a v1 extension instead of v2 so we a v1 extension instead of v2 so we. A v1 extension instead of v2 so we changed that into a pointer and we just changed that into a pointer and we just. Changed that into a pointer and we just kept the v2 data structure as a thing kept the v2 data structure as a thing. Kept the v2 data structure as a thing that dangles off that dangles off that dangles off. the v3 now optionally if you're the v3 now optionally if you're the v3 now optionally if you're. Actually using it actually using it actually using it and then the final change is that we. and then the final change is that we and then the final change is that we didn't talk about. Didn't talk about didn't talk about we previously I hadn't mentioned we previously I hadn't mentioned. we previously I hadn't mentioned what to do what to do what to do to an account that didn't have an. to an account that didn't have an to an account that didn't have an account. Account account entry extension v3 and so the answer was entry extension v3 and so the answer was. Entry extension v3 and so the answer was just just just now we just say pretend all the fields. Now we just say pretend all the fields now we just say pretend all the fields are zero right so that means like it's. Are zero right so that means like it's are zero right so that means like it's as if like the. As if like the as if like the the last time it was mod the last ledger the last time it was mod the last ledger. The last time it was mod the last ledger was modified in time and stuff was modified in time and stuff. Was modified in time and stuff are zero and that's okay because even are zero and that's okay because even. Are zero and that's okay because even though that means anything though that means anything. Though that means anything can anything that's like a relative can anything that's like a relative. Can anything that's like a relative delay will execute any time delay will execute any time. Delay will execute any time you would use these things it would be you would use these things it would be. You would use these things it would be on some new account in some new protocol on some new account in some new protocol. On some new account in some new protocol and so therefore and so therefore and so therefore . There would be some other transaction on there would be some other transaction on. There would be some other transaction on the account knew that zero wouldn't the account knew that zero wouldn't. The account knew that zero wouldn't matter matter matter so again it's just to be precise I don't. So again it's just to be precise I don't so again it's just to be precise I don't. Think it really think it really think it really matters but it's important to like say. Matters but it's important to like say matters but it's important to like say that it's something just to make sure. That it's something just to make sure that it's something just to make sure you know everything is deterministic. you know everything is deterministic you know everything is deterministic and fully specified. And fully specified and fully specified so I think that's pretty much all we so I think that's pretty much all we. So I think that's pretty much all we needed to change right forget anything lee. Forget anything lee no I think that that was everything that no I think that that was everything that. No I think that that was everything that we listed and I think specifically to do with you. And I think specifically to do with you know the extension like I'm really know the extension like I'm really. Know the extension like I'm really interested to hear interested to hear interested to hear. What nico siddharth john what you folks what nico siddharth john what you folks what nico siddharth john what you folks. Think think think of this and how this might impact of this and how this might impact. of this and how this might impact core well the first thing i'll say is you. Well the first thing i'll say is you were the one who kind of just prototyped were the one who kind of just prototyped. Were the one who kind of just prototyped out this implementation so what was out this implementation so what was. Out this implementation so what was your experience doing it so I haven't tried the new change so. So I haven't tried the new change so the diff the difficulty that I the diff the difficulty that i. The diff the difficulty that I definitely definitely definitely hit with the initial proposal. hit with the initial proposal hit with the initial proposal was that there are assumptions made. was that there are assumptions made was that there are assumptions made in core. In core in core that the sponsors that the sponsors that the sponsors. The v2 extension is only present when the v2 extension is only present when the v2 extension is only present when. The account's involved in sponsorship the account's involved in sponsorship . The account's involved in sponsorship and and and that shows up a lot in the tests more. That shows up a lot in the tests more that shows up a lot in the tests more than the actual application code. Than the actual application code than the actual application code so I guess if call makes that assumption. So I guess if call makes that assumption so I guess if call makes that assumption. In tests are there any other products or in tests are there any other products or. In tests are there any other products or anything else that makes that assumption. Anything else that makes that assumption anything else that makes that assumption. That might be interpreting xdr that might be interpreting xdr that might be interpreting xdr . Comes to mind I think I think please continue I think I think I think please continue I think. The new proposal the new proposal the new proposal which which says that you know the v2 is. Which which says that you know the v2 is which which says that you know the v2 is. Still only there when the sponsorship still only there when the sponsorship still only there when the sponsorship. I think that works from my perspective from my from my perspective here like I from my from my perspective here like i. Don't think it really matters that much don't think it really matters that much don't think it really matters that much. I don't think it's really worth fighting I don't think it's really worth fighting. I don't think it's really worth fighting about much honestly about much honestly about much honestly. In the grand scheme of things like I in the grand scheme of things like I in the grand scheme of things like i. Could see some merits to this now that could see some merits to this now that could see some merits to this now that. We have all these dangling things we have all these dangling things we have all these dangling things. maybe it would be nice to every once maybe it would be nice to every once maybe it would be nice to every once. In a while you know smash them all down in a while you know smash them all down in a while you know smash them all down. Into one into one into one single dangling thing then dangle single dangling thing then dangle. Single dangling thing then dangle some more stuff off of it for a while some more stuff off of it for a while. Some more stuff off of it for a while and then smush them all down again at a and then smush them all down again at a. And then smush them all down again at a later date later date later date again I can see merit to that. Again I can see merit to that again I can see merit to that I think in terms of like how core. I think in terms of like how core I think in terms of like how core treats these things. Treats these things treats these things core basically like the process that core basically like the process that. core basically like the process that we've used for upgrading these we've used for upgrading these. We've used for upgrading these extensions extensions extensions is basically like . There's like two parts to it like one there's like two parts to it like one thing is like once it comes to existence. Thing is like once it comes to existence thing is like once it comes to existence. Will never unwind that will never unwind that will never unwind that so like if you sponsor an account and. So like if you sponsor an account and so like if you sponsor an account and then remove the sponsorship you'll still. Then remove the sponsorship you'll still then remove the sponsorship you'll still. Have the v2 extension have the v2 extension have the v2 extension so the tests most of them have these. so the tests most of them have these so the tests most of them have these assumptions about. Assumptions about assumptions about when will these things appear and that's when will these things appear and that's. When will these things appear and that's what you were running into what you were running into. What you were running into not about whether they will be there or not about whether they will be there or. Not about whether they will be there or not period not period not period . The other thing is that we are kind the other thing is that we are kind the other thing is that we are kind. We already kind of made this executive we already kind of made this executive we already kind of made this executive. Decision when decision when decision when when we added the sponsorship stuff that. When we added the sponsorship stuff that when we added the sponsorship stuff that. Like like like imagine that you didn't have any native imagine that you didn't have any native. Imagine that you didn't have any native liabilities so you shouldn't have had a liabilities so you shouldn't have had a. Liabilities so you shouldn't have had a v1 extension v1 extension v1 extension but then you participated in the. But then you participated in the but then you participated in the sponsorship now you have a v2 extension. Sponsorship now you have a v2 extension sponsorship now you have a v2 extension and we just said like okay well in that. And we just said like okay well in that and we just said like okay well in that case we'll just inject the v1 extension. Case we'll just inject the v1 extension case we'll just inject the v1 extension and set it to zero and it's no different. And set it to zero and it's no different and set it to zero and it's no different. From the case where you would add from the case where you would add from the case where you would add. Liabilities and then subsequently remove liabilities and then subsequently remove. Liabilities and then subsequently remove them so them so them so from my perspective like core is. From my perspective like core is from my perspective like core is designed in such a way that like either. Designed in such a way that like either designed in such a way that like either solution is completely reasonable. Solution is completely reasonable solution is completely reasonable I think like in terms of the total. I think like in terms of the total I think like in terms of the total net implementation changes it would. Net implementation changes it would net implementation changes it would probably be less. Probably be less probably be less if we dangled it but the size of the if we dangled it but the size of the. If we dangled it but the size of the extension would be less if we didn't extension would be less if we didn't. Extension would be less if we didn't so like so just to be clear so like so just to be clear. So like so just to be clear you're okay with the current state so you're okay with the current state so. You're okay with the current state so the current state is like a right hybrid the current state is like a right hybrid. The current state is like a right hybrid right where v3 right where v3 right where v3. Includes v1 but dangles off v2 so that's includes v1 but dangles off v2 so that's. Includes v1 but dangles off v2 so that's kind of kind of kind of that that's there's basically this thing. That that's there's basically this thing that that's there's basically this thing. Called sponsor info called sponsor info called sponsor info that is a pointer to an account. That is a pointer to an account that is a pointer to an account extension v2 but that's inside. Extension v2 but that's inside extension v2 but that's inside the account entry extension v3. Yeah that would be fine I mean again yeah that would be fine I mean again like it doesn't. Like it doesn't like it doesn't it doesn't really matter but like if it doesn't really matter but like if. It doesn't really matter but like if you're if you're gonna do that you're if you're gonna do that. You're if you're gonna do that then the marginal additional cost then the marginal additional cost. Then the marginal additional cost of dangling the v3 extension off the v2 of dangling the v3 extension off the v2. Of dangling the v3 extension off the v2 extension is even smaller extension is even smaller. Extension is even smaller because the four extra bytes are because the four extra bytes are. Because the four extra bytes are appearing in either case appearing in either case. Appearing in either case so you're saying that there's no so you're saying that there's no. so you're saying that there's no situation where situation where situation where. It's important that the v2 be null it's important that the v2 be null it's important that the v2 be null. Correct correct correct okay so well anyway I guess I don't okay so well anyway I guess I don't. Okay so well anyway I guess I don't really really really I don't care what I really want is for. I don't care what I really want is for I don't care what I really want is for cap 21 to make it in so like what's the. Cap 21 to make it in so like what's the cap 21 to make it in so like what's the what's the best structure to like make. What's the best structure to like make what's the best structure to like make this happen or. This happen or this happen or is the current one I mean I think it's is the current one I mean I think it's. Is the current one I mean I think it's like like like I'm I'm the one that always brings this. I'm I'm the one that always brings this I'm I'm the one that always brings this back up you know as soon as you. Back up you know as soon as you back up you know as soon as you so you know the current proposal in a. So you know the current proposal in a so you know the current proposal in a way is kind of this weird hybrid thing. Way is kind of this weird hybrid thing way is kind of this weird hybrid thing like that is. Like that is like that is neither of the nested one neither the neither of the nested one neither the. Neither of the nested one neither the you know the fully you know the fully you know the fully. Like represented one so I say like like represented one so I say like like represented one so I say like. Either we consider one or the other but either we consider one or the other but either we consider one or the other but. Not this kind of not this kind of not this kind of half broken one because you get. Half broken one because you get half broken one because you get basically like basically like. Basically like the reason why you want nesting in the the reason why you want nesting in the. The reason why you want nesting in the first place that's kind of the whole first place that's kind of the whole. First place that's kind of the whole rationale that we have in the rationale that we have in the. Rationale that we have in the in the repo actually and why we are in the repo actually and why we are. in the repo actually and why we are doing nesting is because it makes it doing nesting is because it makes it. Doing nesting is because it makes it easier for people easier for people easier for people. To they don't have to change their to they don't have to change their to they don't have to change their. Code code code right like if you depend on on let's say right like if you depend on on let's say. Right like if you depend on on let's say sponsorship sponsorship sponsorship you keep referring to sponsorship the. You keep referring to sponsorship the you keep referring to sponsorship the same way you don't have to. Same way you don't have to same way you don't have to add the non you know conditions like. Add the non you know conditions like add the non you know conditions like oh if it's a v3. Oh if it's a v3 oh if it's a v3 I need to go look for sponsorship over I need to go look for sponsorship over. I need to go look for sponsorship over there instead of over here right there instead of over here right. There instead of over here right and so there's never it's never going to and so there's never it's never going to. And so there's never it's never going to be useful to take something that has be useful to take something that has. Be useful to take something that has sponsorship info sponsorship info sponsorship info. And then delete the sponsorship info and then delete the sponsorship info and then delete the sponsorship info. Because or to kind of create new because or to kind of create new because or to kind of create new. Accounts that just accounts that just accounts that just don't have any sponsorship info because. Don't have any sponsorship info because don't have any sponsorship info because they've never sponsored anything. That's the question it sounded like lee that's the question it sounded like lee kind of wanted this in order to make a. Kind of wanted this in order to make a kind of wanted this in order to make a lot of the tests. Lot of the tests lot of the tests easier to port oh well does it act easier to port oh well does it act. Easier to port oh well does it act there's not going to be easier hold on there's not going to be easier hold on. There's not going to be easier hold on wait wait wait let me clarify something there the v3. Let me clarify something there the v3 let me clarify something there the v3 extension will always. Extension will always extension will always exist for a newly created account right. Exist for a newly created account right exist for a newly created account right that's right. That's right that's right but the sponsorship info might not but the sponsorship info might not. But the sponsorship info might not whereas like and it so it sounded like whereas like and it so it sounded like. Whereas like and it so it sounded like currently there's a cal like in a lot of currently there's a cal like in a lot of. Currently there's a cal like in a lot of tests there's like accounts that don't tests there's like accounts that don't. Tests there's like accounts that don't have sponsorship info and they think have sponsorship info and they think. Have sponsorship info and they think they never get upgraded to v2 and they never get upgraded to v2 and. They never get upgraded to v2 and I don't know that this is somehow I don't know that this is somehow i. I don't know that this is somehow I don't know lee do you want to don't know lee do you want to . Don't know lee do you want to this is primarily I did this primarily this is primarily I did this primarily. This is primarily I did this primarily in response to your feedback lee so I in response to your feedback lee so i. In response to your feedback lee so I don't know if don't know if don't know if you want to jump in and yeah so that so. You want to jump in and yeah so that so you want to jump in and yeah so that so that there's two so I think so far we've. That there's two so I think so far we've that there's two so I think so far we've. Only really talked about the impact on only really talked about the impact on only really talked about the impact on. Core and core and core and it sounded like from what john was was it sounded like from what john was was. It sounded like from what john was was saying like there's not really a big saying like there's not really a big. Saying like there's not really a big impact on core impact on core impact on core. and I think the concern that I had and I think the concern that I had and I think the concern that I had. Around the impact on tests is maybe around the impact on tests is maybe around the impact on tests is maybe. Misplaced misplaced misplaced but the second impact is the impact on but the second impact is the impact on. But the second impact is the impact on the ecosystem which I think is what niko the ecosystem which I think is what niko. The ecosystem which I think is what niko was highlighting to was highlighting to was highlighting to. And that is you know everyone who passes and that is you know everyone who passes. And that is you know everyone who passes this xtr will need to look for this xtr will need to look for. This xtr will need to look for fields in the v1 and the v2 in two fields in the v1 and the v2 in two. Fields in the v1 and the v2 in two places they'll need to look for it places they'll need to look for it. Places they'll need to look for it either in the v1 or v2 or either in the v1 or v2 or. Either in the v1 or v2 or in v3 if we move it and I think in v3 if we move it and I think. In v3 if we move it and I think that's that's that's that's maybe something that eric well. That's maybe something that eric well that's maybe something that eric well like the horizon team. Like the horizon team like the horizon team would you know that's something that would you know that's something that. Would you know that's something that they would be having to deal with they would be having to deal with. They would be having to deal with basically anyone who passes the xtr has basically anyone who passes the xtr has. Basically anyone who passes the xtr has to know to look for it in all these to know to look for it in all these. To know to look for it in all these different places different places different places. Which can also be a little bit of a foot which can also be a little bit of a foot. Which can also be a little bit of a foot gun for people who are upgrading gun for people who are upgrading. Gun for people who are upgrading because they may not realize that this because they may not realize that this. Because they may not realize that this field has been duplicated into a new field has been duplicated into a new. Field has been duplicated into a new place place place yeah although we can mechanically fix it. Yeah although we can mechanically fix it yeah although we can mechanically fix it. With with with like any place that gets translated to like any place that gets translated to. Like any place that gets translated to json for example we can just json for example we can just. Json for example we can just mechanically always move the mechanically always move the. Mechanically always move the sponsorship info out sponsorship info out sponsorship info out . Yeah I don't think we should be making yeah I don't think we should be making yeah I don't think we should be making. Any decisions based on the effects any decisions based on the effects any decisions based on the effects. of downstream applications of downstream applications of downstream applications . Consuming ledger entries realistically consuming ledger entries realistically consuming ledger entries realistically. We're talking about we're talking about we're talking about one maybe two consumers so. One maybe two consumers so one maybe two consumers so you know we can we can talk to them okay. You know we can we can talk to them okay you know we can we can talk to them okay. So I think that so I think that so I think that I mean to my mind the two things that. I mean to my mind the two things that I mean to my mind the two things that make the most sense are to either keep. Make the most sense are to either keep make the most sense are to either keep the. The the cap 21 draft exactly as is or to flatten cap 21 draft exactly as is or to flatten. Cap 21 draft exactly as is or to flatten out out out the sponsorship info the way it was in. The sponsorship info the way it was in the sponsorship info the way it was in the previous. The previous the previous revision of the draft so it's just all revision of the draft so it's just all. Revision of the draft so it's just all one big one big one big like v3 structure wait. Like v3 structure wait like v3 structure wait well you're saying that so I'm looking. Well you're saying that so I'm looking well you're saying that so I'm looking at the current master. At the current master at the current master is that what you call the latest draft. Is that what you call the latest draft is that what you call the latest draft because this one is the hybrid one that. Because this one is the hybrid one that because this one is the hybrid one that has like this half. Has like this half has like this half flattened version exactly and so I'm flattened version exactly and so I'm. Flattened version exactly and so I'm saying either we just keep that saying either we just keep that. Saying either we just keep that or we should fully flatten it just or we should fully flatten it just. Or we should fully flatten it just like instead of having like instead of having. Like instead of having so no but that's actually the one that so no but that's actually the one that. So no but that's actually the one that doesn't make sense the one that's half doesn't make sense the one that's half. Doesn't make sense the one that's half flattened either you're doing a nesting flattened either you're doing a nesting. Flattened either you're doing a nesting fully nested fully nested fully nested right where you extend d3 inside v2 okay. Right where you extend d3 inside v2 okay right where you extend d3 inside v2 okay. Or you're doing the full flattening okay or you're doing the full flattening okay. Or you're doing the full flattening okay and then let's do that how about the and then let's do that how about the. And then let's do that how about the full flattening how about I just full flattening how about I just. Full flattening how about I just instead of making that up instead of instead of making that up instead of. Instead of making that up instead of making is having making is having making is having. Having sponsor info be a pointer to like having sponsor info be a pointer to like. Having sponsor info be a pointer to like an account entry an account entry an account entry. Or account extension v2 how about I or account extension v2 how about I or account extension v2 how about i. Just take the fields of account entry v2 just take the fields of account entry v2. Just take the fields of account entry v2 and make put them in line and make put them in line. And make put them in line inside the county account entry v3 or inside the county account entry v3 or. Inside the county account entry v3 or just put the whole just put the whole just put the whole. V2 structure in there yeah I know I don't really care yeah I know I don't really care. Honestly flatten it or honestly flatten it or honestly flatten it or or fully nest it but yeah the hybrid. Or fully nest it but yeah the hybrid or fully nest it but yeah the hybrid thing I think is kind of like the worst. Thing I think is kind of like the worst thing I think is kind of like the worst of all the worlds. Of all the worlds of all the worlds I propose that I will so I propose to I propose that I will so I propose to. I propose that I will so I propose to just basically just basically just basically. Revert to what it was before if lee revert to what it was before if lee revert to what it was before if lee. Is okay with that is okay with that is okay with that what was it before yesterday it was. What was it before yesterday it was what was it before yesterday it was nested before no no it was it was. Nested before no no it was it was nested before no no it was it was flattened before it was just. Flattened before it was just flattened before it was just the fields at the fields of v1 and v2. The fields at the fields of v1 and v2 the fields at the fields of v1 and v2 structures were just inside the v3. Structures were just inside the v3 structures were just inside the v3 structure structure. Structure yeah the things that I do think that yeah the things that I do think that. Yeah the things that I do think that flatten every time we flatten structures flatten every time we flatten structures. Flatten every time we flatten structures it involves it involves it involves changes in a bunch of places that we may. Changes in a bunch of places that we may changes in a bunch of places that we may. Or may not understand or may not understand or may not understand and i'd rather not do it if we can avoid. And i'd rather not do it if we can avoid and i'd rather not do it if we can avoid. It it it so are you advocating for the nested so are you advocating for the nested. So are you advocating for the nested version foodie nested is kind of the version foodie nested is kind of the. Version foodie nested is kind of the as a default is safe as a default is safe as a default is safe. Because we don't definitely require the because we don't definitely require the because we don't definitely require the. Fewest changes to core because we fewest changes to core because we fewest changes to core because we. Already have already have already have well not just score but like yeah it's well not just score but like yeah it's. Well not just score but like yeah it's not just core it's also right like the not just core it's also right like the. Not just core it's also right like the you know you know you know anything out there that is actually. Anything out there that is actually anything out there that is actually using sponsor like looking up. Using sponsor like looking up using sponsor like looking up sponsorship let's say. Sponsorship let's say sponsorship let's say so what about what about having them . So what about what about having them so what about what about having them not as pointers but just. Not as pointers but just not as pointers but just putting the v1 and v2 structures into v3. Putting the v1 and v2 structures into v3 putting the v1 and v2 structures into v3. So then so then so then any xtr library can just kind of extract any xtr library can just kind of extract. Any xtr library can just kind of extract those things by type those things by type. Those things by type no but it's the same problem you have to no but it's the same problem you have to. No but it's the same problem you have to you have to switch you have to switch you have to switch. Like you have to change your code that like you have to change your code that like you have to change your code that. Still still still compiles and still looks like it's compiles and still looks like it's. Compiles and still looks like it's working but working but working but it will just fail miserably when you. It will just fail miserably when you it will just fail miserably when you actually run into that. Like existing code it's always the same like existing code it's always the same problem right kind of like the. Problem right kind of like the problem right kind of like the the problem we you know we created. The problem we you know we created the problem we you know we created with the . With the with the what was it the next accounts what was it the next accounts. What was it the next accounts right like right like right like but I would argue that like mux. but I would argue that like mux but I would argue that like mux accounts is precisely because it's way. Accounts is precisely because it's way accounts is precisely because it's way worse mexican was way worse because. Worse mexican was way worse because worse mexican was way worse because of course people use accounts a lot more. Of course people use accounts a lot more of course people use accounts a lot more. Right but here we make it even more right but here we make it even more right but here we make it even more. French so that's kind of why french so that's kind of why french so that's kind of why. You know if if you're looking at like you know if if you're looking at like you know if if you're looking at like. The edge case of the edge case and you the edge case of the edge case and you the edge case of the edge case and you. Hope that people are going to hope that people are going to hope that people are going to. Do the right thing I think it's do the right thing I think it's do the right thing I think it's. Actually less likely actually less likely actually less likely because I mean the problem is that the. Because I mean the problem is that the because I mean the problem is that the nested is just like much much harder to. Nested is just like much much harder to nested is just like much much harder to program. Program program to right it's like you're literally like to right it's like you're literally like. To right it's like you're literally like fighting with like the right-hand margin. Fighting with like the right-hand margin fighting with like the right-hand margin. Of your of your of your of your text editor all the time of your text editor all the time. of your text editor all the time where it's like you have to put like where it's like you have to put like. Where it's like you have to put like line breaks in the middle of like you line breaks in the middle of like you. Line breaks in the middle of like you know know know expressions that contain dots and arrows. Expressions that contain dots and arrows expressions that contain dots and arrows. To access fields so it's just like to access fields so it's just like to access fields so it's just like. You know we're getting the point that you know we're getting the point that you know we're getting the point that. We're now we're gonna access fields that we're now we're gonna access fields that. We're now we're gonna access fields that are like you know are like you know are like you know. Four or five or six four or five or six four or five or six deep in structures it's just kind of. Deep in structures it's just kind of deep in structures it's just kind of like. Like like painful for the programmers so what so painful for the programmers so what so. Painful for the programmers so what so like like like yes there might be like a little bit. Yes there might be like a little bit yes there might be like a little bit more . More more stuff to do in transitional though I stuff to do in transitional though i. Stuff to do in transitional though I would argue that actually if like we would argue that actually if like we. Would argue that actually if like we do our xcr stuff right it's actually not do our xcr stuff right it's actually not. Do our xcr stuff right it's actually not that hard because you can automate a lot. That hard because you can automate a lot that hard because you can automate a lot. Of this stuff of this stuff of this stuff and so i'd rather just have a little. and so i'd rather just have a little and so i'd rather just have a little bit of pain up front and just have. Bit of pain up front and just have bit of pain up front and just have something that's like much nicer to. Something that's like much nicer to something that's like much nicer to program to. Program to program to in the long run so when I when I wrote in the long run so when I when I wrote. In the long run so when I when I wrote the prototype the prototype the prototype I actually used the nested version . I actually used the nested version I actually used the nested version . I didn't use the flattened version I didn't use the flattened version I didn't use the flattened version. Because because because it was easier to do an essence I it was easier to do an essence I i. It was easier to do an essence I mean you you put the account entry v3 mean you you put the account entry v3. Mean you you put the account entry v3 you didn't use the security put the you didn't use the security put the. You didn't use the security put the account entry v3 inside the country v2 account entry v3 inside the country v2. Account entry v3 inside the country v2 yeah I'm pretty sure that's what I did yeah I'm pretty sure that's what I did. Yeah I'm pretty sure that's what I did and it was it wasn't that bad and it was it wasn't that bad. And it was it wasn't that bad how wide what's your what's the width of how wide what's your what's the width of. How wide what's your what's the width of your text editor your text editor your text editor. I mean I use softwrap I mean I use softwrap I mean I use softwrap the thing is that david like the the if. The thing is that david like the the if the thing is that david like the the if you want to have a helper function. You want to have a helper function you want to have a helper function to avoid typing all this stuff you can. To avoid typing all this stuff you can to avoid typing all this stuff you can right like it's it. Right like it's it right like it's it that helpful function is optional in the that helpful function is optional in the. That helpful function is optional in the nested world it's mandatory nested world it's mandatory. Nested world it's mandatory in the non-nested world in the non-nested world in the non-nested world. And we already have all right okay and we already have all right okay and we already have all right okay. Whatever I'm overruled like no but whatever I'm overruled like no but whatever I'm overruled like no but. That's gonna vote that's gonna vote that's gonna vote you guys are all wrong but i'll do it. You guys are all wrong but i'll do it you guys are all wrong but i'll do it this way i'll rewrite the cap to do this. This way i'll rewrite the cap to do this this way i'll rewrite the cap to do this. You know generations generations of you know generations generations of you know generations generations of. Like poor Stellar programmers are gonna like poor Stellar programmers are gonna like poor Stellar programmers are gonna. Have to be typing structures six nested have to be typing structures six nested have to be typing structures six nested. Deep because like deep because like deep because like whatever you guys are worried about a. Whatever you guys are worried about a whatever you guys are worried about a non-existent problem but fine. Non-existent problem but fine non-existent problem but fine it's more important to get cap 21. It's more important to get cap 21 it's more important to get cap 21 accepted so . Accepted so accepted so fine it sounds like a reasonable fine it sounds like a reasonable. Fine it sounds like a reasonable concession concession concession there we are going with the nested. There we are going with the nested there we are going with the nested version in order to get cap21 done. Version in order to get cap21 done version in order to get cap21 done I like it I think this raises. I like it I think this raises I like it I think this raises interesting points though for the. Interesting points though for the interesting points though for the preconditions. Preconditions preconditions type that we're introducing because the type that we're introducing because the. Type that we're introducing because the precondition type precondition type precondition type. Is setting itself up to be like a is setting itself up to be like a is setting itself up to be like a. a flattened version or at least a flattened version or at least a flattened version or at least. That's that was my understanding that's that was my understanding that's that was my understanding. Of the proposal it would definitely work of the proposal it would definitely work. Of the proposal it would definitely work better I mean like in the better I mean like in the. Better I mean like in the like five five years from now there will like five five years from now there will. Like five five years from now there will be no benefit you know there will be be no benefit you know there will be. Be no benefit you know there will be only disadvantages to doing only disadvantages to doing. Only disadvantages to doing what we're doing now but like yes in the what we're doing now but like yes in the. What we're doing now but like yes in the short run it will be slightly smoother short run it will be slightly smoother. Short run it will be slightly smoother to do to do to do to do it with like a fully nested thing. To do it with like a fully nested thing to do it with like a fully nested thing it's just like just how when they were. It's just like just how when they were it's just like just how when they were choosing you know. Choosing you know choosing you know not to fix the precedence of the bitwise not to fix the precedence of the bitwise. Not to fix the precedence of the bitwise and and or operators when they went from. And and or operators when they went from and and or operators when they went from. Bcpl to c and introduced like the bcpl to c and introduced like the bcpl to c and introduced like the. Logical double and double r logical double and double r logical double and double r. And they're like well you know yeah this and they're like well you know yeah this. And they're like well you know yeah this is broken but there's like hundreds of is broken but there's like hundreds of. Is broken but there's like hundreds of c programmers in the world like we don't c programmers in the world like we don't. C programmers in the world like we don't want to you know break backwards want to you know break backwards. Want to you know break backwards compatibility and you know compatibility and you know. Compatibility and you know then we got to the point that even java then we got to the point that even java. Then we got to the point that even java adopted those broken adopted those broken. Adopted those broken let's get back let's get back let's get back like I don't know I understand what. Like I don't know I understand what like I don't know I understand what you're saying but at the same time. You're saying but at the same time you're saying but at the same time there is this like there is this need to. There is this like there is this need to there is this like there is this need to. Sort of sort of sort of get something out there that people can get something out there that people can. Get something out there that people can adopt and start using in order to well I adopt and start using in order to well i. Adopt and start using in order to well I think there's think there's think there's. There's really there's use cases that there's really there's use cases that there's really there's use cases that. Cap21 allows there's two there's two cap21 allows there's two there's two cap21 allows there's two there's two. Problems here I think problems here I think problems here I think one is I think people are like massively. One is I think people are like massively one is I think people are like massively. Mistaken about mistaken about mistaken about you know how hard it is to adapt to you know how hard it is to adapt to. You know how hard it is to adapt to something where you have like multiple something where you have like multiple. Something where you have like multiple versions of the structure right versions of the structure right. Versions of the structure right and we already have an existence proof and we already have an existence proof. And we already have an existence proof that we did it with something which much that we did it with something which much. That we did it with something which much harder which was the accounts in order harder which was the accounts in order. Harder which was the accounts in order to get the most accounts right so if we to get the most accounts right so if we. To get the most accounts right so if we survive that we can definitely survive survive that we can definitely survive. Survive that we can definitely survive this this this the second thing is I think people don't. The second thing is I think people don't the second thing is I think people don't. Appreciate how much should be automated appreciate how much should be automated appreciate how much should be automated. Because currently in our sdk because currently in our sdk because currently in our sdk. We're doing too much sort of manual we're doing too much sort of manual we're doing too much sort of manual. Stuff right stuff right stuff right and if you use sort of like more and if you use sort of like more. And if you use sort of like more meta programming friendly meta programming friendly . meta programming friendly xdr libraries like say you know xdr libraries like say you know. Xdr libraries like say you know goxster the the one that I wrote or the goxster the the one that I wrote or the. Goxster the the one that I wrote or the xdrpp that we're using xdrpp that we're using. Xdrpp that we're using for Stellar you can actually automate for Stellar you can actually automate. for Stellar you can actually automate a lot of this stuff a lot of this stuff a lot of this stuff. And so what would be great is that since and so what would be great is that since. And so what would be great is that since there's like the places where people there's like the places where people. There's like the places where people actually care about this actually care about this. Actually care about this probably if they do it all is when probably if they do it all is when. Probably if they do it all is when they're manipulating the json and it's they're manipulating the json and it's. They're manipulating the json and it's not it would be easy to write just like not it would be easy to write just like. Not it would be easy to write just like a few simple rules to like a few simple rules to like. A few simple rules to like make the json look the same or to make the json look the same or to. Make the json look the same or to understand the json both ways understand the json both ways. Understand the json both ways but you know what I'm just beating a but you know what I'm just beating a. But you know what I'm just beating a dead horse we'll i'll just dead horse we'll i'll just . Dead horse we'll i'll just you know maybe a thing to do is like you know maybe a thing to do is like. You know maybe a thing to do is like introduce a a cap that's like a meta cap introduce a a cap that's like a meta cap. Introduce a a cap that's like a meta cap but like this is how we should do but like this is how we should do. But like this is how we should do upgrades and upgrades and upgrades and show some evidence for why in the future. Show some evidence for why in the future show some evidence for why in the future. It's better to actually version it's better to actually version it's better to actually version. Structures structures structures and put the versions at the top instead and put the versions at the top instead. And put the versions at the top instead of putting these ext things at the of putting these ext things at the. Of putting these ext things at the bottom but bottom but bottom but whatever so general preconditions I think that's. So general preconditions I think that's what was it lee what was it lee what was it lee. It was yeah asking about that yeah sorry it was yeah asking about that yeah sorry. It was yeah asking about that yeah sorry I think in general I think in general I think in general. A it's a misleading name a it's a misleading name a it's a misleading name yeah I'm I'm not really too fussed on. Yeah I'm I'm not really too fussed on yeah I'm I'm not really too fussed on the on the name but I I'm just. The on the name but I I'm just the on the name but I I'm just not the no it's not the name but the you. Not the no it's not the name but the you not the no it's not the name but the you. Know right now it's hardcoded not know right now it's hardcoded not know right now it's hardcoded not. General general general that's what I mean by it's a lie that's what I mean by it's a lie. That's what I mean by it's a lie so I thought it it was habit you so I thought it it was habit you. So I thought it it was habit you wanted to become like pre-conditioned v1 wanted to become like pre-conditioned v1. Wanted to become like pre-conditioned v1 or something like what do you want or something like what do you want. Or something like what do you want no I would like make it an array of no I would like make it an array of . No I would like make it an array of you know static array or something you know static array or something. You know static array or something but we've already we've already let's but we've already we've already let's. But we've already we've already let's not relitigate that I know we do we not relitigate that I know we do we. Not relitigate that I know we do we already we already discussed this already we already discussed this. Already we already discussed this and and only introduced because and and only introduced because. And and only introduced because so actually they have a more of a so actually they have a more of a. So actually they have a more of a question related to the to the cap question related to the to the cap. Question related to the to the cap because what have been the time I spent because what have been the time I spent. Because what have been the time I spent actually in the past actually in the past . Actually in the past few days was looking at the step few days was looking at the step. Few days was looking at the step that is the payment channel protocol that is the payment channel protocol. That is the payment channel protocol trying to see okay like how is trying to see okay like how is. trying to see okay like how is that set related really to the cap that set related really to the cap. That set related really to the cap and it doesn't look like the set is and it doesn't look like the set is. And it doesn't look like the set is using using using all of the functionalities that are in. All of the functionalities that are in all of the functionalities that are in the cap so that's kind of what you know. The cap so that's kind of what you know the cap so that's kind of what you know where I'm coming from it's like I feel. Where I'm coming from it's like I feel where I'm coming from it's like I feel like it's . Like it's like it's trying to guess on use cases that maybe trying to guess on use cases that maybe. Trying to guess on use cases that maybe don't exist and at the same time I would don't exist and at the same time I would. Don't exist and at the same time I would prefer to grab something that's that prefer to grab something that's that. Prefer to grab something that's that can be extended can be extended can be extended. Easily as opposed to right now because easily as opposed to right now because easily as opposed to right now because. We can we can we can just we can just version it right just we can just version it right. Just we can just version it right now if you mention it you break now if you mention it you break. Now if you mention it you break everybody even even if we're doing the everybody even even if we're doing the. Everybody even even if we're doing the fully nested there's no reason why we fully nested there's no reason why we. Fully nested there's no reason why we can't version can't version can't version the v3 thing that's dangling off the v2. The v3 thing that's dangling off the v2 the v3 thing that's dangling off the v2 right. Right right like if you want to add a new condition like if you want to add a new condition. Like if you want to add a new condition you would break all the you would break all the. You would break all the all consumers no because you would just all consumers no because you would just. All consumers no because you would just have a data structure that includes have a data structure that includes. Have a data structure that includes yeah now you need to add access also yeah now you need to add access also. Yeah now you need to add access also every single every single every single condition. No you just need a function that always no you just need a function that always converts to the latest version. Converts to the latest version converts to the latest version but that can be done in a in an. But that can be done in a in an but that can be done in a in an automated way automated way. Automated way could we just add a v2 can we just add could we just add a v2 can we just add. Could we just add a v2 can we just add an extension on the end of the general an extension on the end of the general. An extension on the end of the general precondition so that we can v2 it precondition so that we can v2 it. Precondition so that we can v2 it dangling dangling dangling I mean we're going to have to if this. I mean we're going to have to if this I mean we're going to have to if this thing is. Thing is thing is like we're totally bike shedding this like we're totally bike shedding this. like we're totally bike shedding this thing like and thing like and thing like and. Did someone else wanna make a pass at did someone else wanna make a pass at did someone else wanna make a pass at. This and then like i'll this and then like i'll this and then like i'll clean up the mess so that like because. Clean up the mess so that like because clean up the mess so that like because otherwise I'm gonna do something that. Otherwise I'm gonna do something that otherwise I'm gonna do something that like you guys aren't going to like. I think it's worth just responding to I think it's worth just responding to nico what you said about. Nico what you said about nico what you said about you know the prototype channel protocol. You know the prototype channel protocol you know the prototype channel protocol doesn't use all of the fields. Doesn't use all of the fields doesn't use all of the fields the only field it doesn't use right now. The only field it doesn't use right now the only field it doesn't use right now is ledger bounds it uses everything else. And I think that was a comment or and I think that was a comment or something that david and i. Something that david and I something that david and I talked about very briefly was it doesn't. Talked about very briefly was it doesn't talked about very briefly was it doesn't. Make sense to keep ledger bounds make sense to keep ledger bounds make sense to keep ledger bounds. because of that why what is the argument for keeping why what is the argument for keeping. Electric bounds the argument for keeping electric bounds the argument for keeping. Electric bounds the argument for keeping the ledger bounds the ledger bounds the ledger bounds. Is that the the the current payment is that the the the current payment is that the the the current payment. Channels channels channels are kind of probably safe enough are kind of probably safe enough. Are kind of probably safe enough but they're not safe if there's like but they're not safe if there's like. But they're not safe if there's like you know something happens and there's you know something happens and there's. You know something happens and there's like you know an hour of downtime on the like you know an hour of downtime on the. Like you know an hour of downtime on the network or something which you know network or something which you know. Network or something which you know does actually happen periodically so does actually happen periodically so. Does actually happen periodically so somebody who's paranoid somebody who's paranoid. Somebody who's paranoid and wants to make create a payment and wants to make create a payment. And wants to make create a payment channel that is actually robust channel that is actually robust. Channel that is actually robust to downtime of the network would also to downtime of the network would also. To downtime of the network would also need need need the ledger bounds to be safe. The ledger bounds to be safe the ledger bounds to be safe if right because it never goes down all. If right because it never goes down all if right because it never goes down all your timers expire. Your timers expire your timers expire but if you have this ledger bound thing but if you have this ledger bound thing. But if you have this ledger bound thing then then then you have since the network wasn't. you have since the network wasn't you have since the network wasn't creating you ledgers while it was down. Creating you ledgers while it was down creating you ledgers while it was down you still have some opportunity to . You still have some opportunity to you still have some opportunity to you know. You know you know get in there and prevent someone from get in there and prevent someone from. Get in there and prevent someone from incorrectly closing the channel personally I'm like not really that. Personally I'm like not really that concerned about changing the concerned about changing the. Concerned about changing the like however we struck for the like however we struck for the. Like however we struck for the preconditions like preconditions like preconditions like. We could make it an array of you know we could make it an array of you know . We could make it an array of you know of whatever of unions and that would be of whatever of unions and that would be. Of whatever of unions and that would be fine or we could fine or we could fine or we could. Make it a it doesn't really matter make it a it doesn't really matter make it a it doesn't really matter. Honestly to me honestly to me honestly to me I think like I think like I think like. At the end of the day like people are at the end of the day like people are at the end of the day like people are. Caring much more about writing these caring much more about writing these caring much more about writing these. Than reading them like the only thing than reading them like the only thing. Than reading them like the only thing that really should be reading these at that really should be reading these at. That really should be reading these at the end of the day the end of the day the end of the day. Is you know like if you for some is you know like if you for some is you know like if you for some. Reason want to inspect something to make reason want to inspect something to make. Reason want to inspect something to make sure that you're sure that you're sure that you're. Signing the thing that you mean to be signing the thing that you mean to be signing the thing that you mean to be. Signing signing signing which I think is like a very very very which I think is like a very very very. Which I think is like a very very very small subset of the code because a lot small subset of the code because a lot. Small subset of the code because a lot of times you're assigning the of times you're assigning the. Of times you're assigning the transactions that you're creating transactions that you're creating. Transactions that you're creating yourself in which case you kind of know yourself in which case you kind of know. Yourself in which case you kind of know what you're doing what you're doing what you're doing. And core and since like this stuff is and core and since like this stuff is and core and since like this stuff is. Super isolated down to just like one super isolated down to just like one super isolated down to just like one. Code path and core code path and core code path and core and if you read the wrong branch and. And if you read the wrong branch and and if you read the wrong branch and you're you know signing code and then. You're you know signing code and then you're you know signing code and then you you. You you're just not going to sign that you're just not going to sign that you're just not going to sign that. Transaction because you didn't know what transaction because you didn't know what. Transaction because you didn't know what it meant it meant it meant or your code didn't understand it so. Or your code didn't understand it so or your code didn't understand it so like I don't feel like the risk of. Like I don't feel like the risk of like I don't feel like the risk of blowing yourself up with edge cases here. Blowing yourself up with edge cases here blowing yourself up with edge cases here. Is particularly high is particularly high is particularly high so like let's not fight about it that. So like let's not fight about it that so like let's not fight about it that much much. Much like we have unions on unions on all like we have unions on unions on all like we have unions on unions on all. Sorts of stuff everywhere and sorts of stuff everywhere and sorts of stuff everywhere and. We just kind of you know transactions we just kind of you know transactions we just kind of you know transactions. For like for example I could send you a for like for example I could send you a for like for example I could send you a. V0 transaction if your code only knows v0 transaction if your code only knows v0 transaction if your code only knows. How to handle v1 transactions you're how to handle v1 transactions you're how to handle v1 transactions you're. Going to blow up going to blow up going to blow up so like we already serious problems. So like we already serious problems so like we already serious problems is is. Is john is your comment about whether or john is your comment about whether or john is your comment about whether or. Not we need ledger bounds not we need ledger bounds not we need ledger bounds no no no no it's about like the whole. No no no no it's about like the whole no no no no it's about like the whole like nico saying like these aren't. Like nico saying like these aren't like nico saying like these aren't really general. Really general really general it's about that part I personally I it's about that part I personally i. It's about that part I personally I think think think my point is kind of like the ludger band. My point is kind of like the ludger band my point is kind of like the ludger band. Seemed reasonable to me seemed reasonable to me seemed reasonable to me the structure is reasonable to me we. The structure is reasonable to me we the structure is reasonable to me we could do a different structure and it. Could do a different structure and it could do a different structure and it would also be reasonable to me. Would also be reasonable to me would also be reasonable to me I don't see a lot of reason to hash it. I don't see a lot of reason to hash it I don't see a lot of reason to hash it out for 20 minutes . Out for 20 minutes out for 20 minutes so I is just it could you could could we. So I is just it could you could could we so I is just it could you could could we. Just change the name from general just change the name from general just change the name from general. Preconditions to something else preconditions to something else preconditions to something else. Yeah I mean like if you named it like yeah I mean like if you named it like yeah I mean like if you named it like. Preconditions v1 or something preconditions v1 or something preconditions v1 or something. That would map up with the names that we that would map up with the names that we. That would map up with the names that we normally use normally use normally use but like that sounds good doesn't really. But like that sounds good doesn't really but like that sounds good doesn't really. Matter to me matter to me matter to me because if you didn't change it I would because if you didn't change it I would. Because if you didn't change it I would just stick like if you called in general just stick like if you called in general. Just stick like if you called in general preconditions preconditions preconditions. I would just like if I needed to change I would just like if I needed to change I would just like if I needed to change. It later I would just call it general it later I would just call it general it later I would just call it general. Preconditions of v2 and call today preconditions of v2 and call today preconditions of v2 and call today. So you know so you know so you know can we can we add an extension as well can we can we add an extension as well. Can we can we add an extension as well so that we just so that we just so that we just. Follow the same dangling pattern I follow the same dangling pattern I follow the same dangling pattern I i. Just don't see a lot of reason to is just don't see a lot of reason to is just don't see a lot of reason to is. Kind of kind of kind of my point here like if you can't handle my point here like if you can't handle. My point here like if you can't handle the types of transactions you're trying the types of transactions you're trying. The types of transactions you're trying to sign you won't sign them to sign you won't sign them. To sign you won't sign them and like great if you didn't sign and like great if you didn't sign. And like great if you didn't sign something then you didn't agree to something then you didn't agree to. Something then you didn't agree to something you didn't understand something you didn't understand. Something you didn't understand so that's not that I mean the point so that's not that I mean the point. So that's not that I mean the point is is is it's already in union we've we've. It's already in union we've we've it's already in union we've we've already got like no preconditions and. Already got like no preconditions and already got like no preconditions and time bounds right so. Time bounds right so time bounds right so there's like if it turns out that we there's like if it turns out that we. There's like if it turns out that we need a different kind of preconditions need a different kind of preconditions. Need a different kind of preconditions we can just add we can just add we can just add. a you know a preconditions v2 nobody a you know a preconditions v2 nobody a you know a preconditions v2 nobody. Can handle the v can handle the v can handle the v like the the what is it's the extension. Like the the what is it's the extension like the the what is it's the extension to. To to like number two like case number two like number two like case number two like number two like case number two. Right now anyway without modifying their right now anyway without modifying their. Right now anyway without modifying their code code code so like it's more about thinking about. So like it's more about thinking about so like it's more about thinking about what happens when you. What happens when you what happens when you change when you make a v2 of that thing. Change when you make a v2 of that thing change when you make a v2 of that thing right. Right right yeah that's what you're saying though yeah that's what you're saying though. Yeah that's what you're saying though like if let's say that I make let's say like if let's say that I make let's say. Like if let's say that I make let's say that like I add a new feature which is that like I add a new feature which is. That like I add a new feature which is like like like I don't know like time times ledger. I don't know like time times ledger I don't know like time times ledger bound some. Bound some bound some super crazy stupid condition that nobody super crazy stupid condition that nobody. Super crazy stupid condition that nobody no how about number of ledgers that no how about number of ledgers that. No how about number of ledgers that aren't completely flawless number one aren't completely flawless number one. Aren't completely flawless number one that's actually plausible number of that's actually plausible number of. That's actually plausible number of ledgers that aren't completely full ledgers that aren't completely full. Ledgers that aren't completely full but like if you want to sign this you're but like if you want to sign this you're. But like if you want to sign this you're only going to sign transaction like if only going to sign transaction like if. Only going to sign transaction like if you want to sign stuff and you want to you want to sign stuff and you want to. You want to sign stuff and you want to understand what you're signing understand what you're signing. Understand what you're signing so you're checking for some condition so you're checking for some condition. So you're checking for some condition you're not going to sign stuff that you you're not going to sign stuff that you. You're not going to sign stuff that you don't understand don't understand don't understand. So like your code might barf but like so like your code might barf but like so like your code might barf but like. You won't have signed something that you you won't have signed something that you. You won't have signed something that you didn't understand so it's it's fine didn't understand so it's it's fine. Didn't understand so it's it's fine like I don't understand what the bad like I don't understand what the bad. Like I don't understand what the bad case if you don't understand something case if you don't understand something. Case if you don't understand something is you're just not going to agree to is you're just not going to agree to. Is you're just not going to agree to something that something that something that. Like I don't know I don't like I don't know I don't like I don't know I don't I don't think there's a bad case there i. I don't think there's a bad case there I don't think there's a bad case there i. Think the case that I'm concerned with think the case that I'm concerned with think the case that I'm concerned with. Is the same case with is the same case with is the same case with that we were talking to about with the. That we were talking to about with the that we were talking to about with the account extensions and that is that. Account extensions and that is that account extensions and that is that every sdk every application that. every sdk every application that every sdk every application that pauses the xdr. Pauses the xdr pauses the xdr now needs to look for time or now now needs to look for time or now. Now needs to look for time or now let's take let's take let's take a ledger bounce so say ledger amount. A ledger bounce so say ledger amount a ledger bounce so say ledger amount stays in the v1 then we add. Stays in the v1 then we add stays in the v1 then we add v2 ledger bounds is now going to be in. V2 ledger bounds is now going to be in v2 ledger bounds is now going to be in two places so it needs to look for it in. Two places so it needs to look for it in two places so it needs to look for it in. Both places both places both places so there's the parsing case and then so there's the parsing case and then. So there's the parsing case and then there's also the creation case for the there's also the creation case for the. There's also the creation case for the transaction so sdks need to make a transaction so sdks need to make a. Transaction so sdks need to make a decision about decision about decision about you know what's the general best. you know what's the general best you know what's the general best practice for creating a transaction that. Practice for creating a transaction that practice for creating a transaction that. Has ledger bounds do they use the new v2 has ledger bounds do they use the new v2. Has ledger bounds do they use the new v2 that has ledger bounds or do they use that has ledger bounds or do they use. That has ledger bounds or do they use the new v1 or do they the new v1 or do they. The new v1 or do they only use the v2 when they're using one only use the v2 when they're using one. Only use the v2 when they're using one of the new fields of the new fields of the new fields. and for the most part in a lot of and for the most part in a lot of and for the most part in a lot of. Cases that probably won't matter but in cases that probably won't matter but in cases that probably won't matter but in. The cases where the cases where the cases where somebody builds a transaction and then. Somebody builds a transaction and then somebody builds a transaction and then they want to build that exact. They want to build that exact they want to build that exact same transaction and they want to expect. Same transaction and they want to expect same transaction and they want to expect. The sdk to build it the same way the sdk to build it the same way the sdk to build it the same way. That does matter because if an sk sdk that does matter because if an sk sdk that does matter because if an sk sdk. Developer decides they're just always developer decides they're just always developer decides they're just always. Going to use the latest version going to use the latest version going to use the latest version. Structure then the transaction is going structure then the transaction is going structure then the transaction is going. To change every time they build that to change every time they build that to change every time they build that. Same transaction same transaction same transaction so we're actually in some ways we're. So we're actually in some ways we're so we're actually in some ways we're actually introducing it backwards. Actually introducing it backwards actually introducing it backwards incompatibility. Incompatibility incompatibility because we're saying like you because we're saying like you. Because we're saying like you conceptually build the same transaction conceptually build the same transaction. Conceptually build the same transaction but you know sdks may make it so that but you know sdks may make it so that. But you know sdks may make it so that you're actually building a different you're actually building a different. You're actually building a different transaction transaction transaction I see what you're getting at here and. I see what you're getting at here and I see what you're getting at here and like like. Like that's a concern I don't totally that's a concern I don't totally that's a concern I don't totally. Think that that concern is necessarily think that that concern is necessarily think that that concern is necessarily. Exactly exactly exactly relevant here in the sense that like I relevant here in the sense that like i. Relevant here in the sense that like I don't know what don't know what don't know what. Promises sdks are making but like if an promises sdks are making but like if an promises sdks are making but like if an. Sdk is promising to have that property sdk is promising to have that property sdk is promising to have that property. That we're not going to that we're not going to that we're not going to retroactively change your stuff and. Retroactively change your stuff and retroactively change your stuff and that's really a property of the sdk. That's really a property of the sdk that's really a property of the sdk because like if you're creating like a. Because like if you're creating like a because like if you're creating like a semantic transaction I feel like the sdk. Semantic transaction I feel like the sdk semantic transaction I feel like the sdk. Just has a promise to do what it's just has a promise to do what it's just has a promise to do what it's. What you asked it to do but if you want what you asked it to do but if you want what you asked it to do but if you want. To have a stronger constraint like an to have a stronger constraint like an to have a stronger constraint like an. Exact transaction you probably need a exact transaction you probably need a exact transaction you probably need a. Different different different vocabulary in the sdk for that but vocabulary in the sdk for that but. vocabulary in the sdk for that but putting that all aside like the thing putting that all aside like the thing. Putting that all aside like the thing that I'm the thing that makes me scared that I'm the thing that makes me scared. That I'm the thing that makes me scared about like doing the nesting in this about like doing the nesting in this. About like doing the nesting in this context is like context is like context is like. You really really really don't want you really really really don't want you really really really don't want. To sign something that you don't to sign something that you don't to sign something that you don't. Understand like imagine that you're understand like imagine that you're understand like imagine that you're. A guy and you're like I'm looking for a guy and you're like I'm looking for a guy and you're like I'm looking for. This ledger bound structure right which this ledger bound structure right which this ledger bound structure right which. I know to be in the in the case 2 I know to be in the in the case 2 I know to be in the in the case 2. Extension extension extension also known as general preconditions also known as general preconditions. also known as general preconditions but like imagine we're dangling a v3 off but like imagine we're dangling a v3 off. But like imagine we're dangling a v3 off of it of it of it you have to actually like you can't just. You have to actually like you can't just you have to actually like you can't just. Call a function to look up the v2 one call a function to look up the v2 one call a function to look up the v2 one. And look out and look out and look out look up the ledger numbers because you look up the ledger numbers because you. Look up the ledger numbers because you actually have to check to make sure that actually have to check to make sure that. Actually have to check to make sure that the v3 stuff the v3 stuff the v3 stuff isn't there because if it is there. Isn't there because if it is there isn't there because if it is there in nested you're going to sign something. In nested you're going to sign something in nested you're going to sign something. That you didn't mean to sign that you didn't mean to sign that you didn't mean to sign. This is this is what I wrote in the code this is this is what I wrote in the code. This is this is what I wrote in the code example in the agenda this is why it example in the agenda this is why it. Example in the agenda this is why it kind of explodes and becomes kind of explodes and becomes. Kind of explodes and becomes pretty awful so pretty awful so pretty awful so as versions increment you're going to. As versions increment you're going to as versions increment you're going to get more and more of these to go. Get more and more of these to go get more and more of these to go down down the rabbit hole of checking so. Down down the rabbit hole of checking so down down the rabbit hole of checking so. I really think like the much safer thing I really think like the much safer thing. I really think like the much safer thing is to just is to just is to just fail to like fail to sign things you. Fail to like fail to sign things you fail to like fail to sign things you don't understand. Don't understand don't understand and then update your code to understand and then update your code to understand. And then update your code to understand them instead of having to handle all them instead of having to handle all. Them instead of having to handle all these cases of like oh like what if the these cases of like oh like what if the. These cases of like oh like what if the what I need something that's in the v4 what I need something that's in the v4. What I need something that's in the v4 but the v3 doesn't but the v3 doesn't but the v3 doesn't. Like but the v3 exists but I don't care like but the v3 exists but I don't care like but the v3 exists but I don't care. About anything there maybe the v5 about anything there maybe the v5 about anything there maybe the v5. Like that gets really confusing and your like that gets really confusing and your. Like that gets really confusing and your code can change out from under you code can change out from under you. Code can change out from under you just as the extensions grow basically just as the extensions grow basically. Just as the extensions grow basically and and I think that there's another and and I think that there's another. And and I think that there's another thing thing thing too which is that if we were really. Too which is that if we were really too which is that if we were really trying to build this like little. Trying to build this like little trying to build this like little language language. Language of like you know have an array of little of like you know have an array of little. Of like you know have an array of little precondition operations that can be precondition operations that can be. precondition operations that can be sort of like arbitrary or you know it sort of like arbitrary or you know it. Sort of like arbitrary or you know it can be constantly extended can be constantly extended. Can be constantly extended honestly we then we should try to unify honestly we then we should try to unify. Honestly we then we should try to unify that with like the claimable balances that with like the claimable balances. That with like the claimable balances right because right because right because we have like two different little. We have like two different little we have like two different little languages for. Languages for languages for like preconditions right or if we do like preconditions right or if we do. Like preconditions right or if we do have two different ones then it just have two different ones then it just. Have two different ones then it just seems like seems like seems like really needlessly complex for people to. Really needlessly complex for people to really needlessly complex for people to like. Like like learn how to use this so what we have is learn how to use this so what we have is. Learn how to use this so what we have is simple simple simple it is not it doesn't have to be the last. It is not it doesn't have to be the last it is not it doesn't have to be the last. Word because we can word because we can word because we can change it by again using these unions. Change it by again using these unions change it by again using these unions. and it you know it covers like and it you know it covers like and it you know it covers like. All the things that we need to do all the things that we need to do all the things that we need to do. Payment channels plus the thing that we payment channels plus the thing that we payment channels plus the thing that we. Need if we want to do like super safe need if we want to do like super safe need if we want to do like super safe. Payment channels which like there's payment channels which like there's payment channels which like there's. You know some people like might want to you know some people like might want to you know some people like might want to. Be able like people could potentially be able like people could potentially be able like people could potentially. Object that you know well on ethereum I object that you know well on ethereum I object that you know well on ethereum i. Can make it safer by counting ledgers or can make it safer by counting ledgers or. Can make it safer by counting ledgers or something something something that like this is like a good set and. that like this is like a good set and that like this is like a good set and. That we shouldn't let the perfect be the that we shouldn't let the perfect be the. That we shouldn't let the perfect be the enemy of the good we just do this and if. Enemy of the good we just do this and if enemy of the good we just do this and if. It turns out that it's like so it turns out that it's like so it turns out that it's like so. Successful that we want like successful that we want like successful that we want like. 12 different other slight variations on 12 different other slight variations on 12 different other slight variations on. The preconditions then then we can do a the preconditions then then we can do a the preconditions then then we can do a. An array of a programmable thing or an array of a programmable thing or an array of a programmable thing or. Maybe we can update the claimable maybe we can update the claimable maybe we can update the claimable. Balances and have like a general balances and have like a general balances and have like a general. Language for describing preconditions language for describing preconditions language for describing preconditions. I'm pretty in sync with david on this I'm pretty in sync with david on this I'm pretty in sync with david on this. One personally one personally one personally I think the argument is basically just a. I think the argument is basically just a I think the argument is basically just a. Lot different than the lot different than the lot different than the than the ledger entry stuff where we. Than the ledger entry stuff where we than the ledger entry stuff where we already have something established that. Already have something established that already have something established that we're already doing so. So what would that mean the next step is so what would that mean the next step is. For cap 21 like what is the revision for cap 21 like what is the revision for cap 21 like what is the revision. And who who's sort of taking it on I think the only thing we said we might I think the only thing we said we might. Change is to change change is to change change is to change general precondition to precondition v1. General precondition to precondition v1 general precondition to precondition v1 and that was it. And that was it and that was it that's it and we would keep ledger that's it and we would keep ledger. That's it and we would keep ledger bounds wait I thought we were also we bounds wait I thought we were also we. Bounds wait I thought we were also we had to move to the had to move to the had to move to the. Extensions these like multiple extensions these like multiple extensions these like multiple. Extensions extensions extensions I think what john counted I thought what I think what john counted I thought what. I think what john counted I thought what john and you were advocating for was no john and you were advocating for was no. John and you were advocating for was no extensions extensions extensions I thought we were just talking about the. I thought we were just talking about the I thought we were just talking about the. Preconditions not the not the preconditions not the not the preconditions not the not the. Legendary extension there's two legendary extension there's two legendary extension there's two. Questions right questions right questions right one is should our preconditions be how. One is should our preconditions be how one is should our preconditions be how to do future accessibility for the . To do future accessibility for the to do future accessibility for the for the preconditions that are embedded. For the preconditions that are embedded for the preconditions that are embedded in the transaction and the other is. In the transaction and the other is in the transaction and the other is what to do about the ledger entry. What to do about the ledger entry what to do about the ledger entry extension extension. Extension part or the count entry extension part part or the count entry extension part. Part or the count entry extension part right right right so john I believe you and I were talking. So john I believe you and I were talking so john I believe you and I were talking. About just what goes in an actual about just what goes in an actual about just what goes in an actual. Transaction the preconditions transaction the preconditions transaction the preconditions. Right yeah that's the thing that I think right yeah that's the thing that I think. Right yeah that's the thing that I think is really dangerous to have these is really dangerous to have these. Is really dangerous to have these accessor functions for that just like accessor functions for that just like. Accessor functions for that just like look that don't necessarily look all the look that don't necessarily look all the. Look that don't necessarily look all the way down to the bottom way down to the bottom. Way down to the bottom right and so and so of course while right and so and so of course while. Right and so and so of course while I'm happy to leave I'm happy to leave I'm happy to leave. Cap 21 and this is it sounded like cap 21 and this is it sounded like cap 21 and this is it sounded like . We wanted like it sounded like the we wanted like it sounded like the we wanted like it sounded like the. Everybody else wanted me to make like everybody else wanted me to make like everybody else wanted me to make like. These these these to dangle accounting extension v3 off of to dangle accounting extension v3 off of. To dangle accounting extension v3 off of account extension account extension account extension. V2 yes yeah sorry I left that out v2 yes yeah sorry I left that out v2 yes yeah sorry I left that out. At least so I guess I can just do that at least so I guess I can just do that. At least so I guess I can just do that fine fine fine i'll change my stomach but i'll do it. I'll change my stomach but i'll do it i'll change my stomach but i'll do it and so that after that change we'll sort. And so that after that change we'll sort and so that after that change we'll sort. Of reevaluate cap 21. Of reevaluate cap 21. Of reevaluate cap 21. Are there any other questions that we are there any other questions that we are there any other questions that we. Want to talk about about cap 21 right want to talk about about cap 21 right want to talk about about cap 21 right. Now or should we move on to cat 40. Now or should we move on to cat 40. Now or should we move on to cat 40. I did have one other question about this I did have one other question about this. I did have one other question about this there was like something that struck me there was like something that struck me. There was like something that struck me as kind of strange as kind of strange as kind of strange. Yeah so there there actually I had yeah so there there actually I had yeah so there there actually I had. There like three lines I pulled out and there like three lines I pulled out and there like three lines I pulled out and. Like all of them were basically about like all of them were basically about like all of them were basically about. The exact same thing and I kept thinking the exact same thing and I kept thinking. The exact same thing and I kept thinking that this was really weird that this was really weird. That this was really weird there's a sentence in the proposal that there's a sentence in the proposal that. There's a sentence in the proposal that reads reads reads all transactions are validated sequence. All transactions are validated sequence all transactions are validated sequence numbers increased. Numbers increased numbers increased and fees deducted before any operations and fees deducted before any operations. And fees deducted before any operations are executed are executed are executed one consequence is that bump sequence. One consequence is that bump sequence one consequence is that bump sequence operations though they update an account. Operations though they update an account operations though they update an account. Seek time and seek ledger seek time and seek ledger seek time and seek ledger do not affect the validity of other. Do not affect the validity of other do not affect the validity of other transactions in the same block. Transactions in the same block transactions in the same block but that's that's actually not how. But that's that's actually not how but that's that's actually not how things work at all right now. Things work at all right now things work at all right now so this is like either a very profound. So this is like either a very profound so this is like either a very profound change to the way that things work that. Change to the way that things work that change to the way that things work that we'd have to recognize is a really big. We'd have to recognize is a really big we'd have to recognize is a really big change. Change change even though I don't think people are even though I don't think people are. Even though I don't think people are using bump seek a lot using bump seek a lot using bump seek a lot. Or it's a misunderstanding of the or it's a misunderstanding of the or it's a misunderstanding of the. Current situation sorry the current situation sorry the current situation sorry the. Audio is breaking up audio is breaking up audio is breaking up sorry what's what's the line number. Sorry what's what's the line number sorry what's what's the line number or what can what can I search for. Or what can what can I search for or what can what can I search for because because. Because you broke up when you're saying which you broke up when you're saying which . You broke up when you're saying which yeah let me just tell you what to search. Yeah let me just tell you what to search yeah let me just tell you what to search. For if you search for for if you search for for if you search for probably if you search for one. Probably if you search for one probably if you search for one consequence is consequence is. Consequence is that'll probably work let me see if that that'll probably work let me see if that. That'll probably work let me see if that works okay yeah works okay yeah works okay yeah. Yeah I often find myself searching for yeah I often find myself searching for yeah I often find myself searching for. One consequences one consequences one consequences right but that actually is what happens. Right but that actually is what happens right but that actually is what happens currently right bump sequence. Currently right bump sequence currently right bump sequence happens when you're executing operations. Happens when you're executing operations happens when you're executing operations. It doesn't happen when you're validating it doesn't happen when you're validating. It doesn't happen when you're validating operations operations operations correct but like like let's imagine. Correct but like like let's imagine correct but like like let's imagine that you have one source account. That you have one source account that you have one source account you submit transactions t1 and t2 at. You submit transactions t1 and t2 at you submit transactions t1 and t2 at sequence numbers. Sequence numbers sequence numbers you know n plus one and n plus two you know n plus one and n plus two. you know n plus one and n plus two you get the point you get the point you get the point. and the behavior like both of them and the behavior like both of them and the behavior like both of them. Are no ops they contain like are no ops they contain like are no ops they contain like . Zero sorry I don't know if david can zero sorry I don't know if david can zero sorry I don't know if david can. Hear me at all right now hear me at all right now hear me at all right now no I can't but.   I can't hear david oh hopefully I'm on summer when oh hopefully I'm on summer when. Like I can't like I can't like I can't I couldn't do this meeting but I want to I couldn't do this meeting but I want to. I couldn't do this meeting but I want to move forward so move forward so move forward so. you have okay where's the chat let's let's okay where's the chat let's let's. Take this one off take this one off take this one off let's take this one to the mailing list. Let's take this one to the mailing list let's take this one to the mailing list I think. Yeah and I want to point something out yeah and I want to point something out that that doesn't actually impact. That that doesn't actually impact that that doesn't actually impact the behavior of the bump sequence the. The behavior of the bump sequence the the behavior of the bump sequence the payment channels are not actually. Payment channels are not actually payment channels are not actually dependent on that. Dependent on that dependent on that so I think that that what that breaks is so I think that that what that breaks is. So I think that that what that breaks is that it breaks that it breaks that it breaks . That right now you can have transactions that right now you can have transactions. That right now you can have transactions that that that fail later because of that sequence. Fail later because of that sequence fail later because of that sequence number number. Number exactly like as you can imagine exactly like as you can imagine exactly like as you can imagine. You have to go on the mainland list at you have to go on the mainland list at you have to go on the mainland list at. This point you're bound from this call this point you're bound from this call this point you're bound from this call. There's no chat david not a new chat there's no chat david not a new chat there's no chat david not a new chat. That I see at least that I see at least that I see at least so yeah there's not a ch there's not a. So yeah there's not a ch there's not a so yeah there's not a ch there's not a chat in this. Chat in this chat in this interface one does not simply chat interface one does not simply chat. Interface one does not simply chat during the protocol committee meeting during the protocol committee meeting. During the protocol committee meeting yeah it sounds like he can hear it so yeah it sounds like he can hear it so. Yeah it sounds like he can hear it so yeah the concern is that you have yeah the concern is that you have. Yeah the concern is that you have two transactions first transaction and two transactions first transaction and. Two transactions first transaction and sequence number you know nn plus one and sequence number you know nn plus one and. Sequence number you know nn plus one and then the first one does a bump sec then the first one does a bump sec. Then the first one does a bump sec to n plus ten this invalidates the to n plus ten this invalidates the. To n plus ten this invalidates the second one that will fail with a bad second one that will fail with a bad. Second one that will fail with a bad sequence number sequence number sequence number. But that will only happen at applied but that will only happen at applied but that will only happen at applied. You know like like when you actually you know like like when you actually you know like like when you actually. Apply transactions apply transactions apply transactions and the proposed change would actually. And the proposed change would actually and the proposed change would actually break that. If you are changing because it would if you are changing because it would allow both transactions to execute. Allow both transactions to execute allow both transactions to execute exactly if the second one has like some. Exactly if the second one has like some exactly if the second one has like some funny. Funny funny you know side effects in the proposal you know side effects in the proposal. You know side effects in the proposal now those side effects can actually now those side effects can actually. Now those side effects can actually happen happen happen and there are like some pretty pretty. And there are like some pretty pretty and there are like some pretty pretty. Important consequences to another important consequences to another important consequences to another. Sentence in the proposal sentence in the proposal sentence in the proposal which is that earlier in the proposal. Which is that earlier in the proposal which is that earlier in the proposal. There's a there's a there's a two sentences that read a transaction two sentences that read a transaction. Two sentences that read a transaction whose preconditions are not satisfied is whose preconditions are not satisfied is. Whose preconditions are not satisfied is invalid invalid invalid and must not execute even to fail. And must not execute even to fail and must not execute even to fail meaning it cannot change the source. Meaning it cannot change the source meaning it cannot change the source account sequence number or charge a fee. Account sequence number or charge a fee account sequence number or charge a fee but basically the example we just gave. But basically the example we just gave but basically the example we just gave you could imagine a like a like a . You could imagine a like a like a you could imagine a like a like a a seek gap thing min c. A seek gap thing min c a seek gap thing min c mint c gap and seek age whatever you. Mint c gap and seek age whatever you mint c gap and seek age whatever you guys know what I'm talking about. Guys know what I'm talking about guys know what I'm talking about and that would be broken by the. and that would be broken by the and that would be broken by the current bump seek semantics. Current bump seek semantics current bump seek semantics because it would actually write it. Because it would actually write it because it would actually write it during the apply time and then the later. During the apply time and then the later during the apply time and then the later. One would be invalid at apply time and one would be invalid at apply time and one would be invalid at apply time and. Therefore therefore therefore fail so yeah fail so yeah fail so yeah there's probably some like edge cases. There's probably some like edge cases there's probably some like edge cases here that we have to iron out either we. Here that we have to iron out either we here that we have to iron out either we have to. Have to have to say that these work in a different way say that these work in a different way. Say that these work in a different way from other stuff or from other stuff or from other stuff or. Yeah I'm not super sure you'll not allow yeah I'm not super sure you'll not allow. Yeah I'm not super sure you'll not allow I think I thought what we talked about I think I thought what we talked about. I think I thought what we talked about before was maybe not allowing more than before was maybe not allowing more than. Before was maybe not allowing more than one one one so like that source account can only be. So like that source account can only be so like that source account can only be in one transaction. In one transaction in one transaction but that's not necessarily easy well I but that's not necessarily easy well i. But that's not necessarily easy well I know it's know it's know it's it's not but that's the only way you can. It's not but that's the only way you can it's not but that's the only way you can. Make this work I think but you know make this work I think but you know make this work I think but you know. Maybe there's a better I'm that's I maybe there's a better I'm that's I maybe there's a better I'm that's i. Think the only way but think the only way but think the only way but that might be other one another one not. That might be other one another one not that might be other one another one not that people can figure out. But it sounds like this is something but it sounds like this is something that will bear further thought. That will bear further thought that will bear further thought like it will require further thought to. Like it will require further thought to like it will require further thought to sort of figure out what's. Sort of figure out what's sort of figure out what's the best solution here and so I think. The best solution here and so I think the best solution here and so I think this is something that. This is something that this is something that someone maybe john if you should raise. Someone maybe john if you should raise someone maybe john if you should raise on the mailing list. On the mailing list on the mailing list yeah i'll send me an email about it or yeah i'll send me an email about it or. Yeah i'll send me an email about it or something something something call me by any chance I don't. Actually no david you you have solar actually no david you you have solar flares or something. Like I'm on a amount of you might like I'm on a amount of you might find out but like this is like super. Find out but like this is like super find out but like this is like super important or can we have. Important or can we have important or can we have this meeting next week or something i. This meeting next week or something I this meeting next week or something I knew this was like a bad. Knew this was like a bad knew this was like a bad week for this this is like the week that. Week for this this is like the week that week for this this is like the week that. I wasn't gonna have a wired interest I wasn't gonna have a wired interest I wasn't gonna have a wired interest. David didn't predict that it's true david didn't predict that it's true david didn't predict that it's true. Did yes I apologize for did yes I apologize for did yes I apologize for. Trying to force it forward but I mean we trying to force it forward but I mean we. Trying to force it forward but I mean we can certainly this is super important can certainly this is super important. Can certainly this is super important this is super important stuff that we're this is super important stuff that we're. This is super important stuff that we're talking about now so talking about now so. Talking about now so there's no way zoom usually allows you there's no way zoom usually allows you. There's no way zoom usually allows you to like call and to like call and to like call and. How and and get in by phone but when I how and and get in by phone but when I how and and get in by phone but when i. Click the thing it doesn't give me a click the thing it doesn't give me a click the thing it doesn't give me a. Phone number phone number phone number the crazy thing is I can hear everything the crazy thing is I can hear everything. The crazy thing is I can hear everything you're saying now so maybe just you're saying now so maybe just. You're saying now so maybe just tell us what you want to say tell us what you want to say . Tell us what you want to say okay what I was gonna say is if you have okay what I was gonna say is if you have. Okay what I was gonna say is if you have transaction n transaction n transaction n. and you have transaction n plus one and you have transaction n plus one and you have transaction n plus one. And n is a bump sequence and n is a bump sequence and n is a bump sequence . To like say n plus two both can to like say n plus two both can to like say n plus two both can. Currently execute yes they will both execute but no yes they will both execute but no. Currently currently currently yeah guarantee the second one fails yeah guarantee the second one fails. Yeah guarantee the second one fails exactly exactly exactly how does it feel so you've actually. How does it feel so you've actually how does it feel so you've actually executed the bump sequence when you're. Executed the bump sequence when you're executed the bump sequence when you're validating transactions. Sequence suppose transaction n like sequence suppose transaction n like changes the signer or something right. Changes the signer or something right changes the signer or something right you're still . You're still you're still charging a fee for transaction two right charging a fee for transaction two right. Charging a fee for transaction two right but it fails exactly but it fails exactly. But it fails exactly yeah it fails so what I'm like yeah it fails so what I'm like. Yeah it fails so what I'm like what kind of ends up happening is like what kind of ends up happening is like. What kind of ends up happening is like any check that we run during validity any check that we run during validity. Any check that we run during validity checking checking checking also gets run during during. Also gets run during during also gets run during during transaction application. Transaction application transaction application so basically you get all your validity. So basically you get all your validity so basically you get all your validity checks get done twice once. Checks get done twice once checks get done twice once once kind of speculatively and once once. Once kind of speculatively and once once once kind of speculatively and once once. For real for real for real for real for real for real and if it fails the validity check that. And if it fails the validity check that and if it fails the validity check that it does again during application it. It does again during application it it does again during application it fails fails. Fails at application it's on the ledger it's at application it's on the ledger it's. At application it's on the ledger it's charged a fee and the sequence number is charged a fee and the sequence number is. Charged a fee and the sequence number is consumed consumed consumed yeah okay so what about this what about. Yeah okay so what about this what about yeah okay so what about this what about saying like these preconditions always. Saying like these preconditions always saying like these preconditions always get checked twice. Get checked twice get checked twice if it passes the first time you get if it passes the first time you get. if it passes the first time you get charged the fee if you get charged the fee if you get. Charged the fee if you get if it passes a second time if it passes a second time . If it passes a second time you then can execute that that's fine you then can execute that that's fine. You then can execute that that's fine that would basically map up what that would basically map up what. That would basically map up what we're saying but the question is like we're saying but the question is like. We're saying but the question is like does that break your stuff does that break your stuff. Does that break your stuff no I mean it's a little more no I mean it's a little more. no I mean it's a little more expensive but it's like expensive but it's like . Expensive but it's like well the age thing that's what john well the age thing that's what john. Well the age thing that's what john was talking about right yeah I don't was talking about right yeah I don't. Was talking about right yeah I don't know if you were able to hear me at that know if you were able to hear me at that. Know if you were able to hear me at that point but like point but like point but like. This would this potentially messes up this would this potentially messes up this would this potentially messes up. The the the seek age or seek gap I can't the the the seek age or seek gap I can't. The the the seek age or seek gap I can't remember remember remember so maybe we check the age things only. So maybe we check the age things only so maybe we check the age things only once in the other fields twice. Once in the other fields twice once in the other fields twice and we like rearrange the data structure. And we like rearrange the data structure and we like rearrange the data structure. If it needs to be such that it's very if it needs to be such that it's very if it needs to be such that it's very. Obvious which section is the stuff that obvious which section is the stuff that obvious which section is the stuff that. Gets gets gets checked once and which section gets checked once and which section gets. Checked once and which section gets checked twice checked twice checked twice in all honesty like there could be some. In all honesty like there could be some in all honesty like there could be some sanity to. Sanity to sanity to to basically saying like hey like these to basically saying like hey like these. To basically saying like hey like these preconcept precondition things we only preconcept precondition things we only. Preconcept precondition things we only need to check them once but you're saying that this would. But you're saying that this would currently allow things to succeed currently allow things to succeed. Currently allow things to succeed where currently they fail well right now the preconditions aren't. Well right now the preconditions aren't anything that can be anything that can be. Anything that can be that can change state like time that can change state like time. That can change state like time is time it's all checked against the is time it's all checked against the. Is time it's all checked against the close time so it close time so it close time so it . Shouldn't matter but shouldn't matter but shouldn't matter but yeah they can't yeah they can't yeah the. Yeah they can't yeah they can't yeah the yeah they can't yeah they can't yeah the. Thing is that right now we don't have a thing is that right now we don't have a thing is that right now we don't have a. Concept concept concept of checks of checks of checks that are done at apply time. that are done at apply time that are done at apply time before like like while we do like the. Before like like while we do like the before like like while we do like the. Fee processing for example like we don't fee processing for example like we don't. Fee processing for example like we don't have that kind of concept which is I think what we're talking. Which is I think what we're talking about like a phase that is like about like a phase that is like. About like a phase that is like let's do all those checks that are like let's do all those checks that are like. Let's do all those checks that are like on the you know the on the you know the on the you know the. Only done once per block only done once per block only done once per block before anything else happens. That would actually be really easy to that would actually be really easy to implement like a bed that would be easy. Implement like a bed that would be easy implement like a bed that would be easy but that doesn't exist today right. But that doesn't exist today right but that doesn't exist today right agreed yeah and I think . Agreed yeah and I think agreed yeah and I think I wonder if it would do something funny. I wonder if it would do something funny I wonder if it would do something funny also in terms of like. Also in terms of like also in terms of like results results results oh yeah there'd probably be some. Oh yeah there'd probably be some oh yeah there'd probably be some annoying cases to handle there. Annoying cases to handle there annoying cases to handle there but like because we don't have a place. But like because we don't have a place but like because we don't have a place right now to. Right now to right now to express that there would be a failure in express that there would be a failure in. Express that there would be a failure in that phase for that phase for that phase for. like for horizon I'm thinking like for horizon I'm thinking like for horizon I'm thinking. Like the mirror doesn't let you fail like the mirror doesn't let you fail like the mirror doesn't let you fail. Early like that hold on wait do we early like that hold on wait do we early like that hold on wait do we. Really really really not like early like it doesn't not like early like it doesn't . Not like early like it doesn't there's like it there's like it there's like it. It applies at apply time you get the it applies at apply time you get the it applies at apply time you get the. Results but you don't results but you don't results but you don't you wouldn't know that it's a failure. You wouldn't know that it's a failure you wouldn't know that it's a failure that happened because of a. That happened because of a that happened because of a an early check there's something kind of. An early check there's something kind of an early check there's something kind of. Interesting going on here though like interesting going on here though like interesting going on here though like. I guess the real point would be like I guess the real point would be like I guess the real point would be like. These precondition checks these precondition checks these precondition checks are something that should be done at. Are something that should be done at are something that should be done at validation time but not at apply time. Validation time but not at apply time validation time but not at apply time because if they succeeded at validation. Because if they succeeded at validation because if they succeeded at validation time. Time time I guess you're right yeah yeah that I guess you're right yeah yeah that. I guess you're right yeah yeah that could also be the could also be the could also be the. That could be the the change right the that could be the the change right the that could be the the change right the. New like the updated thing is that we new like the updated thing is that we new like the updated thing is that we. Have certain checks that are only have certain checks that are only have certain checks that are only. Done at validation time yeah done at validation time yeah done at validation time yeah. I bet that could be useful for other I bet that could be useful for other I bet that could be useful for other. Reasons so I mean the problem reasons so I mean the problem reasons so I mean the problem. The annoying thing is that okay well one the annoying thing is that okay well one. The annoying thing is that okay well one thing I mean it wouldn't be thing I mean it wouldn't be. Thing I mean it wouldn't be I mean like arguably the behavior that I mean like arguably the behavior that. I mean like arguably the behavior that I'm describing here I'm describing here I'm describing here. Is not like terrible it's just is not like terrible it's just is not like terrible it's just. Unfortunately like a slightly more unfortunately like a slightly more unfortunately like a slightly more. Permissive permissive permissive than what we currently do it might not than what we currently do it might not. Than what we currently do it might not be inherently be inherently be inherently fatal so so david one of the things. Fatal so so david one of the things fatal so so david one of the things that's actually annoying to do. That's actually annoying to do that's actually annoying to do those checks at validation time only is. Those checks at validation time only is those checks at validation time only is that. That that we're supposed to have a we're supposed to have a we're supposed to have a. I don't we're supposed to have a as I don't we're supposed to have a as I don't we're supposed to have a as. More or less as an invariant that more or less as an invariant that more or less as an invariant that. Those checks don't depend on let's just state I mean like they on let's just state I mean like they. Only depend on sequence number I guess only depend on sequence number I guess only depend on sequence number I guess. Right but you're still literally you're right but you're still literally you're right but you're still literally you're. You're loading the account entry right you're loading the account entry right you're loading the account entry right. Yeah that's the only thing but like if yeah that's the only thing but like if yeah that's the only thing but like if. We wanted to we wanted to we wanted to have like maybe other dependencies there have like maybe other dependencies there. Have like maybe other dependencies there like in terms of checks like in terms of checks. Like in terms of checks I guess you could everything depends on I guess you could everything depends on. I guess you could everything depends on either the ledger header or either the ledger header or. Either the ledger header or the ledger entry there's nothing you the ledger entry there's nothing you. The ledger entry there's nothing you don't need to fetch any don't need to fetch any. Don't need to fetch any you know right cross lines or any other you know right cross lines or any other. You know right cross lines or any other kind of state so kind of state so kind of state so. I think that we should still be okay in I think that we should still be okay in I think that we should still be okay in. Terms of no terms of no terms of no extra database accesses I don't I don't think that's a big issue. I don't I don't think that's a big issue I think this is something we can handle I think this is something we can handle. I think this is something we can handle in a in a in a in a sane way I think it's just. In a sane way I think it's just in a sane way I think it's just something I think I just think about let. Something I think I just think about let something I think I just think about let. Me just like me just like me just like address it like I can make a pass of address it like I can make a pass of. Address it like I can make a pass of this and I can propose something this and I can propose something. This and I can propose something that is that is that is that is that is that is . Both compatible with what we're doing both compatible with what we're doing both compatible with what we're doing. Today and has kind of the least overhead today and has kind of the least overhead. Today and has kind of the least overhead like avoids double checking like avoids double checking. Like avoids double checking if it's sane to do so I have to think it if it's sane to do so I have to think it. If it's sane to do so I have to think it through a little bit more but I could through a little bit more but I could. Through a little bit more but I could have have have you know something by next week or. You know something by next week or you know something by next week or next week I could do something but. Next week I could do something but next week I could do something but I mean that feels like the logical next. I mean that feels like the logical next I mean that feels like the logical next step to capturing one to me yeah. Step to capturing one to me yeah step to capturing one to me yeah okay so I have to address this and i. Okay so I have to address this and I okay so I have to address this and I have to address the. Have to address the have to address the the nested ext structures and I think yeah like with this new. And I think yeah like with this new condition like one of the condition like one of the. Condition like one of the like I guess that that paragraph or like I guess that that paragraph or. Like I guess that that paragraph or whatever section in the cap whatever section in the cap. Whatever section in the cap will be where you can talk about if we have like specific rules around. If we have like specific rules around multiple transactions multiple transactions. Multiple transactions that maybe you want to that maybe you want to that maybe you want to. Like where you want to allow you know like where you want to allow you know. Like where you want to allow you know like like like certain combinations like what I'm. Certain combinations like what I'm certain combinations like what I'm thinking here is that if you have two. Thinking here is that if you have two thinking here is that if you have two transactions. Transactions transactions with this min age requirement because otherwise you're going to break. Because otherwise you're going to break the payment channel like the you know the payment channel like the you know. The payment channel like the you know the assumption that the assumption that the assumption that. you have a grace period every time you have a grace period every time you have a grace period every time. You process a transaction you process a transaction you process a transaction for the payment channel protocol that's. For the payment channel protocol that's for the payment channel protocol that's a good point also. A good point also a good point also well okay I will I will I think well okay I will I will I think. Well okay I will I will I think that's good that's a good change I think that's good that's a good change I think. That's good that's a good change I think we're going to highlight this we're going to highlight this. We're going to highlight this this specific environment that we're this specific environment that we're. This specific environment that we're going to go after here that's the same going to go after here that's the same. Going to go after here that's the same environment that we need for environment that we need for. Environment that we need for the transaction queue policy exactly the transaction queue policy exactly. The transaction queue policy exactly okay so I think I need is there anything okay so I think I need is there anything. Okay so I think I need is there anything else because I want to make sure we else because I want to make sure we. Else because I want to make sure we discuss cap 40. Discuss cap 40. Discuss cap 40. No I think we should move on to count no I think we should move on to count no I think we should move on to count. 40. I mean there's only four minutes 40. I mean there's only four minutes 40. I mean there's only four minutes. Left so left so left so let's let's jump to cap 40 because I let's let's jump to cap 40 because i. Let's let's jump to cap 40 because I feel like there's a clear path with cap feel like there's a clear path with cap. Feel like there's a clear path with cap 21 21 21 cat 40. cat 40. cat 40. . What is the let me see that so cap what is the let me see that so cap what is the let me see that so cap. 40 just trying to find myself 40 just trying to find myself 40 just trying to find myself. so for anyone who's watching this so for anyone who's watching this so for anyone who's watching this. Proposal allows participants in a proposal allows participants in a proposal allows participants in a. Payment channel to payment channel to payment channel to safely exchange signatures for a set of. Safely exchange signatures for a set of safely exchange signatures for a set of up to three transactions in a single. Up to three transactions in a single up to three transactions in a single step step. Step it looks like there are some open it looks like there are some open it looks like there are some open. Questions questions questions several but we don't have time that much several but we don't have time that much. Several but we don't have time that much time so what is the most important time so what is the most important. Time so what is the most important question that you need answered here lee so I think I think. Lee so I think I think I guess the question i've been most I guess the question i've been most. I guess the question i've been most interested in is nico raised interested in is nico raised. Interested in is nico raised you know is this the right structure are you know is this the right structure are. You know is this the right structure are there other things like local trees there other things like local trees. There other things like local trees that we could be using and then maybe I that we could be using and then maybe i. That we could be using and then maybe I can add a little more detail on can add a little more detail on. Can add a little more detail on I mean I have that on the mailing list I mean I have that on the mailing list. I mean I have that on the mailing list right like that the the question there right like that the the question there. Right like that the the question there is really is really is really so I looked at so the so the the. So I looked at so the so the the so I looked at so the so the the proposal I think makes sense with the. Proposal I think makes sense with the proposal I think makes sense with the current proposal of payment channels. Current proposal of payment channels current proposal of payment channels because you only have like a very small. Because you only have like a very small because you only have like a very small set of participants if you are looking. Set of participants if you are looking set of participants if you are looking at at. At what you would need if you have more what you would need if you have more what you would need if you have more. Participants or participants or participants or maybe it's like those multi-hop things. Maybe it's like those multi-hop things maybe it's like those multi-hop things or whatever. Or whatever or whatever would that make this like would that make this like. Would that make this like insufficient insufficient insufficient and then you need at that point like . And then you need at that point like and then you need at that point like some way of expressing a bigger set. Some way of expressing a bigger set some way of expressing a bigger set like a miracle tree maybe I don't know. Like a miracle tree maybe I don't know like a miracle tree maybe I don't know something else. Something else something else I mean I think that what we have now is I mean I think that what we have now is. I mean I think that what we have now is so general like so general like so general like. Yes you can't do merkel trees but you yes you can't do merkel trees but you yes you can't do merkel trees but you. Can like interoperate with like ethereum can like interoperate with like ethereum. Can like interoperate with like ethereum or like other blockchains like it's or like other blockchains like it's. Or like other blockchains like it's so not only does it like save entire so not only does it like save entire. So not only does it like save entire round trips round trips round trips and like eliminate a whole bunch of foot. And like eliminate a whole bunch of foot and like eliminate a whole bunch of foot. Guns on these payment channel guns on these payment channel guns on these payment channel. Protocols but it also like in such a protocols but it also like in such a protocols but it also like in such a. Straightforward way adds support for straightforward way adds support for straightforward way adds support for. Essentially essentially essentially we can basically do htlc's with other we can basically do htlc's with other. We can basically do htlc's with other blockchains without even the hash part blockchains without even the hash part. Blockchains without even the hash part right like you can literally like just right like you can literally like just. Right like you can literally like just kind of tie transactions together across kind of tie transactions together across. Kind of tie transactions together across blockchains blockchains blockchains so from my point of view this is just. So from my point of view this is just so from my point of view this is just like completely obvious in retrospect. Like completely obvious in retrospect like completely obvious in retrospect except you know obviously it's brilliant. Except you know obviously it's brilliant except you know obviously it's brilliant. Because like nobody because like nobody because like nobody thought of it until now but like this. Thought of it until now but like this thought of it until now but like this like it's just it's so. Like it's just it's so like it's just it's so straightforwardly like exactly what you. Straightforwardly like exactly what you straightforwardly like exactly what you want in so many situations where it's. Want in so many situations where it's want in so many situations where it's like I want this texture only if this. Like I want this texture only if this like I want this texture only if this executes fine if you execute this then. Executes fine if you execute this then executes fine if you execute this then sign the other thing. Sign the other thing sign the other thing right and it's like we're done right so. Right and it's like we're done right so right and it's like we're done right so it's so simple and. It's so simple and it's so simple and so useful I also had like a very similar reaction. I also had like a very similar reaction to this when we suggested I was like oh to this when we suggested I was like oh. To this when we suggested I was like oh that's very clever that's very clever that's very clever. No no like no I mean I agree like I no no like no I mean I agree like I no no like no I mean I agree like I i. Think it makes total sense for the think it makes total sense for the think it makes total sense for the. For what we're trying to do right now is for what we're trying to do right now is. For what we're trying to do right now is it's more it's more it's more the question for me is is that going to. The question for me is is that going to the question for me is is that going to be durable. Be durable be durable for in terms of design for the payment for in terms of design for the payment. For in terms of design for the payment channel because I know for for example channel because I know for for example. Channel because I know for for example in lightning oh I think it didn't go in lightning oh I think it didn't go. In lightning oh I think it didn't go that far because that far because that far because. No no no but like for in in the context no no no but like for in in the context no no no but like for in in the context. Of payment channels of payment channels of payment channels they didn't do that with lightning in. They didn't do that with lightning in they didn't do that with lightning in lightning for example. Lightning for example lightning for example because they need a lot more because they need a lot more . Because they need a lot more to unlock a lot more transactions with to unlock a lot more transactions with. To unlock a lot more transactions with one one one one transaction no I think honestly i. one transaction no I think honestly I one transaction no I think honestly i. Think they just didn't think of it think they just didn't think of it think they just didn't think of it. Right because you could just say if you right because you could just say if you right because you could just say if you. Have a three hop like lightning payment have a three hop like lightning payment have a three hop like lightning payment. You could just like have to sign you could just like have to sign you could just like have to sign. You know all three hops in order to cash you know all three hops in order to cash. You know all three hops in order to cash it in it in it in yeah but so you need three yeah you need. Yeah but so you need three yeah you need yeah but so you need three yeah you need. This transaction needs to have this transaction needs to have this transaction needs to have. Three additional payloads right three additional payloads right three additional payloads right. Sure so that's why this doesn't scale sure so that's why this doesn't scale sure so that's why this doesn't scale. That's the part where it doesn't scale that's the part where it doesn't scale that's the part where it doesn't scale. So that's so that's so that's that's my question let me ask you a that's my question let me ask you a. That's my question let me ask you a question nico question nico question nico like sometimes there exists a world. Like sometimes there exists a world like sometimes there exists a world where it makes sense to have something. Where it makes sense to have something where it makes sense to have something that's like. That's like that's like simple and easy to use but not simple and easy to use but not. Simple and easy to use but not necessarily scalable and something necessarily scalable and something. Necessarily scalable and something that's that's that's harder to use but highly scalable I feel. Harder to use but highly scalable I feel harder to use but highly scalable I feel. Like the merkle tree falls into that like the merkle tree falls into that like the merkle tree falls into that. Category of like it's obviously much category of like it's obviously much category of like it's obviously much. More scalable but it's also more scalable but it's also more scalable but it's also. Not as easy friend user friendly and not not as easy friend user friendly and not. Not as easy friend user friendly and not as easy to fit into as easy to fit into as easy to fit into. Like the current Stellar model so like like the current Stellar model so like like the current Stellar model so like. Well maybe well maybe well maybe a miracle tree of a miracle tree of one a miracle tree of a miracle tree of one. A miracle tree of a miracle tree of one element is element is element is the same thing right that's kind of what. The same thing right that's kind of what the same thing right that's kind of what. Maybe I maybe I maybe I don't know that's a it's more like a if the design relies. It's more like a if the design relies heavily heavily heavily on such a construct I'm more questioning. On such a construct I'm more questioning on such a construct I'm more questioning. The design of the payment channel the design of the payment channel the design of the payment channel. But honestly you could do the merkle but honestly you could do the merkle but honestly you could do the merkle. Tree it's just the merkle tree would tree it's just the merkle tree would tree it's just the merkle tree would. Have to be on the ethereum side have to be on the ethereum side have to be on the ethereum side. Right but like right but like right but like but you know obviously we don't have. But you know obviously we don't have but you know obviously we don't have like logic to interpret merkle trees but. Like logic to interpret merkle trees but like logic to interpret merkle trees but. The point is like because you're the point is like because you're the point is like because you're. Signing arbitrary data right you could signing arbitrary data right you could signing arbitrary data right you could. Do something such that like do something such that like do something such that like. A single payment on Stellar like a usdc a single payment on Stellar like a usdc a single payment on Stellar like a usdc. Payment on Stellar could like unlock payment on Stellar could like unlock payment on Stellar could like unlock. Like 20 you know usdc payments on like 20 you know usdc payments on like 20 you know usdc payments on. Ethereum right and do some kind of ethereum right and do some kind of ethereum right and do some kind of. Complicated multi-way exchange that way complicated multi-way exchange that way complicated multi-way exchange that way. David if we like david if we like david if we like let's so your point is well taken that. Let's so your point is well taken that let's so your point is well taken that if the merkle tree part was on the. If the merkle tree part was on the if the merkle tree part was on the ethereum side perhaps this would work. Ethereum side perhaps this would work ethereum side perhaps this would work there. There there so is the argument you're making that so is the argument you're making that. So is the argument you're making that the construct that lee proposes the construct that lee proposes. The construct that lee proposes is sufficient for the merkle tree case is sufficient for the merkle tree case. Is sufficient for the merkle tree case assuming that Stellar could also handle assuming that Stellar could also handle. Assuming that Stellar could also handle the merkle trees the merkle trees the merkle trees. Or is the payload not big enough or you or is the payload not big enough or you or is the payload not big enough or you. Know whatever I mean you know to be honest the the I mean you know to be honest the the. Things that things that things that the cases that I think come to mind the cases that I think come to mind. The cases that I think come to mind involve involve involve multiple signers rather than. Multiple signers rather than multiple signers rather than signatures on multiple transactions. Signatures on multiple transactions signatures on multiple transactions right because you could always on. Right because you could always on right because you could always on Stellar you know we have a different way. Stellar you know we have a different way Stellar you know we have a different way. Of unlocking transactions which is like of unlocking transactions which is like of unlocking transactions which is like. Twiddle sequence numbers and use like twiddle sequence numbers and use like twiddle sequence numbers and use like. The the the or the and use preconditions so or the and use preconditions so . Or the and use preconditions so so from my point of view the real the so from my point of view the real the. So from my point of view the real the real bottleneck here is that just like I real bottleneck here is that just like i. Real bottleneck here is that just like I don't want to add like don't want to add like. Don't want to add like a gazillion signatures just because a gazillion signatures just because. A gazillion signatures just because verification is expensive right so if we verification is expensive right so if we. Verification is expensive right so if we if we somehow change the transaction if we somehow change the transaction. If we somehow change the transaction fees to like fees to like fees to like also include the number of signature. Also include the number of signature also include the number of signature verifications or something. Verifications or something verifications or something like I could see like there's a very. like I could see like there's a very like I could see like there's a very obvious way to extend this to have like. Obvious way to extend this to have like obvious way to extend this to have like more than two. More than two more than two more than one or two signatures more than one or two signatures. more than one or two signatures well actually so actually that's well actually so actually that's. well actually so actually that's related to related to related to yeah that question on number of. yeah that question on number of yeah that question on number of signature verifications actually that's. Signature verifications actually that's signature verifications actually that's . sorry I missed that as part of the sorry I missed that as part of the sorry I missed that as part of the. Capturing in one conversation capturing in one conversation capturing in one conversation. Because you know you guys added this the because you know you guys added this the. Because you know you guys added this the the the the extra sign at the same time then kat von. Extra sign at the same time then kat von extra sign at the same time then kat von. D kat von d and I didn't d kat von d and I didn't d kat von d and I didn't I was not sure on which cap was tracking. I was not sure on which cap was tracking I was not sure on which cap was tracking. You know what you know what you know what one thing we could do because in the. one thing we could do because in the one thing we could do because in the context of. Context of context of cap 40 it's just another sign I mean the cap 40 it's just another sign I mean the. Cap 40 it's just another sign I mean the x-ray signature it doesn't matter x-ray signature it doesn't matter. X-ray signature it doesn't matter actually because it's actually because it's . Actually because it's it's it's it's being processed like any it's it's it's being processed like any. It's it's it's being processed like any other signature other signature other signature. Right but we don't charge for signatures right but we don't charge for signatures. Right but we don't charge for signatures do we thought we just charged for do we thought we just charged for. Do we thought we just charged for operation operation operation but for so yeah so so now going back. But for so yeah so so now going back but for so yeah so so now going back though on to cap 21 but how it's being. Though on to cap 21 but how it's being though on to cap 21 but how it's being used in a new way. Used in a new way used in a new way right that is you can have like those right that is you can have like those. Right that is you can have like those is it two or three is it two or three is it two or three. Additional additional additional signature checks I would argue that signature checks I would argue that. Signature checks I would argue that those should be those should be those should be. Counted towards the 20 signatures limit counted towards the 20 signatures limit counted towards the 20 signatures limit. That we have that we have that we have on a transaction okay that's fine on a transaction okay that's fine. On a transaction okay that's fine right because that way we don't have to right because that way we don't have to. Right because that way we don't have to change the model in terms of change the model in terms of . Change the model in terms of like fees or anything because right now like fees or anything because right now. Like fees or anything because right now it's it's it's I mean if we are going with the. I mean if we are going with the I mean if we are going with the did you see what I mean like I think it. Did you see what I mean like I think it did you see what I mean like I think it gets too complicated done. Gets too complicated done gets too complicated done right and that's a quick cap 21 change. Right and that's a quick cap 21 change right and that's a quick cap 21 change because cap 40 just introduces the. Because cap 40 just introduces the because cap 40 just introduces the concept of this new type of yeah. Concept of this new type of yeah concept of this new type of yeah of cyano I also want to say we're over. Of cyano I also want to say we're over of cyano I also want to say we're over time so I think we're going to have to. Time so I think we're going to have to time so I think we're going to have to cut this. Cut this cut this but I do I mean I feel like with cap but I do I mean I feel like with cap. but I do I mean I feel like with cap 21 there's a clear path forward and it's 21 there's a clear path forward and it's. 21 there's a clear path forward and it's that david is going to make those that david is going to make those. That david is going to make those two revisions with cap 40 is there an two revisions with cap 40 is there an. Two revisions with cap 40 is there an easy next step that we can take here easy next step that we can take here. Easy next step that we can take here just to keep this moving keep pushing just to keep this moving keep pushing. Just to keep this moving keep pushing is there a discussion that we need to is there a discussion that we need to. Is there a discussion that we need to have either synchronously later have either synchronously later. Have either synchronously later or async on the Stellar dev list about or async on the Stellar dev list about. Or async on the Stellar dev list about this question this question this question I think we should move to accept cap 40. I think we should move to accept cap 40 I think we should move to accept cap 40 today. Yeah I feel I feel like the the argument yeah I feel I feel like the the argument. About you know would it be better if about you know would it be better if about you know would it be better if. It's a merkle tree this is a little bit it's a merkle tree this is a little bit it's a merkle tree this is a little bit. Like one or both like one or both like one or both you know this is very simple and it. you know this is very simple and it you know this is very simple and it does it's you know. Does it's you know does it's you know only really useful in specific only really useful in specific. Only really useful in specific constrained constrained constrained cases like the payload has to be below a. Cases like the payload has to be below a cases like the payload has to be below a. Certain size that there's a certain size that there's a certain size that there's a. There's a lot of constraints and so if there's a lot of constraints and so if there's a lot of constraints and so if. The constraints the constraints the constraints are a match this is a great use and. Are a match this is a great use and are a match this is a great use and then if the constraints aren't and we. Then if the constraints aren't and we then if the constraints aren't and we have use cases that. Have use cases that have use cases that need that are outside those constraints need that are outside those constraints. Need that are outside those constraints then maybe we need some other type of then maybe we need some other type of. Then maybe we need some other type of signer like a mogul tree signer signer like a mogul tree signer. Signer like a mogul tree signer and then you know with that sign like and then you know with that sign like. And then you know with that sign like comes a whole lot of costs and things we comes a whole lot of costs and things we. Comes a whole lot of costs and things we have to figure out have to figure out have to figure out. Bigger problems to solve I mean like the only reason I would say I mean like the only reason I would say. It it it should not be accepted yet is because we should not be accepted yet is because we. Should not be accepted yet is because we don't don't don't like it doesn't make sense to have kept. Like it doesn't make sense to have kept like it doesn't make sense to have kept fully. Fully fully in the abstract it's actually in the in the abstract it's actually in the. In the abstract it's actually in the context of cap 21. Context of cap 21. Context of cap 21. Actually it does make sense in the actually it does make sense in the actually it does make sense in the. Abstract the same way we have hashtag abstract the same way we have hashtag abstract the same way we have hashtag. Signers it's just like a better baby signers it's just like a better baby signers it's just like a better baby. Like who is going to use that like who is going to use that like who is going to use that. Anybody who wants to like anybody who anybody who wants to like anybody who anybody who wants to like anybody who. Wants to like tie multiple but who is wants to like tie multiple but who is wants to like tie multiple but who is. This anybody this anybody this anybody my point is that caps what we have in my point is that caps what we have in. My point is that caps what we have in the you know the you know the you know in the in the description of a cap is. In the in the description of a cap is in the in the description of a cap is. That you have to have the use case that you have to have the use case that you have to have the use case. Before we actually go and before we actually go and before we actually go and spend the work on implementing those. Spend the work on implementing those spend the work on implementing those things things. Things so you're advocating for holding off on so you're advocating for holding off on. So you're advocating for holding off on accepting count 40 until yeah I mean accepting count 40 until yeah I mean. Accepting count 40 until yeah I mean it looks fine right like from what we're it looks fine right like from what we're. It looks fine right like from what we're saying it's fine it's more of a saying it's fine it's more of a. Saying it's fine it's more of a like we're not going to spend time like we're not going to spend time. Like we're not going to spend time implementing it if you know if we implementing it if you know if we. Implementing it if you know if we don't have the full story don't have the full story. Don't have the full story but so we could just make a soft sort of but so we could just make a soft sort of. But so we could just make a soft sort of promise okay we're planning to accept promise okay we're planning to accept. Promise okay we're planning to accept yeah this one is like right after we yeah this one is like right after we. Yeah this one is like right after we accept cap 21 we're looking good yeah so ideally our next protocol. Yeah so ideally our next protocol meeting whatever that is we can accept meeting whatever that is we can accept. Meeting whatever that is we can accept both cap 21 both cap 21 both cap 21 exactly yeah i'd rather do that than. Exactly yeah i'd rather do that than exactly yeah i'd rather do that than than try to do this. Than try to do this than try to do this piecemeal thing because the point of all piecemeal thing because the point of all. Piecemeal thing because the point of all this is like to this is like to this is like to. To get something that makes sense for to get something that makes sense for to get something that makes sense for. Payment channels payment channels payment channels yeah sure but I do think cap40 is just. Yeah sure but I do think cap40 is just yeah sure but I do think cap40 is just it's it's so simple and it has so many. It's it's so simple and it has so many it's it's so simple and it has so many additional uses it's just like a. Additional uses it's just like a additional uses it's just like a fantastic fantastic. Fantastic thing in and of itself but actually one thing in and of itself but actually one. Thing in and of itself but actually one thing I would love to see thing I would love to see. Thing I would love to see in the cap 40 proposal would be a use in the cap 40 proposal would be a use. In the cap 40 proposal would be a use case for cap 40 that doesn't depend on case for cap 40 that doesn't depend on. Case for cap 40 that doesn't depend on cap cap cap 21 that would be cool I would like that. 21 that would be cool I would like that 21 that would be cool I would like that lee can you add like an ethereum like. Lee can you add like an ethereum like lee can you add like an ethereum like swap sure okay so that's all that cap40 will. Sure okay so that's all that cap40 will that's like basically the requirement that's like basically the requirement. That's like basically the requirement for cap 40 is lee's going to add a use for cap 40 is lee's going to add a use. For cap 40 is lee's going to add a use case that doesn't reply case that doesn't reply. Case that doesn't reply require cap 21 rely on caption one the require cap 21 rely on caption one the. Require cap 21 rely on caption one the goal for next time is to goal for next time is to. Goal for next time is to review the changes that david makes to review the changes that david makes to. Review the changes that david makes to cap 21 ideally to get cap 21 ideally to get. Cap 21 ideally to get cap 21 shortly followed by cap 40 cap 21 shortly followed by cap 40. Cap 21 shortly followed by cap 40 accepted cool cool accepted cool cool accepted cool cool. I think anything else we'll just look to I think anything else we'll just look to. I think anything else we'll just look to the Stellar dead mailing list the Stellar dead mailing list. The Stellar dead mailing list and everyone here thank you so much for and everyone here thank you so much for. And everyone here thank you so much for joining thanks for your time thanks for joining thanks for your time thanks for. Joining thanks for your time thanks for thinking this through anyone out there thinking this through anyone out there. Thinking this through anyone out there who's watching thank you so much who's watching thank you so much. Who's watching thank you so much you know it's always it's always you know it's always it's always. you know it's always it's always great to have you here and feel free to great to have you here and feel free to. Great to have you here and feel free to join that join that join that dev mailing list if you want to see. Dev mailing list if you want to see dev mailing list if you want to see these discussions and participate in. These discussions and participate in these discussions and participate in them yourselves. Them yourselves them yourselves there's a link to it in the show there's a link to it in the show. There's a link to it in the show description all right sorry we ran over description all right sorry we ran over. Description all right sorry we ran over everybody but thanks again for your time.
