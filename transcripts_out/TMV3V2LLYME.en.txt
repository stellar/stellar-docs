hi everyone we are now
um live so i just want to say welcome to
the first
stellar stellar protocol meeting of 2021
um
so in a minute we're going to do some
quick introductions but first
i just want to take a second to give a
quick overview um
what are we here for so the stellar
protocol is designed to evolve
to meet the changing needs of the
growing ecosystem all the different
projects that are building on stellar
and actually the proposals that we'll
discuss today are kind of a perfect
example of how that works right they
make it easier to issue regulated assets
on stellar
so the purpose of this meeting is to
discuss and plan for those changes
um in case you're not aware protocol
changes which are implemented in stellar
core
they're submitted as core advancement
proposals or caps for short
and they have a very specific like life
cycle um
they generally start with a discussion
on the stellar death mailing list
and then they're like drafted and
further discussed on that list and kind
of when they baked a bit
we bring them to this meeting where we
raise issues and address key questions
really start to hammer out the details
um the draft of a cap goes through
several stages before it's
accepted and ultimately implemented into
a new version of the protocol
and validators have to actually vote to
accept that new version of the protocol
in order to upgrade the network so
there's a lot of steps i want to also
say that
every step in that process is public so
if you're
interested in keeping up with or even
participating in
discussions about the future of the
stellar protocol i definitely urge you
to check out the stellar protocol repo
on github
and also to join the stellar dev mailing
list that's where discussions about
these things originate
there are links in the meeting
description so anyone listening you can
join right in
in case it wasn't clear from that
overview what follows is going to be a
pretty
uh specific and pretty technical
discussion um we're mostly going to
focus on uh cap 29
which would make some modifications to
the allow trust operation in order to
better support regulated assets
and then we're going to talk about cap
35 which is what the real
probably the bulk of this meeting will
be about about um cap 35
asset clawback which provides an issuer
with a means to claw back assets from a
holder in order to support regulatory
requirements
there are links to the proposals and to
the discussion threads of those
proposals
in the show description and if you
really want to follow follow along you
should probably check those out
it's again there's there's a lot there
but
it will really help you if you're sort
of looking at the nitty-gritty details
while we have this discussion so that's
kind of my overview but before we
actually
start let's do some just quick
introductions so when i call on you just
say your name your title and your
affiliation
i will start i am justin rice head of
ecosystem at the stellar development
foundation
tomer told me weller head of uh
integration
stella development foundation dan
i'm dan doney the ceo of secureancy
we're a blockchain-based financial
service
infrastructure company awesome lee
hi i'm lee principal software engineer
at
the stella development foundation
jonathan hi i'm jonathan jove i'm a
senior software engineer at the seller
development foundation
uh nicola yeah nico berry i'm
sq get up on the
great eric my name is eric saunders
uh i'm a horizon engineering manager at
stuller development foundation
siddharth hi i'm siddharth suresh i'm a
software engineer at the startup
development foundation
great karen
uh oh we didn't hear karen but
can you try it one more time i think
your audios there's something up with
your audio but and
we'll figure it out but uh and finally
i believe david hi i'm david maciers
i'm chief scientist at stellar
development foundation
okay great um so
let's get started uh in sort of a
last-minute decision we flipped
the agenda and we decided to talk about
cap 29 first
um it's a it's a smaller discussion and
there's less to work out in a way and
also it sort of logically makes sense
because
cap 29 has to do with the existing um
authorization flags on accounts so cap
29
has the catchy title allow trust when
not auth required
um basically a trustline authorization
it's an important feature of the stellar
protocol
it allows issuers to handle various
regulatory requirements
currently there are two flags that you
can set on an account auth required
and auth revocable however the way they
allow trust operation works with those
two flags
probably needs a bit of tweaking so the
goal is to kind of clean it up
um basically the idea is that issuers
should be able to authorize a trust line
even if their account doesn't currently
have an auth required flag set
and they should also be able to revoke
trust
if they have the auth revocable flag set
on their account
even if they don't have the auth
required flag set so right now you have
to have them both set
um that would basically allow them to
deny list certain accounts
which again is is valuable for issuing
regulated assets
so this cap it introduces two changes to
the allowed trust
operation in order to achieve those
goals so that's the summary
um i think you know
anyone can kick off the discussion i i
think this this
this cap originated with tomer so tomer
do you have any thoughts
yeah just uh quickly discussing the use
cases that
uh we have an issues with we have an
issue with right now
uh one is that uh
what happens when an issuer changes
authorization
uh flag so let's say that i issued uh
the tomer asset
with an uh auth required flag to begin
with uh justin created a trust line
that trust line is by default
unauthorized until i allow off to
uh but let's say that later on i changed
my authorization flags i removed the
authorization the auth required
and now i want to elevate justin's
trust line to be authorized i can't do
that because
the uh
off required flag is not set so
it creates like a bit of a weirdness i
need to reset it in order
to set justin's proper authorization
flags
uh so this is uh one case that we want
to fix the other
case is what if an issuer wants to have
a blacklist asset that means that by
default
the authorization state is true is
authorized
but uh if the issue wants to disallow
that they can
de-authorize the state right now they
can only
invoke the allow trust operation with
authorized false
if the auth required uh flag is there
uh so this is a pretty unoffensive cap
it just fixes the semantics to make
sense
um yeah that's it uh
first kind of obvious question why did
the issuer
onset their flag why not just leave it
uh are you talking about the case when
when an issuer modifies their
their their authorization flags i mean
this stuff doesn't work
this stuff doesn't work if the issuer
turned their flags off but i guess i'm
wondering why they did that
um maybe the you know the authorization
requirements changed maybe they started
you know when they did the first
distribution of tokens
uh it needed to be uh regulated but for
some reason down the road
uh it doesn't have to be so um you know
the idea is that right now
um you know like we don't want uh you
know as long as
issuers don't set the authorization
flags to immutable
we want them to have the freedom to move
between these things and this currently
uh gets in the way
i feel like there also have been cases
where someone started with an auth
required asset and realized
that it wasn't necessary and and so they
they essentially made an error when they
initially
created set the flag on the account
i mean i'm all in favor of consistency
and this just seems to make our
our transactions semantics more
consistent
so why have weird little rules that
disallow certain things in certain
corner cases in certain situations if if
we don't need to
so it just seems like an obviously
good idea
yeah i'm with david on that and uh
following up on
that it's like we're making the rules
simpler in a way that you know anybody
who is relying on
these rules i mean there's no sensible
way in which you could have
been like oh my business is based on
these particular
rules being in effect uh you know my
application is designed to take these
things into account there's no
compatibility risk to changing this
stuff
i i don't see how you could have relied
on this
is this the shortest cap discussion
we've ever had
i guess my question is why is it like
this i mean presumably we had an idea
excellent question eric i don't i wasn't
here for the origins of this but
from studying the code i have some good
hypotheses about this
uh and i think there were some other
things in the code that we've already
changed
uh siddharth did did the work on it i
think it was cap
28 maybe um but basically like
this name auth required is very
misleading uh
like from my perspective the name should
be something like uh
auth like off default or something like
that like
do you default to true or default to
false um and that's what the flag
actually does inside of stellar core
but because of that this name auth
required there were lots of places in
the
code where there were things that we
were doing that looked like we were
going to check this flag on the issuer's
account
but we don't actually do that and so i
think that this
this behavior kind of originates from
this very very misleading name
more than anything else i don't know
people
like nikola might have a perspective on
why it was written like this originally
if you can remember back that far
a lot of things happened very quickly uh
you know last year
yeah no i don't remember
so it seems like no one no one has an
objection
to this cap i mean is that correct does
anyone have an objection i'd say if so
now is the time
uh what i object to is like
psychologically i think we all feel like
there needs to be some minimum
discussion time for any proposal but if
it's just an obviously good idea let's
just
like get it over with it done
great then i
stuck to his word and this is 15 minutes
or less so that's
that's impressive yeah it's it's eerie
okay great i mean it's it's are there
are there any follow-up
like questions that we need to address
before we move on just in terms of
thinking about the implementation of
this cap or we just we just move on to
cap 35.
so one last point following on what john
said
do we think we should take the
opportunity and rename
these flags
i discussed this with liabit and i i
pitched that same thing
relevant this came up in the discussion
of cap35 as well and lee kind of
convinced me that like from an ecosystem
perspective renaming this would be
nightmarish i'll let lee chime in on
that if he wants to
but i was pretty convinced that it's not
a good idea
yeah so these names um they obviously
exist in the protocol
they also exist in horizons api
and that consistency is elegant
that you can look at the horizon api and
you can see a flag name
you can read documentation that
discusses the protocol
and that's the same um so if we were to
change it in one place
it would be ideal to change it in other
places to maintain that consistency but
that would break horizons api
um because the actual name auth
underscore required
authors are revocable they show up in
the api
as field names
i think the cost that weighs the benefit
of changing the name personally
just take the victory let's okay we're
moving on
thank you that that's the right way to
do it david um
okay then we're going to move on to cap
35. um
so as i mentioned at the top of this
meeting cap 35 defines a method for
allowing an issuer to claw back an asset
in order to support regulatory
requirements
it could be used for instance to recover
assets that have been fraudulently
fraudulently obtained um to respond to
regulatory actions
and to enable someone who can prove
their identity to recover an asset in
the event of key loss or theft
so this proposal which was updated very
recently
it currently introduces a new account
flag
a new trustline flag a new claimable
balance flag
and two new operations one to claw back
an asset and one to claw back a
claimable balance
um dan i i think you understand the need
for this change more than anyone
is there anything you'd like to add just
a little background
on this we are doing a series of
experiments
with a number of prominent regulators
from around the world
and we've we did a a pretty significant
experiment
demonstrating the ability to enforce um
regulatory rule sets from different
jurisdictions in
using stellar's decks and uh it was very
well received by
by regulators in in that particular
setting
that is the ability to enforce policy in
a decentralized setting
using the sep 8 pattern
and out of that discussion came a second
discussion that the regulators are
particularly interested in
that has to do with custody and you see
assets in general falling into one of
two patterns
one which is a bearer instrument pattern
bearer instrument patterns
have certain benefits in the marketplace
in terms of being censorship free
but they also have certain downsides to
their nature
and this is one that makes them much
more difficult to regulate
and from a regulator's perspective
there's a particular record keeper
role which has certain responsibilities
into the marketplace
known as a transfer agent the transfer
agent if they fail to execute their
responsibilities can be sued
but they keep the official record
in the absence of the transfer agent
being able to correct the record
you can't have records on blockchain for
securities
but it turns out it with a clawback
mechanism you can actually empower
a transfer agent that is a licensed
entity with this responsibility
to correct the record and why would it
do that
and the big thing that for example the
sec worries about is
the case of the canadian exchange
operator who
disappears or dies and loses custody of
a number of their clients assets
and there's nothing that the marketplace
can do about that scenario
the sec sees for
trillions of dollars worth of securities
writing in these
ledgers that that would mean that they
have to be securities experts for
everyone who performs a broker role
in the marketplace and that to them is
just frightening and no one would ever
get through would be just way too much
of a responsibility
not trying to discount the sec's
position on these things but they see
the ability to correct the record
as an essential component the central
piece of correcting the record
is executing a clawback if someone has
made a mistaken or
illicit transaction if you can pull back
that asset
and put it to its rightful owner you
have the means to
uh to correct the record so this is the
nature of this
element came down to regulated assets as
we've interacted with regulators
globally virtually all of them require
some form of this
which we'll easily fall into we believe
the structure of what's been produced
here
with the with cap 35. hopefully that
provides some background
and i'd be happy to answer questions if
there's any um
anything else on this we happen to be
going in and showing the regulators this
in the near future and that's why
there's some pressure to
to show that stellar can be used in a
way that satisfies
the world's regulators very prominent
regulators
that stellar suitable for securities
i just want to clarify when you say we
you mean so currency correct
correct great cool um i mean i mean
there's already been a lot of back and
forth on the mailing list about this
proposal
um and it seems like there is there are
specific issues to discuss
and i i think the first one that's that
came up is about
the immutability of clawback capability
and how it relates to trust lines and
claimable balances
um lee could you tell us a little bit
more about what that means what the
issue is
yeah so it's important to be transparent
with uh an investor
or that is a token holder as to what
rights they have
and what rates can be removed so so you
want it to be absolutely clear
if they're holding one of these
regulated assets versus a bearer
instrument
that this is an asset that that can be
clawed back
because ultimately that's an investor's
choice if you don't want to have assets
that have this kind of regulatory
oversight that's your right so you need
to
um as you look at the asset have the
indicators that are going to tell you
that that either is or isn't in this
category
and what follows from that is even if it
is not
in that this category it can't be placed
in this category against their will
so once you have designated an asset as
regula
regulated even if it or if you have
designated it as
as a bearer instrument there's no way
that someone can backdoor you
um on this and so that was an important
part of the shape
of the the discussion around the cap
yeah so to experience immutable or
you're saying this anyway
uh so there's there's a couple of ways
that we address um
well what dan what dan is talking about
so the the verse is yeah author mutable
exists
author mutable exists so um and still
applies to this new
flag on the issuer account so if
somebody is using that
they can't enable clawback enabled in
the same way that they can't enable
auth required or auth revocable if
they're not set
the second way is of the proposal cap 35
snapshots the state of the issuer
accounts clawback enabled
onto the trustline when the trust line
is created
and the claimable balance snapshots the
state of the trustlands
clawback enabled flag onto itself as
well
so it sort of inherits that state so
when
an account um trusts an issuer
um today if the issue enables clawback
tomorrow it doesn't apply to accounts
that have already trusted that issuer
um they they get that they get the state
from when they trusted
and then claimable balances are the same
so a user or an account
holder can have some confidence that
if they create a claimable balance
tomorrow
it will still not be clawed back
enabled and yeah i think this is
something that
we want to discuss is is this
appropriate
should it be possible to change it
that's actually one yeah
sorry go ahead yeah i know like the the
thing i was going to play is like one of
the
the thing i wanted to and i think the
current version of the cap actually
reflects that one of the things i really
wanted to get
in this cap was as a property that
if we do have assets on the network
today
that do not rule this all that do not
expect this kind of capability to exist
they should
basically not care uh and
i think yeah like right now we are
actually achieving that
yeah so what this actually would mean
for all accounts or for all trust lines
that already exist on the network
all trust lines would start with this
cap
clawback disabled so this would have
no impact on existing trust lines or
accounts holding those trust lines
um and therefore no impact on any
claimant balances they
created from existing trust lines either
but so one problem with the so so i
agree with that
idea in general but uh one problem i
have with the specific implementation is
that
what if you do want to uh set or clear
the flag on a truss line right so i
could think of like several
uh scenarios um where the current
proposal would
not work so for example let's say that
the issuer revokes authorization from a
trust line
um and offers to restore it in exchange
for adding the clawback
flag so this would be like a a very
realistic thing to do in response to
some kind of regulatory change where
you're like okay
i'm freezing your assets because you
kind of ignored my requests you either
have to like sell these assets back to
me right now or
like you know comply with like the new
regulation
um another example would be that you
have different clawback policies for
like individual
for institutional versus like individual
accounts right
and now there's no way to uh
it's very hard to create these
institutional accounts you'd have to
create these sandwich transactions and
those sandwich transactions would not
work if you added
um off immutable um right
uh i mean another thing you might want
to do is have clawback only for
you know depending on like the limit of
the trust line so like
although i guess people can actually
raise their limits after a trust line
has been authorized but you know
it might be nice to say like you know
what i don't care for people to store a
hundred dollars right
uh but you know if anybody's gonna store
like millions of dollars like
i need to be able to claw that back
because maybe they stole it or something
yeah david this this is a piece where if
you take the two capabilities in
combination i think you get the outcomes
that you want without a change that is
except that there's no way to
tell me how to add the clawback enabled
flag or remove it from an account
uh from a trustline that already exists
that seems to be missing
either a description of it is missing
from the cap or the mechanism
it's a fair point the desire to
um potentially freeze an account using a
mechanism
and then basically force the party to
either fall into the new regime
um or maintain their account as frozen
let me let me separate that thought for
a second
and address the second point that you
raised regarding
hey there's there may be some difference
between a wallet that it's an
institution
an account that's a institutional party
versus a retail party
or a range of different options we
handle that through the policy component
of a regulated asset so we're able to
tag
to addresses or wallets specific
characteristics and one might be
a characteristic or an attribute of
being an institutional party
and that then affects the rules on how
that that wallet transacts
with this specific asset and so in this
we're able to set limits like if it's
not more than a thousand then the
following things can
happen or if this party has certain
rights they can transact with parties
who have
other rights and we do that at the
movement of value
using the sep 8 strategy and there the
policy's gonna know but hold on
but back the problem is this is not a
step problem it's a cap problem right so
imagine a situation
where you know uh i like uh you know
there's some central bank issues much
digital currency somebody else you know
like i'm gonna buy like a billion
dollars worth of your asset
but it can't be clawed back right so
everybody else has clawback you want
that billion dollar investment
right so you're willing to do that to me
so we could collaborate together and
sign a transaction but the the current
mechanism
doesn't provide us any way of doing that
right if you want
everybody else to uh to have the
clawback flag
on the clawback enabled flag on their
trust lines there's no way to sort of
create
a particular special account that
doesn't have this flag
particularly if you have auth immutable
here's how we handle that scenario but
i'm just
if you know if this were the challenge
that was presented to me i would handle
it this way
i'd actually issue two different share
classes one
with uh author revocable and and one
that
could not be uh clawed back okay so now
i have two
and so those exist and they that's not
the same that's not what i'm asking for
what
like you still i want to be able to
trade i'm going to buy a million dollars
worth of your asset
i want to be able to trade that on the
open market you want to be able to claw
it back from people who steal the assets
but you know part of our special you
know bespoke deal is that you're not
going to be able to claw this back for
me because i'm laying
out a lot of money right so this is a
very realistic thing to do
we you know if we could set the bits to
the right values we would be able to do
that there's no reason why
the issuer uh if both the issuer and the
owner of the trustline consent they
shouldn't be able to configure this
but the mechanism uh proposed here does
not allow them to do that and i
i don't see a justification for uh for
not
having a mechanism to do that when
everybody's on board
with the fact that that should happen
okay david so let me offer you two
options here
well let me offer you one option but
that addresses these two things like
i think that going in the downgrade
direction taking
an asset that's clawbackable and making
it non-club active that's completely
unoffensive
uh i actually have already spoken with
siddharth about how we would implement
that
uh you know we're pretty clear on what
we would need to do it's not hard
but the other direction is not cool you
can't take
something that's not call backable and
make it claw
um well i think that the why shouldn't
the owner of the trust line be able to
do it i think the
the issue of the asset should be able to
remove the clawback flag
and the owner of a trustline should be
allowed to add the clawback flag
but the owner like if the owner is going
to cooperate they can already do this
how do you do it wow so all you have to
do is
make a like a cosign transaction between
the issuer and the asset and the holder
the issuer the holder sends the money
back to the issuer
deletes their trust line recreates their
trust line and the issuer sends the
money right back
and now no okay okay so hold on hold on
so first of all
um one thing there's another i have a
bunch of comments on this so one comment
is that i think that
the cap should make some suggestions for
the ecosystem
and the like horizon should keep track
of how many times clawback has been used
on
any given asset and like how much has
been called back because this is gonna
be information people are gonna want
um and it is it is one thing
to uh to like you know allow someone to
claw something back it's another thing
to like
actually send them the payment because
then they could you know when this comes
to court this is gonna be a mess right
they're gonna be like you sent the money
back to us because of this other
agreement or whatever
this is very uh it it it very much
weakens
the uh the negotiating hand of
the uh of the person
of the person who owns the trust line if
they have to like literally like
send all the money back and and delete
their trust line
what if they just think about
implementing this it's like
it's it's much more of a mess right no i
think it's a mess if you actually allow
people to
to to go from something that is
not that that cannot grow back to can be
club bad because
think about it basically breaks any kind
of assumption you can
uh you know you can imagine in terms of
like pre-signed transactions and all
that stuff because at this point
like the issuer gets full control on any
kind of intermediate step
wait a second i can if i can send them
if i can send the coins back to the
issuer
uh why shouldn't i be allowed to add the
clawback enabled flag like that's
clearly like less of a
thing to do right i mean i guess i don't
have any
wait am i yeah okay i don't have any
material opposition to doing it it's
just like
since i can give you a way to do it with
without
changing the protocol like why should i
change the protocol but it's not the
same thing
right like it's not atomic it's no that
is atomic that's a single transaction
sorry sorry yeah it's um it like
you know requires me to like cancel all
my
uh orders and stuff like uh i mean it's
just
it's just it's it's it's some total mess
right like look
in in one month because of this
regulatory change we're going to require
all our customers to either add the
clawback flag
or uh or we're gonna like freeze it by
revoking
the the authorization on the trust line
right and so now the customers
they have a month and at their leisure
they should be able to do this they
shouldn't have to coordinate with us
like send the money back to us and like
trust us to send it back to them or like
do some complicated protocol where we
like pre-sign
some transaction this
this sounds like um you know like
a far-fetched scenario to basically say
hey i have this asset
i'm going to make it now
do a book go up like a far back or
whatever
yeah because like i think like what then
you're saying like i think the more
realistic
uh way to do this would actually to
issue a new asset and then ask people
to just move over like it it's way
cleaner
like it's you know you don't have like
this mix mode
i mean it's not like what i'm asking for
what i'm asking for is not
complicated it's kind of more consistent
right like it's just gonna
we already have operations to like set
flags on our on on truss lines right and
but not on yourself that would be a new
thing i don't think you can control your
own flights today
well in in in as an issue you can hold
on
let me look at change trust as an issue
you can but but like uh
those are like authorization flags right
they'll differ i guess
for me david like the main thing that i
want to kind of bring up here is like
we don't have to do this now like we
we could do it now there's nothing
stopping us like i agree it's a cleaner
way to implement this
if it's something that people really
actually want but i'm
i'm like hey not convinced it's
something that people would actually do
based on what dan was saying
uh and if it is something that people
really do want to do
as we just agreed it's easy so like it's
a change in semantics like we don't
allow
anything like this to say but there's
nothing stopping us from allowing it in
the future
uh it'd be an easy thing to do at any
time if the need for it actually comes
up
we could just do it but i don't think we
need to i don't think we need to do it
now basically
okay but we do need to remove we need to
remove the flag yeah right i see a lot
of compelling reasons to have the remove
part
uh the move is that seems right
um another thing to consider here
regarding john's uh
previous suggestion of co-signing a
transaction and and doing
with the issuer these issuers are
interactive
um right now okay like they're
probably doing kappa 18 sandwich
transactions they're
co-signing every transaction so the
interactivity by the issuer
is not a big hurdle here uh it's already
there
i mean it's just like massively like
like sending someone all your money like
it just like who knows maybe are there
like tax implications for this
like are you because you've like
actually given someone
the money i don't know i just it's just
a bit like there's clearly no
security issue like it it's it is a bit
that something that's this
someone owns a trust line should be able
to consent to so like why not
provide them a mechanism for that um
and just to be clear you think that
there might be a way to basically
load that mechanism into change trust
into the change trust
no i guess we don't we don't have uh we
we don't
it wouldn't it wouldn't work and change
trust so it needs to be
a new one it would have to be in like
allow trust with a different signer but
that's a mess so yeah i guess it would
need another operation
so um i'm sorry dude
what we frequently issue assets
that represent different rights um so
this would be tranches or share classes
so for example you have
uh an instrument denoted xyz and that is
absolutely not what i'm talking about
here right like
so i'm talking about a situation where
you need to have the same asset as
everybody else because you need to be
like participating in the decks
with this asset so it needs to you need
to have fungibility
so i'm only concerned about the case
where you need fungibility but you have
different
classes of asset holder just not
different classes of
of asset right yeah i
actually think those represent different
rights um in
in a way that's me is maybe subtle but
meaningful
and of course on the decks you can
always trade one set of rights for
another
um so you can trade if if both assets
exist
one with clawback and one without
clawback there's a yeah
again i think we're we're just going
down a rat hole it's not productive i do
not care about the case
i understand that that's a valid case
but that's already supported so we don't
need to discuss it
right that's fair i i you're you're
talking about something different from
from what i'm talking about um i'm
saying like you know i'm
like some i'm hiring someone to to you
know like i have this
bespoke deal where i'm going to give
someone a lot of something that a lot
a lot of individuals have a little bit
of and because of that i'm willing to
give them more rights
so uh so that so it seems like there's
agreement that we can at least support
that
scenario and we'll have to wait for the
other one
so uh so i have a couple of other uh
critiques so first of all i think that
we have this mentality that we've like
made this mistake of putting the
extension switches at the end
of uh of structures like so many times
like well
why not do it one more time but it's
still a mistake so i really think that
we should put the union at the top of
the structures the ext union at the top
of the structures and not at the end i
just
i don't just because we made the mistake
10 times like that doesn't mean we
should make it an 11th time there's just
no justification for adding for like
tying our hands in terms of like future
extensibility
uh by not allowing us to union the whole
data structure so
you know sorry to sound like a broken
right structure are you talking about
here sorry
well any of them like uh anytime there's
uh let's see let me actually have the
thing in front of me so if i pull up
just search for like ext um
because we have these these are
operations right like you're talking
operations then because operations we
don't need that we
we already have the entry claimable
balance entry extension v1
the switch is at the end
oh and you're saying to move that right
yeah okay that's fine i don't care
okay great is that what benefit to just
gives you many many more options for
future upgradeability like you could
decide to version the whole data
structure instead of just keep
like appending like you know more and
more nested things and so it makes
uh potentially makes source code
compatibility a lot easier like
because we didn't have this on
transaction we had to like jump through
some like pretty gross hoops when we
wanted to um
uh extend the transaction format um
it sounds like there's no objection to
that very specific idea is that true
fantastic fantastic because i feel very
strongly about it so if nobody else
cares please humor me and do that
um i i do want to make sure also i know
that there's some other stuff about the
way that
that this um that that uh
like how how cap 35 deals with claimable
balances that i believe there's some
discussion that needs to happen is that
correct john
oh you mean classic sorry what was the
topic i was looking at the uh
at the proposal while you were talking
to me oh sorry uh clawbacks and
claimable balances i know that there is
some
discussion around how they interact is
that correct
yeah there's a little bit of discussion
and there's also some interesting topics
about like uh
about what flags we should be using or
reusing um
depending on how many more comments
david has i think we can go i have two
more
i'll make them i'll try to make them uh
quick well one one is quick and the
other
well maybe we can defer so the the
quick one is please give the data
structure for an asset code
a name because it appears also in the
allow trust stop thing
and this is a particularly a kind of
data structure that you want a special
case when you're like rendering it in
text and stuff and so to have it like a
single data structure called like
asset code or asset code name or
something
you know there's a knowledge you mean
the non
non-native assets right basically yeah
exactly that's
truck yeah yeah yeah i think lee already
is
making the change perfect yeah
um and then the other thing is just
kind of to plant the seed that there's
an issue this this issue comes up in a
lot of other contexts or people have
complained to me that
they want to create a fixed number of an
asset um
and then continue to manage it with like
an auth required
and uh and it's a it's a bummer because
what happens is you basically create
this account you throw away the
the signing with a kind of high signing
weight and you keep only low signing
weight so you can authorize trust lines
but then you have no way to rotate the
keys um
and so this situation is going to get
worse and that you'll you'll also have
no way to
uh you know fiddle with like the stuff i
was talking about before where you
change off immutable so we're not going
to fix that
for this but there's something we should
keep in mind when we do these proposals
that someday we should solve that
problem okay i'll shut up and let
other people you also now have no way of
fixing the supply
uh so yeah that's exactly i was thinking
tomer
we've got a lot of people that's right
you oh that's right you also can't fix
the supply exactly
so so it'd be cool if you could like
delegate to some other account so it
can't
create the asset but it can revoke it
and it can issue trust lines we'll add a
level of indirection that's not for this
cap that's just an idea to put in tool
sets okay we can move on
john i think you had some questions
about clay mobile balances
is that correct no i i think that we
should move and let lee talk a little
bit about like
the different types of flag options that
we have available to us i think that
based on some discussions that we've had
that's kind of one of
the things that we if you look through
that that thread on the seller dev
mailing list we have cycled through that
topic like four separate times
um and it's uh it's pretty key to
actually getting an implementation ready
so i think we should go there
first yeah so what we're talking about
specifically
is the proposal right now adds a new
flag to the
account flags auth clawback enabled
and what we want to talk about is should
is that
make sense does that deliver um a lot of
value or should we
reuse the auth revocable flag because
clawback
and revocal conceptually they're very
similar like one freezes
and essentially you can't use it the
other one takes it away so you can't use
it
i mean both cases the account is losing
control over the asset
and in a lot of cases we think
if you have clawback enabled you're
probably also going to have revocable
enabled
or vice versa um so in
sort of inspired by cap 29 in an attempt
to like clean up flags
or to make flags simple and make it
harder to shoot yourself on the foot
um with them uh does it make sense just
to simplify this
and attach it to the existing auth
revocable flag
what do people think about that
i'll say from our perspective we can't
imagine a scenario where those rights
would be
distinct so we can easily see those
collapsing into the same right it it
from a regulatory perspective
that authority is held by the same party
uh i i think we i think it doesn't
hurt to uh to keep them separate
um and at the very least there's uh
there's a sort of
uh an uh
benefit for appearances so uh so it
goes back a while but there's definitely
this things like this have been like
really
touchy subjects in the past where people
have gotten like really
upset at the idea that you know
uh that you could like revoke things and
i think it could be
uh even if i sort of think that there
there may be like a transition
argument anyway where like you you
initially uh issue an asset and then
later decide that you actually want it
to be
um uh clawbackable
uh and so i actually think there's value
in that
but i also think that uh we don't want
to
uh we don't want people to feel in any
way that stellar is
trying to you know force people to like
consent to like have their
assets revoked and so by taking
a piece of functionality that people
might already be using and saying okay
now you can only use this functionality
if in addition you're willing to give up
these extra rights
i don't feel good about that and i don't
think
and i think there might be people even
if it's a kind of a subtle uh
change and maybe even if you could argue
that well you could sort of do other
things that would be bad to someone too
that they've already consented to i
don't like the idea of kind of it feels
too much like a power grab
to me that's fair look we don't have a
dog in the fight in the politics of this
of course
um only just for the sake of simplicity
from our perspective
and just as one of your many users um
the right to freeze assets is the only
distinction between the right to freeze
and claw back
is just the mess that you leave behind
when you freeze and you don't claw back
so from our perspective again from a
regulatory perspective
if you can do one you really can do
effectively do the other
the only difference is that but it sort
of it also depends like how you
how you um wha what what
what sort of real world interpretation
people give
to uh these values on the ledger so
maybe you have a company that's only
authorized to issue some number of
shares and so
uh you could freeze shares that people
have but that doesn't allow you to issue
more shares without
you know uh amending your bylaws or
whatever whereas you know you could
argue well if you call them back then
you can just give them to someone else
so even though like
yes we could just kind of by convention
agree that these things are
are equivalent i think what it looks
like on the blockchain
and how easy it is to map that to what
you actually
how you actually interpret that in the
real world i think it's just
cleaner and easier if you have two
separate options and again it doesn't
it doesn't cost us much to have these
two separate flags
it just seems less objectionable is
there a downside to having two separate
flags and if so what is it
well one of the things that lee and i
kept talking about was this uh
this weird scenario where imagine that
you are some kind of
guy i don't know what to call you
because as dan pointed out like
it's probably not reasonable to do this
but you're some kind of entity that
wants to be able to clawback but not
revoke
suppose uh and you were like okay well
like i look at the flags this is pretty
obvious all i have to do is set the
clawback flag and not set the auth
the revoke flag problem solved right not
so
because if you do this you are almost
surely in a situation where you're about
to shoot yourself in the foot
because if you are used if your asset
holders
then create a bunch of offers you will
not be able to claw back the assets that
are tied up in the liabilities of those
offers
the reason for that is that in order the
only way to cancel
the offers for an account is to use
revoke
so this is kind of one of those things
where it's like it seems like really cut
and dry and you know we could
paste the biggest reddest sign that you
can think of in our docs
but i guarantee you somebody will shoot
themselves in the foot anyway
yeah you're right there's four
possibilities and three of them are
useful
are plausibly useful right and one of
them probably means you're doing
something you don't intend to do well
that that isn't it but that's it
that isn't an argument to have two flags
or one flag though because you can just
disallow callback on this revocable is
also set right
so i mean i get they're tied together
and it seems useless but you could have
that
yeah i mean it it increases the
implementation burden and the mental
modeling burden
for users uh but like i agree there's
nothing uh
there's nothing stopping us from doing
that i mean
it seems to be a trade-off between the
mental model or overhead of the issuer
versus the mental model and overhead of
people that want to understand whether
things can be clawed back
the thing about though about separating
clawback from from authorization i think
the one area where this makes a big
difference is in the
balance entry actually because you know
as you think about the
ways those things work authorization
actually is
completely async in balanced countries
like you have those two part payments
right you have the
when you create the balance entry you
need to be authorized
and then later to claim it you have to
be authorized
um but then what happens in in between
is kind of this funny thing right like
uh
and having this as a separate flag
allows you to
kind of deal with situations like you
know about what we are talking about
earlier
when like if you want to handle for
example the
different downgraded accounts or
whatever
that don't have that you cannot go back
i mean basically you still need to
propagate this flag somehow
and if you're going to propagate in
balanced entries
you could say well i'm propagating
authorization that's kind of funny
uh because you know you're always
authorized so
what does that really mean uh
yeah one clarification about the
proposal is that we wouldn't be
uh propagating the auth flag would be
propagating
like everywhere in the cap where the
auth claw back enabled or whatever the
name of that really
that flag is you just sub in the word
auth revocable
so basically it's like you know the
clawback enabled flag on a truss line
would be set
based on the auth revocable flag
of the issuer at the time the trust sign
is created and similarly for the
claimable balance entry it then inherits
the flag from the so i it's not so bad
in
in this like it doesn't really contact
that but that's strictly less powerful
than what we are where right now where
you
you can actually don't like uh remove
that flag on
one account and then you have this icon
that basically can do
you know all sorts of things including
balanced entries
that are that cannot be called back
right
because maybe they are part of like nice
smart contracts or whatever where it's
very clear that basically that thing is
cannot be messed with by the issuer so
you're talking about
you're talking about the value of an
account where revoking is still sensible
but clawing back is bad
that that's what you're saying yeah yeah
yeah i can see that argument
um yeah i think the big the big issue
oh sorry i think my audio just cut out
no no please go ahead i i don't know i
was interrupting you john
no i wasn't um you're good
uh yes i think i think the big negative
so really the only big negative that
i've heard people say about having two
flags
is just that um that
you can you cannot accidentally
misunderstand how to use them and you
can set one
and then you can't actually claw back
because somebody has offers
so is that is that an issue that we need
to revisit like the fact that
you can have club enabled but you can't
really call back
because somebody has offers like is that
i know we defined it to work that way
because from an implementation point of
view it's simple
or simpler for
for core and the protocol but do we need
to revisit that
could we have two flags but just not
allow one of the four combinations
to be set on an account i would prefer
that over
the thing that lee was saying from from
an implementation perspective that's way
easier than moving how the offer
destruction gets done which is
not good and i don't want to do that
would you be okay with that lee i mean
like i'm okay with basically saying like
hey like we're not going to let you do
the combination that's almost surely a
mistake
um it doesn't bother me i think
i think we could
be possible for us to say with cap35
that they both have to be certain
but if in the future we discover that
actually there is a really important use
case where we don't want them to be set
that we had a proposal that then removed
that constraint
or would it be are we if we sign up for
this constraint is this constraint
something that we need to be supporting
forever
no because we can just allow you to set
the account flags that way right so this
is
we're just saying that then you know
that i'm
then i'm fine i think that's so you can
set the revocable flag or you can set
both flags you can't
set the clawback flag but clear the
revocable flag
this also means that for a
line that has revocable
set and clawback set
at the time it was created that it won't
be possible to use allow trust to clear
the revocable flag
so fun wait we don't have we don't have
a flag revocable on the trust line
oops yeah
so it seems like the solution is have
two flags only allow
three combos disallow the fourth
um combo that shoots you in the foot
that's brilliant
so we've got five minutes left um is
there any other
is there any other issue that anyone
wants to bring up if not lee is offering
to give a quick summary which i think
would be helpful
great lee take it away
okay so i think um i think we have five
takeaways relating to cap
35 uh
there's some discussion around xdrs and
moving extensions at the top
of any new structures that we're
creating which is an easy one
we need some definition for non-native
asset code which is an easy one
we agreed to not reuse auth revocable to
keep the separate flag
to require that both author revocable
and north claude accuse that
at the same time if callback is enabled
and then finally there was some
discussion earlier at the beginning
about
a need for the issuer to be able to
remove clawback enabled
for a trustline um is that
uh and there's going to be a common data
structure between uh allow trust stop
and uh the clawback right
for like asset code or asset code name
or something
oh yes yes yep that was yeah sorry the
non-native asset code
we will introduce some non-native asset
code structure
that's common between them i think out
of all of it most of these
things that i just summarized are all
very straightforward
i think the one that maybe is not super
straightforward is
the ability for the issue to remove the
clawback flag because there is some
issues with us adding that to the
existing allowed trial stop
which we might need to think about
siddharth was actually the one who
originally brought that to my attention
and i think to your attention as well
lisa maybe starts can talk about that
for a second and kind of talk about what
we had
presented as an opera as an option for
how to kind of do that
yeah so the the issue with the loud
trust right now is
uh it requires you to know
uh which which flags are already set
because it currently just sets
the trustline flags to the parameter
that's passed into our trust
um and this was fine when there was only
one value but as you add more flags
uh it becomes a burden on the user uh
ideally it would work the way set
options works where we specify which
bit which flags you want to set and
which flags you want to
or which bits you want to set which bits
you want to clear uh
so the the what we would like to do
in the future is uh create another
operation
uh that works the way set options works
where you you can actually you know you
can enable cloudback if you want
or you can disable uh cloud without
without knowing what the other
uh uh with the other flags are
i mean you could just turn authorized
into a union right there's only two
values currently used
so
that's not true there
are already three possible values for
authorize
um and with this there would now be six
well yeah i think six now
that all makes sense right now we're not
saying you don't put the six instead you
have a union where the three existing
values are just
uh void cases and there's a there's
another case which says set bits in
another case which says clear bits
and and then has a like a 32-bit integer
as the field
[Music]
i mean whatever this is bike shedding
like
whoever influenced this should make the
decision i'm just pointing out that
they're
they're lighter weight options than uh
creating a new operation although you
know
maybe they're gross enough that you want
to create a new operation
that's definitely an interesting
proposal though i hadn't even considered
that
so i think my question here um so it
sounds like you know there's more ways
we go about this and we can explore that
uh my question is does this need to be a
part of cap 35
the ability to it should be if we're
going to do it
it should be yeah if it's uh
it would be better for it to be if it's
gonna like completely derail cap 35
because we
argue over the details of how to do
something that there's two ways to do
then i
guess maybe not but
well i feel like that's like next camp
something yeah i think we're out of time
for this meaning i feel like we did make
a lot of progress on cap 35 and cap 29
too um and so yeah i'm getting into
those super super fun details i think
can happen
next time and i just want to thank
everyone for being here
um yeah and welcome back protocol
meetings hello 2021
thanks everybody thanks bye bye
everybody
