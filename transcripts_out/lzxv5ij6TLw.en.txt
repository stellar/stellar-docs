hello everyone welcome to this week's
hello everyone welcome to this week's
protocol meeting uh we have a couple
protocol meeting uh we have a couple
protocol meeting uh we have a couple
caps to discuss today uh and I'll start
caps to discuss today uh and I'll start
caps to discuss today uh and I'll start
by presenting cap
by presenting cap
by presenting cap
67 I'll share the link
here so uh this cap is about emitting
here so uh this cap is about emitting
events in Stellar in the same format
events in Stellar in the same format
events in Stellar in the same format
that we see in sorine for Stellar assets
that we see in sorine for Stellar assets
that we see in sorine for Stellar assets
so that a user can use the stream of
so that a user can use the stream of
so that a user can use the stream of
events track
events track
events track
balances and this cap covers three
balances and this cap covers three
balances and this cap covers three
separate High higher level changes uh
separate High higher level changes uh
separate High higher level changes uh
they're listed in the abstract of the
they're listed in the abstract of the
they're listed in the abstract of the
cap and I'll first go over the uh the
cap and I'll first go over the uh the
cap and I'll first go over the uh the
two smaller changes that make some
two smaller changes that make some
two smaller changes that make some
semantic fixes to the seller asset
semantic fixes to the seller asset
semantic fixes to the seller asset
contract events for compatibility with
contract events for compatibility with
contract events for compatibility with
set 41 which is the token interface
set 41 which is the token interface
set 41 which is the token interface
Set uh so the first is that we're going
Set uh so the first is that we're going
Set uh so the first is that we're going
to stop emitting uh the admin uh the
to stop emitting uh the admin uh the
to stop emitting uh the admin uh the
admin on the mint and clawback events uh
admin on the mint and clawback events uh
admin on the mint and clawback events uh
the admin is an implementation detail of
the admin is an implementation detail of
the admin is an implementation detail of
the
the
the
sa uh and does not belong in the event
sa uh and does not belong in the event
sa uh and does not belong in the event
the admin doesn't even exist in sub 41
the admin doesn't even exist in sub 41
the admin doesn't even exist in sub 41
as a concept
as a concept
as a concept
uh the second change is that we're going
uh the second change is that we're going
uh the second change is that we're going
to update an edge case with regards to
to update an edge case with regards to
to update an edge case with regards to
transfers to and from an issuer uh the
transfers to and from an issuer uh the
transfers to and from an issuer uh the
sa was written in a way that matched
sa was written in a way that matched
sa was written in a way that matched
classic payment semantics uh where a
classic payment semantics uh where a
classic payment semantics uh where a
transfer from an issuer Min the asset
transfer from an issuer Min the asset
transfer from an issuer Min the asset
and a transfer to an issuer burns the
and a transfer to an issuer burns the
and a transfer to an issuer burns the
asset the issue is that in these two
asset the issue is that in these two
asset the issue is that in these two
scenarios we still emit a transfer event
scenarios we still emit a transfer event
scenarios we still emit a transfer event
instead of the appropriate Mint or burn
instead of the appropriate Mint or burn
instead of the appropriate Mint or burn
event uh so this cap just proposes
event uh so this cap just proposes
event uh so this cap just proposes
fixing that to Mint the the mint the
fixing that to Mint the the mint the
fixing that to Mint the the mint the
correct Mint or burn event instead of
correct Mint or burn event instead of
correct Mint or burn event instead of
the transfer
the transfer
the transfer
prevent uh so I'll pause there real
prevent uh so I'll pause there real
prevent uh so I'll pause there real
quick if there are any questions about
quick if there are any questions about
quick if there are any questions about
those two changes before I move on to
those two changes before I move on to
those two changes before I move on to
the uh the bigger change at
hand all right then I'll move on to the
hand all right then I'll move on to the
third and most significant change of
third and most significant change of
third and most significant change of
this cap which is emitting an event in
this cap which is emitting an event in
this cap which is emitting an event in
the same format as the Stellar asset
the same format as the Stellar asset
the same format as the Stellar asset
contract for any asset
contract for any asset
contract for any asset
movement um and this means that a a
movement um and this means that a a
movement um and this means that a a
stellar operation that results in the
stellar operation that results in the
stellar operation that results in the
movement of an asset can emit
movement of an asset can emit
movement of an asset can emit
uh a transfer mint burn or clawback
uh a transfer mint burn or clawback
uh a transfer mint burn or clawback
event uh and we're also adding a fee
event uh and we're also adding a fee
event uh and we're also adding a fee
event to represent the fee paid by by
event to represent the fee paid by by
event to represent the fee paid by by
The Source count so the the cap
The Source count so the the cap
The Source count so the the cap
specifies what what the uh events for
specifies what what the uh events for
specifies what what the uh events for
each operation will look like but I'll
each operation will look like but I'll
each operation will look like but I'll
just mention some interesting points so
just mention some interesting points so
just mention some interesting points so
a trade that occurs through either
a trade that occurs through either
a trade that occurs through either
through an offer operation or path
through an offer operation or path
through an offer operation or path
payment operation will result in two
payment operation will result in two
payment operation will result in two
events one for each side of the trade uh
events one for each side of the trade uh
events one for each side of the trade uh
and the two parties on both events will
and the two parties on both events will
and the two parties on both events will
be the source account of the operation
be the source account of the operation
be the source account of the operation
and the owner of the
and the owner of the
and the owner of the
offer uh and it's and these these events
offer uh and it's and these these events
offer uh and it's and these these events
can be transfer events but they can also
can be transfer events but they can also
can be transfer events but they can also
be instead be a mint or burn if the
be instead be a mint or burn if the
be instead be a mint or burn if the
issuer is
issuer is
issuer is
involved we're also adding uh new SD
involved we're also adding uh new SD
involved we're also adding uh new SD
address types to be able to represent
address types to be able to represent
address types to be able to represent
the claimable balances and liquidity
the claimable balances and liquidity
the claimable balances and liquidity
pools as from or two addresses in these
pools as from or two addresses in these
pools as from or two addresses in these
events and this allows us to represent
events and this allows us to represent
events and this allows us to represent
movements to and from these entries
yeah so uh silence asked uh can you
yeah so uh silence asked uh can you
explain removing the admin from the sa
explain removing the admin from the sa
explain removing the admin from the sa
mint and Clack events So currently on
mint and Clack events So currently on
mint and Clack events So currently on
the mint and Clack events of the sa not
the mint and Clack events of the sa not
the mint and Clack events of the sa not
not in set
not in set
not in set
41 uh the admin is uh one of is is one
41 uh the admin is uh one of is is one
41 uh the admin is uh one of is is one
of the topics of the event but this is
of the topics of the event but this is
of the topics of the event but this is
uh this isn't necessary and the concept
uh this isn't necessary and the concept
uh this isn't necessary and the concept
of an admin is not required for uh a
of an admin is not required for uh a
of an admin is not required for uh a
token exactly yeah it's not it's not
token exactly yeah it's not it's not
token exactly yeah it's not it's not
we're not removing the admin from the sa
we're not removing the admin from the sa
we're not removing the admin from the sa
uh just it just says the topic we're
uh just it just says the topic we're
uh just it just says the topic we're
removing it from the the topic of the
removing it from the the topic of the
removing it from the the topic of the
event all right uh so yeah we're also in
event all right uh so yeah we're also in
event all right uh so yeah we're also in
addition to those two new address types
addition to those two new address types
addition to those two new address types
uh for clal balances and liquidity pools
uh for clal balances and liquidity pools
uh for clal balances and liquidity pools
we're also adding another SC address
we're also adding another SC address
we're also adding another SC address
type for MX accounts so that these new
type for MX accounts so that these new
type for MX accounts so that these new
events can pass along the MX information
events can pass along the MX information
events can pass along the MX information
that the MX account is used in the
that the MX account is used in the
that the MX account is used in the
operation or
operation or
operation or
transaction uh it's also another thing
transaction uh it's also another thing
transaction uh it's also another thing
to
sh
sh
screens so I'm I'm actually not
screens so I'm I'm actually not
screens so I'm I'm actually not
presenting this in the order that it uh
presenting this in the order that it uh
presenting this in the order that it uh
like it shows up in the cap this is just
like it shows up in the cap this is just
like it shows up in the cap this is just
uh some points I thought were
uh some points I thought were
uh some points I thought were
interesting but if you look at cap
interesting but if you look at cap
interesting but if you look at cap
67 uh these points should be listed
67 uh these points should be listed
67 uh these points should be listed
there at a at a with more
detail uh then yeah so yeah so I wanted
detail uh then yeah so yeah so I wanted
to mention that these new events will
to mention that these new events will
to mention that these new events will
not be Into The Ledger therefore will
not be Into The Ledger therefore will
not be Into The Ledger therefore will
not be part of the protocol and uh we
not be part of the protocol and uh we
not be part of the protocol and uh we
also will emit the emit these events
also will emit the emit these events
also will emit the emit these events
from Genesis if you replay from Genesis
from Genesis if you replay from Genesis
from Genesis if you replay from Genesis
and something to keep in mind here is
and something to keep in mind here is
and something to keep in mind here is
that there was a bug in a very old
that there was a bug in a very old
that there was a bug in a very old
protocol version where xlm was minted
protocol version where xlm was minted
protocol version where xlm was minted
and burned uh and we will admit events
and burned uh and we will admit events
and burned uh and we will admit events
uh that will allow you to reconcile
uh that will allow you to reconcile
uh that will allow you to reconcile
those Balan
those Balan
those Balan
changes and finally we will be reworking
changes and finally we will be reworking
changes and finally we will be reworking
the format of TX meta with the
the format of TX meta with the
the format of TX meta with the
transaction meta V4 that generalizes the
transaction meta V4 that generalizes the
transaction meta V4 that generalizes the
events and separates them by operation
events and separates them by operation
events and separates them by operation
previously the events were for uh
previously the events were for uh
previously the events were for uh
formatted in a way where was very
formatted in a way where was very
formatted in a way where was very
specific to sorban and the fact that
specific to sorban and the fact that
specific to sorban and the fact that
sorban only has for a single sbon
sorban only has for a single sbon
sorban only has for a single sbon
transaction there's only one operation
transaction there's only one operation
transaction there's only one operation
but the transaction meta V4 generalizes
but the transaction meta V4 generalizes
but the transaction meta V4 generalizes
that and the plan is to provide a config
that and the plan is to provide a config
that and the plan is to provide a config
flag that enables the emission of this
flag that enables the emission of this
flag that enables the emission of this
new uh meta
format uh okay so let me look at some of
format uh okay so let me look at some of
these questions
so will this resolve the issue with a
so will this resolve the issue with a
locked issuer sa having an admin Sil can
locked issuer sa having an admin Sil can
locked issuer sa having an admin Sil can
do things the issuer
lock no so I think what you're sounds I
lock no so I think what you're sounds I
think what you're asking is if you
think what you're asking is if you
think what you're asking is if you
change the admin uh and you lock the
change the admin uh and you lock the
change the admin uh and you lock the
issuer the ad okay ignore that yeah they
issuer the ad okay ignore that yeah they
issuer the ad okay ignore that yeah they
the admin can still do whatever it wants
the admin can still do whatever it wants
the admin can still do whatever it wants
to
to
to
uh what else does back filling mean that
uh what else does back filling mean that
uh what else does back filling mean that
replaying with these new events enabled
replaying with these new events enabled
replaying with these new events enabled
will emit meta4 for all ledgers rather
will emit meta4 for all ledgers rather
will emit meta4 for all ledgers rather
than just post 23 yeah that is the goal
than just post 23 yeah that is the goal
than just post 23 yeah that is the goal
uh and we and that should work I we we
uh and we and that should work I we we
uh and we and that should work I we we
probably have some stuff to work through
probably have some stuff to work through
probably have some stuff to work through
there but if we want to admit these
there but if we want to admit these
there but if we want to admit these
events from uh the beginning then it has
events from uh the beginning then it has
events from uh the beginning then it has
to be meta V4
so MX addresses and memo so yeah one one
so MX addresses and memo so yeah one one
of the issues is so the cap addresses
of the issues is so the cap addresses
of the issues is so the cap addresses
the M uh partially by forwarding the M
the M uh partially by forwarding the M
the M uh partially by forwarding the M
addresses into the events but there is
addresses into the events but there is
addresses into the events but there is
uh another question about
uh another question about
uh another question about
memos uh that I'll link this discussion
memos uh that I'll link this discussion
memos uh that I'll link this discussion
topic
topic
topic
[Music]
[Music]
[Music]
from from
from from
from from
Nico it's
relevant and at a high
relevant and at a high
level uh this this amounts to
level uh this this amounts to
level uh this this amounts to
considering a solution where you can
considering a solution where you can
considering a solution where you can
group uh an arbitrary memo with a with a
group uh an arbitrary memo with a with a
group uh an arbitrary memo with a with a
group of trans uh events this will allow
group of trans uh events this will allow
group of trans uh events this will allow
you to you know solve some issues we've
you to you know solve some issues we've
you to you know solve some issues we've
had with uh in the past with regards to
had with uh in the past with regards to
had with uh in the past with regards to
the design of memos um but that uh but
the design of memos um but that uh but
the design of memos um but that uh but
yeah I don't know if Lee if you want to
yeah I don't know if Lee if you want to
yeah I don't know if Lee if you want to
discuss this a little bit more that's
discuss this a little bit more that's
discuss this a little bit more that's
something this concept is something we
something this concept is something we
something this concept is something we
still have to
discuss yeah good um yeah so yeah NCO
discuss yeah good um yeah so yeah NCO
may want to he he this is sort of I feel
may want to he he this is sort of I feel
may want to he he this is sort of I feel
like his idea so he may want
like his idea so he may want
like his idea so he may want
to speak to this as well um but there
to speak to this as well um but there
to speak to this as well um but there
you know we have the separate we have
you know we have the separate we have
you know we have the separate we have
another cap cap 64 that we're not
another cap cap 64 that we're not
another cap cap 64 that we're not
actually discussing today um that's
actually discussing today um that's
actually discussing today um that's
um doing some things with MOS it's
um doing some things with MOS it's
um doing some things with MOS it's
touching MOS and where they show up
touching MOS and where they show up
touching MOS and where they show up
where they will show up in
where they will show up in
where they will show up in
tooling uh and uh you know making it
tooling uh and uh you know making it
tooling uh and uh you know making it
possible
possible
possible
to do a soran transaction
to do a soran transaction
to do a soran transaction
um with a memo and have that safely
um with a memo and have that safely
um with a memo and have that safely
included in the signature so that's cap
included in the signature so that's cap
included in the signature so that's cap
64 and something that niik was bringing
64 and something that niik was bringing
64 and something that niik was bringing
up with this cap is that you know right
up with this cap is that you know right
up with this cap is that you know right
now we're in this moment where we're
now we're in this moment where we're
now we're in this moment where we're
making some significant changes to
making some significant changes to
making some significant changes to
events or we're doing a lot of work
events or we're doing a lot of work
events or we're doing a lot of work
around events and doesn't make sense you
around events and doesn't make sense you
around events and doesn't make sense you
know we have to sort of um we we sort of
know we have to sort of um we we sort of
know we have to sort of um we we sort of
have to get close to Memos because we've
have to get close to Memos because we've
have to get close to Memos because we've
got this issue with moer dresses and you
got this issue with moer dresses and you
got this issue with moer dresses and you
know right now cup
know right now cup
know right now cup
67 um
67 um
67 um
in a very non-controversial way is just
in a very non-controversial way is just
in a very non-controversial way is just
suggesting that these events now might
suggesting that these events now might
suggesting that these events now might
contain addresses that are MX addresses
contain addresses that are MX addresses
contain addresses that are MX addresses
so we're just going to pass it through
so we're just going to pass it through
so we're just going to pass it through
so if you do a payment
so if you do a payment
so if you do a payment
operation um that's got a destination of
operation um that's got a destination of
operation um that's got a destination of
a Max address uh that address field in
a Max address uh that address field in
a Max address uh that address field in
the San event could be a MX address it
the San event could be a MX address it
the San event could be a MX address it
could be an M address instead of a g
could be an M address instead of a g
could be an M address instead of a g
address or a c address and I I think
address or a c address and I I think
address or a c address and I I think
that is like very not noncontroversial
that is like very not noncontroversial
that is like very not noncontroversial
um it's sort of like straight line what
um it's sort of like straight line what
um it's sort of like straight line what
we I guess we would sort of expect the
we I guess we would sort of expect the
we I guess we would sort of expect the
cap to do in the situation um but there
cap to do in the situation um but there
cap to do in the situation um but there
is this we have this history where you
is this we have this history where you
is this we have this history where you
know once upon a time there was memos
know once upon a time there was memos
know once upon a time there was memos
then there were M addresses um right now
then there were M addresses um right now
then there were M addresses um right now
the ecosystem is pretty um there's you
the ecosystem is pretty um there's you
the ecosystem is pretty um there's you
know both get used in the ecosystem so
know both get used in the ecosystem so
know both get used in the ecosystem so
both getting used by
both getting used by
both getting used by
exchanges um and but when you look at
exchanges um and but when you look at
exchanges um and but when you look at
the data the data tells a somewhat
the data the data tells a somewhat
the data the data tells a somewhat
confusing story because this is memo
confusing story because this is memo
confusing story because this is memo
field there's this MOX address they can
field there's this MOX address they can
field there's this MOX address they can
be in the destination you know
be in the destination you know
be in the destination you know
technically sources can also be
technically sources can also be
technically sources can also be
addresses um and nik's Nik was sort of
addresses um and nik's Nik was sort of
addresses um and nik's Nik was sort of
suggest I don't know if I don't know if
suggest I don't know if I don't know if
suggest I don't know if I don't know if
this was actually a proposal but he was
this was actually a proposal but he was
this was actually a proposal but he was
suggesting like do we do something more
suggesting like do we do something more
suggesting like do we do something more
here do we do we make these events in
here do we do we make these events in
here do we do we make these events in
this moment more opinionated about what
this moment more opinionated about what
this moment more opinionated about what
the memo for this event is um and you
the memo for this event is um and you
the memo for this event is um and you
know do we do something like if there's
know do we do something like if there's
know do we do something like if there's
a transaction memo this event has a memo
a transaction memo this event has a memo
a transaction memo this event has a memo
um is or if there's a destination of a m
um is or if there's a destination of a m
um is or if there's a destination of a m
address do we pull the memo out of the
address do we pull the memo out of the
address do we pull the memo out of the
address and we say well actually that's
address and we say well actually that's
address and we say well actually that's
the memo for this
the memo for this
the memo for this
event to some degree like the ecosystem
event to some degree like the ecosystem
event to some degree like the ecosystem
has to do this somewhere and you know
has to do this somewhere and you know
has to do this somewhere and you know
right now it has to do this Downstream
right now it has to do this Downstream
right now it has to do this Downstream
ecosystem tooling uh has to make a
ecosystem tooling uh has to make a
ecosystem tooling uh has to make a
decision about where these events come
decision about where these events come
decision about where these events come
from um and in the future uh like you
from um and in the future uh like you
from um and in the future uh like you
know right now memo memos there's like
know right now memo memos there's like
know right now memo memos there's like
MX addresses are only a classic thing
MX addresses are only a classic thing
MX addresses are only a classic thing
memos only occur at the transaction
memos only occur at the transaction
memos only occur at the transaction
level um in cap 64 but
level um in cap 64 but
level um in cap 64 but
in the future uh like how do you attach
in the future uh like how do you attach
in the future uh like how do you attach
memos to like other groupings or
memos to like other groupings or
memos to like other groupings or
transfers if there's you know transfers
transfers if there's you know transfers
transfers if there's you know transfers
being bundled together um yeah sorry I'm
being bundled together um yeah sorry I'm
being bundled together um yeah sorry I'm
not sure I'm actually doing a great job
not sure I'm actually doing a great job
not sure I'm actually doing a great job
of summarizing this there's like a lot
of summarizing this there's like a lot
of summarizing this there's like a lot
um
yeah yeah it's definitely uh something
yeah yeah it's definitely uh something
that still needs to be thought through
that still needs to be thought through
that still needs to be thought through
but I guess the question is uh should we
but I guess the question is uh should we
but I guess the question is uh should we
explore yeah addressing that issue in
explore yeah addressing that issue in
explore yeah addressing that issue in
cap 67 it sounds like we should at least
cap 67 it sounds like we should at least
cap 67 it sounds like we should at least
at a high level I think I think we
at a high level I think I think we
at a high level I think I think we
should and I think what nio just posted
should and I think what nio just posted
should and I think what nio just posted
in the in the chat is a really succinct
in the in the chat is a really succinct
in the in the chat is a really succinct
way of for the why we should consider it
way of for the why we should consider it
way of for the why we should consider it
now and that is that you know cap 64 is
now and that is that you know cap 64 is
now and that is that you know cap 64 is
forcing the memo to be exposed in down
forcing the memo to be exposed in down
forcing the memo to be exposed in down
TR systems for San events and so it
TR systems for San events and so it
TR systems for San events and so it
makes sense since this cap is very
makes sense since this cap is very
makes sense since this cap is very
focused on that consistency between
focused on that consistency between
focused on that consistency between
classic and sorban and fixing it across
classic and sorban and fixing it across
classic and sorban and fixing it across
those two dimensions of you know San
those two dimensions of you know San
those two dimensions of you know San
versus classic sack versus set 41 um it
versus classic sack versus set 41 um it
versus classic sack versus set 41 um it
makes sense to discuss
makes sense to discuss
makes sense to discuss
now yeah makes sense okay orbit asked
now yeah makes sense okay orbit asked
now yeah makes sense okay orbit asked
this question uh why did we decide to
this question uh why did we decide to
this question uh why did we decide to
extend the meta with the vents if these
extend the meta with the vents if these
extend the meta with the vents if these
events can be commuted dynamically from
events can be commuted dynamically from
events can be commuted dynamically from
the existing meta seems like redundant
the existing meta seems like redundant
the existing meta seems like redundant
data in the meta and this is something
data in the meta and this is something
data in the meta and this is something
we actually
we actually
we actually
discussed uh internally I believe George
discussed uh internally I believe George
discussed uh internally I believe George
actually mentioned the same single
actually mentioned the same single
actually mentioned the same single
source of Tru truth rather than risking
source of Tru truth rather than risking
source of Tru truth rather than risking
bugs Downstream renting the wheel and
bugs Downstream renting the wheel and
bugs Downstream renting the wheel and
dynamic compute also Lee do you have I
dynamic compute also Lee do you have I
dynamic compute also Lee do you have I
say you mut yourself do you want to
say you mut yourself do you want to
say you mut yourself do you want to
address this yeah I can I can speak to
address this yeah I can I can speak to
address this yeah I can I can speak to
this um the a large part of this is that
this um the a large part of this is that
this um the a large part of this is that
you know when we look at um the tooling
you know when we look at um the tooling
you know when we look at um the tooling
that we have today so we have a horizon
that we have today so we have a horizon
that we have today so we have a horizon
which takes a lot of What's um in the
which takes a lot of What's um in the
which takes a lot of What's um in the
mattera today and creates this data
mattera today and creates this data
mattera today and creates this data
model for people to consume um this new
model for people to consume um this new
model for people to consume um this new
data model for people consume and then
data model for people consume and then
data model for people consume and then
St RPC was designed um with a different
St RPC was designed um with a different
St RPC was designed um with a different
approach where the Stellar IPC really
approach where the Stellar IPC really
approach where the Stellar IPC really
exposes the raw network data um and
exposes the raw network data um and
exposes the raw network data um and
tries to introduce as little as possible
tries to introduce as little as possible
tries to introduce as little as possible
in terms of its own data model on top of
in terms of its own data model on top of
in terms of its own data model on top of
that and one of the reasons that Stell
that and one of the reasons that Stell
that and one of the reasons that Stell
IPC was designed that way is that um you
IPC was designed that way is that um you
IPC was designed that way is that um you
can go to uh you know you can take
can go to uh you know you can take
can go to uh you know you can take
contract events that have come out of
contract events that have come out of
contract events that have come out of
star RPC and they look the same way as
star RPC and they look the same way as
star RPC and they look the same way as
if you go and take meta out of core or
if you go and take meta out of core or
if you go and take meta out of core or
if you use G Galaxy um to you know
if you use G Galaxy um to you know
if you use G Galaxy um to you know
generate a data Lake of meta like the
generate a data Lake of meta like the
generate a data Lake of meta like the
events look the same way in all these
events look the same way in all these
events look the same way in all these
different places except if you go to
different places except if you go to
different places except if you go to
Horizon you know Horizon has its own
Horizon you know Horizon has its own
Horizon you know Horizon has its own
data model and it has that effects data
data model and it has that effects data
data model and it has that effects data
model um which
model um which
model um which
is you know very different so um the
is you know very different so um the
is you know very different so um the
idea between the ibr like how like why
idea between the ibr like how like why
idea between the ibr like how like why
bring these events to Classic and the
bring these events to Classic and the
bring these events to Classic and the
the the Stellar asset contract and the
the the Stellar asset contract and the
the the Stellar asset contract and the
CL operations is to create this like one
CL operations is to create this like one
CL operations is to create this like one
unified view that appears everywhere
unified view that appears everywhere
unified view that appears everywhere
that um looks the same everywhere that
that um looks the same everywhere that
that um looks the same everywhere that
that the data
occurs okay I hopefully that answers
occurs okay I hopefully that answers
that question but if not let us
that question but if not let us
that question but if not let us
know um I think Lee you mentioned
know um I think Lee you mentioned
know um I think Lee you mentioned
another thing about uh another question
another thing about uh another question
another thing about uh another question
about asset names on the on the the
about asset names on the on the the
about asset names on the on the the
topic of the events right uh because the
topic of the events right uh because the
topic of the events right uh because the
currently go ahead maybe before we move
currently go ahead maybe before we move
currently go ahead maybe before we move
on it does sound like orbit has some
on it does sound like orbit has some
on it does sound like orbit has some
things I'm Orit do you want to um do you
things I'm Orit do you want to um do you
things I'm Orit do you want to um do you
want to speak
to yeah hello everyone um just wanted to
to yeah hello everyone um just wanted to
add my two Sense on this uh we've been
add my two Sense on this uh we've been
add my two Sense on this uh we've been
successfully reconstructing everything
successfully reconstructing everything
successfully reconstructing everything
from uh uh transaction meta xdr on the
from uh uh transaction meta xdr on the
from uh uh transaction meta xdr on the
client side
client side
client side
basically our inje pipeline in Stell
basically our inje pipeline in Stell
basically our inje pipeline in Stell
expert is built on top of the
expert is built on top of the
expert is built on top of the
library um that we built uh specifically
library um that we built uh specifically
library um that we built uh specifically
for this purpose um and we had a
for this purpose um and we had a
for this purpose um and we had a
conversation with the Horizon team
conversation with the Horizon team
conversation with the Horizon team
before like several years ago I think uh
before like several years ago I think uh
before like several years ago I think uh
where I proposed to
where I proposed to
where I proposed to
actually remove all this excessive data
actually remove all this excessive data
actually remove all this excessive data
tables like uh effects and everything
tables like uh effects and everything
tables like uh effects and everything
like this because uh all of it can be
like this because uh all of it can be
like this because uh all of it can be
reconstructed on the client
reconstructed on the client
reconstructed on the client
side of course uh there are very
side of course uh there are very
side of course uh there are very
specific um issues uh like uh the memo
specific um issues uh like uh the memo
specific um issues uh like uh the memo
case lay covered before that
case lay covered before that
case lay covered before that
uh um but maybe we can just
uh um but maybe we can just
uh um but maybe we can just
um like conduct some research on it and
um like conduct some research on it and
um like conduct some research on it and
uh
uh
uh
maybe the Parson Library we already have
maybe the Parson Library we already have
maybe the Parson Library we already have
and which have been tested uh for years
and which have been tested uh for years
and which have been tested uh for years
and which works with classic and
and which works with classic and
and which works with classic and
San uh maybe it's enough because on the
San uh maybe it's enough because on the
San uh maybe it's enough because on the
client side people can just use it
client side people can just use it
client side people can just use it
directly in JavaScript to parse the
directly in JavaScript to parse the
directly in JavaScript to parse the
response they receive from
response they receive from
response they receive from
DC
DC
DC
um Horizon now doesn't support
um Horizon now doesn't support
um Horizon now doesn't support
transaction meta so it's
transaction meta so it's
transaction meta so it's
probably case when we cannot use it
probably case when we cannot use it
probably case when we cannot use it
directly but uh at least from RPC it has
directly but uh at least from RPC it has
directly but uh at least from RPC it has
uh zero problems is
Parson looks like George has something
Parson looks like George has something
to say but I can't bring him up on
stage there oh okay yeah I I actually
stage there oh okay yeah I I actually
didn't have anything to say uh I think
didn't have anything to say uh I think
didn't have anything to say uh I think
it's a I think or makes a good point um
it's a I think or makes a good point um
it's a I think or makes a good point um
but I do think that a unified event
but I do think that a unified event
but I do think that a unified event
stream um is better for uh like your
stream um is better for uh like your
stream um is better for uh like your
average dap developer um even though we
average dap developer um even though we
average dap developer um even though we
can do all the indexing on the Fly it's
can do all the indexing on the Fly it's
can do all the indexing on the Fly it's
probably more catered towards like
probably more catered towards like
probably more catered towards like
infrastructure uh providers like Stellar
infrastructure uh providers like Stellar
infrastructure uh providers like Stellar
expert and
expert and
expert and
Horizon so this is still going to have
Horizon so this is still going to have
Horizon so this is still going to have
value for people who are just
value for people who are just
value for people who are just
interacting with RPC
directly I mean we've been using it to
directly I mean we've been using it to
actually display transactions uh in
actually display transactions uh in
actually display transactions uh in
Sellar
Sellar
Sellar
expert be wallet uh uh reflector
expert be wallet uh uh reflector
expert be wallet uh uh reflector
refractor
refractor
refractor
everywhere uh I'd say it's a universal
everywhere uh I'd say it's a universal
everywhere uh I'd say it's a universal
approach that can be used everywhere I'm
approach that can be used everywhere I'm
approach that can be used everywhere I'm
not insisting on it it just seems to me
not insisting on it it just seems to me
not insisting on it it just seems to me
that um transaction meta will be even
that um transaction meta will be even
that um transaction meta will be even
larger after that
larger after that
larger after that
and it might have some uh duplicated
and it might have some uh duplicated
and it might have some uh duplicated
data because of uh of this
can you hear me
can you hear me
well yeah I can hear you yeah okay great
well yeah I can hear you yeah okay great
well yeah I can hear you yeah okay great
um so I I have a couple thoughts on this
um so I I have a couple thoughts on this
um so I I have a couple thoughts on this
uh first uh if the meta size increase is
uh first uh if the meta size increase is
uh first uh if the meta size increase is
concerned I think I don't know if we
concerned I think I don't know if we
concerned I think I don't know if we
made it explicit anywhere but I think
made it explicit anywhere but I think
made it explicit anywhere but I think
this should be optional for the most
this should be optional for the most
this should be optional for the most
part
part
part
um at least I don't see a good reason
um at least I don't see a good reason
um at least I don't see a good reason
for not making Z
for not making Z
for not making Z
um so I I don't think and the same goes
um so I I don't think and the same goes
um so I I don't think and the same goes
actually for The Ledger changes um
actually for The Ledger changes um
actually for The Ledger changes um
ideally you would be able to pick one or
ideally you would be able to pick one or
ideally you would be able to pick one or
another depending on what is your
another depending on what is your
another depending on what is your
Downstream
Downstream
Downstream
processing whatever suits you um then
processing whatever suits you um then
processing whatever suits you um then
regarding the library I wanted to point
regarding the library I wanted to point
regarding the library I wanted to point
out that well a not wa JavaScript is not
out that well a not wa JavaScript is not
out that well a not wa JavaScript is not
the only language out there but uh also
the only language out there but uh also
the only language out there but uh also
there is like some Nuance to like there
there is like some Nuance to like there
there is like some Nuance to like there
is very Nuance difference between Ledger
is very Nuance difference between Ledger
is very Nuance difference between Ledger
divs and events because events tell you
divs and events because events tell you
divs and events because events tell you
what exactly has happened during the
what exactly has happened during the
what exactly has happened during the
transaction whereas weder deeps tell you
transaction whereas weder deeps tell you
transaction whereas weder deeps tell you
what was the state after the transaction
what was the state after the transaction
what was the state after the transaction
and uh I think it matters more for soran
and uh I think it matters more for soran
and uh I think it matters more for soran
but I don't know it might have some
but I don't know it might have some
but I don't know it might have some
interesting implications for classic I
interesting implications for classic I
interesting implications for classic I
don't know if they're interesting to
don't know if they're interesting to
don't know if they're interesting to
anyone but
anyone but
anyone but
um just that the format of the event
um just that the format of the event
um just that the format of the event
like if you're processing Samson you
like if you're processing Samson you
like if you're processing Samson you
might be interested in processing Samson
might be interested in processing Samson
might be interested in processing Samson
as a stream of specifically events right
as a stream of specifically events right
as a stream of specifically events right
and not a stream of um some data types
and not a stream of um some data types
and not a stream of um some data types
that depend on the operations like can
that depend on the operations like can
that depend on the operations like can
see from the library correct me if only
see from the library correct me if only
see from the library correct me if only
them missing something there but this
them missing something there but this
them missing something there but this
don't seem to me like this stand and the
don't seem to me like this stand and the
don't seem to me like this stand and the
idea here is that you know if I wanted
idea here is that you know if I wanted
idea here is that you know if I wanted
to track just the movement of the
to track just the movement of the
to track just the movement of the
balance and I not particularly
balance and I not particularly
balance and I not particularly
interested in the exact semantics of
interested in the exact semantics of
interested in the exact semantics of
each and every store operation what I
each and every store operation what I
each and every store operation what I
could do is I could just ingest the
could do is I could just ingest the
could do is I could just ingest the
event stream and track the balance um
event stream and track the balance um
event stream and track the balance um
for a given
for a given
for a given
account um which I think may be
account um which I think may be
account um which I think may be
interesting to some consumers um so yeah
interesting to some consumers um so yeah
interesting to some consumers um so yeah
this are just some thoughts on what why
this are just some thoughts on what why
this are just some thoughts on what why
buer doing this at
all I think uh the argument regarding
all I think uh the argument regarding
the event stream is pretty solid because
the event stream is pretty solid because
the event stream is pretty solid because
uh this way uh the server in this case
uh this way uh the server in this case
uh this way uh the server in this case
RPC handles uh the streaming itself and
RPC handles uh the streaming itself and
RPC handles uh the streaming itself and
uh uh indexing and cses and Etc so
uh uh indexing and cses and Etc so
uh uh indexing and cses and Etc so
instead of working with transactions and
instead of working with transactions and
instead of working with transactions and
Parson transactions uh it can like
Parson transactions uh it can like
Parson transactions uh it can like
really rely on these events it's a solid
really rely on these events it's a solid
really rely on these events it's a solid
argument uh it point is that um I'm not
argument uh it point is that um I'm not
argument uh it point is that um I'm not
proposing to use JavaScript everywhere
proposing to use JavaScript everywhere
proposing to use JavaScript everywhere
uh
uh
uh
maybe um we
maybe um we
maybe um we
can like Port this uh to rust uh or
can like Port this uh to rust uh or
can like Port this uh to rust uh or
other languages and um use it inside RPC
other languages and um use it inside RPC
other languages and um use it inside RPC
inside uh other applications uh instead
inside uh other applications uh instead
inside uh other applications uh instead
of uh adding the data we can like uh do
of uh adding the data we can like uh do
of uh adding the data we can like uh do
it uh on the fly in RPC itself right uh
it uh on the fly in RPC itself right uh
it uh on the fly in RPC itself right uh
regenerate this events uh because
regenerate this events uh because
regenerate this events uh because
basically all described events that what
basically all described events that what
basically all described events that what
we do with
we do with
we do with
[Music]
[Music]
[Music]
u with the transaction
u with the transaction
u with the transaction
M xdr uh that's something we already
M xdr uh that's something we already
M xdr uh that's something we already
do so maybe it's just uh one of the
do so maybe it's just uh one of the
do so maybe it's just uh one of the
options uh instead of extending uh
options uh instead of extending uh
options uh instead of extending uh
the xdr itself
the xdr itself
the xdr itself
again because uh to me it looks already
again because uh to me it looks already
again because uh to me it looks already
pretty
pretty
pretty
large my subjective opinion on
this but again if you could opt out of
this but again if you could opt out of
imian events would that solve your issue
imian events would that solve your issue
imian events would that solve your issue
with the size because it's I think
with the size because it's I think
with the size because it's I think
besides the size concern I feel like the
besides the size concern I feel like the
besides the size concern I feel like the
suggestion of let's put Comm
suggestion of let's put Comm
suggestion of let's put Comm
implementation somewhere we just
implementation somewhere we just
implementation somewhere we just
suggesting well why don't we put this
suggesting well why don't we put this
suggesting well why don't we put this
common implementation right into ore I
common implementation right into ore I
common implementation right into ore I
don't think it makes a huge ideological
don't think it makes a huge ideological
don't think it makes a huge ideological
difference and I think it does make
difference and I think it does make
difference and I think it does make
something easier to maintain and to
something easier to maintain and to
something easier to maintain and to
ensure that they works correctly for b
ensure that they works correctly for b
ensure that they works correctly for b
um yeah especially if we are doing
um yeah especially if we are doing
um yeah especially if we are doing
protocal changes um so yeah and just for
protocal changes um so yeah and just for
protocal changes um so yeah and just for
the say I totally agree and
the say I totally agree and
the say I totally agree and
yeah so I don't know if you have any
yeah so I don't know if you have any
yeah so I don't know if you have any
strong arguments but I feel like you're
strong arguments but I feel like you're
strong arguments but I feel like you're
more or less in the same page here in
more or less in the same page here in
more or less in the same page here in
terms of standardization because it I
terms of standardization because it I
terms of standardization because it I
guess just in of putting it into cor
guess just in of putting it into cor
guess just in of putting it into cor
kind of make
sense yeah the standardization it sits
sense yeah the standardization it sits
inside The Narrative of everything being
inside The Narrative of everything being
inside The Narrative of everything being
a contract so I think like that's what's
a contract so I think like that's what's
a contract so I think like that's what's
beautiful about this is that um you know
beautiful about this is that um you know
beautiful about this is that um you know
today we have you know classic
today we have you know classic
today we have you know classic
operations and then we have everything
operations and then we have everything
operations and then we have everything
that happens on sorban um and the result
that happens on sorban um and the result
that happens on sorban um and the result
of those things looks pretty different
of those things looks pretty different
of those things looks pretty different
but as a result of this work we're
but as a result of this work we're
but as a result of this work we're
moving towards this future where
moving towards this future where
moving towards this future where
actually everything that just happens on
actually everything that just happens on
actually everything that just happens on
classic looks exactly like a contract
classic looks exactly like a contract
classic looks exactly like a contract
that's executing and you know all assets
that's executing and you know all assets
that's executing and you know all assets
actually do have a contract that's
actually do have a contract that's
actually do have a contract that's
reserved for them they have the Stellar
reserved for them they have the Stellar
reserved for them they have the Stellar
asset
asset
asset
contract and so the events are just
contract and so the events are just
contract and so the events are just
going to look like everything that
going to look like everything that
going to look like everything that
happens with assets no matter if it's
happens with assets no matter if it's
happens with assets no matter if it's
classic or anything like that it just
classic or anything like that it just
classic or anything like that it just
looks like a contract um which is also
looks like a contract um which is also
looks like a contract um which is also
much more similar to other ecosystems uh
much more similar to other ecosystems uh
much more similar to other ecosystems uh
other like blockchain ecosystems as well
other like blockchain ecosystems as well
other like blockchain ecosystems as well
so um there's that familiarity for
so um there's that familiarity for
so um there's that familiarity for
everybody about how this works versus
everybody about how this works versus
everybody about how this works versus
say ethereum and other
things yeah and I I I'll make sure to
things yeah and I I I'll make sure to
clarify in the uh the cap that nothing's
clarify in the uh the cap that nothing's
clarify in the uh the cap that nothing's
being removed from meta and this will be
being removed from meta and this will be
being removed from meta and this will be
optional that's a good point
optional that's a good point
optional that's a good point
I mentioned the config flag for
I mentioned the config flag for
I mentioned the config flag for
transaction met V4 but I I'll go into
transaction met V4 but I I'll go into
transaction met V4 but I I'll go into
that in a little more detail um are
that in a little more detail um are
that in a little more detail um are
there any other
questions I didn't quite catch if we
questions I didn't quite catch if we
have made any final decision on
MOS uh like what we talked about like 10
MOS uh like what we talked about like 10
minutes ago
wa wait what is the final stages because
wa wait what is the final stages because
I maybe I've lost it yeah so we're for
I maybe I've lost it yeah so we're for
I maybe I've lost it yeah so we're for
in the context of this cap we are the
in the context of this cap we are the
in the context of this cap we are the
we're forwarding the M account
we're forwarding the M account
we're forwarding the M account
information right into the the addresses
information right into the the addresses
information right into the the addresses
but for memos we still need to explore
but for memos we still need to explore
but for memos we still need to explore
uh what Nico mentioned earlier like so
uh what Nico mentioned earlier like so
uh what Nico mentioned earlier like so
there's nothing finalized there but we
there's nothing finalized there but we
there's nothing finalized there but we
but we are going to go look into that
but we are going to go look into that
but we are going to go look into that
right soal decision okay I was just kind
right soal decision okay I was just kind
right soal decision okay I was just kind
of missed it okay yeah
no yeah I'm not I'm not sure if we want
no yeah I'm not I'm not sure if we want
to discuss that more because it's not
to discuss that more because it's not
to discuss that more because it's not
actually nobody's actually written like
actually nobody's actually written like
actually nobody's actually written like
a a formal this is how we're how we
a a formal this is how we're how we
a a formal this is how we're how we
would propose an alternative for it to
would propose an alternative for it to
would propose an alternative for it to
work I mean I could say something right
work I mean I could say something right
work I mean I could say something right
now that I
now that I
now that I
think uh I think aligns with what niik
think uh I think aligns with what niik
think uh I think aligns with what niik
was talking about but I don't know if
was talking about but I don't know if
was talking about but I don't know if
I I think it'd be valuable if we
I I think it'd be valuable if we
I I think it'd be valuable if we
actually uh get something written down
actually uh get something written down
actually uh get something written down
then present it in the future meeting
then present it in the future meeting
then present it in the future meeting
because I know we uh we have 30 minutes
because I know we uh we have 30 minutes
because I know we uh we have 30 minutes
left and dimma has a couple caps to
left and dimma has a couple caps to
left and dimma has a couple caps to
present that's probably more valuable
present that's probably more valuable
present that's probably more valuable
right
great all right um go ahead okay yeah
great all right um go ahead okay yeah
great uh yeah I don't actually mind
great uh yeah I don't actually mind
great uh yeah I don't actually mind
spending more time on the events if
spending more time on the events if
spending more time on the events if
necessary but uh if you're done uh we
necessary but uh if you're done uh we
necessary but uh if you're done uh we
can go
can go
can go
to
to
to
app uh
uh that's six hisory um
uh that's six hisory um
so this is basically a cap that uh
so this is basically a cap that uh
so this is basically a cap that uh
mostly changes the transaction set um
mostly changes the transaction set um
mostly changes the transaction set um
but it does so in a pretty interesting
but it does so in a pretty interesting
but it does so in a pretty interesting
way um so as you may or may not know uh
way um so as you may or may not know uh
way um so as you may or may not know uh
Al a hustle you need to go through with
Al a hustle you need to go through with
Al a hustle you need to go through with
a Footprints uh inur transaction is done
a Footprints uh inur transaction is done
a Footprints uh inur transaction is done
for a good reason and this reason is uh
for a good reason and this reason is uh
for a good reason and this reason is uh
being able to run the transactions in
being able to run the transactions in
being able to run the transactions in
parallel because if you know your
parallel because if you know your
parallel because if you know your
footprint we know that you don't have a
footprint we know that you don't have a
footprint we know that you don't have a
data dependency between two
data dependency between two
data dependency between two
transactions and you actually can run
transactions and you actually can run
transactions and you actually can run
them in parallel without worrying about
them in parallel without worrying about
them in parallel without worrying about
any
any
any
synchronization um so given the
synchronization um so given the
synchronization um so given the
footprints in theory today what you
footprints in theory today what you
footprints in theory today what you
could do is you could right your own
could do is you could right your own
could do is you could right your own
version of core uh application logic
version of core uh application logic
version of core uh application logic
that takes the transactions and
that takes the transactions and
that takes the transactions and
partitions them somehow into threads
partitions them somehow into threads
partitions them somehow into threads
that R par from each other um but the
that R par from each other um but the
that R par from each other um but the
issue with that is that uh there is no
issue with that is that uh there is no
issue with that is that uh there is no
good boundary on how much time is it
good boundary on how much time is it
good boundary on how much time is it
supposed to take for example if you take
supposed to take for example if you take
supposed to take for example if you take
10 transactions without data
10 transactions without data
10 transactions without data
dependencies you could run them in 10
dependencies you could run them in 10
dependencies you could run them in 10
shads and they would for example take 10
shads and they would for example take 10
shads and they would for example take 10
milliseconds um after synchronization or
milliseconds um after synchronization or
milliseconds um after synchronization or
you could have the same 10 transactions
you could have the same 10 transactions
you could have the same 10 transactions
but all of them dependent on some W your
but all of them dependent on some W your
but all of them dependent on some W your
entries are being updated and thus you
entries are being updated and thus you
entries are being updated and thus you
cannot schedule them into 10 different
cannot schedule them into 10 different
cannot schedule them into 10 different
threads you would run them in the single
threads you would run them in the single
threads you would run them in the single
thread fres and in the end you will
thread fres and in the end you will
thread fres and in the end you will
spend not 10 milliseconds but 100
spend not 10 milliseconds but 100
spend not 10 milliseconds but 100
milliseconds to apply all
milliseconds to apply all
milliseconds to apply all
transactions um so basically there is
transactions um so basically there is
transactions um so basically there is
since protocol doesn't do anything
since protocol doesn't do anything
since protocol doesn't do anything
currently about
currently about
currently about
pration um there is no good way to
pration um there is no good way to
pration um there is no good way to
schedule the transactions in such a way
schedule the transactions in such a way
schedule the transactions in such a way
that it takes uh some bounded and
that it takes uh some bounded and
that it takes uh some bounded and
expected well well there is still an
expected well well there is still an
expected well well there is still an
upper bound on the runtime but this
upper bound on the runtime but this
upper bound on the runtime but this
upper bound rise wildly and um it's not
upper bound rise wildly and um it's not
upper bound rise wildly and um it's not
good if Ledger May close both within 100
good if Ledger May close both within 100
good if Ledger May close both within 100
Mills or within like two seconds for
Mills or within like two seconds for
Mills or within like two seconds for
example uh which is why um we are doing
example uh which is why um we are doing
example uh which is why um we are doing
this cap fix3 which solves exactly that
this cap fix3 which solves exactly that
this cap fix3 which solves exactly that
problem which is uh given um a set of
problem which is uh given um a set of
problem which is uh given um a set of
transactions come up with a transaction
transactions come up with a transaction
transactions come up with a transaction
set data structure um that guarantees uh
set data structure um that guarantees uh
set data structure um that guarantees uh
certain time for appliances
certain time for appliances
certain time for appliances
transactions um is a c of course of that
transactions um is a c of course of that
transactions um is a c of course of that
time being time in model constructions
time being time in model constructions
time being time in model constructions
and not of course well time CL time
and not of course well time CL time
and not of course well time CL time
because we um kind of cannot tell it
because we um kind of cannot tell it
because we um kind of cannot tell it
beforehand without tring the contracts
beforehand without tring the contracts
beforehand without tring the contracts
but we hope that our cost models are
but we hope that our cost models are
but we hope that our cost models are
good enough and another cave being that
good enough and another cave being that
good enough and another cave being that
uh you actually should have the fish is
uh you actually should have the fish is
uh you actually should have the fish is
sufficient amount of physical course to
sufficient amount of physical course to
sufficient amount of physical course to
support multi stading because well again
support multi stading because well again
support multi stading because well again
if you have just one core obviously it
if you have just one core obviously it
if you have just one core obviously it
doesn't matter if you run 10 shreds um
doesn't matter if you run 10 shreds um
doesn't matter if you run 10 shreds um
there some
here um so uh if you have just a single
here um so uh if you have just a single
core and you wanted to apply
core and you wanted to apply
core and you wanted to apply
transactions in 10 threats obviously
transactions in 10 threats obviously
transactions in 10 threats obviously
you'll not get any performance gain
you'll not get any performance gain
you'll not get any performance gain
because well transactions are purely CPU
because well transactions are purely CPU
because well transactions are purely CPU
bound
bound
bound
um so that's the motivation uh for this
um so that's the motivation uh for this
um so that's the motivation uh for this
cap and the way it
cap and the way it
cap and the way it
works is uh that we Define a new
works is uh that we Define a new
works is uh that we Define a new
structure for the transaction set that
structure for the transaction set that
structure for the transaction set that
instead of having a linear array of
instead of having a linear array of
instead of having a linear array of
transactions um defines uh two levels of
transactions um defines uh two levels of
transactions um defines uh two levels of
group transactions together and the
group transactions together and the
group transactions together and the
first level is called
first level is called
first level is called
stages um and I will talk about why
stages um and I will talk about why
stages um and I will talk about why
stages and what does it need for any
stages and what does it need for any
stages and what does it need for any
moment and then every stage uh consists
moment and then every stage uh consists
moment and then every stage uh consists
of multiple clusters of transactions and
of multiple clusters of transactions and
of multiple clusters of transactions and
within the cluster transactions
within the cluster transactions
within the cluster transactions
generally may have data dependencies so
generally may have data dependencies so
generally may have data dependencies so
it is expect Ed in this cluster to have
it is expect Ed in this cluster to have
it is expect Ed in this cluster to have
data dependent transactions that need to
data dependent transactions that need to
data dependent transactions that need to
run
run
run
sequentially however there are no uh
sequentially however there are no uh
sequentially however there are no uh
data dependencies between the Clusters
data dependencies between the Clusters
data dependencies between the Clusters
themselves um and thus since every
themselves um and thus since every
themselves um and thus since every
cluster is guaranteed to be um
cluster is guaranteed to be um
cluster is guaranteed to be um
independent of every as cluster what you
independent of every as cluster what you
independent of every as cluster what you
could do is you could take every cluster
could do is you could take every cluster
could do is you could take every cluster
and put it into a separate physical
and put it into a separate physical
and put it into a separate physical
thread and uh thus you can apply the
thread and uh thus you can apply the
thread and uh thus you can apply the
whole stage uh in parall is as many
whole stage uh in parall is as many
whole stage uh in parall is as many
threats as you have
threats as you have
threats as you have
rers
rers
rers
um also I probably forgot to clarify
um also I probably forgot to clarify
um also I probably forgot to clarify
what we consider data dependency it is
what we consider data dependency it is
what we consider data dependency it is
when a single transaction has an entry
when a single transaction has an entry
when a single transaction has an entry
in a retrade footprint and then another
in a retrade footprint and then another
in a retrade footprint and then another
transaction has the same entry in either
transaction has the same entry in either
transaction has the same entry in either
readon or retrade footprint me that one
readon or retrade footprint me that one
readon or retrade footprint me that one
transaction modifies the entry another
transaction modifies the entry another
transaction modifies the entry another
transaction as read so modifies it in
transaction as read so modifies it in
transaction as read so modifies it in
either case we need to sequence them
either case we need to sequence them
either case we need to sequence them
because um if you don't do that then we
because um if you don't do that then we
because um if you don't do that then we
will get non deterministic results for
will get non deterministic results for
will get non deterministic results for
any these
any these
any these
transactions now
transactions now
transactions now
um why do we have this additional uh
um why do we have this additional uh
um why do we have this additional uh
level of uh transaction grouping in
level of uh transaction grouping in
level of uh transaction grouping in
stages um the reason is that um if uh we
stages um the reason is that um if uh we
stages um the reason is that um if uh we
just try to naively say hey let's just
just try to naively say hey let's just
just try to naively say hey let's just
par the put the transactions in separate
par the put the transactions in separate
par the put the transactions in separate
threads uh put them transaction set and
threads uh put them transaction set and
threads uh put them transaction set and
that's it then um you may run into some
that's it then um you may run into some
that's it then um you may run into some
issues with um C traffic patterns for
issues with um C traffic patterns for
issues with um C traffic patterns for
example
example
example
imagine uh an oracle contract for
imagine uh an oracle contract for
imagine uh an oracle contract for
example right and imagine it updates and
example right and imagine it updates and
example right and imagine it updates and
entry some key and then there are bunch
entry some key and then there are bunch
entry some key and then there are bunch
of transactions that want to read the
of transactions that want to read the
of transactions that want to read the
value from the contract from the ccal
value from the contract from the ccal
value from the contract from the ccal
contract and that key um and thus we
contract and that key um and thus we
contract and that key um and thus we
have uh data dependency on a single
have uh data dependency on a single
have uh data dependency on a single
entry um but we have only a single rate
entry um but we have only a single rate
entry um but we have only a single rate
of the entry but we have a lot of rats
of the entry but we have a lot of rats
of the entry but we have a lot of rats
of the exact same entry um so what we
of the exact same entry um so what we
of the exact same entry um so what we
can do with this stages is that you can
can do with this stages is that you can
can do with this stages is that you can
put right into one stage and then all
put right into one stage and then all
put right into one stage and then all
reads into different
reads into different
reads into different
stages
stages
stages
and basically this introduces just a few
and basically this introduces just a few
and basically this introduces just a few
barriers of execution into the
barriers of execution into the
barriers of execution into the
transaction execution schedule um but it
transaction execution schedule um but it
transaction execution schedule um but it
allows kind of efficiently work around
allows kind of efficiently work around
allows kind of efficiently work around
this traffic patterns and um um given
this traffic patterns and um um given
this traffic patterns and um um given
smart enough maybe not even smart enough
smart enough maybe not even smart enough
smart enough maybe not even smart enough
uh algra for actually coming up with
uh algra for actually coming up with
uh algra for actually coming up with
this data structure uh you can deal with
this data structure uh you can deal with
this data structure uh you can deal with
a surprising amount of conflicts all at
a surprising amount of conflicts all at
a surprising amount of conflicts all at
once without introducing any special uh
once without introducing any special uh
once without introducing any special uh
scheduling and synchronization procedure
scheduling and synchronization procedure
scheduling and synchronization procedure
so basically just have a few barriers um
so basically just have a few barriers um
so basically just have a few barriers um
in between the transaction applications
in between the transaction applications
in between the transaction applications
and this allows resolving a lot of the
and this allows resolving a lot of the
and this allows resolving a lot of the
conflicts at the same time um before
conflicts at the same time um before
conflicts at the same time um before
driving deeper I go read that for a
driving deeper I go read that for a
driving deeper I go read that for a
moment and there any questions far
um uh okay uh the new adjust approach
um uh okay uh the new adjust approach
okay so this uh app itself just changes
okay so this uh app itself just changes
okay so this uh app itself just changes
the structure of the transaction sets it
the structure of the transaction sets it
the structure of the transaction sets it
doesn't have any particular changes
doesn't have any particular changes
doesn't have any particular changes
around how we uh which transactions do
around how we uh which transactions do
around how we uh which transactions do
we pick at
we pick at
we pick at
all but uh what I can say that the
all but uh what I can say that the
all but uh what I can say that the
protocol specification remains such that
protocol specification remains such that
protocol specification remains such that
uh that transaction ification order is
uh that transaction ification order is
uh that transaction ification order is
randomized and I think in case of uh M
randomized and I think in case of uh M
randomized and I think in case of uh M
manipulations um nothing changes from
manipulations um nothing changes from
manipulations um nothing changes from
the current approach because uh for any
the current approach because uh for any
the current approach because uh for any
Arbitrage you're probably going to have
Arbitrage you're probably going to have
Arbitrage you're probably going to have
the data dependency and data dependent
the data dependency and data dependent
the data dependency and data dependent
transactions are applied sequentially
transactions are applied sequentially
transactions are applied sequentially
and uh all we shuffle all the stuff that
and uh all we shuffle all the stuff that
and uh all we shuffle all the stuff that
is being applied sequentially so the
is being applied sequentially so the
is being applied sequentially so the
transaction order is still uh for to
transaction order is still uh for to
transaction order is still uh for to
predict and uh yeah I don't think it's
predict and uh yeah I don't think it's
predict and uh yeah I don't think it's
any easier to manipulate than it is
any easier to manipulate than it is
any easier to manipulate than it is
currently which is to say it's not
currently which is to say it's not
currently which is to say it's not
impossible but just spaming Ledger is a
impossible but just spaming Ledger is a
impossible but just spaming Ledger is a
arbitr transaction for
arbitr transaction for
arbitr transaction for
example
example
example
[Music]
um yeah uh in terms of the system
um yeah uh in terms of the system
requirements again the cup doesn't
requirements again the cup doesn't
requirements again the cup doesn't
Define them uh I will will talk about
Define them uh I will will talk about
Define them uh I will will talk about
this in a moment uh but uh of course yes
this in a moment uh but uh of course yes
this in a moment uh but uh of course yes
if we want to run transactions in
if we want to run transactions in
if we want to run transactions in
parallel then well you need to have uh
parallel then well you need to have uh
parallel then well you need to have uh
certain number of course present uh on
certain number of course present uh on
certain number of course present uh on
the validator which is I guess a
the validator which is I guess a
the validator which is I guess a
tradeoff with the um like that's
tradeoff with the um like that's
tradeoff with the um like that's
horizontal scaling the notot use better
horizontal scaling the notot use better
horizontal scaling the notot use better
Hardware as then cannot find more
Hardware as then cannot find more
Hardware as then cannot find more
transaction
um uh M resarch maybe maybe I think I
um uh M resarch maybe maybe I think I
already have the section on shoing the
already have the section on shoing the
already have the section on shoing the
transactions so may be efficient maybe
transactions so may be efficient maybe
transactions so may be efficient maybe
not um
yeah uh okay I see question regarding Z
yeah uh okay I see question regarding Z
and uh let me actually go a bit deeper
and uh let me actually go a bit deeper
and uh let me actually go a bit deeper
regarding how exactly things are
regarding how exactly things are
regarding how exactly things are
specified first thing is that uh
specified first thing is that uh
specified first thing is that uh
Moro uh does introduce a new network
Moro uh does introduce a new network
Moro uh does introduce a new network
configuration setting for the maximum
configuration setting for the maximum
configuration setting for the maximum
number of f per stage which roughly well
number of f per stage which roughly well
number of f per stage which roughly well
not roughly but basically maps to the
not roughly but basically maps to the
not roughly but basically maps to the
EXP Ed number of course uh uh that your
EXP Ed number of course uh uh that your
EXP Ed number of course uh uh that your
that the network is willing to throw it
that the network is willing to throw it
that the network is willing to throw it
when ledgers if you have less course
when ledgers if you have less course
when ledgers if you have less course
then uh it may take for you longer uh
then uh it may take for you longer uh
then uh it may take for you longer uh
than expected to pric transactions you
than expected to pric transactions you
than expected to pric transactions you
have more cores uh or at least that many
have more cores uh or at least that many
have more cores uh or at least that many
you should be good and uh as all the
you should be good and uh as all the
you should be good and uh as all the
network configuration settings uh this
network configuration settings uh this
network configuration settings uh this
setting uh will be uh Modified by
setting uh will be uh Modified by
setting uh will be uh Modified by
validator vot so you know some
validator vot so you know some
validator vot so you know some
validators say that we don't have that
validators say that we don't have that
validators say that we don't have that
many cores um they will not vote for
many cores um they will not vote for
many cores um they will not vote for
this and uh ultimately Network can
this and uh ultimately Network can
this and uh ultimately Network can
decide if requirements for to rers are
decide if requirements for to rers are
decide if requirements for to rers are
too expensive or uh too hard to come
too expensive or uh too hard to come
too expensive or uh too hard to come
this come up this and uh also to make it
this come up this and uh also to make it
this come up this and uh also to make it
clear when we upgrade to protocal 23
clear when we upgrade to protocal 23
clear when we upgrade to protocal 23
this setting will be set to just one so
this setting will be set to just one so
this setting will be set to just one so
um any parallelism allowed as network
um any parallelism allowed as network
um any parallelism allowed as network
settings so you know that to enable any
settings so you know that to enable any
settings so you know that to enable any
parallelism uh Network quote to
happen Okay um
happen Okay um
[Music]
[Music]
[Music]
then to the structure okay I already
then to the structure okay I already
then to the structure okay I already
talked through the specification of the
talked through the specification of the
talked through the specification of the
uh data structure
uh data structure
uh data structure
um
um
um
the phas fee and search pricing will
the phas fee and search pricing will
the phas fee and search pricing will
work in the same way as it works now
work in the same way as it works now
work in the same way as it works now
which is there will be a single base fee
which is there will be a single base fee
which is there will be a single base fee
for the
for the
for the
transactions it is 100 Stoops uh if
transactions it is 100 Stoops uh if
transactions it is 100 Stoops uh if
there is no search price in and if there
there is no search price in and if there
there is no search price in and if there
is SAR pricing which means like if there
is SAR pricing which means like if there
is SAR pricing which means like if there
were transactions that you couldn't
were transactions that you couldn't
were transactions that you couldn't
include in The Ledger but this that were
include in The Ledger but this that were
include in The Ledger but this that were
in the mle uh we take the fee of the
in the mle uh we take the fee of the
in the mle uh we take the fee of the
cheapest transaction that we do include
cheapest transaction that we do include
cheapest transaction that we do include
and use it as a base fees that everyone
and use it as a base fees that everyone
and use it as a base fees that everyone
has to
has to
has to
pay
um okay and now again to the apply order
um okay and now again to the apply order
um first uh there is still a canonical
um first uh there is still a canonical
um first uh there is still a canonical
apply order uh that is defined in cap so
apply order uh that is defined in cap so
apply order uh that is defined in cap so
you still can apply all the transactions
you still can apply all the transactions
you still can apply all the transactions
sequentially and arrive at the same
sequentially and arrive at the same
sequentially and arrive at the same
result as you would if you were uh if
result as you would if you were uh if
result as you would if you were uh if
you applying them in
you applying them in
you applying them in
parallel and uh similar to what we do
parallel and uh similar to what we do
parallel and uh similar to what we do
now uh we Shuffle the things before
now uh we Shuffle the things before
now uh we Shuffle the things before
applying them um first we Shuffle every
applying them um first we Shuffle every
applying them um first we Shuffle every
cluster um using the hash of the
cluster um using the hash of the
cluster um using the hash of the
transaction set and hash of every
transaction set and hash of every
transaction set and hash of every
transaction then the uh for the Clusters
transaction then the uh for the Clusters
transaction then the uh for the Clusters
we don't need to shuffle them but
we don't need to shuffle them but
we don't need to shuffle them but
by the transaction
by the transaction
by the transaction
hashes and then we Shuffle the stages as
hashes and then we Shuffle the stages as
hashes and then we Shuffle the stages as
well so yeah like so transactions are um
well so yeah like so transactions are um
well so yeah like so transactions are um
in different stages um one may happen
in different stages um one may happen
in different stages um one may happen
before or after another
before or after another
before or after another
one
one
one
um that's kind of what to do for Shing
um that's kind of what to do for Shing
um that's kind of what to do for Shing
and I think it's not significantly
and I think it's not significantly
and I think it's not significantly
different from our St
um yeah I don't think uh it does
um yeah I don't think uh it does
anything specific
anything specific
anything specific
to again it doesn't changes status quo
to again it doesn't changes status quo
to again it doesn't changes status quo
for M um on the large scale like I think
for M um on the large scale like I think
for M um on the large scale like I think
the best thing you can do is still just
the best thing you can do is still just
the best thing you can do is still just
Spam the network is heritor transactions
Spam the network is heritor transactions
Spam the network is heritor transactions
it is the issue we have now and uh it
it is the issue we have now and uh it
it is the issue we have now and uh it
persists like the goal of this cap is
persists like the goal of this cap is
persists like the goal of this cap is
not to prevent uh these types of attacks
not to prevent uh these types of attacks
not to prevent uh these types of attacks
uh but it does not make it any easier to
uh but it does not make it any easier to
uh but it does not make it any easier to
guarantee any particular execution order
guarantee any particular execution order
guarantee any particular execution order
between two
between two
between two
transactions um so yeah I don't see like
transactions um so yeah I don't see like
transactions um so yeah I don't see like
if you see something specific like maybe
if you see something specific like maybe
if you see something specific like maybe
uh
uh
uh
you know maybe we can up Asing later uh
you know maybe we can up Asing later uh
you know maybe we can up Asing later uh
but I yeah I don't think there is any
but I yeah I don't think there is any
but I yeah I don't think there is any
change to to the execution orders that
change to to the execution orders that
change to to the execution orders that
is relevant
is relevant
is relevant
for
for
for
um right um okay so that's a kind of
um right um okay so that's a kind of
um right um okay so that's a kind of
simpler part of the cap so again um
simpler part of the cap so again um
simpler part of the cap so again um
multiple threads to apply transactions
multiple threads to apply transactions
multiple threads to apply transactions
in parallel oh uh the most important
in parallel oh uh the most important
in parallel oh uh the most important
thing that I forgot to mention is that
thing that I forgot to mention is that
thing that I forgot to mention is that
we limit the number of sequential
we limit the number of sequential
we limit the number of sequential
instructions across all the stages which
instructions across all the stages which
instructions across all the stages which
means that for every stage we look at
means that for every stage we look at
means that for every stage we look at
the cluster that takes the longest time
the cluster that takes the longest time
the cluster that takes the longest time
in terms of model instructions and then
in terms of model instructions and then
in terms of model instructions and then
we sum up this numbers across all the
we sum up this numbers across all the
we sum up this numbers across all the
stages and then we come up with some
stages and then we come up with some
stages and then we come up with some
number of sequential modeled
number of sequential modeled
number of sequential modeled
instructions which are hopefully
instructions which are hopefully
instructions which are hopefully
approximating the real runtime for
approximating the real runtime for
approximating the real runtime for
applian the transaction set given and
applian the transaction set given and
applian the transaction set given and
physical threats for example um if the
physical threats for example um if the
physical threats for example um if the
Ledger limit currently is 500 milon
Ledger limit currently is 500 milon
Ledger limit currently is 500 milon
instructions um with uh this cap for
instructions um with uh this cap for
instructions um with uh this cap for
example if you set Ledger Max dependent
example if you set Ledger Max dependent
example if you set Ledger Max dependent
TX clusters to for example eight meaning
TX clusters to for example eight meaning
TX clusters to for example eight meaning
you need eight physical threads and we
you need eight physical threads and we
you need eight physical threads and we
keep the limited 500 million
keep the limited 500 million
keep the limited 500 million
instructions we expect the weder
instructions we expect the weder
instructions we expect the weder
application time be roughly a factor of
application time be roughly a factor of
application time be roughly a factor of
500 million virtual instructions which
500 million virtual instructions which
500 million virtual instructions which
we still on to few hundred milliseconds
we still on to few hundred milliseconds
we still on to few hundred milliseconds
currently um our cost
currently um our cost
currently um our cost
models
models
models
um yeah so that's kind of the simpler
um yeah so that's kind of the simpler
um yeah so that's kind of the simpler
part of the cap um the trickiest thing
part of the cap um the trickiest thing
part of the cap um the trickiest thing
is the GTL update semantic change
is the GTL update semantic change
is the GTL update semantic change
um so all this data dependency stuff is
um so all this data dependency stuff is
um so all this data dependency stuff is
very good and nice but um one thing that
very good and nice but um one thing that
very good and nice but um one thing that
we again consciously did uh when La in
we again consciously did uh when La in
we again consciously did uh when La in
San is um we allow extending the dtl of
San is um we allow extending the dtl of
San is um we allow extending the dtl of
the entries uh even if the entries are
the entries uh even if the entries are
the entries uh even if the entries are
in read only footprint and the reason
in read only footprint and the reason
in read only footprint and the reason
for that is that well we expect TTL
for that is that well we expect TTL
for that is that well we expect TTL
updates to be really
updates to be really
updates to be really
prevalent and uh if we treated them as
prevalent and uh if we treated them as
prevalent and uh if we treated them as
rights uh there is a big chance we
rights uh there is a big chance we
rights uh there is a big chance we
wouldn't be able to AR anything at all
wouldn't be able to AR anything at all
wouldn't be able to AR anything at all
because things would be just just uh
because things would be just just uh
because things would be just just uh
Clump together with all this clusters of
Clump together with all this clusters of
Clump together with all this clusters of
for us contract that happen to update
for us contract that happen to update
for us contract that happen to update
totl on the same
totl on the same
totl on the same
entes um which is why we decided that we
entes um which is why we decided that we
entes um which is why we decided that we
actually can um reconcile the r changes
actually can um reconcile the r changes
actually can um reconcile the r changes
um after running all the transactions
um after running all the transactions
um after running all the transactions
without risking um introducing any
without risking um introducing any
without risking um introducing any
nondeterminism and this TTL updates
nondeterminism and this TTL updates
nondeterminism and this TTL updates
someand exchange is uh doing exactly
someand exchange is uh doing exactly
someand exchange is uh doing exactly
that uh uh changes how we update ttls in
that uh uh changes how we update ttls in
that uh uh changes how we update ttls in
such a way that uh changes to TTL uh
such a way that uh changes to TTL uh
such a way that uh changes to TTL uh
done by transactions that only touch the
done by transactions that only touch the
done by transactions that only touch the
readon entries uh are not observable
readon entries uh are not observable
readon entries uh are not observable
until uh someone actually writes the
until uh someone actually writes the
until uh someone actually writes the
entry or until we have finished applying
entry or until we have finished applying
entry or until we have finished applying
all the
all the
all the
transactions um which is good enough to
transactions um which is good enough to
transactions um which is good enough to
be able to actually run all the
be able to actually run all the
be able to actually run all the
transactions that have the same ke only
transactions that have the same ke only
transactions that have the same ke only
the run them in parallel and still right
the run them in parallel and still right
the run them in parallel and still right
have the proper TTL
have the proper TTL
have the proper TTL
value and the algorithm proposed is uh
value and the algorithm proposed is uh
value and the algorithm proposed is uh
pretty leny but the gist of it is that
pretty leny but the gist of it is that
pretty leny but the gist of it is that
um if uh two transactions uh update to
um if uh two transactions uh update to
um if uh two transactions uh update to
TL on the same
TL on the same
TL on the same
entry um they both will see the initial
entry um they both will see the initial
entry um they both will see the initial
state of the TTL of the
state of the TTL of the
state of the TTL of the
tantry and uh will be charged the
tantry and uh will be charged the
tantry and uh will be charged the
respective fee for set so for example if
respective fee for set so for example if
respective fee for set so for example if
transaction a has a key in with only
transaction a has a key in with only
transaction a has a key in with only
footprint and updates TL of some say xlm
footprint and updates TL of some say xlm
footprint and updates TL of some say xlm
contract rate uh by 200 ledgers
contract rate uh by 200 ledgers
contract rate uh by 200 ledgers
increases TTL by 200 ledgers and then
increases TTL by 200 ledgers and then
increases TTL by 200 ledgers and then
transaction B increases TTL of exm
transaction B increases TTL of exm
transaction B increases TTL of exm
contract by 100 ledgers uh well the
contract by 100 ledgers uh well the
contract by 100 ledgers uh well the
transaction a will pay for extension by
transaction a will pay for extension by
transaction a will pay for extension by
200 ledgers and transaction B will pay
200 ledgers and transaction B will pay
200 ledgers and transaction B will pay
for the D extension by 100 Ledges but
for the D extension by 100 Ledges but
for the D extension by 100 Ledges but
what we will do in background is we will
what we will do in background is we will
what we will do in background is we will
correct this TTL changes and only apply
correct this TTL changes and only apply
correct this TTL changes and only apply
the maximum change out of that to the
the maximum change out of that to the
the maximum change out of that to the
ler out of this two to the ler which
ler out of this two to the ler which
ler out of this two to the ler which
means that the uh exm contract will be
means that the uh exm contract will be
means that the uh exm contract will be
in the end extended by 200
in the end extended by 200
in the end extended by 200
lers and it does introduce uh bit of
lers and it does introduce uh bit of
lers and it does introduce uh bit of
annoyance into how uh mattera should be
annoyance into how uh mattera should be
annoyance into how uh mattera should be
processed which is unfortunate but um I
processed which is unfortunate but um I
processed which is unfortunate but um I
couldn't think of a way that is both
couldn't think of a way that is both
couldn't think of a way that is both
compatible with prism and doesn't
compatible with prism and doesn't
compatible with prism and doesn't
require any changes in met ingestion and
require any changes in met ingestion and
require any changes in met ingestion and
uh this change is
uh this change is
uh this change is
that uh basically when ingesting the
that uh basically when ingesting the
that uh basically when ingesting the
changes in TLS from the mattera you
changes in TLS from the mattera you
changes in TLS from the mattera you
should never decrease TT
should never decrease TT
should never decrease TT
um this is only thing you need to do um
um this is only thing you need to do um
um this is only thing you need to do um
it is documented in the cap and you'll
it is documented in the cap and you'll
it is documented in the cap and you'll
probably make another announcement um
probably make another announcement um
probably make another announcement um
but uh yeah we kind of get around doing
but uh yeah we kind of get around doing
but uh yeah we kind of get around doing
something special for the map and this
something special for the map and this
something special for the map and this
seems like the minimum possible change
seems like the minimum possible change
seems like the minimum possible change
so TTL like that you record in the back
so TTL like that you record in the back
so TTL like that you record in the back
end and never go down but the TTL That
end and never go down but the TTL That
end and never go down but the TTL That
You observe in the
You observe in the
You observe in the
is correct DET change for the mattera is
is correct DET change for the mattera is
is correct DET change for the mattera is
correct in the context of a given
correct in the context of a given
correct in the context of a given
transaction meaning as I mentioned
transaction meaning as I mentioned
transaction meaning as I mentioned
before uh that will charge the fee um
before uh that will charge the fee um
before uh that will charge the fee um
based on the changes that you observe in
based on the changes that you observe in
based on the changes that you observe in
The
The
The
Meta
Meta
Meta
um and this is kind of the ju of it and
um and this is kind of the ju of it and
um and this is kind of the ju of it and
U right
U right
U right
uh yeah I can talk a little bit about
uh yeah I can talk a little bit about
uh yeah I can talk a little bit about
candid generation and then move on to
candid generation and then move on to
candid generation and then move on to
question um caps don't typically provide
question um caps don't typically provide
question um caps don't typically provide
a way of how to actually build a
a way of how to actually build a
a way of how to actually build a
transaction sets uh which makes sense it
transaction sets uh which makes sense it
transaction sets uh which makes sense it
doesn't need to be a part of the
doesn't need to be a part of the
doesn't need to be a part of the
protocol as long as it is valid it
protocol as long as it is valid it
protocol as long as it is valid it
doesn't matter how it has been built um
doesn't matter how it has been built um
doesn't matter how it has been built um
but will'll likely implement the simple
but will'll likely implement the simple
but will'll likely implement the simple
gitty algorithm uh described in the cap
gitty algorithm uh described in the cap
gitty algorithm uh described in the cap
and the idea behind it is just to pack
and the idea behind it is just to pack
and the idea behind it is just to pack
the transactions into the stages
the transactions into the stages
the transactions into the stages
R um while uring uh we are utilizing the
R um while uring uh we are utilizing the
R um while uring uh we are utilizing the
stes uh properly by being packing from
stes uh properly by being packing from
stes uh properly by being packing from
time to time and the efficiency of being
time to time and the efficiency of being
time to time and the efficiency of being
packing heris sixs is surprisingly um
packing heris sixs is surprisingly um
packing heris sixs is surprisingly um
good so in the end I think we can I
good so in the end I think we can I
good so in the end I think we can I
added some benchmarks and uh we can both
added some benchmarks and uh we can both
added some benchmarks and uh we can both
P the leeders pretty efficiently like
P the leeders pretty efficiently like
P the leeders pretty efficiently like
uze most of the instructions and we can
uze most of the instructions and we can
uze most of the instructions and we can
also deal with a decent amount of
also deal with a decent amount of
also deal with a decent amount of
conflicts like if you have some
conflicts like if you have some
conflicts like if you have some
relatively sparse clusters of conflicts
relatively sparse clusters of conflicts
relatively sparse clusters of conflicts
uh that will not cause any depredation
uh that will not cause any depredation
uh that will not cause any depredation
in lure utilization at all and in order
in lure utilization at all and in order
in lure utilization at all and in order
to have any real degradation un need
to have any real degradation un need
to have any real degradation un need
like some super inter interdependent
like some super inter interdependent
like some super inter interdependent
transaction for which I don't expect to
transaction for which I don't expect to
transaction for which I don't expect to
be uh happening in the wild um so I
be uh happening in the wild um so I
be uh happening in the wild um so I
think this should be good enough at
think this should be good enough at
think this should be good enough at
least uh initially and uh if we ever
least uh initially and uh if we ever
least uh initially and uh if we ever
observe there are issues with that um
observe there are issues with that um
observe there are issues with that um
ways to deal with that both at the mle
ways to deal with that both at the mle
ways to deal with that both at the mle
level and the U wayer of building the
level and the U wayer of building the
level and the U wayer of building the
transaction sets
transaction sets
transaction sets
um I think that's all I wanted to talk
um I think that's all I wanted to talk
um I think that's all I wanted to talk
about just to present the cap and uh now
about just to present the cap and uh now
about just to present the cap and uh now
I will most through the chat and read
I will most through the chat and read
I will most through the chat and read
some questions
um yeah uh question from niik about the
um yeah uh question from niik about the
meta changes for
meta changes for
meta changes for
TTL
TTL
TTL
um M net diffs for
um M net diffs for
um M net diffs for
ttls not emit one per
ttls not emit one per
ttls not emit one per
transaction well um we still need to
transaction well um we still need to
transaction well um we still need to
emit TT per transaction I think because
emit TT per transaction I think because
emit TT per transaction I think because
they are an effect of the transaction
they are an effect of the transaction
they are an effect of the transaction
this is how we charge P um and I I'm not
this is how we charge P um and I I'm not
this is how we charge P um and I I'm not
sure it is correct to just omit
sure it is correct to just omit
sure it is correct to just omit
them and
them and
them and
[Music]
[Music]
[Music]
um whether we want to update meta I have
um whether we want to update meta I have
um whether we want to update meta I have
considered this I I'm not sure it is
considered this I I'm not sure it is
considered this I I'm not sure it is
necessarily a better solution so
necessarily a better solution so
necessarily a better solution so
basically the alternative to what is
basically the alternative to what is
basically the alternative to what is
proposed in this app is um well we could
proposed in this app is um well we could
proposed in this app is um well we could
add yet another field to the mattera
add yet another field to the mattera
add yet another field to the mattera
that will explicitly output the
that will explicitly output the
that will explicitly output the
TTL every entry facted by the wer the
TTL every entry facted by the wer the
TTL every entry facted by the wer the
final for it after applying every
final for it after applying every
final for it after applying every
transaction in The Ledger
transaction in The Ledger
transaction in The Ledger
[Music]
[Music]
[Music]
um I like that's potentially a
um I like that's potentially a
um I like that's potentially a
significant amount of duplication unless
significant amount of duplication unless
significant amount of duplication unless
we also kind of remove the changes for
we also kind of remove the changes for
we also kind of remove the changes for
transaction I'm not sure if it is a good
transaction I'm not sure if it is a good
transaction I'm not sure if it is a good
idea to remove the changes per
idea to remove the changes per
idea to remove the changes per
transaction because then well meta just
transaction because then well meta just
transaction because then well meta just
has some entries drop that transaction
has some entries drop that transaction
has some entries drop that transaction
has actually affected which makes tricky
has actually affected which makes tricky
has actually affected which makes tricky
to debu transactions for example makes
to debu transactions for example makes
to debu transactions for example makes
to understand your fees if you ever
to understand your fees if you ever
to understand your fees if you ever
wanted to run uh the computation logic
wanted to run uh the computation logic
wanted to run uh the computation logic
comp so I'm sure we can omit that Pro
comp so I'm sure we can omit that Pro
comp so I'm sure we can omit that Pro
transaction changes but then I'm not
transaction changes but then I'm not
transaction changes but then I'm not
sure if duplicating this data is
sure if duplicating this data is
sure if duplicating this data is
necessarily making things much easier to
necessarily making things much easier to
necessarily making things much easier to
just not decrease in TTL with your track
just not decrease in TTL with your track
just not decrease in TTL with your track
on
on
on
it
it
it
um so that's my opinion um
and I I mean you either need special
and I I mean you either need special
Logic for merges or you need special
Logic for merges or you need special
Logic for merges or you need special
Logic
Logic
Logic
for this new types of TT entries and you
for this new types of TT entries and you
for this new types of TT entries and you
also need to kind of sometimes ignore
also need to kind of sometimes ignore
also need to kind of sometimes ignore
that for transaction changes um I'm
that for transaction changes um I'm
that for transaction changes um I'm
honestly not convinced if it is a good
honestly not convinced if it is a good
honestly not convinced if it is a good
idea and if you wanted it possible to
idea and if you wanted it possible to
idea and if you wanted it possible to
only ingest the T changes after the LED
only ingest the T changes after the LED
only ingest the T changes after the LED
then so that you don't even need to
then so that you don't even need to
then so that you don't even need to
process per transaction changes at all
process per transaction changes at all
process per transaction changes at all
then basically we duplicate every TTL
then basically we duplicate every TTL
then basically we duplicate every TTL
change into which is again probably not
change into which is again probably not
change into which is again probably not
very Fe you don't know n if you want
very Fe you don't know n if you want
very Fe you don't know n if you want
to talk more about this
um okay I don't see any more questions
um okay I don't see any more questions
uh and we actually have just three
uh and we actually have just three
uh and we actually have just three
minutes left so um if anyone has any
minutes left so um if anyone has any
minutes left so um if anyone has any
questions uh please feel free to comment
questions uh please feel free to comment
questions uh please feel free to comment
on the ad discussions read it is uh yeah
on the ad discussions read it is uh yeah
on the ad discussions read it is uh yeah
I guess the to meta change is really the
I guess the to meta change is really the
I guess the to meta change is really the
most controversial thing about it
most controversial thing about it
most controversial thing about it
everything else
everything else
everything else
is really uncontroversial I feel because
is really uncontroversial I feel because
is really uncontroversial I feel because
though we are just allowing to include
though we are just allowing to include
though we are just allowing to include
more transactions in Ledger and we still
more transactions in Ledger and we still
more transactions in Ledger and we still
shuffle them so no changes for any um so
yeah yeah and one final thing I'll say
yeah yeah and one final thing I'll say
thanks thanks for presenting Dima uh
thanks thanks for presenting Dima uh
thanks thanks for presenting Dima uh
We we forgot to talk about back to the
We we forgot to talk about back to the
We we forgot to talk about back to the
unified events a one topic about how the
unified events a one topic about how the
unified events a one topic about how the
sa events have the asset name of the
sa events have the asset name of the
sa events have the asset name of the
topics but SE 41 doesn't specify uh
topics but SE 41 doesn't specify uh
topics but SE 41 doesn't specify uh
having putting the asset name in the
having putting the asset name in the
having putting the asset name in the
topic so uh lee is about to start a
topic so uh lee is about to start a
topic so uh lee is about to start a
thread about this so we can discuss it
thread about this so we can discuss it
thread about this so we can discuss it
there um yeah yeah Le just posted the uh
there um yeah yeah Le just posted the uh
there um yeah yeah Le just posted the uh
thread in the chat uh yeah that's all
thread in the chat uh yeah that's all
thread in the chat uh yeah that's all
that's all we have for today thank you
that's all we have for today thank you
that's all we have for today thank you
for joining
