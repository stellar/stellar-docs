hey everyone welcome to the open
hey everyone welcome to the open
protocol meeting sorry for the slightly
protocol meeting sorry for the slightly
protocol meeting sorry for the slightly
late start just a quick technical glitch
late start just a quick technical glitch
late start just a quick technical glitch
as per usual so the Stellar protocol
as per usual so the Stellar protocol
as per usual so the Stellar protocol
meeting in these meetings we discuss and
meeting in these meetings we discuss and
meeting in these meetings we discuss and
plan for
plan for
plan for
upcoming changes to the Stellar protocol
upcoming changes to the Stellar protocol
upcoming changes to the Stellar protocol
and today we're going to talk about
and today we're going to talk about
and today we're going to talk about
something very exciting project jump
something very exciting project jump
something very exciting project jump
cannon which is going to bring smart
cannon which is going to bring smart
cannon which is going to bring smart
contracts to Stellar so just quick
contracts to Stellar so just quick
contracts to Stellar so just quick
intro as most of you know Stellar was
intro as most of you know Stellar was
intro as most of you know Stellar was
launched in 2014.
launched in 2014.
launched in 2014.
at the time there was a very deliberate
at the time there was a very deliberate
at the time there was a very deliberate
design decision to keep things simple
design decision to keep things simple
design decision to keep things simple
right so only support a fixed repertoire
right so only support a fixed repertoire
right so only support a fixed repertoire
of transactions but at this point after
of transactions but at this point after
of transactions but at this point after
a ton of feedback from the ecosystem
a ton of feedback from the ecosystem
a ton of feedback from the ecosystem
it's clear there's a need for more
it's clear there's a need for more
it's clear there's a need for more
flexibility so developers they're
flexibility so developers they're
flexibility so developers they're
interested in building applications
interested in building applications
interested in building applications
they're relying on submitting custom
they're relying on submitting custom
they're relying on submitting custom
turing complete contra code right to run
turing complete contra code right to run
turing complete contra code right to run
in the transaction execution phase of
in the transaction execution phase of
in the transaction execution phase of
the network so essentially people want
the network so essentially people want
the network so essentially people want
smart contracts so in march we
smart contracts so in march we
smart contracts so in march we
officially kicked off project jump
officially kicked off project jump
officially kicked off project jump
cannon and there's a link to the
cannon and there's a link to the
cannon and there's a link to the
announcement in the meeting description
announcement in the meeting description
announcement in the meeting description
and after a very thorough examination of
and after a very thorough examination of
and after a very thorough examination of
the existing smart contract landscape
the existing smart contract landscape
the existing smart contract landscape
we made a decision to build it on a
we made a decision to build it on a
we made a decision to build it on a
webassembly run times wasm for short
webassembly run times wasm for short
webassembly run times wasm for short
so if you want to know more about the
so if you want to know more about the
so if you want to know more about the
selection process there's also a link to
selection process there's also a link to
selection process there's also a link to
a blog called
a blog called
a blog called
project jump canon choosing wasm
project jump canon choosing wasm
project jump canon choosing wasm
and that will sort of help walk through
and that will sort of help walk through
and that will sort of help walk through
that decision the evaluation that led us
that decision the evaluation that led us
that decision the evaluation that led us
to where we are today but today we're
to where we are today but today we're
to where we are today but today we're
actually going to start to get into the
actually going to start to get into the
actually going to start to get into the
protocol changes necessary to like
protocol changes necessary to like
protocol changes necessary to like
accommodate that decision so we're going
accommodate that decision so we're going
accommodate that decision so we're going
to start by talking about the core
to start by talking about the core
to start by talking about the core
advancement proposal cap 46
advancement proposal cap 46
advancement proposal cap 46
webassembly smart contract runtime
webassembly smart contract runtime
webassembly smart contract runtime
environment which as you can probably
environment which as you can probably
environment which as you can probably
guess by the title specifies the
guess by the title specifies the
guess by the title specifies the
lowest level code execution and data
lowest level code execution and data
lowest level code execution and data
model components of a wasm-based smart
model components of a wasm-based smart
model components of a wasm-based smart
contract system for the Stellar network
contract system for the Stellar network
contract system for the Stellar network
once we talk about cap 46 we'll also
once we talk about cap 46 we'll also
once we talk about cap 46 we'll also
start to ask some general questions
start to ask some general questions
start to ask some general questions
about how smart contracts should
about how smart contracts should
about how smart contracts should
interoperate with the network
interoperate with the network
interoperate with the network
this is as per usual a technical
this is as per usual a technical
this is as per usual a technical
discussion so if you want to keep up i
discussion so if you want to keep up i
discussion so if you want to keep up i
suggest taking a look at the cap as well
suggest taking a look at the cap as well
suggest taking a look at the cap as well
as the discussion thread about it those
as the discussion thread about it those
as the discussion thread about it those
are both
are both
are both
linked to in a meeting description and
linked to in a meeting description and
linked to in a meeting description and
then if you're interested you can also
then if you're interested you can also
then if you're interested you can also
join the conversation about smart
join the conversation about smart
join the conversation about smart
contracts you can do that by
contracts you can do that by
contracts you can do that by
participating in that thread that's
participating in that thread that's
participating in that thread that's
linked to here or by joining the Stellar
linked to here or by joining the Stellar
linked to here or by joining the Stellar
developer discord which is where we're
developer discord which is where we're
developer discord which is where we're
having all the jump cannon discussions
having all the jump cannon discussions
having all the jump cannon discussions
so that the work is open the
so that the work is open the
so that the work is open the
participatory we're doing you know can
participatory we're doing you know can
participatory we're doing you know can
really follow along on the Stellar
really follow along on the Stellar
really follow along on the Stellar
developer discord
developer discord
developer discord
okay
okay
okay
cap 46. so cat 46 came out on friday
cap 46. so cat 46 came out on friday
cap 46. so cat 46 came out on friday
I think there's been a lot of back and
I think there's been a lot of back and
I think there's been a lot of back and
forth on the mailing list though over
forth on the mailing list though over
forth on the mailing list though over
the past few days a lot of questions
the past few days a lot of questions
the past few days a lot of questions
asked but I'm going to pass it to graden
asked but I'm going to pass it to graden
asked but I'm going to pass it to graden



grading I guess to start off with is
grading I guess to start off with is
grading I guess to start off with is
there anything that you want to tell us
there anything that you want to tell us
there anything that you want to tell us
about cat 46 and or about any issues
about cat 46 and or about any issues
about cat 46 and or about any issues
that you have that you'd like to discuss
that you have that you'd like to discuss
that you have that you'd like to discuss
about it today
thanks yeah there's there's lots to
thanks yeah there's there's lots to
discuss here I want to give a
discuss here I want to give a
discuss here I want to give a
little bit of background because this
little bit of background because this
little bit of background because this
is this is in some ways an unusual cap
is this is in some ways an unusual cap
is this is in some ways an unusual cap
often times when we write caps
often times when we write caps
often times when we write caps
they're they're directly changing the
they're they're directly changing the
they're they're directly changing the
protocol or they're proposing to
protocol or they're proposing to
protocol or they're proposing to
directly change the protocol
directly change the protocol
directly change the protocol
that people are using and cat 46 is a
that people are using and cat 46 is a
that people are using and cat 46 is a
little bit weird in that it it contains
little bit weird in that it it contains
little bit weird in that it it contains
protocol
protocol
protocol
contents there are new new xcr
contents there are new new xcr
contents there are new new xcr
definitions like there would be in in
definitions like there would be in in
definitions like there would be in in
most caps
most caps
most caps
but none of them can actually be used
but none of them can actually be used
but none of them can actually be used
this is a building block for other caps
this is a building block for other caps
this is a building block for other caps
and so
and so
and so
if if this cap for example were
if if this cap for example were
if if this cap for example were
accepted as is tomorrow there will be no
accepted as is tomorrow there will be no
accepted as is tomorrow there will be no
new messages that you could send on the
new messages that you could send on the
new messages that you could send on the
network yet so this is just a building
network yet so this is just a building
network yet so this is just a building
block cap it's a piece of vocabulary
block cap it's a piece of vocabulary
block cap it's a piece of vocabulary
that we want to talk through the
that we want to talk through the
that we want to talk through the
potential uses for in the future
potential uses for in the future
potential uses for in the future
but without it without actually
but without it without actually
but without it without actually
committing to a specific transaction
committing to a specific transaction
committing to a specific transaction
format specific ledger entries anything
format specific ledger entries anything
format specific ledger entries anything
like that this is this is a vocabulary
like that this is this is a vocabulary
like that this is this is a vocabulary
in particular for
in particular for
in particular for
interoperation between
interoperation between
interoperation between
two
two
two
environments so the way to think about
environments so the way to think about
environments so the way to think about
this cap is that it's describing two two
this cap is that it's describing two two
this cap is that it's describing two two
different
different
different



places
places
places
in inside of Stellar core
in inside of Stellar core
in inside of Stellar core
where
where
where
code can run the guest and the host
code can run the guest and the host
code can run the guest and the host
and so so that division between guest
and so so that division between guest
and so so that division between guest
and host is a key concept that's being
and host is a key concept that's being
and host is a key concept that's being
introduced here and most of the cap is a
introduced here and most of the cap is a
introduced here and most of the cap is a
discussion of how the guests and hosts
discussion of how the guests and hosts
discussion of how the guests and hosts
are going to relate to each other
are going to relate to each other
are going to relate to each other
both their their calling relationship
both their their calling relationship
both their their calling relationship
with what values can be passed back and
with what values can be passed back and
with what values can be passed back and
forth between them
forth between them
forth between them
and then the types of
and then the types of
and then the types of
data that will be stored
data that will be stored
data that will be stored
in in this particular proposal the way
in in this particular proposal the way
in in this particular proposal the way
we're discussing data storage
we're discussing data storage
we're discussing data storage
actually involves a split and it's a
actually involves a split and it's a
actually involves a split and it's a
split that's brought about by
split that's brought about by
split that's brought about by
idiosyncrasies of of the
idiosyncrasies of of the
idiosyncrasies of of the
wasm
wasm
wasm
runtime interface which is that you
runtime interface which is that you
runtime interface which is that you
can't really pass complicated data types
can't really pass complicated data types
can't really pass complicated data types
back and forth
back and forth
back and forth
there's a few other reasons for this
there's a few other reasons for this
there's a few other reasons for this
it's actually there's there's a there's
it's actually there's there's a there's
it's actually there's there's a there's
a very large rationale section of the
a very large rationale section of the
a very large rationale section of the
cap that tries to lay out our
cap that tries to lay out our
cap that tries to lay out our
thinking as we explore different options
thinking as we explore different options
thinking as we explore different options
here
here
here



there's there's an efficiency argument
there's there's an efficiency argument
there's there's an efficiency argument
code size
code size
code size



there's a compatibility
there's a compatibility
there's a compatibility
the ability for third parties to browse
the ability for third parties to browse
the ability for third parties to browse
and interoperate for contracts to
and interoperate for contracts to
and interoperate for contracts to
interoperate with one another there's a
interoperate with one another there's a
interoperate with one another there's a
whole host of different reasons for for
whole host of different reasons for for
whole host of different reasons for for
splitting data the way we are
splitting data the way we are
splitting data the way we are
but really the way to think about
but really the way to think about
but really the way to think about
this cap is and i've had this
this cap is and i've had this
this cap is and i've had this
conversation with a few people so far
conversation with a few people so far
conversation with a few people so far
to to picture in your mind a sort of a
to to picture in your mind a sort of a
to to picture in your mind a sort of a
four quadrant diagram
four quadrant diagram
four quadrant diagram
upper left upper right lower left
upper left upper right lower left
upper left upper right lower left
and lower right and and in the upper
and lower right and and in the upper
and lower right and and in the upper
level you've got
level you've got
level you've got
the
the
the
the
the
the
host and guest environments on the left
host and guest environments on the left
host and guest environments on the left
and right
and right
and right
okay so those are those are at runtime
okay so those are those are at runtime
okay so those are those are at runtime
while code is executing there's
while code is executing there's
while code is executing there's
these two environments that are
these two environments that are
these two environments that are
communicating with each other
communicating with each other
communicating with each other
and
and
and



sharing access to a data model where
sharing access to a data model where
sharing access to a data model where
much of the data is stored on the host
much of the data is stored on the host
much of the data is stored on the host
side but the guest has these little
side but the guest has these little
side but the guest has these little
handles that reference into it
handles that reference into it
handles that reference into it
and then in the lower two quadrants you
and then in the lower two quadrants you
and then in the lower two quadrants you
have corresponding to each of those
have corresponding to each of those
have corresponding to each of those
types of data
types of data
types of data
what we would call the the values which
what we would call the the values which
what we would call the the values which
can be handles and the objects
can be handles and the objects
can be handles and the objects
there's an xdr layer so in the upper two
there's an xdr layer so in the upper two
there's an xdr layer so in the upper two
quadrants of this diagram you've got the
quadrants of this diagram you've got the
quadrants of this diagram you've got the
hosting guest at runtime
hosting guest at runtime
hosting guest at runtime
where where values are in memory and
where where values are in memory and
where where values are in memory and
then and the contract is executing in
then and the contract is executing in
then and the contract is executing in
the lower two quadrants you've got the
the lower two quadrants you've got the
the lower two quadrants you've got the
xdr representation which is sort of data
xdr representation which is sort of data
xdr representation which is sort of data
at rest
at rest
at rest
and
and
and
in fact
in fact
in fact
quadrants are quite the right
quadrants are quite the right
quadrants are quite the right
description because the entire lower
description because the entire lower
description because the entire lower
layer of this diagram is essentially all
layer of this diagram is essentially all
layer of this diagram is essentially all
xdr but there is a there's a
xdr but there is a there's a
xdr but there is a there's a
correspondence between values that are
correspondence between values that are
correspondence between values that are
accessible in the in the guest side in
accessible in the in the guest side in
accessible in the in the guest side in
valve then the sc valve xdr type that's
valve then the sc valve xdr type that's
valve then the sc valve xdr type that's
presented in the in the cap
presented in the in the cap
presented in the in the cap
so the cap introduces these value and
so the cap introduces these value and
so the cap introduces these value and
object types and it introduces the the
object types and it introduces the the
object types and it introduces the the
split between the host and the guest
split between the host and the guest
split between the host and the guest
environment and and that that vocabulary
environment and and that that vocabulary
environment and and that that vocabulary
is is a sort of background of what we're
is is a sort of background of what we're
is is a sort of background of what we're
trying to get laid out here now we have
trying to get laid out here now we have
trying to get laid out here now we have
a
a
a
prototype implementation of this we
prototype implementation of this we
prototype implementation of this we
actually at this point have two
actually at this point have two
actually at this point have two
prototype implementations because we
prototype implementations because we
prototype implementations because we
we've done a version of this in c4
we've done a version of this in c4
we've done a version of this in c4
plus and version of it in rust
plus and version of it in rust
plus and version of it in rust
and
and
and
we're fairly confident this is a this
we're fairly confident this is a this
we're fairly confident this is a this
is a structure that
is a structure that
is a structure that
works well in that it allows a
works well in that it allows a
works well in that it allows a
very small and highly interoperable
very small and highly interoperable
very small and highly interoperable
guest code to run in a you know a
guest code to run in a you know a
guest code to run in a you know a
wasm runtime that is connected to a host
wasm runtime that is connected to a host
wasm runtime that is connected to a host
that has these host objects and so
that has these host objects and so
that has these host objects and so
most the discussion around this cap so
most the discussion around this cap so
most the discussion around this cap so
far has actually been like which host
far has actually been like which host
far has actually been like which host
objects to start with because there's
objects to start with because there's
objects to start with because there's
there's a there's a potential repertoire
there's a there's a potential repertoire
there's a there's a potential repertoire
of multiple types of host objects
of multiple types of host objects
of multiple types of host objects
and a little bit around
and a little bit around
and a little bit around
the value representation and bit
the value representation and bit
the value representation and bit
packing and stuff like that but there's
packing and stuff like that but there's
packing and stuff like that but there's
there's not a lot of
you know in in many caps there's there's
you know in in many caps there's there's






semantic rules to to talk through in
semantic rules to to talk through in
semantic rules to to talk through in
terms of of a
terms of of a
terms of of a
sequence of events that occur in
sequence of events that occur in
sequence of events that occur in
response to a transaction or an
response to a transaction or an
response to a transaction or an
algorithm that's implied or something
algorithm that's implied or something
algorithm that's implied or something
like that there's not a lot of verbs in
like that there's not a lot of verbs in
like that there's not a lot of verbs in
this this is really more of a nouns cap
this this is really more of a nouns cap
this this is really more of a nouns cap
right it's it's laying out a vocabulary
right it's it's laying out a vocabulary
right it's it's laying out a vocabulary
of of of things that will exist in
of of of things that will exist in
of of of things that will exist in
memory and or on on
memory and or on on
memory and or on on
stable storage and xtr or being sent
stable storage and xtr or being sent
stable storage and xtr or being sent
over the wire
over the wire
over the wire
and so
and so
and so
you can imagine all sorts of operations
you can imagine all sorts of operations
you can imagine all sorts of operations
happening all the actual operations that
happening all the actual operations that
happening all the actual operations that
will occur on this data model are
will occur on this data model are
will occur on this data model are
essentially left to later caps they're
essentially left to later caps they're
essentially left to later caps they're
things that still have to be worked
things that still have to be worked
things that still have to be worked
out we're still we're still sort of
out we're still we're still sort of
out we're still we're still sort of
experimenting with that but because
experimenting with that but because
experimenting with that but because
smart contracts are such a big project
smart contracts are such a big project
smart contracts are such a big project
and there's so many different parts
and there's so many different parts
and there's so many different parts
to smart contracts we wanted to try and
to smart contracts we wanted to try and
to smart contracts we wanted to try and
split out
split out
split out
meaningfully digestible pieces of the
meaningfully digestible pieces of the
meaningfully digestible pieces of the
problem
problem
problem
and and
and and
and and
you know review them talking through
you know review them talking through
you know review them talking through
have community input on them
have community input on them
have community input on them
and and and ultimately as a software
and and and ultimately as a software
and and and ultimately as a software
engineers you know implement and merge
engineers you know implement and merge
engineers you know implement and merge
them
them
them
piece by piece and this is the first
piece by piece and this is the first
piece by piece and this is the first
piece
piece
piece



so that sort of gives a little bit of
so that sort of gives a little bit of
so that sort of gives a little bit of
background on it
background on it
background on it
there was one other thing I wanted to
there was one other thing I wanted to
there was one other thing I wanted to
mention
gradient I actually do have one
gradient I actually do have one
high-level question for you I know
high-level question for you I know
high-level question for you I know
you've you go into this in detail in
you've you go into this in detail in
you've you go into this in detail in
the cap but can you just like give a
the cap but can you just like give a
the cap but can you just like give a
brief overview on
brief overview on
brief overview on
the specifics of like the value
the specifics of like the value
the specifics of like the value
object split because that's something
object split because that's something
object split because that's something
that is very unique in the world of
that is very unique in the world of
that is very unique in the world of
blockchains I think that elrond is
blockchains I think that elrond is
blockchains I think that elrond is
the only other blockchain that we saw
the only other blockchain that we saw
the only other blockchain that we saw
that does something similar
that does something similar
that does something similar
yeah yeah for sure
yeah yeah for sure
yeah yeah for sure
yeah so like what what is the
yeah so like what what is the
yeah so like what what is the
alternative and and why is this better
alternative and and why is this better
alternative and and why is this better
yeah totally totally
yeah totally totally
yeah totally totally
so an analogy that a lot of people
so an analogy that a lot of people
so an analogy that a lot of people
have this was actually the thing i
have this was actually the thing i
have this was actually the thing i
wanted to talk about I just remembered
wanted to talk about I just remembered
wanted to talk about I just remembered
so I'm glad you brought it up
so I'm glad you brought it up
so I'm glad you brought it up
there's this analogy that a lot of
there's this analogy that a lot of
there's this analogy that a lot of
people have have been using while we're
people have have been using while we're
people have have been using while we're
talking about this that I thought it
talking about this that I thought it
talking about this that I thought it
would be good to bring up here which
would be good to bring up here which
would be good to bring up here which
is that if you've used a web browser
is that if you've used a web browser
is that if you've used a web browser



you can really think about this in in
you can really think about this in in
you can really think about this in in
terms that are that are going to be very
terms that are that are going to be very
terms that are that are going to be very
familiar so in a web browser you program
familiar so in a web browser you program
familiar so in a web browser you program
your web pages in javascript
your web pages in javascript
your web pages in javascript
but the web browser itself is a very
but the web browser itself is a very
but the web browser itself is a very
large piece of code that is not written
large piece of code that is not written
large piece of code that is not written
in javascript right so like some of the
in javascript right so like some of the
in javascript right so like some of the
front end is written in javascript but a
front end is written in javascript but a
front end is written in javascript but a
lot of the web browser is written in c
lot of the web browser is written in c
lot of the web browser is written in c
plus plus or or or rust or something or
plus plus or or or rust or something or
plus plus or or or rust or something or
c or some other low-level systems
c or some other low-level systems
c or some other low-level systems
language and it's compiled ahead of time
language and it's compiled ahead of time
language and it's compiled ahead of time
and it's it's essentially a platform for
and it's it's essentially a platform for
and it's it's essentially a platform for
the applications to run on in the end
the applications to run on in the end
the applications to run on in the end
the javascript applications if you if
the javascript applications if you if
the javascript applications if you if
you've written javascript you'll you'll
you've written javascript you'll you'll
you've written javascript you'll you'll
know that you often have object
know that you often have object
know that you often have object
references
references
references
that aren't references to javascript
that aren't references to javascript
that aren't references to javascript
objects right you you can you can have a
objects right you you can you can have a
objects right you you can you can have a
reference to a dom node or a window or a
reference to a dom node or a window or a
reference to a dom node or a window or a
media container or a an xml http request
media container or a an xml http request
media container or a an xml http request
or something like that and these objects
or something like that and these objects
or something like that and these objects
they're not like the other objects right
they're not like the other objects right
they're not like the other objects right
you they're they're not like the
you they're they're not like the
you they're they're not like the
javascript code that you have you can't
javascript code that you have you can't
javascript code that you have you can't
inspect them you can't find the source
inspect them you can't find the source
inspect them you can't find the source
code to them they're just sort of out
code to them they're just sort of out
code to them they're just sort of out
there somewhere where they are is
there somewhere where they are is
there somewhere where they are is
they're in the host environment they're
they're in the host environment they're
they're in the host environment they're
they're they're supplied by the c plus
they're they're supplied by the c plus
they're they're supplied by the c plus
platform that you're running on
platform that you're running on
platform that you're running on
they're much more efficient they can
they're much more efficient they can
they're much more efficient they can
do things that the the javascript code
do things that the the javascript code
do things that the the javascript code
isn't capable of doing
isn't capable of doing
isn't capable of doing
they're
they're
they're
they're often much larger pieces of code
they're often much larger pieces of code
they're often much larger pieces of code
and so if you had to ship them over and
and so if you had to ship them over and
and so if you had to ship them over and
over again with every application your
over again with every application your
over again with every application your
application would be gigantic
application would be gigantic
application would be gigantic
and so there's
and so there's
and so there's
there's a sort of
there's a sort of
there's a sort of



the by being part of the the platform
the by being part of the the platform
the by being part of the the platform
and the environment in which your
and the environment in which your
and the environment in which your
javascript is running they are almost
javascript is running they are almost
javascript is running they are almost
like a library that you can call of of
like a library that you can call of of
like a library that you can call of of
very fast very reliable very common
very fast very reliable very common
very fast very reliable very common
features
features
features
but but that you operate
but but that you operate
but but that you operate
at some distance from right you if if a
at some distance from right you if if a
at some distance from right you if if a
function call goes into them
function call goes into them
function call goes into them
you know you don't you don't get to
you know you don't you don't get to
you know you don't you don't get to
break on your javascript debugger in the
break on your javascript debugger in the
break on your javascript debugger in the
middle of that function call right it
middle of that function call right it
middle of that function call right it
comes back to you
comes back to you
comes back to you
and and then you get control back in
and and then you get control back in
and and then you get control back in
your guest code when when it returns
your guest code when when it returns
your guest code when when it returns
so that we're approaching this
so that we're approaching this
so that we're approaching this
this model and as you said it's the same
this model and as you said it's the same
this model and as you said it's the same
model that that I think the lra
model that that I think the lra
model that that I think the lra
network uses
network uses
network uses
in a similar fashion where we're coming
in a similar fashion where we're coming
in a similar fashion where we're coming
up with a set of
up with a set of
up with a set of
of objects that that the platform
of objects that that the platform
of objects that that the platform
will provide
will provide
will provide



that are implemented in in
that are implemented in in
that are implemented in in
cpu plus or or rust
cpu plus or or rust
cpu plus or or rust
and
and
and
they're kind of baked into the platform
they're kind of baked into the platform
they're kind of baked into the platform
they're they're
they're they're
they're they're
things that
things that
things that
all or quite a lot of smart contracts
all or quite a lot of smart contracts
all or quite a lot of smart contracts
are likely to want
are likely to want
are likely to want
and so
and so
and so
ahead of time
ahead of time
ahead of time
the Stellar core developers ourselves
the Stellar core developers ourselves
the Stellar core developers ourselves
and anyone else who wants to contribute
and anyone else who wants to contribute
and anyone else who wants to contribute
to it
to it
to it
would have created this repertoire of of
would have created this repertoire of of
would have created this repertoire of of
extra
extra
extra
objects and those objects are
objects and those objects are
objects and those objects are
again fast
again fast
again fast
so so they're they're gonna you know
so so they're they're gonna you know
so so they're they're gonna you know
they're not gonna be written in wells
they're not gonna be written in wells
they're not gonna be written in wells
and they're not running on the virtual
and they're not running on the virtual
and they're not running on the virtual
machine they're they're written in
machine they're they're written in
machine they're they're written in
native code
native code
native code
they're
they're
they're
much larger typically there's a there's
much larger typically there's a there's
much larger typically there's a there's
a large code footprint that supports
a large code footprint that supports
a large code footprint that supports
them that will not be included in your
them that will not be included in your
them that will not be included in your
smart contract you don't have to include
smart contract you don't have to include
smart contract you don't have to include
code in your smart contract your smart
code in your smart contract your smart
code in your smart contract your smart
contract just calls them
contract just calls them
contract just calls them



and
and
and
and and so your your contract code is
and and so your your contract code is
and and so your your contract code is
much smaller but you operate them at a
much smaller but you operate them at a
much smaller but you operate them at a
distance so you you have this
distance so you you have this
distance so you you have this
reference to a host object when you're
reference to a host object when you're
reference to a host object when you're
working on it rather than you know
working on it rather than you know
working on it rather than you know
running in the memory of your smart
running in the memory of your smart
running in the memory of your smart
contracts your smart contract has a
contracts your smart contract has a
contracts your smart contract has a
little linear memory it has the the
little linear memory it has the the
little linear memory it has the the
virtual machine has its own memory
virtual machine has its own memory
virtual machine has its own memory
and so you can you can write code in
and so you can you can write code in
and so you can you can write code in
whatever language you're you're writing
whatever language you're you're writing
whatever language you're you're writing
and I think most of our smart contract
and I think most of our smart contract
and I think most of our smart contract
source languages are going to be
source languages are going to be
source languages are going to be
we're looking actually at mostly rust
we're looking actually at mostly rust
we're looking actually at mostly rust
there as well interestingly enough
there as well interestingly enough
there as well interestingly enough
and so you could write a data structure
and so you could write a data structure
and so you could write a data structure
in rust and have it running in the wasm
in rust and have it running in the wasm
in rust and have it running in the wasm
virtual machine
virtual machine
virtual machine
just like you would have a you know a
just like you would have a you know a
just like you would have a you know a
javascript array or something running
javascript array or something running
javascript array or something running
inside your javascript program but
inside your javascript program but
inside your javascript program but
we're also going to try and provide
we're also going to try and provide
we're also going to try and provide
almost every object that you want as a
almost every object that you want as a
almost every object that you want as a
host object so that you don't actually
host object so that you don't actually
host object so that you don't actually
have to compile anything to your
have to compile anything to your
have to compile anything to your
contract except for a handle and so this
contract except for a handle and so this
contract except for a handle and so this
this handle which is essentially a
this handle which is essentially a
this handle which is essentially a
pointer or a certain quasi-pointer it's
pointer or a certain quasi-pointer it's
pointer or a certain quasi-pointer it's
not actually a
not actually a
not actually a
memory address it's just an integer
memory address it's just an integer
memory address it's just an integer
number that starts from zero it counts
number that starts from zero it counts
number that starts from zero it counts
up as we allocate host objects but
up as we allocate host objects but
up as we allocate host objects but
these these typed handles that you'll be
these these typed handles that you'll be
these these typed handles that you'll be
operating
operating
operating
on and passing to host functions
on and passing to host functions
on and passing to host functions
refer to host objects but they don't
refer to host objects but they don't
refer to host objects but they don't
actually hold the host object in in the
actually hold the host object in in the
actually hold the host object in in the
guest's memory
guest's memory
guest's memory
and so
and so
and so
again there's there's a variety of
again there's there's a variety of
again there's there's a variety of
benefits
benefits
benefits



one of the benefits I haven't mentioned
one of the benefits I haven't mentioned
one of the benefits I haven't mentioned
yet so much but it's in the rationale
yet so much but it's in the rationale
yet so much but it's in the rationale
section and we've we've talked about it
section and we've we've talked about it
section and we've we've talked about it
a bunch while we were working on this is
a bunch while we were working on this is
a bunch while we were working on this is
that
corresponding xdr form
corresponding xdr form
and
and
and
when we've looked at a lot of smart
when we've looked at a lot of smart
when we've looked at a lot of smart
contracts most smart contracts spend
contracts most smart contracts spend
contracts most smart contracts spend
most of their time from what we can tell
most of their time from what we can tell
most of their time from what we can tell
if they're not doing cryptography
if they're not doing cryptography
if they're not doing cryptography
obviously there's there's the special
obviously there's there's the special
obviously there's there's the special
case of doing cryptographic operations
case of doing cryptographic operations
case of doing cryptographic operations
which we'll also get to but a lot of
which we'll also get to but a lot of
which we'll also get to but a lot of
them spend a lot of their time
them spend a lot of their time
them spend a lot of their time
serializing and deserializing their data
serializing and deserializing their data
serializing and deserializing their data
store so
store so
store so
the smart contract is invoked and it's
the smart contract is invoked and it's
the smart contract is invoked and it's
given a byte buffer and then it
given a byte buffer and then it
given a byte buffer and then it
spends all of this time in its virtual
spends all of this time in its virtual
spends all of this time in its virtual
machine
machine
machine
running in virtual machine instructions
running in virtual machine instructions
running in virtual machine instructions
those virtual machine instructions are
those virtual machine instructions are
those virtual machine instructions are
just like inspecting a byte buffer and
just like inspecting a byte buffer and
just like inspecting a byte buffer and
copying values out of it into a data
copying values out of it into a data
copying values out of it into a data
structure in memory then operating on
structure in memory then operating on
structure in memory then operating on
the data structure in memory and then
the data structure in memory and then
the data structure in memory and then
re-serializing it back to plate buffer
re-serializing it back to plate buffer
re-serializing it back to plate buffer
and that's
and that's
and that's
that's a little bit weird for a few
that's a little bit weird for a few
that's a little bit weird for a few
reasons it's not
reasons it's not
reasons it's not
a good efficient use of computational
a good efficient use of computational
a good efficient use of computational
resources because
resources because
resources because
that's like compute expensive work
that's like compute expensive work
that's like compute expensive work
and you're doing it on the virtual
and you're doing it on the virtual
and you're doing it on the virtual
machine instead of the host where it
machine instead of the host where it
machine instead of the host where it
would be on in native code
would be on in native code
would be on in native code
and it's also
and it's also
and it's also
it's very likely to be shared or
it's very likely to be shared or
it's very likely to be shared or
shareable right if if if you were using
shareable right if if if you were using
shareable right if if if you were using
a data structure that is similar to
a data structure that is similar to
a data structure that is similar to
other data structures that other people
other data structures that other people
other data structures that other people
are using
are using
are using
the idea that you would need to do
the idea that you would need to do
the idea that you would need to do
custom serialization deserialization as
custom serialization deserialization as
custom serialization deserialization as
opposed to just reusing a library that
opposed to just reusing a library that
opposed to just reusing a library that
does it
does it
does it
is a little funny it's sort of it's it's
is a little funny it's sort of it's it's
is a little funny it's sort of it's it's
it's making every smart contract ship
it's making every smart contract ship
it's making every smart contract ship
redundant duplicate contract code that
redundant duplicate contract code that
redundant duplicate contract code that
does the same thing as someone else
does the same thing as someone else
does the same thing as someone else
could do
could do
could do
and and on that note with respect to
and and on that note with respect to
and and on that note with respect to
commonality
commonality
commonality
the more the
the more the
the more the
the the data types
the the data types
the the data types
are common between smart contracts
are common between smart contracts
are common between smart contracts
the more you can interoperate between
the more you can interoperate between
the more you can interoperate between
smart contracts so if if smart contract
smart contracts so if if smart contract
smart contracts so if if smart contract
a wants to call smart contract b
a wants to call smart contract b
a wants to call smart contract b
it's going to want to pass data it's
it's going to want to pass data it's
it's going to want to pass data it's
going to want to pass arguments right
going to want to pass arguments right
going to want to pass arguments right
accounts and amounts and
accounts and amounts and
accounts and amounts and
maybe vectors containing things maybe
maybe vectors containing things maybe
maybe vectors containing things maybe
large numbers or cryptographic data
large numbers or cryptographic data
large numbers or cryptographic data
types or whatever and in order to pass
types or whatever and in order to pass
types or whatever and in order to pass
data from one from one contract to
data from one from one contract to
data from one from one contract to
another I mean a contract is just a
another I mean a contract is just a
another I mean a contract is just a
program and for for two programs to
program and for for two programs to
program and for for two programs to
interoperate they have to have a common
interoperate they have to have a common
interoperate they have to have a common
data language
data language
data language
and so
and so
and so
if you assume that you're going to have
if you assume that you're going to have
if you assume that you're going to have
this this interoperability requirement
this this interoperability requirement
this this interoperability requirement
between contracts where they share some
between contracts where they share some
between contracts where they share some
kind of data vocabulary then necessarily
kind of data vocabulary then necessarily
kind of data vocabulary then necessarily
the serialization and deserialization
the serialization and deserialization
the serialization and deserialization
code has to be shared and so
code has to be shared and so
code has to be shared and so
factoring that serialization
factoring that serialization
factoring that serialization
deserialization code out having it be
deserialization code out having it be
deserialization code out having it be
part of the platform and having
part of the platform and having
part of the platform and having
the user
the user
the user
not actually have to ship serialized
not actually have to ship serialized
not actually have to ship serialized
serialized code but but having the xdr
serialized code but but having the xdr
serialized code but but having the xdr
pulled out of a ledger entry and turned
pulled out of a ledger entry and turned
pulled out of a ledger entry and turned
into host objects and then just handing
into host objects and then just handing
into host objects and then just handing
handles to those host objects to
handles to those host objects to
handles to those host objects to
a contract saves the contract from
a contract saves the contract from
a contract saves the contract from
shipping any of that serialized
shipping any of that serialized
shipping any of that serialized
serialized code it's is the contract
serialized code it's is the contract
serialized code it's is the contract
from having to to deal with
from having to to deal with
from having to to deal with
compatibility issues because everyone's
compatibility issues because everyone's
compatibility issues because everyone's
using the same the same data model
using the same the same data model
using the same the same data model
it just seems like a win all around you
it just seems like a win all around you
it just seems like a win all around you
know every time every time we
know every time every time we
know every time every time we
sort of thought about this problem from
sort of thought about this problem from
sort of thought about this problem from
another angle we found another way in
another angle we found another way in
another angle we found another way in
which it seems advantageous
which it seems advantageous
which it seems advantageous
third-party browsers for example would
third-party browsers for example would
third-party browsers for example would
be able to to browse the stable data
be able to to browse the stable data
be able to to browse the stable data
format as opposed to many smart contract
format as opposed to many smart contract
format as opposed to many smart contract
systems
systems
systems
every every data value that the smart
every every data value that the smart
every every data value that the smart
contract saves into the blockchain is
contract saves into the blockchain is
contract saves into the blockchain is
just an opaque byte byte blob that no
just an opaque byte byte blob that no
just an opaque byte byte blob that no
one can inspect if we have a common
one can inspect if we have a common
one can inspect if we have a common
data type
data type
data type
such as the one that's presented here
such as the one that's presented here
such as the one that's presented here
all of the ledger entries will be at
all of the ledger entries will be at
all of the ledger entries will be at
least structured so you could browse
least structured so you could browse
least structured so you could browse
them now you might not be able to make
them now you might not be able to make
them now you might not be able to make
total sense of the contents of it but at
total sense of the contents of it but at
total sense of the contents of it but at
least have some structure that you'd be
least have some structure that you'd be
least have some structure that you'd be
able to to browse which would make
able to to browse which would make
able to to browse which would make
diagnostics easier it would make writing
diagnostics easier it would make writing
diagnostics easier it would make writing
third-party adapters to consuming events
third-party adapters to consuming events
third-party adapters to consuming events
coming out of the system easier it would
coming out of the system easier it would
coming out of the system easier it would
make
make
make
testing easier creating mock data of
testing easier creating mock data of
testing easier creating mock data of
attaching fuzzers to it there's all
attaching fuzzers to it there's all
attaching fuzzers to it there's all
sorts of advantages to using a common
sorts of advantages to using a common
sorts of advantages to using a common
data format so
data format so
data format so



so I tried to lay some of them out in
so I tried to lay some of them out in
so I tried to lay some of them out in
the rationale section here but it really
the rationale section here but it really
the rationale section here but it really
does seem like like this is this is a
does seem like like this is this is a
does seem like like this is this is a
huge key to
huge key to
huge key to
a better design for smart contracts than
a better design for smart contracts than
a better design for smart contracts than
what we've seen in a lot of other
what we've seen in a lot of other
what we've seen in a lot of other
platforms and
platforms and
platforms and
and so so again that's that's sort of
and so so again that's that's sort of
and so so again that's that's sort of
why this made up the first building
why this made up the first building
why this made up the first building
block cap is because if we do adopt this
block cap is because if we do adopt this
block cap is because if we do adopt this
approach
approach
approach
we'll be will be
we'll be will be
we'll be will be
deeply structured by this decision and
deeply structured by this decision and
deeply structured by this decision and
obviously if if we don't adopt it if
obviously if if we don't adopt it if
obviously if if we don't adopt it if
there's if there's really strong
there's if there's really strong
there's if there's really strong
community feedback this is a terrible
community feedback this is a terrible
community feedback this is a terrible
idea nobody likes it if all the
idea nobody likes it if all the
idea nobody likes it if all the
technical review says this is impossible
technical review says this is impossible
technical review says this is impossible
it won't be able to make it work or it's
it won't be able to make it work or it's
it won't be able to make it work or it's



you know there's there's there's no way
you know there's there's there's no way
you know there's there's there's no way
you can never come up with common data
you can never come up with common data
you can never come up with common data
types that everyone would find agreeable
types that everyone would find agreeable
types that everyone would find agreeable
that's really important information to
that's really important information to
that's really important information to
know because it does seem very very
know because it does seem very very
know because it does seem very very
appealing but if it's if it's not going
appealing but if it's if it's not going
appealing but if it's if it's not going
to work that will also change our
to work that will also change our
to work that will also change our
strategy very dramatically so
strategy very dramatically so
strategy very dramatically so
i've talked a lot right now I don't know
i've talked a lot right now I don't know
i've talked a lot right now I don't know
if you have any other questions or
if you have any other questions or
if you have any other questions or
other things that you wanted to to
other things that you wanted to to
other things that you wanted to to
discuss about it there's there's
discuss about it there's there's
discuss about it there's there's
some detail in the cap most of mostly
some detail in the cap most of mostly
some detail in the cap most of mostly
conversation we've been having so far is
conversation we've been having so far is
conversation we've been having so far is
just like
just like
just like
around missing detail in the cap or
around missing detail in the cap or
around missing detail in the cap or



or or debating a set of objects that's
or or debating a set of objects that's
or or debating a set of objects that's
that's that's one of the big questions
that's that's one of the big questions
that's that's one of the big questions
is like which objects do you include as
is like which objects do you include as
is like which objects do you include as
your sort of mvp first pass what host
your sort of mvp first pass what host
your sort of mvp first pass what host
objects do you include as your
objects do you include as your
objects do you include as your
baseline so I actually have one
baseline so I actually have one
baseline so I actually have one
follow-up question before we go deep
follow-up question before we go deep
follow-up question before we go deep
into the details which is
into the details which is
into the details which is
how do we encourage people to use these
how do we encourage people to use these
how do we encourage people to use these
managed objects rather than to do
managed objects rather than to do
managed objects rather than to do
something you know very offensive on the
something you know very offensive on the
something you know very offensive on the
on the like the source language side
on the like the source language side
on the like the source language side
just because they can
yeah so this does not this of course
yeah so this does not this of course
this does not preclude you know shipping
this does not preclude you know shipping
this does not preclude you know shipping
your own encoder and decoder and just
your own encoder and decoder and just
your own encoder and decoder and just
storing there's a there's a there's a
storing there's a there's a there's a
storing there's a there's a there's a
data type in this cap called a binary
data type in this cap called a binary
data type in this cap called a binary
which is just a raw bite array and so if
which is just a raw bite array and so if
which is just a raw bite array and so if
you want to store a rod by right and you
you want to store a rod by right and you
you want to store a rod by right and you
want to ship the serialized deserialized
want to ship the serialized deserialized
want to ship the serialized deserialized
code yourself
code yourself
code yourself
we're not gonna be able to stop you i
we're not gonna be able to stop you i
we're not gonna be able to stop you i
mean it's a it's a touring complete
mean it's a it's a touring complete
mean it's a it's a touring complete
environment right so that's that's like
environment right so that's that's like
environment right so that's that's like
trying to prevent someone from computing
trying to prevent someone from computing
trying to prevent someone from computing
a particular function it's just not
a particular function it's just not
a particular function it's just not
it's against the whole point of the
it's against the whole point of the
it's against the whole point of the
platform to try to prevent that but i
platform to try to prevent that but i
platform to try to prevent that but i
think you'll have a fairly strong
think you'll have a fairly strong
think you'll have a fairly strong
disincentive just from the fee model if
disincentive just from the fee model if
disincentive just from the fee model if
there's any type of pricing of resources
there's any type of pricing of resources
there's any type of pricing of resources
here which you know there has to be in
here which you know there has to be in
here which you know there has to be in
order to
order to
order to
make to arbitrate access to to cpu
make to arbitrate access to to cpu
make to arbitrate access to to cpu
and disk resources on the validators
and disk resources on the validators
and disk resources on the validators



it will be a lot more expensive to do it
it will be a lot more expensive to do it
it will be a lot more expensive to do it
that way and so I think you'll just
that way and so I think you'll just
that way and so I think you'll just
my hope anyway is
my hope anyway is
my hope anyway is
obviously this won't work very well if
obviously this won't work very well if
obviously this won't work very well if
the fees turned out the other way but
the fees turned out the other way but
the fees turned out the other way but
my hope and my assumption is that you'll
my hope and my assumption is that you'll
my hope and my assumption is that you'll
be saving a ton of of
be saving a ton of of
be saving a ton of of
you know
you know
you know
whatever
whatever
whatever
gas metering fees the system is charging
gas metering fees the system is charging
gas metering fees the system is charging
users
users
users
by using host objects because they're so
by using host objects because they're so
by using host objects because they're so
much faster and efficient
I mean is it time to start digging into
I mean is it time to start digging into
some of these details or does anyone
some of these details or does anyone
some of these details or does anyone
I guess my first the first question is
I guess my first the first question is
I guess my first the first question is
in general do people feel pretty good
in general do people feel pretty good
in general do people feel pretty good
about this model
I mean so so I have kind of a meta
I mean so so I have kind of a meta
comment which is that
comment which is that
comment which is that



it seems to me it seems you know having
it seems to me it seems you know having
it seems to me it seems you know having
you know been involved in like a few
you know been involved in like a few
you know been involved in like a few
standardization efforts it seems a
standardization efforts it seems a
standardization efforts it seems a
little weird to be contemplating a
little weird to be contemplating a
little weird to be contemplating a
change of this scope without like a
change of this scope without like a
change of this scope without like a
requirements document first to reference
requirements document first to reference
requirements document first to reference
so like I have a bunch of nits but to
so like I have a bunch of nits but to
so like I have a bunch of nits but to
some extent it's gonna be like who knows
some extent it's gonna be like who knows
some extent it's gonna be like who knows
because like we don't know
because like we don't know
because like we don't know
what the requirements are
what the requirements are
what the requirements are
and aren't right
and aren't right
and aren't right
so
so
so
so I have like I have huge concerns
so I have like I have huge concerns
so I have like I have huge concerns
about the about the use of floating
about the about the use of floating
about the about the use of floating
point values for example it just seems
point values for example it just seems
point values for example it just seems
like I can think of like a million bugs
like I can think of like a million bugs
like I can think of like a million bugs
that like really
that like really
that like really
catastrophic bugs that are that could
catastrophic bugs that are that could
catastrophic bugs that are that could
happen right like certainly in my
happen right like certainly in my
happen right like certainly in my
lifetime like literally hardware has
lifetime like literally hardware has
lifetime like literally hardware has
implemented ieee floating point
implemented ieee floating point
implemented ieee floating point
incorrectly right on top of that there's
incorrectly right on top of that there's
incorrectly right on top of that there's
like from one release to the next of
like from one release to the next of
like from one release to the next of
like the compiler runtime there might be
like the compiler runtime there might be
like the compiler runtime there might be
small changes like that they might use
small changes like that they might use
small changes like that they might use
like a different
like a different
like a different
not a number representation because
not a number representation because
not a number representation because
there's like tons of ways of
there's like tons of ways of
there's like tons of ways of
representing
representing
representing
not a number things like that you know
not a number things like that you know
not a number things like that you know
positive negative zero so but you
positive negative zero so but you
positive negative zero so but you
know maybe we need it maybe we don't but
know maybe we need it maybe we don't but
know maybe we need it maybe we don't but
like
like
like
this is just
this is just
this is just
without a requirements document to go
without a requirements document to go
without a requirements document to go
back to like how do how do we know
back to like how do how do we know
back to like how do how do we know
whether some of these things are good
whether some of these things are good
whether some of these things are good
ideas or not or whether they're gonna
ideas or not or whether they're gonna
ideas or not or whether they're gonna
serve serve our purposes
so
so
david we've been you know we've been
david we've been you know we've been
david we've been you know we've been
like the one thing that we have going
like the one thing that we have going
like the one thing that we have going
for us right now is that there's a lot
for us right now is that there's a lot
for us right now is that there's a lot
of prior art in the world of smart
of prior art in the world of smart
of prior art in the world of smart
contracts and we have made a list
contracts and we have made a list
contracts and we have made a list
of like sample smart contracts that we
of like sample smart contracts that we
of like sample smart contracts that we
are interested in
are interested in
are interested in
seeing like that should be like a sep
seeing like that should be like a sep
seeing like that should be like a sep
or something there should be like this
or something there should be like this
or something there should be like this
should reference like a document
should reference like a document
should reference like a document
saying like you know like these are the
saying like you know like these are the
saying like you know like these are the
requirements for our for like smart
requirements for our for like smart
requirements for our for like smart
contracts on Stellar right
contracts on Stellar right
contracts on Stellar right
okay
that makes sense I can work on that
that makes sense I can work on that
maybe in the meantime if you have
maybe in the meantime if you have
maybe in the meantime if you have
specific concerns like the floating
specific concerns like the floating
specific concerns like the floating
point thing is sounds like something we
point thing is sounds like something we
point thing is sounds like something we
might want to discuss
might want to discuss
might want to discuss
I can speak to that a little bit i
I can speak to that a little bit i
I can speak to that a little bit i
mean just very briefly
mean just very briefly
mean just very briefly
wasm as a as a spec does include
wasm as a as a spec does include
wasm as a as a spec does include
instructions for floating point
instructions for floating point
instructions for floating point
this
this
this
this cap doesn't specifically
this cap doesn't specifically
this cap doesn't specifically
preclude them we've we've talked so
preclude them we've we've talked so
preclude them we've we've talked so
far
far
far
somewhat seriously about the possibility
somewhat seriously about the possibility
somewhat seriously about the possibility
of of actually filtering them out of
of of actually filtering them out of
of of actually filtering them out of
saying that that
saying that that
saying that that
all the floating point instructions
all the floating point instructions
all the floating point instructions
equal invalid contract
equal invalid contract
equal invalid contract
just just just again to to sort of to
just just just again to to sort of to
just just just again to to sort of to
allay fears because you're not the
allay fears because you're not the
allay fears because you're not the
first person to use expressed fear is
first person to use expressed fear is
first person to use expressed fear is
your own floating point now personally
your own floating point now personally
your own floating point now personally
myself I'm a little bit more of a
myself I'm a little bit more of a
myself I'm a little bit more of a
floating point believer so I I'm not
floating point believer so I I'm not
floating point believer so I I'm not
as concerned about that there are
as concerned about that there are
as concerned about that there are
two sources of what we might consider
two sources of what we might consider
two sources of what we might consider
non-determinism or or wiggle room in
non-determinism or or wiggle room in
non-determinism or or wiggle room in
floating point behavior
floating point behavior
floating point behavior



that are that are left open in the
that are that are left open in the
that are that are left open in the
wasm spec in in all other respects
wasm spec in in all other respects
wasm spec in in all other respects
wasm just just delegates directly to
wasm just just delegates directly to
wasm just just delegates directly to
ie754 and if you do not implement 754
ie754 and if you do not implement 754
ie754 and if you do not implement 754
correctly yeah you're in error that's
correctly yeah you're in error that's
correctly yeah you're in error that's
that's that
that's that
that's that
and 754 has not actually changed in
and 754 has not actually changed in
and 754 has not actually changed in
40 years so I mean I think that's
40 years so I mean I think that's
40 years so I mean I think that's
actually a fairly stable thing to point
actually a fairly stable thing to point
actually a fairly stable thing to point
to yeah but it's not it's not it's not
to yeah but it's not it's not it's not
to yeah but it's not it's not it's not
the standard so much as
the standard so much as
the standard so much as
like implementations of it which have
like implementations of it which have
like implementations of it which have
been buggy or
been buggy or
been buggy or
there's been like there have been like
there's been like there have been like
there's been like there have been like
two cpus shipped in my lifetime that had
two cpus shipped in my lifetime that had
two cpus shipped in my lifetime that had
bugs and they were they were like very
bugs and they were they were like very
bugs and they were they were like very
high priority fixes so I think
high priority fixes so I think
high priority fixes so I think
saying like that
saying like that
saying like that
saying like okay like
saying like okay like
saying like okay like
but these are like exactly the cpus that
but these are like exactly the cpus that
but these are like exactly the cpus that
would be like running Stellar core right
would be like running Stellar core right
would be like running Stellar core right
so this would be like catastrophic for
so this would be like catastrophic for
so this would be like catastrophic for
Stellar core so again if we have a
Stellar core so again if we have a
Stellar core so again if we have a
requirements document and say here's
requirements document and say here's
requirements document and say here's
like 10 contracts you want and like
like 10 contracts you want and like
like 10 contracts you want and like
six of them need floating point then
six of them need floating point then
six of them need floating point then
we need floating point if zero of them
we need floating point if zero of them
we need floating point if zero of them
need floating point then it seems crazy
need floating point then it seems crazy
need floating point then it seems crazy
I I agree that we can we can decide
I I agree that we can we can decide
I I agree that we can we can decide
whether or not to have floating point i
whether or not to have floating point i
whether or not to have floating point i
think referring to the f div bug as as a
think referring to the f div bug as as a
think referring to the f div bug as as a
reason that floating point is not a
reason that floating point is not a
reason that floating point is not a
reliable piece of software is hyperbolic
reliable piece of software is hyperbolic
reliable piece of software is hyperbolic
I don't think that's a fair objection
I don't think that's a fair objection
I don't think that's a fair objection
floating point is very well defined at
floating point is very well defined at
floating point is very well defined at
this point what about compilers that
this point what about compilers that
this point what about compilers that
like you know use 80 bit when it's in a
like you know use 80 bit when it's in a
like you know use 80 bit when it's in a
register and 64-bit when it's been
register and 64-bit when it's been
register and 64-bit when it's been
spilled to memory right like things like
spilled to memory right like things like
spilled to memory right like things like
that so a 80-bit floating point is is
that so a 80-bit floating point is is
that so a 80-bit floating point is is
not a an accessible format in lesson
not a an accessible format in lesson
not a an accessible format in lesson
you you you only have access to the 64
you you you only have access to the 64
you you you only have access to the 64
all the operations but I find it like
all the operations but I find it like
all the operations but I find it like
there's like a bug in the run time that
there's like a bug in the run time that
there's like a bug in the run time that
it would like accidentally use 80 bit
it would like accidentally use 80 bit
it would like accidentally use 80 bit
but you're saying like that it's not
but you're saying like that it's not
but you're saying like that it's not
available it's literally not available
available it's literally not available
available it's literally not available
on the target the target the wasm target
on the target the target the wasm target
on the target the target the wasm target
does not does not have extended
does not does not have extended
does not does not have extended
floating point
floating point
floating point
there there is at the same time
there there is at the same time
there there is at the same time
to like figure out if there's a
to like figure out if there's a
to like figure out if there's a
requirement for floating points before
requirement for floating points before
requirement for floating points before
getting too too deep into
getting too too deep into
getting too too deep into
what might go wrong I think it's the
what might go wrong I think it's the
what might go wrong I think it's the
right one okay
so so tell me you're making that you're
so so tell me you're making that you're
gonna make that awesome sound yep
okay are there other you know so
okay are there other you know so
floating points is we're putting a
floating points is we're putting a
floating points is we're putting a
bracket on and it may come up and it may
bracket on and it may come up and it may
bracket on and it may come up and it may
not we can have that discussion are
not we can have that discussion are
not we can have that discussion are
there other like concerns
there other like concerns
there other like concerns
like that that we should get into now
like that that we should get into now
like that that we should get into now
well I think like the big one is
well I think like the big one is
well I think like the big one is
concurrency right like do we
concurrency right like do we
concurrency right like do we
do do we require like if the
do do we require like if the
do do we require like if the
requirements include sort of performance
requirements include sort of performance
requirements include sort of performance
then we need to be able to run
then we need to be able to run
then we need to be able to run
you know smart contracts and multiple
you know smart contracts and multiple
you know smart contracts and multiple
cores in parallel which
cores in parallel which
cores in parallel which
entails one set of requirements like
entails one set of requirements like
entails one set of requirements like
making sure that that we don't run
making sure that that we don't run
making sure that that we don't run
conflicting smart contracts in parallel
conflicting smart contracts in parallel
conflicting smart contracts in parallel
if we don't need performance that you
if we don't need performance that you
if we don't need performance that you
know then then we don't need that but
know then then we don't need that but
know then then we don't need that but
but it seems like that again is
but it seems like that again is
but it seems like that again is
something that we need to decide
something that we need to decide
something that we need to decide
pretty early and it needs to be driven
pretty early and it needs to be driven
pretty early and it needs to be driven
by by requirements
by by requirements
by by requirements
yeah I can I can speak to that a little
yeah I can I can speak to that a little
yeah I can I can speak to that a little
bit that that is
bit that that is
bit that that is
definitely something that we we have
definitely something that we we have
definitely something that we we have
been
been
been
extensively considering and and have
extensively considering and and have
extensively considering and and have
in fact a prototype planned for
in fact a prototype planned for
in fact a prototype planned for



as with everything sort of above the
as with everything sort of above the
as with everything sort of above the
single contract single vm
single contract single vm
single contract single vm
interface
interface
interface
it's not specified in this cap so
it's not specified in this cap so
it's not specified in this cap so
this cap doesn't for example talk about
this cap doesn't for example talk about
this cap doesn't for example talk about
ledger entries at all and so so so any
ledger entries at all and so so so any
ledger entries at all and so so so any
concurrency issues
concurrency issues
concurrency issues
relate to access to the ledger there
relate to access to the ledger there
relate to access to the ledger there
there is essentially no
there is essentially no
there is essentially no



there are there are no concurrent
there are there are no concurrent
there are there are no concurrent
host objects in in this model and I I'm
host objects in in this model and I I'm
host objects in in this model and I I'm
happy to spell that fact that that
happy to spell that fact that that
happy to spell that fact that that
these host objects are isolated to a
these host objects are isolated to a
these host objects are isolated to a
single vm the single vm single threaded
single vm the single vm single threaded
single vm the single vm single threaded
or or sorry to a single host context
or or sorry to a single host context
or or sorry to a single host context
which is
which is
which is
may have multiple vms but they are
may have multiple vms but they are
may have multiple vms but they are
executed on a single thread in serial
executed on a single thread in serial
executed on a single thread in serial
so so there's no concurrent access to
so so there's no concurrent access to
so so there's no concurrent access to
host objects whatsoever in this in this
host objects whatsoever in this in this
host objects whatsoever in this in this
cap
cap
cap
right so this seems potentially not
right so this seems potentially not
right so this seems potentially not
workable depending on our requirements
workable depending on our requirements
workable depending on our requirements
let me finish
let me finish
let me finish
concurrent access to ledger entries
concurrent access to ledger entries
concurrent access to ledger entries



is planned
is planned
is planned
so so the ledger would be the the the
so so the ledger would be the the the
so so the ledger would be the the the
shared concurrent
shared concurrent
shared concurrent
data structure
data structure
data structure
the the thing that it's meaningful to
the the thing that it's meaningful to
the the thing that it's meaningful to
talk about concurrency with respect to
talk about concurrency with respect to
talk about concurrency with respect to
and that's something that we will
and that's something that we will
and that's something that we will
be discussing in later cap because the
be discussing in later cap because the
be discussing in later cap because the
transaction format for invoking
transaction format for invoking
transaction format for invoking
transactions that we have planned
transactions that we have planned
transactions that we have planned
includes a
includes a
includes a
sort of I guess a trick or a standard
sort of I guess a trick or a standard
sort of I guess a trick or a standard
pattern from the deterministic database
pattern from the deterministic database
pattern from the deterministic database
literature where transactions carry
literature where transactions carry
literature where transactions carry
static read write sets sort of staple to
static read write sets sort of staple to
static read write sets sort of staple to
the transaction so
the transaction so
the transaction so
you know
you know
you know
the the semantics are strict
the the semantics are strict
the the semantics are strict
serializability with the caveat that
serializability with the caveat that
serializability with the caveat that
it's implemented by by
it's implemented by by
it's implemented by by
you know deterministically
you know deterministically
you know deterministically
partitioned
partitioned
partitioned
read write sets especially there's no
read write sets especially there's no
read write sets especially there's no
there's no actual contention there's no
there's no actual contention there's no
there's no actual contention there's no
requirement for concurrency control
requirement for concurrency control
requirement for concurrency control
because the the concurrent executions
because the the concurrent executions
because the the concurrent executions
are all on disjoint data I think so an
are all on disjoint data I think so an
are all on disjoint data I think so an
account id for example it's a type that
account id for example it's a type that
account id for example it's a type that
doesn't exactly respond to an actual
doesn't exactly respond to an actual
doesn't exactly respond to an actual
account it's just yeah
account it's just yeah
account it's just yeah
it's just the public key or whatever and
it's just the public key or whatever and
it's just the public key or whatever and
then and then the contract literally
then and then the contract literally
then and then the contract literally
can't can't see any data that it hasn't
can't can't see any data that it hasn't
can't can't see any data that it hasn't
pre-declared as part of its rewrite sets
pre-declared as part of its rewrite sets
pre-declared as part of its rewrite sets
so so there's there's a there's
so so there's there's a there's
so so there's there's a there's
essentially a static data structure on a
essentially a static data structure on a
essentially a static data structure on a
static
static
static
schedule for each transaction set
schedule for each transaction set
schedule for each transaction set
that partitions it into
that partitions it into
that partitions it into
non-overlapping partitions and then run
non-overlapping partitions and then run
non-overlapping partitions and then run
concurrently
so I agree it's a it's a concern it's
so I agree it's a it's a concern it's
something that we have been thinking
something that we have been thinking
something that we have been thinking
quite quite a lot about I don't think
quite quite a lot about I don't think
quite quite a lot about I don't think
most of its contents show up in this cap
most of its contents show up in this cap
most of its contents show up in this cap
I think they show up in in in that the
I think they show up in in in that the
I think they show up in in in that the
cap that talks about the transaction
cap that talks about the transaction
cap that talks about the transaction
life cycle and access to ledger which
life cycle and access to ledger which
life cycle and access to ledger which
will which will be coming later but i
will which will be coming later but i
will which will be coming later but i
can
can
can
reiterate in this cap that there is
reiterate in this cap that there is
reiterate in this cap that there is
essentially
essentially
essentially
where we're we're not going to be
where we're we're not going to be
where we're we're not going to be
supporting the any of the wasm
supporting the any of the wasm
supporting the any of the wasm
multi-threading proposals that are
multi-threading proposals that are
multi-threading proposals that are
floating around in the future for
floating around in the future for
floating around in the future for
running inside one of these vms and that
running inside one of these vms and that
running inside one of these vms and that
the multiple vms that exist inside of a
the multiple vms that exist inside of a
the multiple vms that exist inside of a
host context that are described in this
host context that are described in this
host context that are described in this
cap are intended
cap are intended
cap are intended
to be strictly serial semantics and that
to be strictly serial semantics and that
to be strictly serial semantics and that
all of the objects would be private to
all of the objects would be private to
all of the objects would be private to
that single thread that are described in
that single thread that are described in
that single thread that are described in
this gap so far
okay cool and so everything else other
okay cool and so everything else other
than floating point is like completely
than floating point is like completely
than floating point is like completely
well defined in the wasm spec
well defined in the wasm spec
well defined in the wasm spec
like like if you shift a 32-bit number
like like if you shift a 32-bit number
like like if you shift a 32-bit number
by more than 32 bits like that that's
by more than 32 bits like that that's
by more than 32 bits like that that's
like what does that do for example yeah
like what does that do for example yeah
like what does that do for example yeah
that that's that is that is well defined
that that's that is that is well defined
that that's that is that is well defined
in the lessons back
in the lessons back
in the lessons back
the
the
the
there are as I said there are two
there are as I said there are two
there are as I said there are two
floating point idiosyncrasies they're
floating point idiosyncrasies they're
floating point idiosyncrasies they're
they're actually not the ones you're
they're actually not the ones you're
they're actually not the ones you're
talking about there's some
talking about there's some
talking about there's some
nan normalization
nan normalization
nan normalization
which all the interpreters we've been
which all the interpreters we've been
which all the interpreters we've been
looking at have
looking at have
looking at have
some option for for normalizing bands
some option for for normalizing bands
some option for for normalizing bands
after every operation is just expected
after every operation is just expected
after every operation is just expected
to do
to do
to do
and
and
and
the state of the floating point
the state of the floating point
the state of the floating point
environment flags you have to you know
environment flags you have to you know
environment flags you have to you know
there's there's a hardware environment
there's there's a hardware environment
there's there's a hardware environment
the the floating point environment
the the floating point environment
the the floating point environment
which which control controls the
which which control controls the
which which control controls the
rounding mode and the exception
rounding mode and the exception
rounding mode and the exception
propagation of the exceptions are eager
propagation of the exceptions are eager
propagation of the exceptions are eager
or
or
or



quiet
quiet
quiet
and
and
and
that is assumed that something it's
that is assumed that something it's
that is assumed that something it's
something you have to set and as as a
something you have to set and as as a
something you have to set and as as a
as a host environment you have to set it
as a host environment you have to set it
as a host environment you have to set it
to a particular state before you invoke
to a particular state before you invoke
to a particular state before you invoke
your your wasm code but there's no
your your wasm code but there's no
your your wasm code but there's no
interface for changing it from inside
interface for changing it from inside
interface for changing it from inside
wisely code so
wisely code so
wisely code so
you know so long as we specify what
you know so long as we specify what
you know so long as we specify what
this what the settings of the floating
this what the settings of the floating
this what the settings of the floating
point environment are
point environment are
point environment are
it would be it would be deterministic
it would be it would be deterministic
it would be it would be deterministic
with respect to that it's just that wasm
with respect to that it's just that wasm
with respect to that it's just that wasm
as a spec doesn't define what you will
as a spec doesn't define what you will
as a spec doesn't define what you will
set the floating point environments
set the floating point environments
set the floating point environments
settings too so
settings too so
settings too so
so what happens if you right shift the
so what happens if you right shift the
so what happens if you right shift the
a 32-bit integer by
a 32-bit integer by
a 32-bit integer by
32. I don't know off the top of my
32. I don't know off the top of my
32. I don't know off the top of my
head you'd have to you'd have to look at
head you'd have to you'd have to look at
head you'd have to you'd have to look at
the spec I don't have the glass inspect
the spec I don't have the glass inspect
the spec I don't have the glass inspect
memorized but
memorized but
memorized but
it's
it's
it's
it's it it's very very well well defined
it's it it's very very well well defined
it's it it's very very well well defined
it's one of the most well-defined vms
it's one of the most well-defined vms
it's one of the most well-defined vms
out there I think probably that's ever
out there I think probably that's ever
out there I think probably that's ever
been done
there was something else you were
there was something else you were
asking about though oh yeah yeah
asking about though oh yeah yeah
asking about though oh yeah yeah
everything else he is in wizard is
everything else he is in wizard is
everything else he is in wizard is
very well defined
very well defined
very well defined
the the big caveat in my mind is that
the the big caveat in my mind is that
the the big caveat in my mind is that
there are no host functions specified
there are no host functions specified
there are no host functions specified
here but there are a bunch of host
here but there are a bunch of host
here but there are a bunch of host
functions implied by the data model
functions implied by the data model
functions implied by the data model
right like there's a map and a vector
right like there's a map and a vector
right like there's a map and a vector
and a big num
and a big num
and a big num



and you know you only have those data
and you know you only have those data
and you know you only have those data
values if you expect to have functions
values if you expect to have functions
values if you expect to have functions
that operate on them and
that operate on them and
that operate on them and
a completely reasonable objection that
a completely reasonable objection that
a completely reasonable objection that
caveat that one might have to this cap
caveat that one might have to this cap
caveat that one might have to this cap
is I don't think it's possible to
is I don't think it's possible to
is I don't think it's possible to
specify functions on this
specify functions on this
specify functions on this
data type unambiguously so you know we
data type unambiguously so you know we
data type unambiguously so you know we
should leave it out and I think
should leave it out and I think
should leave it out and I think
that's that's
that's that's
that's that's
particularly when we're talking about
particularly when we're talking about
particularly when we're talking about
cost models that's something I'm
cost models that's something I'm
cost models that's something I'm
somewhat concerned about is making sure
somewhat concerned about is making sure
somewhat concerned about is making sure
that it's that we're only including data
that it's that we're only including data
that it's that we're only including data
types
types
types
about which
about which
about which
we can
we can
we can
plausibly believe that we would be able
plausibly believe that we would be able
plausibly believe that we would be able
to construct correct
to construct correct
to construct correct
or at least worth case cost models for
or at least worth case cost models for
or at least worth case cost models for
any of the reasonable operations that
any of the reasonable operations that
any of the reasonable operations that
would be implied by the presence of that
would be implied by the presence of that
would be implied by the presence of that
data type
data type
data type
so so you know big numbers imply there's
so so you know big numbers imply there's
so so you know big numbers imply there's
going to be big number multiplication
going to be big number multiplication
going to be big number multiplication
can we figure out a reasonable worst
can we figure out a reasonable worst
can we figure out a reasonable worst
case cost model and and make sure that
case cost model and and make sure that
case cost model and and make sure that
that's correct I think we probably
that's correct I think we probably
that's correct I think we probably
can that's why I include big numbers i
can that's why I include big numbers i
can that's why I include big numbers i
think big numbers are reasonably well
think big numbers are reasonably well
think big numbers are reasonably well
studied but
studied but
studied but
you know if if that if that strikes
you know if if that if that strikes
you know if if that if that strikes
at the heart of fear of non-determinism
at the heart of fear of non-determinism
at the heart of fear of non-determinism
or fear of impossibility of bounding
or fear of impossibility of bounding
or fear of impossibility of bounding
cost models I think that's something
cost models I think that's something
cost models I think that's something
that would be a very reasonable
that would be a very reasonable
that would be a very reasonable
sort of point point of debate on on this
sort of point point of debate on on this
sort of point point of debate on on this
cap is like
cap is like
cap is like
please leave this out because it's too
please leave this out because it's too
please leave this out because it's too
scary
itself like actually doing an exercise
itself like actually doing an exercise
to create and enumerate on any of those
to create and enumerate on any of those
to create and enumerate on any of those
in the cap itself
in the cap itself
in the cap itself
or is that something
or is that something
or is that something
that's just a bunch of unnecessary work
that's just a bunch of unnecessary work
that's just a bunch of unnecessary work
I don't I mean the thing is we don't
I don't I mean the thing is we don't
I don't I mean the thing is we don't
really we don't have at least I'm not
really we don't have at least I'm not
really we don't have at least I'm not
so I'm not really expert in cap writing
so I'm not really expert in cap writing
so I'm not really expert in cap writing
but it it seems
but it it seems
but it it seems
it seems to me that we don't have a
it seems to me that we don't have a
it seems to me that we don't have a
section in caps that's sort of like
section in caps that's sort of like
section in caps that's sort of like
miscellaneous discussion or or
miscellaneous discussion or or
miscellaneous discussion or or
speculation and that's really what
speculation and that's really what
speculation and that's really what
we'll be doing there we will be
we'll be doing there we will be
we'll be doing there we will be
speculating forwards to future caps and
speculating forwards to future caps and
speculating forwards to future caps and
saying
saying
saying
and that's what's unusual about this app
and that's what's unusual about this app
and that's what's unusual about this app
is that it is really incomplete it's not
is that it is really incomplete it's not
is that it is really incomplete it's not
it's not a whole feature in and of
it's not a whole feature in and of
it's not a whole feature in and of
itself I say in the preamble to it that
itself I say in the preamble to it that
itself I say in the preamble to it that
there's actually nothing new that a user
there's actually nothing new that a user
there's actually nothing new that a user
can use here which is a little bit weird
can use here which is a little bit weird
can use here which is a little bit weird
for cap
for cap
for cap
and so it might make sense to include in
and so it might make sense to include in
and so it might make sense to include in
that preamble or in the context or
that preamble or in the context or
that preamble or in the context or
justification section or something like
justification section or something like
justification section or something like
that a little bit of forward speculation
that a little bit of forward speculation
that a little bit of forward speculation
about you know we assume that the
about you know we assume that the
about you know we assume that the
following things are going to come
following things are going to come
following things are going to come
they'll probably look a little bit like
they'll probably look a little bit like
they'll probably look a little bit like
this but we're not specifying them here
this but we're not specifying them here
this but we're not specifying them here
it's just like for context if if you
it's just like for context if if you
it's just like for context if if you
like I'm happy to add that
like I'm happy to add that
like I'm happy to add that
no it's okay I think we are going to
no it's okay I think we are going to
no it's okay I think we are going to
have those other caps like the host
have those other caps like the host
have those other caps like the host
function cap for example is one that we
function cap for example is one that we
function cap for example is one that we
need to
need to
need to
to kind of lay out as well right
and we have a different cap I think that
and we have a different cap I think that
would be around
would be around
would be around
the
the
the
cost model and things like that limits
cost model and things like that limits
cost model and things like that limits
and cost models
so it's all it's fine it's more like
so it's all it's fine it's more like
yeah
yeah
yeah
it's one that's like being covered in
it's one that's like being covered in
it's one that's like being covered in
separate caps right now yeah like we
separate caps right now yeah like we
separate caps right now yeah like we
started to do that with feedex actually
started to do that with feedex actually
started to do that with feedex actually
the whole like split up you know like
the whole like split up you know like
the whole like split up you know like
an actual protocol into many pieces
an actual protocol into many pieces
an actual protocol into many pieces
so that we have like
so that we have like
so that we have like
parts that we can think about
parts that we can think about
parts that we can think about
discuss
discuss
discuss



and there will be some some of that here
and there will be some some of that here
and there will be some some of that here
as well of course
as well of course
as well of course
I think we want probably
I think we want probably
I think we want probably
yeah now is going to say real
yeah now is going to say real
yeah now is going to say real
quick like yeah I think we want to
quick like yeah I think we want to
quick like yeah I think we want to
leave some time to also talk about the
leave some time to also talk about the
leave some time to also talk about the
other topic for today
so yeah david you have another question
so yeah david you have another question
oh yeah
oh yeah
oh yeah
what
what
what
so I guess I'm also trying to
so I guess I'm also trying to
so I guess I'm also trying to
understand like so you can have like a
understand like so you can have like a
understand like so you can have like a
30-pin number either as a value or as an
30-pin number either as a value or as an
30-pin number either as a value or as an
object
a 32-bit number there's no there's
a 32-bit number there's no there's
no object type for a 32-bit number
no object type for a 32-bit number
no object type for a 32-bit number
there's only there's only a version
there's only there's only a version
there's only there's only a version
embedded in value because it always fits
embedded in value because it always fits
embedded in value because it always fits
in value value is the 64-bit type with
in value value is the 64-bit type with
in value value is the 64-bit type with
the tag union on it so there's no reason
the tag union on it so there's no reason
the tag union on it so there's no reason
to ever
to ever
to ever
box it essentially


sorry so you have this part where you
sorry so you have this part where you
sorry so you have this part where you
say like the only the data values that
say like the only the data values that
say like the only the data values that
are shared are 32 and 64-bit numbers
are shared are 32 and 64-bit numbers
are shared are 32 and 64-bit numbers
floating point in integer and then you
floating point in integer and then you
floating point in integer and then you
have these like tag types that include a
have these like tag types that include a
have these like tag types that include a
30
30
30
a 63-bit positive number and like
a 63-bit positive number and like
a 63-bit positive number and like
a 32-bit unsigned integer
a 32-bit unsigned integer
a 32-bit unsigned integer
and 32-bit signed integers so how do
and 32-bit signed integers so how do
and 32-bit signed integers so how do
those
those
those
like what's the relationship between
like what's the relationship between
like what's the relationship between
those and like the fundamental values
those and like the fundamental values
those and like the fundamental values
then I see okay yeah yeah sure
then I see okay yeah yeah sure
then I see okay yeah yeah sure
happy to talk about that so so the
happy to talk about that so so the
happy to talk about that so so the
the
the
the
the
the
the
point that you're reading that says
point that you're reading that says
point that you're reading that says
there are exactly four types of data
there are exactly four types of data
there are exactly four types of data
values shared between guest and host
values shared between guest and host
values shared between guest and host
I'm maybe being splitting hairs in
I'm maybe being splitting hairs in
I'm maybe being splitting hairs in
terminology here a little bit these are
terminology here a little bit these are
terminology here a little bit these are
these are essentially the data values
these are essentially the data values
these are essentially the data values
mandated by the wasm interface so these
mandated by the wasm interface so these
mandated by the wasm interface so these
are the only possible data values
are the only possible data values
are the only possible data values



there's there's no way for us to talk
there's there's no way for us to talk
there's there's no way for us to talk
about a data value that is not one of
about a data value that is not one of
about a data value that is not one of
those four when we're when we're calling
those four when we're when we're calling
those four when we're when we're calling
a function for example and passing
a function for example and passing
a function for example and passing
arguments the only argument types are
arguments the only argument types are
arguments the only argument types are
those four
those four
those four
so
so
so
well I see what you're saying we don't
well I see what you're saying we don't
well I see what you're saying we don't
have for example a 64-bit integer like
have for example a 64-bit integer like
have for example a 64-bit integer like
like we we even though we can pass a
like we we even though we can pass a
like we we even though we can pass a
64-bit integer we always interpret it as
64-bit integer we always interpret it as
64-bit integer we always interpret it as
one of these tagged things
one of these tagged things
one of these tagged things
yeah so so what comes what comes later
yeah so so what comes what comes later
yeah so so what comes what comes later
on is is and I should I should
on is is and I should I should
on is is and I should I should
actually clarify sort of that layering
actually clarify sort of that layering
actually clarify sort of that layering
here is that we're we're picking just
here is that we're we're picking just
here is that we're we're picking just
the 64-bit type we're actually only
the 64-bit type we're actually only
the 64-bit type we're actually only
using the in n64
using the in n64
using the in n64
and we're saying every value we pass
and we're saying every value we pass
and we're saying every value we pass
back and forth is going to be an n64 and
back and forth is going to be an n64 and
back and forth is going to be an n64 and
we're going to use it as a tag union
we're going to use it as a tag union
we're going to use it as a tag union
inside of itself to carry a bunch of
inside of itself to carry a bunch of
inside of itself to carry a bunch of
different stuff so some of which can be
different stuff so some of which can be
different stuff so some of which can be
a 32 some of which can be an object
a 32 some of which can be an object
a 32 some of which can be an object
reference which can be a small symbol
reference which can be a small symbol
reference which can be a small symbol
there's a bunch of little values in
there's a bunch of little values in
there's a bunch of little values in
there
well should we move on and talk about
well should we move on and talk about
the next agenda item which is
the next agenda item which is
the next agenda item which is
interoperability
there are a couple of questions here
there are a couple of questions here
that I think
that I think
that I think
yeah I think we can ask more questions
yeah I think we can ask more questions
yeah I think we can ask more questions
on the dev meeting list on the on the
on the dev meeting list on the on the
on the dev meeting list on the on the
runtime
all right cool let's let's switch
all right cool let's let's switch
topics then
topics then
topics then
so
so
so
excuse me
excuse me
excuse me
on the topic of interoperability
on the topic of interoperability
on the topic of interoperability
my questions kind of come back to the
my questions kind of come back to the
my questions kind of come back to the
same kind of thing that david opened up
same kind of thing that david opened up
same kind of thing that david opened up
with which was like what are the
with which was like what are the
with which was like what are the
requirements
requirements
requirements
i've been thinking about this for you
i've been thinking about this for you
i've been thinking about this for you
know the last like 10 days or whatever
know the last like 10 days or whatever
know the last like 10 days or whatever
at this point
at this point
at this point
but it's really really vague what we
but it's really really vague what we
but it's really really vague what we
what we actually want
what we actually want
what we actually want
and one of the big questions that we
and one of the big questions that we
and one of the big questions that we
keep coming back to that keeps coming up
keep coming back to that keeps coming up
keep coming back to that keeps coming up
in conversations I'm involved in is like
in conversations I'm involved in is like
in conversations I'm involved in is like
what should a smart contract fund seller
what should a smart contract fund seller
what should a smart contract fund seller
be
be
be
able to do and one of the examples that
able to do and one of the examples that
able to do and one of the examples that
you know keeps coming up is like
you know one of the things that becomes
you know one of the things that becomes
very centralized on seller today is
very centralized on seller today is
very centralized on seller today is
managing the authorization for an asset
managing the authorization for an asset
managing the authorization for an asset
you know like what if you want to have
you know like what if you want to have
you know like what if you want to have
like a daily transfer limit or something
like a daily transfer limit or something
like a daily transfer limit or something
like that like these are things that are
like that like these are things that are
like that like these are things that are
really annoying to do
really annoying to do
really annoying to do
because it all has to be done to like
because it all has to be done to like
because it all has to be done to like
a central server etc
a central server etc
a central server etc
but a smart contract could fulfill
but a smart contract could fulfill
but a smart contract could fulfill
this role in theory
this role in theory
this role in theory
do we do we want to make it easy for
do we do we want to make it easy for
do we do we want to make it easy for
smart contracts to do this stuff where
smart contracts to do this stuff where
smart contracts to do this stuff where
basically they become like a gatekeeper
basically they become like a gatekeeper
basically they become like a gatekeeper
to classic
to classic
to classic
or do we want to not make that easy and
or do we want to not make that easy and
or do we want to not make that easy and
basically say like hey
basically say like hey
basically say like hey
if you want to build these kinds of
if you want to build these kinds of
if you want to build these kinds of
things just build them entirely and
things just build them entirely and
things just build them entirely and
smart and get the features there
smart and get the features there
smart and get the features there



and these are the kinds of questions I'm
and these are the kinds of questions I'm
and these are the kinds of questions I'm
interested in the high level and there's
interested in the high level and there's
interested in the high level and there's
more to like how this is structured but
more to like how this is structured but
more to like how this is structured but
first let's just open this up like
first let's just open this up like
first let's just open this up like
do we think those kinds of things should
do we think those kinds of things should
do we think those kinds of things should
be possible or should we just say like
be possible or should we just say like
be possible or should we just say like
hey just like do that in smart
and and to help me like understand
and and to help me like understand
that the actual question on this like
that the actual question on this like
that the actual question on this like
like like the low level type of you
like like the low level type of you
like like the low level type of you
know super granular
know super granular
know super granular
access control example
access control example
access control example
like
like
like
the question there is like should people
the question there is like should people
the question there is like should people
be able to do like a
be able to do like a
be able to do like a
normal like classic looking payment and
normal like classic looking payment and
normal like classic looking payment and
it still ends up being gated by some
it still ends up being gated by some
it still ends up being gated by some
smart contract is that what the question
smart contract is that what the question
smart contract is that what the question
is I can supply an example but
is I can supply an example but
is I can supply an example but
I mean understand the use case it's more
I mean understand the use case it's more
I mean understand the use case it's more
like in terms of the
like in terms of the
like in terms of the
what is the the question on the
what is the the question on the
what is the the question on the
how is that really related to classic i
how is that really related to classic i
how is that really related to classic i
guess i
guess i
guess i
I guess the way that I'm I'm imagining
I guess the way that I'm I'm imagining
I guess the way that I'm I'm imagining
any of this stuff working is like
any of this stuff working is like
any of this stuff working is like
anything that comes through like
anything that comes through like
anything that comes through like
anything that a smart contract is
anything that a smart contract is
anything that a smart contract is
involved in originates on the smart
involved in originates on the smart
involved in originates on the smart
contract side so you'd imagine basically
contract side so you'd imagine basically
contract side so you'd imagine basically
saying okay i'd like to make this
saying okay i'd like to make this
saying okay i'd like to make this
payment but then the smart contract does
payment but then the smart contract does
payment but then the smart contract does
everything all the operations and stuff
everything all the operations and stuff
everything all the operations and stuff
it's basically just a gatekeeper it's
it's basically just a gatekeeper it's
it's basically just a gatekeeper it's
like okay like you can do this then it
like okay like you can do this then it
like okay like you can do this then it
goes and you know issues the allow trust
goes and you know issues the allow trust
goes and you know issues the allow trust
and then it issues the payment
and then it issues the payment
and then it issues the payment
and then you know it issues the revoked
and then you know it issues the revoked
and then you know it issues the revoked
trust and etc and it does all of that on
trust and etc and it does all of that on
trust and etc and it does all of that on
the native on the classic side basically
the native on the classic side basically
the native on the classic side basically
controlled by smart so you don't submit
controlled by smart so you don't submit
controlled by smart so you don't submit
a classic payment anymore but everything
a classic payment anymore but everything
a classic payment anymore but everything
is kind of happening classically
is kind of happening classically
is kind of happening classically
including all this allow trust stuff
including all this allow trust stuff
including all this allow trust stuff
which adds a lot of complexity as we
which adds a lot of complexity as we
which adds a lot of complexity as we
know
know
know
so
so
so
I think like the payment alone is
I think like the payment alone is
I think like the payment alone is
kind of an essential building block you
kind of an essential building block you
kind of an essential building block you
can't you can't have classic
can't you can't have classic
can't you can't have classic
you can't have smart and classic like
you can't have smart and classic like
you can't have smart and classic like
not even be connected by payments that
not even be connected by payments that
not even be connected by payments that
like that wouldn't make any sense but
like that wouldn't make any sense but
like that wouldn't make any sense but
the other stuff you know you know
the other stuff you know you know
the other stuff you know you know
managing trust lines managing signers
managing trust lines managing signers
managing trust lines managing signers
managing authorization all this other
managing authorization all this other
managing authorization all this other
stuff do we want to do we want to allow
stuff do we want to do we want to allow
stuff do we want to do we want to allow
that or do we want to just say hey i
that or do we want to just say hey i
that or do we want to just say hey i
can't do that from smart
can't do that from smart
can't do that from smart
I mean I think that yeah this is exactly
I mean I think that yeah this is exactly
I mean I think that yeah this is exactly
getting to the to the core of like what
getting to the to the core of like what
getting to the to the core of like what
why I want the requirements that can be
why I want the requirements that can be
why I want the requirements that can be
because like one thing that like
because like one thing that like
because like one thing that like
so definitely like managing trust lines
so definitely like managing trust lines
so definitely like managing trust lines
and allow trust is like a big pain it's
and allow trust is like a big pain it's
and allow trust is like a big pain it's
like something you might want to do is
like something you might want to do is
like something you might want to do is
write a little smart contract says that
write a little smart contract says that
write a little smart contract says that
you know if so-and-so has authorized you
you know if so-and-so has authorized you
you know if so-and-so has authorized you
to like hold their asset then like you
to like hold their asset then like you
to like hold their asset then like you
can automatically hold my asset right
can automatically hold my asset right
can automatically hold my asset right



so like is that the kind of thing we
so like is that the kind of thing we
so like is that the kind of thing we
want to support and if so that requires
want to support and if so that requires
want to support and if so that requires
like a fair fair amount of like a fairly
like a fair fair amount of like a fairly
like a fair fair amount of like a fairly
wide interface between smart and classic
wide interface between smart and classic
wide interface between smart and classic
right
right
right
you know my bias a priori would be to
you know my bias a priori would be to
you know my bias a priori would be to
say that we actually want that
say that we actually want that
say that we actually want that
because
because
because
at the end of the day we want
at the end of the day we want
at the end of the day we want
you know
you know
you know
we want as much we want transactions to
we want as much we want transactions to
we want as much we want transactions to
be as cheap as possible because that's
be as cheap as possible because that's
be as cheap as possible because that's
always been kind of the Stellar way and
always been kind of the Stellar way and
always been kind of the Stellar way and
so
so
so
the more we can kind of like leverage
the more we can kind of like leverage
the more we can kind of like leverage
stuff that's implemented in c plus plus
stuff that's implemented in c plus plus
stuff that's implemented in c plus plus
and it's potentially sort of optimizable
and it's potentially sort of optimizable
and it's potentially sort of optimizable
through
through
through
maybe even future things like speed x
maybe even future things like speed x
maybe even future things like speed x
like the better it also of course
like the better it also of course
like the better it also of course
makes it easier to debug it's you know
makes it easier to debug it's you know
makes it easier to debug it's you know
makes interoperability better because
makes interoperability better because
makes interoperability better because
everyone's speaking like the same
everyone's speaking like the same
everyone's speaking like the same
language
language
language
using the same objects but again it
using the same objects but again it
using the same objects but again it
boils down to requirements
boils down to requirements
boils down to requirements
so I can you know while we don't have
so I can you know while we don't have
so I can you know while we don't have
this document of requirements I'm happy
this document of requirements I'm happy
this document of requirements I'm happy
to throw some out there you know a one
to throw some out there you know a one
to throw some out there you know a one
of the things that are very important
of the things that are very important
of the things that are very important
for our ecosystem is that
for our ecosystem is that
for our ecosystem is that
existing services
existing services
existing services
and existing stakeholders
and existing stakeholders
and existing stakeholders
don't become deprecated so we're talking
don't become deprecated so we're talking
don't become deprecated so we're talking
mostly about
mostly about
mostly about
exchanges about issuers like circle we
exchanges about issuers like circle we
exchanges about issuers like circle we
want to make sure that their asset is
want to make sure that their asset is
want to make sure that their asset is
still viable and fully functional with
still viable and fully functional with
still viable and fully functional with
you know the new smart
you know the new smart
you know the new smart



world
world
world
now
now
now
what extent is it just like a user just
what extent is it just like a user just
what extent is it just like a user just
like you know moves their value into the
like you know moves their value into the
like you know moves their value into the
smart world and then like it's a whole
smart world and then like it's a whole
smart world and then like it's a whole
different primitives
different primitives
different primitives
I don't know that's kind of like what we
I don't know that's kind of like what we
I don't know that's kind of like what we
need to figure out
need to figure out
need to figure out
but we do want people to be able to
but we do want people to be able to
but we do want people to be able to
issue smart assets as well that is
issue smart assets as well that is
issue smart assets as well that is
you know a lot of people a lot of
you know a lot of people a lot of
you know a lot of people a lot of
issuers are using things like sep 8
issuers are using things like sep 8
issuers are using things like sep 8
today to do
today to do
today to do
things like you know various velocity
things like you know various velocity
things like you know various velocity
limits or like minimum balance on their
limits or like minimum balance on their
limits or like minimum balance on their
native asset on their issued asset
native asset on their issued asset
native asset on their issued asset
limits and today that it requires a
limits and today that it requires a
limits and today that it requires a
lot of finagling
lot of finagling
lot of finagling
it would be great for people to be
it would be great for people to be
it would be great for people to be
issued to be able to issue them similar
issued to be able to issue them similar
issued to be able to issue them similar
to how erc20 tokens are issued
to how erc20 tokens are issued
to how erc20 tokens are issued
so but we could keep step eight so
so but we could keep step eight so
so but we could keep step eight so
in other words like there would be a new
in other words like there would be a new
in other words like there would be a new
signer type which would be like the
signer type which would be like the
signer type which would be like the
smart contract endorses and then you
smart contract endorses and then you
smart contract endorses and then you
could just kind of like do it through
could just kind of like do it through
could just kind of like do it through
the smart contract but like we would
the smart contract but like we would
the smart contract but like we would
keep the same framework
keep the same framework
keep the same framework
or not right yeah I think we're like i
or not right yeah I think we're like i
or not right yeah I think we're like i
think I think you're getting into
think I think you're getting into
think I think you're getting into
implementation here I just I'm
implementation here I just I'm
implementation here I just I'm
getting into
getting into
getting into
the
the
the
how you choose this actually affects cap
how you choose this actually affects cap
how you choose this actually affects cap
46 like whether certain things are a
46 like whether certain things are a
46 like whether certain things are a
good idea or not or what base objects we
good idea or not or what base objects we
good idea or not or what base objects we
might want to have supported
might want to have supported
might want to have supported
and so
and so
and so






you know like for example one thing that
you know like for example one thing that
you know like for example one thing that
is not in here is any kind of
is not in here is any kind of
is not in here is any kind of
capability right
capability right
capability right
that I can tell
that I can tell
that I can tell
so like if
so like if
so like if
if like a smart contract wanted to like
if like a smart contract wanted to like
if like a smart contract wanted to like
invoke some privilege or sign some other
invoke some privilege or sign some other
invoke some privilege or sign some other
transaction there'd be no way to do
transaction there'd be no way to do
transaction there'd be no way to do
that
that
that
maybe maybe privileges or or whatever
maybe maybe privileges or or whatever
maybe maybe privileges or or whatever
you want to call them need to be some a
you want to call them need to be some a
you want to call them need to be some a
kind of first-class thing
my privileges here do you mean like a
my privileges here do you mean like a
contract has the privilege to do a
contract has the privilege to do a
contract has the privilege to do a
certain action on a certain account that
certain action on a certain account that
certain action on a certain account that
is not the contracts account
is not the contracts account
is not the contracts account
or it has a certain signing weight or
or it has a certain signing weight or
or it has a certain signing weight or
something yeah exactly yeah this gets
something yeah exactly yeah this gets
something yeah exactly yeah this gets
into the like the second part of my
into the like the second part of my
into the like the second part of my
question in the document which is like
question in the document which is like
question in the document which is like
the relationship between my contract
the relationship between my contract
the relationship between my contract
signers accounts
signers accounts
signers accounts



and like lee has proposed this is lee
and like lee has proposed this is lee
and like lee has proposed this is lee
here
here
here
I don't know
I don't know
I don't know
yes
yes
yes



so leah's kind of proposed this model
so leah's kind of proposed this model
so leah's kind of proposed this model
where like maybe a contract should be a
where like maybe a contract should be a
where like maybe a contract should be a
signer
signer
signer
in some sense like if a contract can
in some sense like if a contract can
in some sense like if a contract can
generally control an accounts trust
generally control an accounts trust
generally control an accounts trust
lines data entries whatever the account
lines data entries whatever the account
lines data entries whatever the account
itself then it should be a signer on
itself then it should be a signer on
itself then it should be a signer on
that account and for a variety of
that account and for a variety of
that account and for a variety of
reasons maybe it should be the only
reasons maybe it should be the only
reasons maybe it should be the only
signer with any weight on that account
signer with any weight on that account
signer with any weight on that account
so it has like exclusive control
so it has like exclusive control
so it has like exclusive control
but in this world like you could
but in this world like you could
but in this world like you could
still imagine the kind of case where you
still imagine the kind of case where you
still imagine the kind of case where you
want like a one-off right like I want to
want like a one-off right like I want to
want like a one-off right like I want to
allow this contract to like withdraw
allow this contract to like withdraw
allow this contract to like withdraw
funds from my account right now a
funds from my account right now a
funds from my account right now a
certain amount that I believe is going
certain amount that I believe is going
certain amount that I believe is going
to be withdrawn like 100 or something
to be withdrawn like 100 or something
to be withdrawn like 100 or something



and this gets like a little weirder
and this gets like a little weirder
and this gets like a little weirder
it's like well what do you do do you
it's like well what do you do do you
it's like well what do you do do you
say like okay like the transaction that
say like okay like the transaction that
say like okay like the transaction that
runs the smart contract invocation
runs the smart contract invocation
runs the smart contract invocation



like the account signs that transaction
like the account signs that transaction
like the account signs that transaction
and that's what gives it the
and that's what gives it the
and that's what gives it the
authorization but how do you be certain
authorization but how do you be certain
authorization but how do you be certain
that the con that the smart contract
that the con that the smart contract
that the con that the smart contract
invocation at the time you actually run
invocation at the time you actually run
invocation at the time you actually run
it is going to do the thing that you
it is going to do the thing that you
it is going to do the thing that you
thought it would do
thought it would do
thought it would do
it's a little different from like you
it's a little different from like you
it's a little different from like you
know a seller contract where you're like
know a seller contract where you're like
know a seller contract where you're like
this is a payment for fifty dollars
this is a payment for fifty dollars
this is a payment for fifty dollars
signed
signed
signed
and that's where I think these kinds of
and that's where I think these kinds of
and that's where I think these kinds of
privileges come in like either you give
privileges come in like either you give
privileges come in like either you give
the account like one off control of your
the account like one off control of your
the account like one off control of your
entire account at that signing weight to
entire account at that signing weight to
entire account at that signing weight to
do anything you know you say medium well
do anything you know you say medium well
do anything you know you say medium well
I can do anything at medium whatever it
I can do anything at medium whatever it
I can do anything at medium whatever it
wants or do you need some better control
wants or do you need some better control
wants or do you need some better control
I don't know
I don't know
I don't know
what do you think about this david
what do you think about this david
what do you think about this david



I mean yeah I think that that it cannot
I mean yeah I think that that it cannot
I mean yeah I think that that it cannot
sound like a broken record but like
sound like a broken record but like
sound like a broken record but like
there are many possible answers here
there are many possible answers here
there are many possible answers here
you know in a priori without having the
you know in a priori without having the
you know in a priori without having the
context requirements might my kind of
context requirements might my kind of
context requirements might my kind of
inclination would be to
inclination would be to
inclination would be to



you know to to make privilege something
you know to to make privilege something
you know to to make privilege something



people tend to run into problems with
people tend to run into problems with
people tend to run into problems with
like ambient authority right when it's
like ambient authority right when it's
like ambient authority right when it's
sort of like any time you do something
sort of like any time you do something
sort of like any time you do something
it's like if there's any possible way
it's like if there's any possible way
it's like if there's any possible way
you're allowed to do it like you can you
you're allowed to do it like you can you
you're allowed to do it like you can you
can do it right think of all these like
can do it right think of all these like
can do it right think of all these like
time of check the time of use bugs and
time of check the time of use bugs and
time of check the time of use bugs and
stuff that that that happen in unix and
stuff that that that happen in unix and
stuff that that that happen in unix and
so to have some notion that that that a
so to have some notion that that that a
so to have some notion that that that a
smart contract has privileges and then
smart contract has privileges and then
smart contract has privileges and then
it needs to explicitly invoke particular
it needs to explicitly invoke particular
it needs to explicitly invoke particular
privileges like maybe there's a smart
privileges like maybe there's a smart
privileges like maybe there's a smart
contract that has
contract that has
contract that has
we wanted to have power over two
we wanted to have power over two
we wanted to have power over two
accounts and so it has two different
accounts and so it has two different
accounts and so it has two different
privileges and when it's doing something
privileges and when it's doing something
privileges and when it's doing something
we want to literally specify which of
we want to literally specify which of
we want to literally specify which of
those two privileges it wants to do
those two privileges it wants to do
those two privileges it wants to do
to avoid you know a kind of confused
to avoid you know a kind of confused
to avoid you know a kind of confused
deputy problem
so
so
without knowing the requirements I would
without knowing the requirements I would
without knowing the requirements I would
say like I would like to
say like I would like to
say like I would like to
I I it seems to me like maybe a good
I I it seems to me like maybe a good
I I it seems to me like maybe a good
idea to have privileges be like a really
idea to have privileges be like a really
idea to have privileges be like a really
explicit thing
explicit thing
explicit thing

but again
but again
it's a little abstract right now yeah
it's a little abstract right now yeah
it's a little abstract right now yeah
definitely if I can just chime in on on
definitely if I can just chime in on on
definitely if I can just chime in on on
one thing with respect to
one thing with respect to
one thing with respect to
vocabularies and cat 46
vocabularies and cat 46
vocabularies and cat 46



this is just a minimal prefix right this
this is just a minimal prefix right this
this is just a minimal prefix right this
is this is this the set of host objects
is this is this the set of host objects
is this is this the set of host objects
we can think of right now so you get to
we can think of right now so you get to
we can think of right now so you get to
add new ones in the future if
we don't we don't have to have a
we don't we don't have to have a
complete list for this that's all I'm
complete list for this that's all I'm
complete list for this that's all I'm
saying
sure but you know
sure but you know
getting the getting the sort of
getting the getting the sort of
getting the getting the sort of
privilege model right from the start is
privilege model right from the start is
privilege model right from the start is
probably a good idea like I don't know
probably a good idea like I don't know
probably a good idea like I don't know
there's I mean there's no concept of a
there's I mean there's no concept of a
there's I mean there's no concept of a
privileged operation here because there
privileged operation here because there
privileged operation here because there
are no operations so we don't yeah all
are no operations so we don't yeah all
are no operations so we don't yeah all
I'm saying is we don't have to worry
I'm saying is we don't have to worry
I'm saying is we don't have to worry
about the weather privileges are
about the weather privileges are
about the weather privileges are
properly modeled in this cap we can say
properly modeled in this cap we can say
properly modeled in this cap we can say
that is a thing we have to decide but
that is a thing we have to decide but
that is a thing we have to decide but
doesn't necessarily hold this gap
doesn't necessarily hold this gap
doesn't necessarily hold this gap
one one thing on the topic of
one one thing on the topic of
one one thing on the topic of
privileges that I think is relevant here
privileges that I think is relevant here
privileges that I think is relevant here
is like the bigger we make the like
is like the bigger we make the like
is like the bigger we make the like
interop surface area
interop surface area
interop surface area
the more complicated the privileged
the more complicated the privileged
the more complicated the privileged
system has to be if the privileged
system has to be if the privileged
system has to be if the privileged
system basically amounts to like
system basically amounts to like
system basically amounts to like
you can only make payments then it's
you can only make payments then it's
you can only make payments then it's
like okay like how much payment can i
like okay like how much payment can i
like okay like how much payment can i
make from what account to what account
make from what account to what account
make from what account to what account
for what asset that's like the whole
for what asset that's like the whole
for what asset that's like the whole
space I think it's sort of unless that's
space I think it's sort of unless that's
space I think it's sort of unless that's
right
right
right
it gets a little bit yeah more
it gets a little bit yeah more
it gets a little bit yeah more
complicated about that and like
complicated about that and like
complicated about that and like
you know do we say that you can just
you know do we say that you can just
you know do we say that you can just
do payments or do we say that you can do
do payments or do we say that you can do
do payments or do we say that you can do
payments at frequency or like had
payments at frequency or like had
payments at frequency or like had
the the number of cases like we're
the the number of cases like we're
the the number of cases like we're
almost saying that permissions are
almost saying that permissions are
almost saying that permissions are
almost a contract
almost a contract
almost a contract
that you can implement
that you can implement
that you can implement
so
so
so
like we've talked about privileges
like we've talked about privileges
like we've talked about privileges
and permissions before but I don't think
and permissions before but I don't think
and permissions before but I don't think
we've really talked about
we've really talked about
we've really talked about



how do we make it so that people can
how do we make it so that people can
how do we make it so that people can
innovate on them because you know we
innovate on them because you know we
innovate on them because you know we
could define some basic privileges
could define some basic privileges
could define some basic privileges
but then people will be stuck sort of
but then people will be stuck sort of
but then people will be stuck sort of
what they have today with classic
what they have today with classic
what they have today with classic
Stellar that they'll be limitations that
Stellar that they'll be limitations that
Stellar that they'll be limitations that
they're trying to like work around
they're trying to like work around
they're trying to like work around
or you know they end up just going
or you know they end up just going
or you know they end up just going
and building their own erc20 like
and building their own erc20 like
and building their own erc20 like
contract just to completely replace the
contract just to completely replace the
contract just to completely replace the
entire system because the permissions
entire system because the permissions
entire system because the permissions
don't give them access to what they want
don't give them access to what they want
don't give them access to what they want
to do
to do
to do
I mean I guess one of the things I'm
I mean I guess one of the things I'm
I mean I guess one of the things I'm
saying is that Stellar actually does
saying is that Stellar actually does
saying is that Stellar actually does
already have a notion of permissions
already have a notion of permissions
already have a notion of permissions
or a privilege that's called signing
or a privilege that's called signing
or a privilege that's called signing
weight and so we haven't really sort of
weight and so we haven't really sort of
weight and so we haven't really sort of
formalized it or maybe like expressed it
formalized it or maybe like expressed it
formalized it or maybe like expressed it
this way
this way
this way
but
but
but
you know the the the you know with
you know the the the you know with
you know the the the you know with
without knowing you know as as a first
without knowing you know as as a first
without knowing you know as as a first
draft we probably want
draft we probably want
draft we probably want
privilege we probably want to like you
privilege we probably want to like you
privilege we probably want to like you
know
know
know
use that exact same structure and not
use that exact same structure and not
use that exact same structure and not
introduce something new like where
introduce something new like where
introduce something new like where
things tend to go wrong is if there's
things tend to go wrong is if there's
things tend to go wrong is if there's
like two different
like two different
like two different
you know ways of
you know ways of
you know ways of
talking about two different privileged
talking about two different privileged
talking about two different privileged
systems that are kind of operating on
systems that are kind of operating on
systems that are kind of operating on
the same objects then you get like weird
the same objects then you get like weird
the same objects then you get like weird
loopholes where people can
loopholes where people can
loopholes where people can
you know there's like a gap between the
you know there's like a gap between the
you know there's like a gap between the
two that can that can maybe be exploited
two that can that can maybe be exploited
two that can that can maybe be exploited
so
so
so



but the signing weight is it's a really
but the signing weight is it's a really
but the signing weight is it's a really
really weak privilege system that's what
really weak privilege system that's what
really weak privilege system that's what
I was talking about at the beginning of
I was talking about at the beginning of
I was talking about at the beginning of
this where it's like
this where it's like
this where it's like
I'm I'm authorizing a contract to do
I'm I'm authorizing a contract to do
I'm I'm authorizing a contract to do
stuff to my account at medium signing
stuff to my account at medium signing
stuff to my account at medium signing
rate
rate
rate
what am I authorizing it to do though
what am I authorizing it to do though
what am I authorizing it to do though
like
like
like
unless i've audited the code the
unless i've audited the code the
unless i've audited the code the
contract might do anything it's way more
contract might do anything it's way more
contract might do anything it's way more
complicated than
complicated than
complicated than
looking at a set of opera listeners
looking at a set of opera listeners
looking at a set of opera listeners
contract is code so this can only do
contract is code so this can only do
contract is code so this can only do
what the code can do right so sure sure
what the code can do right so sure sure
what the code can do right so sure sure
but I mean like what it might do could
but I mean like what it might do could
but I mean like what it might do could
be complicated
be complicated
be complicated
it might actually even be very difficult
it might actually even be very difficult
it might actually even be very difficult
for me to predict at the time that i
for me to predict at the time that i
for me to predict at the time that i
signed the transaction like imagine a
signed the transaction like imagine a
signed the transaction like imagine a
contract where it has two functions
contract where it has two functions
contract where it has two functions
one function is
one function is
one function is
hey set a number and the other function
hey set a number and the other function
hey set a number and the other function
is hey whatever number was set most
is hey whatever number was set most
is hey whatever number was set most
recently
recently
recently
extract that amount from my account and
extract that amount from my account and
extract that amount from my account and
send it to the contract
send it to the contract
send it to the contract
I there's no way I can know what the
I there's no way I can know what the
I there's no way I can know what the
contract is going to do when I sign for
contract is going to do when I sign for
contract is going to do when I sign for
it but at the time you add that contract
it but at the time you add that contract
it but at the time you add that contract
at the time you give that contract
at the time you give that contract
at the time you give that contract
signing weight on your account there's
signing weight on your account there's
signing weight on your account there's
presumably
presumably
presumably
some
some
some
some reason for that right
some reason for that right
some reason for that right
I mean you decided you wanted to this
I mean you decided you wanted to this
I mean you decided you wanted to this
contract have access to your account
sure yeah but like I don't necessarily
sure yeah but like I don't necessarily
want to give it unfettered control over
want to give it unfettered control over
want to give it unfettered control over
my account right
my account right
my account right
or even very strong the contract is code
or even very strong the contract is code
or even very strong the contract is code
right so the contract does what the
right so the contract does what the
right so the contract does what the
contract does and you decide whether or
contract does and you decide whether or
contract does and you decide whether or
not you want that to have access to your
not you want that to have access to your
not you want that to have access to your
account right if if if the only thing
account right if if if the only thing
account right if if if the only thing
if the only thing a contract does
if the only thing a contract does
if the only thing a contract does
is
is
is
you know manipulate the the
you know manipulate the the
you know manipulate the the
authorized flag on trust lines then
authorized flag on trust lines then
authorized flag on trust lines then
you look at the code you say great like
you look at the code you say great like
you look at the code you say great like
I don't have to worry about this
I don't have to worry about this
I don't have to worry about this
draining all my lumens by
draining all my lumens by
draining all my lumens by
signing like huge account fees what if
signing like huge account fees what if
signing like huge account fees what if
the account is what if the contract is
the account is what if the contract is
the account is what if the contract is
mutable
well okay so that's something that
well okay so that's something that
needs to be driven by the requirements
needs to be driven by the requirements
needs to be driven by the requirements
document do we need mutable contracts
document do we need mutable contracts
document do we need mutable contracts
right general consensus in this room
right general consensus in this room
right general consensus in this room
is yes what
is yes what
is yes what
that question there's general consensus
that question there's general consensus
that question there's general consensus
on in this room and the answer is yes
on in this room and the answer is yes
on in this room and the answer is yes
okay well I need to be convinced like
okay well I need to be convinced like
okay well I need to be convinced like
I'm not saying that you can't but don't
I'm not saying that you can't but don't
I'm not saying that you can't but don't
show me the requirements that tell us we
show me the requirements that tell us we
show me the requirements that tell us we
want that what we want cannot be
want that what we want cannot be
want that what we want cannot be
achieved through like
achieved through like
achieved through like
multiple releases of a contract it's
multiple releases of a contract it's
multiple releases of a contract it's
just like having eval in an actual
just like having eval in an actual
just like having eval in an actual
contract right but if you have multiple
contract right but if you have multiple
contract right but if you have multiple
releases and a point of indirection
releases and a point of indirection
releases and a point of indirection
which is the pattern people have when
which is the pattern people have when
which is the pattern people have when
they only have immutable contracts if
they only have immutable contracts if
they only have immutable contracts if
they have a point of direction like a
they have a point of direction like a
they have a point of direction like a
proxy or something and then releases you
proxy or something and then releases you
proxy or something and then releases you
still have the possibility of the
still have the possibility of the
still have the possibility of the
requirement in fact of people delegating
requirement in fact of people delegating
requirement in fact of people delegating
authority to
authority to
authority to
the indirection point
the indirection point
the indirection point
with permission and saying I give
with permission and saying I give
with permission and saying I give
permission to this indirection point
permission to this indirection point
permission to this indirection point
whatever it happens to be pointing to
whatever it happens to be pointing to
whatever it happens to be pointing to
right now to do something and so you're
right now to do something and so you're
right now to do something and so you're
right back with beautiful contracts
right back with beautiful contracts
right back with beautiful contracts
people will work their way around which
people will work their way around which
people will work their way around which
is something that is behaviorally
is something that is behaviorally
is something that is behaviorally
equivalent to a mutable contract that
equivalent to a mutable contract that
equivalent to a mutable contract that
has whatever permission you've given
has whatever permission you've given
has whatever permission you've given
them
them
them
they'll they'll either investigate
they'll they'll either investigate
they'll they'll either investigate
another question on top of mutable
another question on top of mutable
another question on top of mutable
contracts or via whatever indirection
contracts or via whatever indirection
contracts or via whatever indirection
system you build
system you build
system you build
but I just want to say we are pretty
but I just want to say we are pretty
but I just want to say we are pretty
much out of time so if this if this
much out of time so if this if this
much out of time so if this if this
feels like a great last question i'd say
feels like a great last question i'd say
feels like a great last question i'd say
ask it
ask it
ask it
if not maybe we hold off
if not maybe we hold off
if not maybe we hold off
well I was just saying like you can have
well I was just saying like you can have
well I was just saying like you can have
your contract not have direct access to
your contract not have direct access to
your contract not have direct access to
the account but just have access to
the account but just have access to
the account but just have access to
another contract that only does certain
another contract that only does certain
another contract that only does certain
things like not the things you don't
things like not the things you don't
things like not the things you don't
want to do but anyway
want to do but anyway
want to do but anyway
so it seems like a requirement we just
so it seems like a requirement we just
so it seems like a requirement we just
keep coming back to this requirement
keep coming back to this requirement
keep coming back to this requirement
stock that you're requesting would be
stock that you're requesting would be
stock that you're requesting would be
the thing that would help guy guide us
the thing that would help guy guide us
the thing that would help guy guide us
figure out the answers to these
figure out the answers to these
figure out the answers to these
questions okay cool
questions okay cool
questions okay cool
i'd also like to propose perhaps
i'd also like to propose perhaps
i'd also like to propose perhaps
moving this meeting to the dev discord
moving this meeting to the dev discord
moving this meeting to the dev discord
and having it weekly instead of every
and having it weekly instead of every
and having it weekly instead of every
other week because there's there are
other week because there's there are
other week because there's there are
going to be a lot of questions that we
going to be a lot of questions that we
going to be a lot of questions that we
need to answer and do it quick with john
need to answer and do it quick with john
need to answer and do it quick with john
cannon
cool I mean I think that we should ask
cool I mean I think that we should ask
that offline and just verify that that
that offline and just verify that that
that offline and just verify that that
works for everybody and look at
works for everybody and look at
works for everybody and look at
calendars
calendars
calendars
and I can do that after this meeting
awesome
awesome
thanks everybody
thanks everybody
thanks everybody
see you next time
