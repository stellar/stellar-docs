Great. , hi everyone. , sorry,
Great. , hi everyone. , sorry,
Carson, I said you would start up. ,
Carson, I said you would start up. ,
Carson, I said you would start up. ,
first, can you hear me? Well, please let
first, can you hear me? Well, please let
first, can you hear me? Well, please let
me know. , write in chat.
me know. , write in chat.
me know. , write in chat.
,
all right. Great. , okay, cool. So,
all right. Great. , okay, cool. So,
hello everyone. , today I'm going to
hello everyone. , today I'm going to
hello everyone. , today I'm going to
present a few caps. as many as
present a few caps. as many as
present a few caps. as many as
time permits
time permits
time permits
and I have three total and all of
and I have three total and all of
and I have three total and all of
them were kind of spawned from Le's
them were kind of spawned from Le's
them were kind of spawned from Le's
proposal
proposal
proposal
that was linked to one of the caps
that was linked to one of the caps
that was linked to one of the caps
and the idea behind the proposal was
and the idea behind the proposal was
and the idea behind the proposal was
about extending
about extending
about extending
our capabilities for the classic star
our capabilities for the classic star
our capabilities for the classic star
account or G accounts
account or G accounts
account or G accounts
and the idea behind it was to
and the idea behind it was to
and the idea behind it was to
add a capability for IG account to have
add a capability for IG account to have
add a capability for IG account to have
a set of contract signers. So one
a set of contract signers. So one
a set of contract signers. So one
contract signer and if you have a
contract signer and if you have a
contract signer and if you have a
contract signer you can really have
contract signer you can really have
contract signer you can really have
arbitrary authentication logic with
arbitrary authentication logic with
arbitrary authentication logic with
arbitrary policies and stuff like that.
arbitrary policies and stuff like that.
arbitrary policies and stuff like that.
but in addition to that you could
but in addition to that you could
but in addition to that you could
also you could also add a capability to
also you could also add a capability to
also you could also add a capability to
manage trust veins for example from
manage trust veins for example from
manage trust veins for example from
soraban
soraban
soraban
which closes even more feature gaps
which closes even more feature gaps
which closes even more feature gaps
because this proposal as it is it
because this proposal as it is it
because this proposal as it is it
won't be possible to use this C
won't be possible to use this C
won't be possible to use this C
standards outside of Soraban because
standards outside of Soraban because
standards outside of Soraban because
we currently do not provide a way to
we currently do not provide a way to
we currently do not provide a way to
run contracts outside of the transaction
run contracts outside of the transaction
run contracts outside of the transaction
apply for
apply for
apply for
with that like
Jay is not hearing me. I don't know
Jay is not hearing me. I don't know
Jay seems like people still hear me.
Jay seems like people still hear me.
Jay seems like people still hear me.
so that that's kind of high level
so that that's kind of high level
so that that's kind of high level
motivation behind that. but I'd
motivation behind that. but I'd
motivation behind that. but I'd
like to actually start with cap 71
like to actually start with cap 71
like to actually start with cap 71
which is something I figured while
which is something I figured while
which is something I figured while
thinking about how this whole GI account
thinking about how this whole GI account
thinking about how this whole GI account
customization thing could be implemented
customization thing could be implemented
customization thing could be implemented
and this cap is about adding protocol
and this cap is about adding protocol
and this cap is about adding protocol
level support for delegating
level support for delegating
level support for delegating
authentication between custom accounts.
authentication between custom accounts.
authentication between custom accounts.



Yeah, thanks Marius. It's actually not a
Yeah, thanks Marius. It's actually not a
Yeah, thanks Marius. It's actually not a
new mic. It's just Discord settings.
new mic. It's just Discord settings.
new mic. It's just Discord settings.
which is funny. So Cap 71 and
which is funny. So Cap 71 and
which is funny. So Cap 71 and
motivation for that stems from
motivation for that stems from
motivation for that stems from
several different issues.
several different issues.
several different issues.
and basically currently what is
and basically currently what is
and basically currently what is
possible to do in Soroban what some of
possible to do in Soroban what some of
possible to do in Soroban what some of
you may know there is this require O
you may know there is this require O
you may know there is this require O
function that requires authentication
function that requires authentication
function that requires authentication
authorization from an address and this
authorization from an address and this
authorization from an address and this
function can actually be called from
function can actually be called from
function can actually be called from
within a custom account check O function
within a custom account check O function
within a custom account check O function
that performs as well. So this is kind
that performs as well. So this is kind
that performs as well. So this is kind
of the current way of delegating not. So
of the current way of delegating not. So
of the current way of delegating not. So
you have an account but instead of
you have an account but instead of
you have an account but instead of
verifying some signature you say I
verifying some signature you say I
verifying some signature you say I
try this other contract to perform
try this other contract to perform
try this other contract to perform
verification for me and this has some
verification for me and this has some
verification for me and this has some
benefits for modular custom accounts
benefits for modular custom accounts
benefits for modular custom accounts
and it is like a cornerstone of this
and it is like a cornerstone of this
and it is like a cornerstone of this
proposal for G accounts to have C
proposal for G accounts to have C
proposal for G accounts to have C
signers because it's effectively the
signers because it's effectively the
signers because it's effectively the
same kind of delegation right so instead
same kind of delegation right so instead
same kind of delegation right so instead
of having a cryptographic signature for
of having a cryptographic signature for
of having a cryptographic signature for
a G account we say you don't actually
a G account we say you don't actually
a G account we say you don't actually
know what the signature is we let a
know what the signature is we let a
know what the signature is we let a
contract to perform
contract to perform
contract to perform
verification instead on its custom
verification instead on its custom
verification instead on its custom
signature format.
signature format.
signature format.
But this mechanism while it kind of
But this mechanism while it kind of
But this mechanism while it kind of
works it was not like built as a
works it was not like built as a
works it was not like built as a
full-fledged feature in the protocol.
full-fledged feature in the protocol.
full-fledged feature in the protocol.
It's just a byproduct of the design.
It's just a byproduct of the design.
It's just a byproduct of the design.
Design allows it. That's not visible out
Design allows it. That's not visible out
Design allows it. That's not visible out
because there's no reason to dissolve
because there's no reason to dissolve
because there's no reason to dissolve
but just kind of inconvenient to use and
but just kind of inconvenient to use and
but just kind of inconvenient to use and
also not optimal to use. The
also not optimal to use. The
also not optimal to use. The
inconvenience factor lies mostly in
inconvenience factor lies mostly in
inconvenience factor lies mostly in
simulation. so if anyone has tried
simulation. so if anyone has tried
simulation. so if anyone has tried
it, they would quickly learn that you
it, they would quickly learn that you
it, they would quickly learn that you
cannot simply simulate this.
cannot simply simulate this.
cannot simply simulate this.
currently you need to build
currently you need to build
currently you need to build
for for the delegated contract call you
for for the delegated contract call you
for for the delegated contract call you
need to build its own signature payload.
need to build its own signature payload.
need to build its own signature payload.
which is kind of tricky and this
which is kind of tricky and this
which is kind of tricky and this
could in theory be fixed the simulation
could in theory be fixed the simulation
could in theory be fixed the simulation
where although it might be a bit
where although it might be a bit
where although it might be a bit
complicated as well.
complicated as well.
complicated as well.



but yeah it would still be kind of
but yeah it would still be kind of
but yeah it would still be kind of
annoying because you would need to do
annoying because you would need to do
annoying because you would need to do
several simulations and all kind of
several simulations and all kind of
several simulations and all kind of
propagating more and more authentication
propagating more and more authentication
propagating more and more authentication
information into the system. and
information into the system. and
information into the system. and
yeah, I think it is still kind of
yeah, I think it is still kind of
yeah, I think it is still kind of
annoying. But in terms of optimality
annoying. But in terms of optimality
annoying. But in terms of optimality
as well
as well
as well
there is quite a bit of duplication
there is quite a bit of duplication
there is quite a bit of duplication
here
here
here
because like you spawn new authorization
because like you spawn new authorization
because like you spawn new authorization
entries like for example if you have
entries like for example if you have
entries like for example if you have
two accounts and one delegates
two accounts and one delegates
two accounts and one delegates
authentication to another one then you
authentication to another one then you
authentication to another one then you
would end up with two authorization
would end up with two authorization
would end up with two authorization
entries in transaction that increases
entries in transaction that increases
entries in transaction that increases
transaction size
transaction size
transaction size
and increases complexity for building
and increases complexity for building
and increases complexity for building
it and the tipping point for me for why
it and the tipping point for me for why
it and the tipping point for me for why
I came up with cap is the context like
I came up with cap is the context like
I came up with cap is the context like
the some of the proposals that I've seen
the some of the proposals that I've seen
the some of the proposals that I've seen
for the delegation for custom accounts
for the delegation for custom accounts
for the delegation for custom accounts
maybe do not use context much but if we
maybe do not use context much but if we
maybe do not use context much but if we
were to do this for the G accounts we do
were to do this for the G accounts we do
were to do this for the G accounts we do
not want to lose the authorization
not want to lose the authorization
not want to lose the authorization
context which is basically the list of
context which is basically the list of
context which is basically the list of
the
the
the
contract codes that have been authorized
contract codes that have been authorized
contract codes that have been authorized
And the issue with the approach of
And the issue with the approach of
And the issue with the approach of
calling require O from within check O is
calling require O from within check O is
calling require O from within check O is
that you could pass context to the
that you could pass context to the
that you could pass context to the
require O call but it would not look the
require O call but it would not look the
require O call but it would not look the
same as the normal context that you
same as the normal context that you
same as the normal context that you
would have during normal authorization
would have during normal authorization
would have during normal authorization
which means that for example let's say
which means that for example let's say
which means that for example let's say
you have a an account implementation
you have a an account implementation
you have a an account implementation
that does something about the context
that does something about the context
that does something about the context
you cannot simply use it as a
you cannot simply use it as a
you cannot simply use it as a
delegated banner of a G account for
delegated banner of a G account for
delegated banner of a G account for
example because the context will be kind
example because the context will be kind
example because the context will be kind
of in messy nested form like it will be
of in messy nested form like it will be
of in messy nested form like it will be
an argument of a call instead of a list
an argument of a call instead of a list
an argument of a call instead of a list
of the call. So it is kind of messy and
of the call. So it is kind of messy and
of the call. So it is kind of messy and
I think it is going to be quite
I think it is going to be quite
I think it is going to be quite
annoying to maintain this mess in the
annoying to maintain this mess in the
annoying to maintain this mess in the
protocol like it creates some
protocol like it creates some
protocol like it creates some
inconsistency between like how different
inconsistency between like how different
inconsistency between like how different
types of contract signers can be
types of contract signers can be
types of contract signers can be
used. which is basically the
used. which is basically the
used. which is basically the
motivation for this but it also solves
motivation for this but it also solves
motivation for this but it also solves
the issues I've described before. Oh
the issues I've described before. Oh
the issues I've described before. Oh
yeah, and also if you want to have
yeah, and also if you want to have
yeah, and also if you want to have
the context you will need to attach
the context you will need to attach
the context you will need to attach
it to to the transaction as well which
it to to the transaction as well which
it to to the transaction as well which
is like even more duplication on top of
is like even more duplication on top of
is like even more duplication on top of
it. But you have like besides like
it. But you have like besides like
it. But you have like besides like
specifying multiple authorization
specifying multiple authorization
specifying multiple authorization
entries for every address, you would
entries for every address, you would
entries for every address, you would
need to specify like the whole call
need to specify like the whole call
need to specify like the whole call
stack as well for every address but in
stack as well for every address but in
stack as well for every address but in
different forms. and it's a lot of
different forms. and it's a lot of
different forms. and it's a lot of
mess.
mess.
mess.
so what do I propose to do about this?
so what do I propose to do about this?
so what do I propose to do about this?
it is actually not that big of a
it is actually not that big of a
it is actually not that big of a
change and it consists of
change and it consists of
change and it consists of
basically two parts. one part of it
basically two parts. one part of it
basically two parts. one part of it
is on the XDR side as can be seen in the
is on the XDR side as can be seen in the
is on the XDR side as can be seen in the
cap. And what we do in the XDR is we
cap. And what we do in the XDR is we
cap. And what we do in the XDR is we
introduce a new type of credentials
introduce a new type of credentials
introduce a new type of credentials
which is basically this part of the
which is basically this part of the
which is basically this part of the
authorization entry that contains
authorization entry that contains
authorization entry that contains
signatures and stuff like that. And the
signatures and stuff like that. And the
signatures and stuff like that. And the
credentials are pretty much same as
credentials are pretty much same as
credentials are pretty much same as
robban credential of address. but
robban credential of address. but
robban credential of address. but
they have an additional field called
they have an additional field called
they have an additional field called
delegates. And each delegate is just
delegates. And each delegate is just
delegates. And each delegate is just
a strct that contains an address and a
a strct that contains an address and a
a strct that contains an address and a
signature C value which can be an
signature C value which can be an
signature C value which can be an
arbitrary value for one can parse. And
arbitrary value for one can parse. And
arbitrary value for one can parse. And
it also has a list of nested delegates.
it also has a list of nested delegates.
it also has a list of nested delegates.
in case if you call delegated
in case if you call delegated
in case if you call delegated
accounts from within delegated account
accounts from within delegated account
accounts from within delegated account
and the cool thing about this exr is
and the cool thing about this exr is
and the cool thing about this exr is
that you may have a single
that you may have a single
that you may have a single
authorization entry
authorization entry
authorization entry
that has as many delegated signers as
that has as many delegated signers as
that has as many delegated signers as
you need. So there is no duplication at
you need. So there is no duplication at
you need. So there is no duplication at
all like there is only necessary
all like there is only necessary
all like there is only necessary
information.
information.
information.
So in the simplest case for example
So in the simplest case for example
So in the simplest case for example
right we have an account that asks
right we have an account that asks
right we have an account that asks
another contract to perform us on its
another contract to perform us on its
another contract to perform us on its
behalf
behalf
behalf
and this will be represented as a
and this will be represented as a
and this will be represented as a
single authorization entry that has the
single authorization entry that has the
single authorization entry that has the
main account that we are performing O
main account that we are performing O
main account that we are performing O
for in the credentials at the top
for in the credentials at the top
for in the credentials at the top
level and the contract that actually
level and the contract that actually
level and the contract that actually
performs O and delegates array and we
performs O and delegates array and we
performs O and delegates array and we
only store its address and
only store its address and
only store its address and
its signature.
its signature.
its signature.
and this structure is very simple and
and this structure is very simple and
and this structure is very simple and
like if you get a result from this
like if you get a result from this
like if you get a result from this
like it's usually up to you to fill in
like it's usually up to you to fill in
like it's usually up to you to fill in
the credentials anyway. So if you are
the credentials anyway. So if you are
the credentials anyway. So if you are
dealing with delegation as a wallet,
dealing with delegation as a wallet,
dealing with delegation as a wallet,
what you need to do is just build this
what you need to do is just build this
what you need to do is just build this
new type of credentials.
new type of credentials.
new type of credentials.
it should be pretty simple like it's
it should be pretty simple like it's
it should be pretty simple like it's
only a couple fields more than you
only a couple fields more than you
only a couple fields more than you
would need to fill for normal or entry
would need to fill for normal or entry
would need to fill for normal or entry
and there is no like this messy
and there is no like this messy
and there is no like this messy
propagating the O data into
propagating the O data into
propagating the O data into
simulation and stuff like that is
simulation and stuff like that is
simulation and stuff like that is
basically
basically
basically
kind of a way to do multi-IG but instead
kind of a way to do multi-IG but instead
kind of a way to do multi-IG but instead
of doing multiple signatures you have
of doing multiple signatures you have
of doing multiple signatures you have
multiple like sign implementations on
multiple like sign implementations on
multiple like sign implementations on
the high


and there is one more small change
and there is one more small change
and there is one more small change
which I will talk about a little bit
which I will talk about a little bit
which I will talk about a little bit
later. and from the host side we add
later. and from the host side we add
later. and from the host side we add
two functions that actually allow
two functions that actually allow
two functions that actually allow
contracts to interact with the delegated
contracts to interact with the delegated
contracts to interact with the delegated
signers. The main function is delegate
signers. The main function is delegate
signers. The main function is delegate
count O which is very similar to
count O which is very similar to
count O which is very similar to
require O. but it can only be
require O. but it can only be
require O. but it can only be
called from within a custom account
called from within a custom account
called from within a custom account
from within check O reserve function.
from within check O reserve function.
from within check O reserve function.
and it doesn't take any arguments. And
and it doesn't take any arguments. And
and it doesn't take any arguments. And
what this does is something similar
what this does is something similar
what this does is something similar
to referrals, but instead of like
to referrals, but instead of like
to referrals, but instead of like
just authorizing the current call
just authorizing the current call
just authorizing the current call
arguments and current call, instead it
arguments and current call, instead it
arguments and current call, instead it
will inherit the context and the
will inherit the context and the
will inherit the context and the
signature payload from the current check
signature payload from the current check
signature payload from the current check
implement from the current checkos
implement from the current checkos
implement from the current checkos
invocation.
invocation.
invocation.
So basically you have a check off and
So basically you have a check off and
So basically you have a check off and
then you have another contract that you
then you have another contract that you
then you have another contract that you
want to perform checkos for you and that
want to perform checkos for you and that
want to perform checkos for you and that
other contract will get exactly the same
other contract will get exactly the same
other contract will get exactly the same
check arguments and its own signature.
check arguments and its own signature.
check arguments and its own signature.
which is really cool. It allows like
which is really cool. It allows like
which is really cool. It allows like
all the delegate centers to sign the
all the delegate centers to sign the
all the delegate centers to sign the
same payload basically and have the same
same payload basically and have the same
same payload basically and have the same
context. So there is no messes like this
context. So there is no messes like this
context. So there is no messes like this
nested context in argument and stuff
nested context in argument and stuff
nested context in argument and stuff
like that. So for every contract it
like that. So for every contract it
like that. So for every contract it
would look like as if they were
would look like as if they were
would look like as if they were
authorizing the call themselves
authorizing the call themselves
authorizing the call themselves
while in fact they're doing this on
while in fact they're doing this on
while in fact they're doing this on
someone else's behinders
someone else's behinders
someone else's behinders

present for the current cost check.
present for the current cost check.
And the motivation behind this function
And the motivation behind this function
And the motivation behind this function
is simply that if you were to use
is simply that if you were to use
is simply that if you were to use
this feature you would have an issue
this feature you would have an issue
this feature you would have an issue
of somehow attaching this
of somehow attaching this
of somehow attaching this
delegated signers to your signature
delegated signers to your signature
delegated signers to your signature
payload. like you would need to list
payload. like you would need to list
payload. like you would need to list
some signatures or something like that.
some signatures or something like that.
some signatures or something like that.
And like since I would imagine
And like since I would imagine
And like since I would imagine
a few contracts would want to use this
a few contracts would want to use this
a few contracts would want to use this
and it's kind of annoying that everyone
and it's kind of annoying that everyone
and it's kind of annoying that everyone
needs to reimplement this and come with
needs to reimplement this and come with
needs to reimplement this and come with
their own UDS and stuff like that and in
their own UDS and stuff like that and in
their own UDS and stuff like that and in
since we already have the delegated XDR
since we already have the delegated XDR
since we already have the delegated XDR
we just add a getter that returns
we just add a getter that returns
we just add a getter that returns
this delegated attached to the
this delegated attached to the
this delegated attached to the
transaction and matched to the current.
transaction and matched to the current.
transaction and matched to the current.
So you can get them then you can make
So you can get them then you can make
So you can get them then you can make
sure that they are actually the centers
sure that they are actually the centers
sure that they are actually the centers
for the account and then you call deate
for the account and then you call deate
for the account and then you call deate
account on for them. So there is no need
account on for them. So there is no need
account on for them. So there is no need
for some bespoke representation of this
for some bespoke representation of this
for some bespoke representation of this
deate center. They're kind of
deate center. They're kind of
deate center. They're kind of
building feature that you may use and
building feature that you may use and
building feature that you may use and
you don't need any data structure or
you don't need any data structure or
you don't need any data structure or
app. And again, this reduces duplication
app. And again, this reduces duplication
app. And again, this reduces duplication
even further because like if you fully
even further because like if you fully
even further because like if you fully
delegate your O to another account, you
delegate your O to another account, you
delegate your O to another account, you
do not need the signature for your main
do not need the signature for your main
do not need the signature for your main
account.
account.
account.
All right, that's it on the high
All right, that's it on the high
All right, that's it on the high
level for the host functions. the cap
level for the host functions. the cap
level for the host functions. the cap
has a bit more detailed description of
has a bit more detailed description of
has a bit more detailed description of
the exact algorithm or how does it work
the exact algorithm or how does it work
the exact algorithm or how does it work
but I think the simple summary if it
but I think the simple summary if it
but I think the simple summary if it
is really that it is require that just
is really that it is require that just
is really that it is require that just
make sure that the arguments look as
make sure that the arguments look as
make sure that the arguments look as
if you've been authorizing the
if you've been authorizing the
if you've been authorizing the
require call at the top level
require call at the top level
require call at the top level
and the last small thing that I've
and the last small thing that I've
and the last small thing that I've
mentioned before in the XDR is that
mentioned before in the XDR is that
mentioned before in the XDR is that
unfortunately we need a new type of
unfortunately we need a new type of
unfortunately we need a new type of
signature payload which I think is like
signature payload which I think is like
signature payload which I think is like
the main downside with this approach and
the main downside with this approach and
the main downside with this approach and
the motivation for this is that
the motivation for this is that
the motivation for this is that



the current payload that you need to
the current payload that you need to
the current payload that you need to
sign to for thoraban
sign to for thoraban
sign to for thoraban
is it does not contain the address
is it does not contain the address
is it does not contain the address
for which you're signing this payload
for which you're signing this payload
for which you're signing this payload
and in the current O framework it makes
and in the current O framework it makes
and in the current O framework it makes
sense because it is implicitly
sense because it is implicitly
sense because it is implicitly
tied to the address so address is
tied to the address so address is
tied to the address so address is
signed but it is signed in a different
signed but it is signed in a different
signed but it is signed in a different
part of the payload but with a
part of the payload but with a
part of the payload but with a
delegation like you need to explicitly
delegation like you need to explicitly
delegation like you need to explicitly
sign for the address that is a top
sign for the address that is a top
sign for the address that is a top
level address that delegates
level address that delegates
level address that delegates
everything.
everything.
everything.
So basically without that this whole
So basically without that this whole
So basically without that this whole
thing would be insecure. So that's
thing would be insecure. So that's
thing would be insecure. So that's
kind of the annoying divergence between
kind of the annoying divergence between
kind of the annoying divergence between
like the different credential types.
like the different credential types.
like the different credential types.
I think while it is definitely a
I think while it is definitely a
I think while it is definitely a
downside it's probably not as big
downside it's probably not as big
downside it's probably not as big
because it is it has one to one mapping
because it is it has one to one mapping
because it is it has one to one mapping
to the credential
to the credential
to the credential
right. So if you do not support delegate
right. So if you do not support delegate
right. So if you do not support delegate
credentials, you don't need to worry
credentials, you don't need to worry
credentials, you don't need to worry
about this. If you do support delegate
about this. If you do support delegate
about this. If you do support delegate
credentials, you don't need to worry
credentials, you don't need to worry
credentials, you don't need to worry
about this. But the criteria for
about this. But the criteria for
about this. But the criteria for
picking the right signature, it's
picking the right signature, it's
picking the right signature, it's
pretty straightforward.
pretty straightforward.
pretty straightforward.
again camp has more context on
again camp has more context on
again camp has more context on
this issue.
this issue.
this issue.



yeah, so I think it is
yeah, so I think it is
yeah, so I think it is
more or less it at the high level.
more or less it at the high level.
more or less it at the high level.
cap also has a proposed simulation flow
cap also has a proposed simulation flow
cap also has a proposed simulation flow
which is kind of universal for any world
which is kind of universal for any world
which is kind of universal for any world
that wants to use delegated accounts.
that wants to use delegated accounts.
that wants to use delegated accounts.
Sorry J accounts are this you can do
Sorry J accounts are this you can do
Sorry J accounts are this you can do
this for J accounts but there are some
this for J accounts but there are some
this for J accounts but there are some
custom accounts implementation around
custom accounts implementation around
custom accounts implementation around
that but also delegated account which I
that but also delegated account which I
that but also delegated account which I
know there could be like know Zeppelin
know there could be like know Zeppelin
know there could be like know Zeppelin
has been working on something similar
has been working on something similar
has been working on something similar
and I know has experimented with this
and I know has experimented with this
and I know has experimented with this
for a while but you know if you like
for a while but you know if you like
for a while but you know if you like
a lot of convenience and to link your
a lot of convenience and to link your
a lot of convenience and to link your
well also simplifying and optimizing the
well also simplifying and optimizing the
well also simplifying and optimizing the
transactions
transactions
transactions
Right.
we'll cap the trail for Yeah, we will
we'll cap the trail for Yeah, we will
get to cap stream later but
get to cap stream later but
get to cap stream later but
probably answer is yes
probably answer is yes
probably answer is yes
questions.
questions.
questions.
, so any questions?
No designers to send G transactions.
No designers to send G transactions.
that's cap 72 and not yet
that's cap 72 and not yet
that's cap 72 and not yet
but it is a step forward in that
but it is a step forward in that
but it is a step forward in that
direction right
direction right
direction right
if we ever allow CERS to sign
if we ever allow CERS to sign
if we ever allow CERS to sign
transactions and G accounts with C
transactions and G accounts with C
transactions and G accounts with C
signers will also be able to do that
signers will also be able to do that
signers will also be able to do that
that's again we can talk about this a
that's again we can talk about this a
that's again we can talk about this a
bit later
bit later
bit later

yeah, it is definitely stack
yeah, it is definitely stack
or
or
or
more interoperability between GNC
more interoperability between GNC
more interoperability between GNC
accounts in general.
I I know that Lee had some concerns
I I know that Lee had some concerns
about Cap 71 specifically in terms of
about Cap 71 specifically in terms of
about Cap 71 specifically in terms of
like
like
like
about yet another protocol feature.
about yet another protocol feature.
about yet another protocol feature.
and I do not disagree that it could
and I do not disagree that it could
and I do not disagree that it could
partially result with simulation but as
partially result with simulation but as
partially result with simulation but as
I've mentioned before I think doing this
I've mentioned before I think doing this
I've mentioned before I think doing this
at protocol level
at protocol level
at protocol level
very beneficial especially if you go
very beneficial especially if you go
very beneficial especially if you go
ahead with cap 72 and does not only like
ahead with cap 72 and does not only like
ahead with cap 72 and does not only like
improves ax but it also simplifies the
improves ax but it also simplifies the
improves ax but it also simplifies the
transactions which is not something that
transactions which is not something that
transactions which is not something that
simulation would allow us to solve.
I see is there no question for please
I see is there no question for please
feel free
feel free
feel free
to chime in the discussion thread if
to chime in the discussion thread if
to chime in the discussion thread if
you come up with something
you come up with something
you come up with something

yeah I think that let's go to cap 72
yeah I think that let's go to cap 72
because I can see that folks are excited
because I can see that folks are excited
because I can see that folks are excited
about it. So again 71
71 is kind of what I think is a
71 is kind of what I think is a
prerequisite to 72 just to make it kind
prerequisite to 72 just to make it kind
prerequisite to 72 just to make it kind
of not happy out of the box.
of not happy out of the box.
of not happy out of the box.
So cap 72 is about the mentioning
So cap 72 is about the mentioning
So cap 72 is about the mentioning
contract signers for scar account for T
contract signers for scar account for T
contract signers for scar account for T
account
account
account
and motivation this gap it's
and motivation this gap it's
and motivation this gap it's
this in the original discussion as well
this in the original discussion as well
this in the original discussion as well
but basically
but basically
but basically
well to allow you to do difference
well to allow you to do difference
well to allow you to do difference
in this existing CH account because G
in this existing CH account because G
in this existing CH account because G
accounts still have
accounts still have
accounts still have
quite a bit of adoption rate and
quite a bit of adoption rate and
quite a bit of adoption rate and
this allow to extend their
this allow to extend their
this allow to extend their
functionality arbitrarily.
functionality arbitrarily.
functionality arbitrarily.
it can be new ways to sign for
it can be new ways to sign for
it can be new ways to sign for
operation.
operation.
operation.
It may be a way to implement new
It may be a way to implement new
It may be a way to implement new
policies and stuff like that. it is
policies and stuff like that. it is
policies and stuff like that. it is
really very open-ended. I think there
really very open-ended. I think there
really very open-ended. I think there
is a lot of demand for passes. It is a
is a lot of demand for passes. It is a
is a lot of demand for passes. It is a
pretty hot topic and an argument can be
pretty hot topic and an argument can be
pretty hot topic and an argument can be
made that maybe you can
made that maybe you can
made that maybe you can
you can support this natively as center.
you can support this natively as center.
you can support this natively as center.
this is not the part of CAT 72 but
this is not the part of CAT 72 but
this is not the part of CAT 72 but
I don't know I'd like to gauge some
I don't know I'd like to gauge some
I don't know I'd like to gauge some
interest maybe another discussion can be
interest maybe another discussion can be
interest maybe another discussion can be
started if someone thinks strongly that
started if someone thinks strongly that
started if someone thinks strongly that
has to be a feature on a G account. Now
has to be a feature on a G account. Now
has to be a feature on a G account. Now
of course if in the future we support
of course if in the future we support
of course if in the future we support
signing for transactions with C account
signing for transactions with C account
signing for transactions with C account
this will become a nonissue because you
this will become a nonissue because you
this will become a nonissue because you
will be able to do anything with a C
will be able to do anything with a C
will be able to do anything with a C
signer that you can do today with a
signer that you can do today with a
signer that you can do today with a
normal T account.
normal T account.
normal T account.
so well yeah I don't want to spend
so well yeah I don't want to spend
so well yeah I don't want to spend
much time on on motivation here but I
much time on on motivation here but I
much time on on motivation here but I
think it is pretty significant factor
think it is pretty significant factor
think it is pretty significant factor
like the ability to u modify the
like the ability to u modify the
like the ability to u modify the
account like
account like
account like
a lot of things to do this.
a lot of things to do this.
a lot of things to do this.



so what do we do for this? the first
so what do we do for this? the first
so what do we do for this? the first
thing that we do is we add a new ser
thing that we do is we add a new ser
thing that we do is we add a new ser
type that is stored in the account
type that is stored in the account
type that is stored in the account
entry in a similar fashion as any other
entry in a similar fashion as any other
entry in a similar fashion as any other
sign
sign
sign
and it is called the dated serer
and it is called the dated serer
and it is called the dated serer
which is basically how it's it
which is basically how it's it
which is basically how it's it
connects to cap 71 right it's also
connects to cap 71 right it's also
connects to cap 71 right it's also
delegation
delegation
delegation
because unlike u the cryptographic
because unlike u the cryptographic
because unlike u the cryptographic
centers for example that exist
centers for example that exist
centers for example that exist
Now they're just public keys. get
Now they're just public keys. get
Now they're just public keys. get
it center is a contract that defines
it center is a contract that defines
it center is a contract that defines
its own logic with its own
its own logic with its own
its own logic with its own
cryptography and stuff.
cryptography and stuff.
cryptography and stuff.



the every signer has its own weight
the every signer has its own weight
the every signer has its own weight
in the same fashion as normal planners
in the same fashion as normal planners
in the same fashion as normal planners
have weight.
have weight.
have weight.



but the caveat for now at least is that
but the caveat for now at least is that
but the caveat for now at least is that
logated centers can only be used in the
logated centers can only be used in the
logated centers can only be used in the
smart contract environment because well
smart contract environment because well
smart contract environment because well
they are contracts. You cannot run
they are contracts. You cannot run
they are contracts. You cannot run
contracts outside of smart
contracts outside of smart
contracts outside of smart
contract m environment just yet.
contract m environment just yet.
contract m environment just yet.
so unfortunately you will not be able to
so unfortunately you will not be able to
so unfortunately you will not be able to
use the seat sign to sign the whole
use the seat sign to sign the whole
use the seat sign to sign the whole
transaction.
transaction.
transaction.
but we can do anything in carbon and
but we can do anything in carbon and
but we can do anything in carbon and
signing the transaction
signing the transaction
signing the transaction
will work if we ever support signing
will work if we ever support signing
will work if we ever support signing
the transaction with a C account as
the transaction with a C account as
the transaction with a C account as
well. So basically if we support running
well. So basically if we support running
well. So basically if we support running
the contracts transaction validation
the contracts transaction validation
the contracts transaction validation
time which I'm not saying it's
time which I'm not saying it's
time which I'm not saying it's
necessarily going to happen but it's
necessarily going to happen but it's
necessarily going to happen but it's
definitely something we are thinking
definitely something we are thinking
definitely something we are thinking
about.
about.
about.






again B I'm sorry about that.
again B I'm sorry about that.
again B I'm sorry about that.
okay so besides that what we do is
okay so besides that what we do is
okay so besides that what we do is
that since modifications is a
that since modifications is a
that since modifications is a
sorryation since operations the C
sorryation since operations the C
sorryation since operations the C
accounts can only happen.
accounts can only happen.
accounts can only happen.
But one notable use case we
But one notable use case we
But one notable use case we
been thinking about has something
been thinking about has something
been thinking about has something
to do with various account recovery
to do with various account recovery
to do with various account recovery
flows right with using
flows right with using
flows right with using
pass key or there are other custom
pass key or there are other custom
pass key or there are other custom
logic to for example recover the
logic to for example recover the
logic to for example recover the
account.
account.
account.



this use case needs an ability to modify
this use case needs an ability to modify
this use case needs an ability to modify
G account from Turaban.
G account from Turaban.
G account from Turaban.



and we provide this ability this
and we provide this ability this
and we provide this ability this
new type of built-in contract which I
new type of built-in contract which I
new type of built-in contract which I
coined as GAC G account contract and
coined as GAC G account contract and
coined as GAC G account contract and
unlike
unlike
unlike
terror asset contract stack which has
terror asset contract stack which has
terror asset contract stack which has
to be explicitly instantiated
to be explicitly instantiated
to be explicitly instantiated
GAC
GAC
GAC
is implicitly it implicitly exists for
is implicitly it implicitly exists for
is implicitly it implicitly exists for
any G account on chain not need to do
any G account on chain not need to do
any G account on chain not need to do
anything to interact with it from
anything to interact with it from
anything to interact with it from
Soraban you will be able just
Soraban you will be able just
Soraban you will be able just
starting from a new protocol to call
starting from a new protocol to call
starting from a new protocol to call
contract functions on a G account
contract functions on a G account
contract functions on a G account
just really convenient and it is well
just really convenient and it is well
just really convenient and it is well
overhead solution in terms of storage
overhead solution in terms of storage
overhead solution in terms of storage
okay so that's kind of a high level
okay so that's kind of a high level
okay so that's kind of a high level
overview now go into a bit of detail.
overview now go into a bit of detail.
overview now go into a bit of detail.
so in terms of the standard changes
so in terms of the standard changes
so in terms of the standard changes
as I've mentioned it's very
as I've mentioned it's very
as I've mentioned it's very
straightforward. We just extend the
straightforward. We just extend the
straightforward. We just extend the
existing ser set of signers for the G
existing ser set of signers for the G
existing ser set of signers for the G
accounts and we just them in the G
accounts and we just them in the G
accounts and we just them in the G
account. they're not supported in
account. they're not supported in
account. they're not supported in
some more exotic context like in
some more exotic context like in
some more exotic context like in
some operations and stuff like that but
some operations and stuff like that but
some operations and stuff like that but
that's a minor detail
that's a minor detail
that's a minor detail



and then the GE account interface as
and then the GE account interface as
and then the GE account interface as
well specified in the cap and it
well specified in the cap and it
well specified in the cap and it
is still up to debate the cap as it
is still up to debate the cap as it
is still up to debate the cap as it
is proposes to
is proposes to
is proposes to
add an ability to add any
add an ability to add any
add an ability to add any
type of address as a delegated signer
type of address as a delegated signer
type of address as a delegated signer
which might create some ambiguity
which might create some ambiguity
which might create some ambiguity
like G account is a delegated center of
like G account is a delegated center of
like G account is a delegated center of
a G account
a G account
a G account
but it's like G account itself is a
but it's like G account itself is a
but it's like G account itself is a
public key so we have kind of the
public key so we have kind of the
public key so we have kind of the
same identifier that may be in two
same identifier that may be in two
same identifier that may be in two
different context and it may may not
different context and it may may not
different context and it may may not
cause some issues and confusion
cause some issues and confusion
cause some issues and confusion
downstream.
downstream.
downstream.
So, it is still up to debate.
So, it is still up to debate.
So, it is still up to debate.
like if you decide to not go with
like if you decide to not go with
like if you decide to not go with
delegated G accounts, the contract
delegated G accounts, the contract
delegated G accounts, the contract
interface may be simplified a bit. to
interface may be simplified a bit. to
interface may be simplified a bit. to
manage signers just based on the address
manage signers just based on the address
manage signers just based on the address
type, G signers would be always
type, G signers would be always
type, G signers would be always
cryptographic signers for example and C
cryptographic signers for example and C
cryptographic signers for example and C
accounted signers. that would slim
accounted signers. that would slim
accounted signers. that would slim
down the interface a little bit. But
down the interface a little bit. But
down the interface a little bit. But
anyways, the current proposal is just
anyways, the current proposal is just
anyways, the current proposal is just
to have a pair of functions to modify a
to have a pair of functions to modify a
to have a pair of functions to modify a
weight for a ED 25 signer or
weight for a ED 25 signer or
weight for a ED 25 signer or
remove it. Then the same pair of
remove it. Then the same pair of
remove it. Then the same pair of
functions to modify weight for
functions to modify weight for
functions to modify weight for
delegated signer or remove it.
delegated signer or remove it.
delegated signer or remove it.
and then two functions that just
and then two functions that just
and then two functions that just
manipulate the weights of the account.
manipulate the weights of the account.
manipulate the weights of the account.
It's not like strictly necessary but
It's not like strictly necessary but
It's not like strictly necessary but
this seem like a logical thing to have
this seem like a logical thing to have
this seem like a logical thing to have
if you provide the basic account
if you provide the basic account
if you provide the basic account
management capabilities anyway. So just
management capabilities anyway. So just
management capabilities anyway. So just
allow to modify the master weight and
allow to modify the master weight and
allow to modify the master weight and
update the thresholds for the
update the thresholds for the
update the thresholds for the
account.
account.
account.
so these are just for completeness
so these are just for completeness
so these are just for completeness
and not strictly necessary.
and not strictly necessary.
and not strictly necessary.



so for the classic transactions as I
so for the classic transactions as I
so for the classic transactions as I
mentioned the derated sus will not be
mentioned the derated sus will not be
mentioned the derated sus will not be
supported at the moment. so
supported at the moment. so
supported at the moment. so
transactions that try to use them
transactions that try to use them
transactions that try to use them
they will be rejected and there's not
they will be rejected and there's not
they will be rejected and there's not
not even a way to kind of provide a
not even a way to kind of provide a
not even a way to kind of provide a
signature for a delegated
signature for a delegated
signature for a delegated



but for the smart contracts themselves
but for the smart contracts themselves
but for the smart contracts themselves
we extend the building functionality
we extend the building functionality
we extend the building functionality
that performs authentication for the G
that performs authentication for the G
that performs authentication for the G
account
account
account
and this extension leverages 71 one
and this extension leverages 71 one
and this extension leverages 71 one
where we would call the functions
where we would call the functions
where we would call the functions
behind there which will enumerate all
behind there which will enumerate all
behind there which will enumerate all
the delegated signers existing in the
the delegated signers existing in the
the delegated signers existing in the
current context and we will call this
current context and we will call this
current context and we will call this
new Jate account of house function for
new Jate account of house function for
new Jate account of house function for
them and we'll obviously use the XDR
them and we'll obviously use the XDR
them and we'll obviously use the XDR
format for the payload defined in cap 71
format for the payload defined in cap 71
format for the payload defined in cap 71
so it's directly benefits from it
so it's directly benefits from it
so it's directly benefits from it
And another caveat is that current
And another caveat is that current
And another caveat is that current
management operations that in this cap u
management operations that in this cap u
management operations that in this cap u
are they must have a high signature
are they must have a high signature
are they must have a high signature
threshold to match the semantics of the
threshold to match the semantics of the
threshold to match the semantics of the
set options operation. So it is
set options operation. So it is
set options operation. So it is
something new that we do. previously
something new that we do. previously
something new that we do. previously
we always used medium threshold for all
we always used medium threshold for all
we always used medium threshold for all
the rob operations to all G accounts.
the rob operations to all G accounts.
the rob operations to all G accounts.
So that's a small change to use high
So that's a small change to use high
So that's a small change to use high
threshold for the account management
threshold for the account management
threshold for the account management
operation.
And I guess the only somewhat tricky
And I guess the only somewhat tricky
part about the implementation of the G
part about the implementation of the G
part about the implementation of the G
account contract itself is that we
account contract itself is that we
account contract itself is that we
kind of do something new for Sorban.
kind of do something new for Sorban.
kind of do something new for Sorban.
Here we had a way to manage classic
Here we had a way to manage classic
Here we had a way to manage classic
entries from Sorban. not not just
entries from Sorban. not not just
entries from Sorban. not not just
manage them but add or remove new
manage them but add or remove new
manage them but add or remove new
entries which hasn't happened before
entries which hasn't happened before
entries which hasn't happened before
right before the only thing we did with
right before the only thing we did with
right before the only thing we did with
classic was we update the trust in
classic was we update the trust in
classic was we update the trust in
balances for the account balances
balances for the account balances
balances for the account balances
now with this cap we will also modify
now with this cap we will also modify
now with this cap we will also modify
subentry count this sub entry count
subentry count this sub entry count
subentry count this sub entry count
which affects the page reserve for the
which affects the page reserve for the
which affects the page reserve for the
account and if we remove a signer we
account and if we remove a signer we
account and if we remove a signer we
also might need to remove a sponsorship
also might need to remove a sponsorship
also might need to remove a sponsorship
from this signer
from this signer
from this signer
This is all like perfectly reasonable to
This is all like perfectly reasonable to
This is all like perfectly reasonable to
do on this robust side. It is a bit
do on this robust side. It is a bit
do on this robust side. It is a bit
of work to kind of properly maintain the
of work to kind of properly maintain the
of work to kind of properly maintain the
variance. but on the high level,
variance. but on the high level,
variance. but on the high level,
yeah, I guess the main concern here is
yeah, I guess the main concern here is
yeah, I guess the main concern here is
that
that
that
account has to authorize its
account has to authorize its
account has to authorize its
modification and it obviously does that
modification and it obviously does that
modification and it obviously does that
by authorizing the G account contract
by authorizing the G account contract
by authorizing the G account contract
function itself. So on any call with I
function itself. So on any call with I
function itself. So on any call with I
said you need to provide a signature
said you need to provide a signature
said you need to provide a signature
that matches the highway threshold and
that matches the highway threshold and
that matches the highway threshold and
besides like performing the modification
besides like performing the modification
besides like performing the modification
as well also authorizes modification of
as well also authorizes modification of
as well also authorizes modification of
the accounts reserve and sub entries.
the accounts reserve and sub entries.
the accounts reserve and sub entries.



the only difference between this and
the only difference between this and
the only difference between this and
classic is really that you cannot create
classic is really that you cannot create
classic is really that you cannot create
new sub entries using some
new sub entries using some
new sub entries using some
sponsorship because there's not even a
sponsorship because there's not even a
sponsorship because there's not even a
way of setting up sponsorship.
way of setting up sponsorship.
way of setting up sponsorship.
So if you want to manipulate a G
So if you want to manipulate a G
So if you want to manipulate a G
account with GAC, you need to have
account with GAC, you need to have
account with GAC, you need to have
enough base reserve. You cannot use
enough base reserve. You cannot use
enough base reserve. You cannot use
someone else's sponsorship. which I
someone else's sponsorship. which I
someone else's sponsorship. which I
think is generally
think is generally
think is generally
fine and
fine and
fine and
someone wants to sponsor a G account
someone wants to sponsor a G account
someone wants to sponsor a G account
they can do that by for example
they can do that by for example
they can do that by for example
performing an XLM bundle with G account
performing an XLM bundle with G account
performing an XLM bundle with G account
modification or something like that.


yeah so I mentioned already that
yeah so I mentioned already that
yeah so I mentioned already that
every G account function performance
every G account function performance
every G account function performance
requires and it will require high
requires and it will require high
requires and it will require high
signature threshold
signature threshold
signature threshold
and I think it is pretty much it for
and I think it is pretty much it for
and I think it is pretty much it for
the high level overview
the high level overview
the high level overview
of the cap.
of the cap.
of the cap.
I think yeah I think I don't have
I think yeah I think I don't have
I think yeah I think I don't have
much else to talk about like from bit
much else to talk about like from bit
much else to talk about like from bit
more details in the camp but I don't
more details in the camp but I don't
more details in the camp but I don't
think there is anything too significant
think there is anything too significant
think there is anything too significant
and the main thing that not the main
and the main thing that not the main
and the main thing that not the main
thing but at least one thing that I'm
thing but at least one thing that I'm
thing but at least one thing that I'm
still not sure about is a final
still not sure about is a final
still not sure about is a final
interface like what we do with delegated
interface like what we do with delegated
interface like what we do with delegated
G account standards but I think this
G account standards but I think this
G account standards but I think this
can
can
can
he can offline especially since Lee is
he can offline especially since Lee is
he can offline especially since Lee is
not here and had some concerns about
not here and had some concerns about
not here and had some concerns about
representing stills and so on.
representing stills and so on.
representing stills and so on.



yeah
so any questions?
so any questions?
yeah, speaking of string keys, by the
yeah, speaking of string keys, by the
yeah, speaking of string keys, by the
way,
way,
way,
I do not think you will need string keys
I do not think you will need string keys
I do not think you will need string keys
like an E string key for this one. I I
like an E string key for this one. I I
like an E string key for this one. I I
hope at least. So you will just have a G
hope at least. So you will just have a G
hope at least. So you will just have a G
account and it can have a C signer. So
account and it can have a C signer. So
account and it can have a C signer. So
that's probably direction we'll end up
that's probably direction we'll end up
that's probably direction we'll end up
in. So know your account time.
in. So know your account time.
in. So know your account time.



yeah any question.
Okay. I think I don't see any
Okay. I think I don't see any
questions for now. it's going pretty
questions for now. it's going pretty
questions for now. it's going pretty
fast. Again, I would say like if anyone
fast. Again, I would say like if anyone
fast. Again, I would say like if anyone
has any thoughts or comments, please
has any thoughts or comments, please
has any thoughts or comments, please
feel free to chime in in the respective
feel free to chime in in the respective
feel free to chime in in the respective
camps.
And
And
Mat is typing something. I'll wait for a
Mat is typing something. I'll wait for a
Mat is typing something. I'll wait for a
few more seconds.
Okay. So, close from the cap. This has a
Okay. So, close from the cap. This has a
somewhat naterization
somewhat naterization
somewhat naterization
in selling balance of the account for
in selling balance of the account for
in selling balance of the account for
hasn't been for so why this is the
hasn't been for so why this is the
hasn't been for so why this is the
case this is the case because
case this is the case because
case this is the case because
classic
classic
classic
when we create a new classic entry or
when we create a new classic entry or
when we create a new classic entry or
sub entry such as an account signer we
sub entry such as an account signer we
sub entry such as an account signer we
need to reserve base reserve from the
need to reserve base reserve from the
need to reserve base reserve from the
accounts that owns the entry. Okay.
accounts that owns the entry. Okay.
accounts that owns the entry. Okay.
best reserve being.5 XLM as of today.
best reserve being.5 XLM as of today.
best reserve being.5 XLM as of today.
Right. So it is not a strict withdrawal
Right. So it is not a strict withdrawal
Right. So it is not a strict withdrawal
of the fee, right? We not like in fe or
of the fee, right? We not like in fe or
of the fee, right? We not like in fe or
anything for that rate. It just
anything for that rate. It just
anything for that rate. It just
increases
increases
increases
just reduces your spendable XLM balance
just reduces your spendable XLM balance
just reduces your spendable XLM balance
on the account. It is just like we
on the account. It is just like we
on the account. It is just like we
cannot bypass this mechanism, right? we
cannot bypass this mechanism, right? we
cannot bypass this mechanism, right? we
are doing the same things that we are
are doing the same things that we are
are doing the same things that we are
doing on classic based reserve and
doing on classic based reserve and
doing on classic based reserve and
just doing it from soran now and I
just doing it from soran now and I
just doing it from soran now and I
guess the only intuitive non intuitive
guess the only intuitive non intuitive
guess the only intuitive non intuitive
part about this is really that this
part about this is really that this
part about this is really that this
hasn't happened before but I feel like
hasn't happened before but I feel like
hasn't happened before but I feel like
it's not super offensively
it's not super offensively
it's not super offensively
counterintuitive
counterintuitive
counterintuitive
because when you authorize an account
because when you authorize an account
because when you authorize an account
operation you basically it is like a
operation you basically it is like a
operation you basically it is like a
high privilege operation anyway and you
high privilege operation anyway and you
high privilege operation anyway and you
acknowledge the consequence quences and
acknowledge the consequence quences and
acknowledge the consequence quences and
one of the consequences as well your
one of the consequences as well your
one of the consequences as well your
days reserve can be increased on the
days reserve can be increased on the
days reserve can be increased on the
account so you can spend less XLM now
account so you can spend less XLM now
account so you can spend less XLM now
it is the same as classic no way around
it is the same as classic no way around
it is the same as classic no way around
this I looked into an alternative
this I looked into an alternative
this I looked into an alternative
where like extra standards could be
where like extra standards could be
where like extra standards could be
stored in the robite and then you would
stored in the robite and then you would
stored in the robite and then you would
need to pay rent for them it's not like
need to pay rent for them it's not like
need to pay rent for them it's not like
it removes the fees magically it just
it removes the fees magically it just
it removes the fees magically it just
moves fees in different direction but
moves fees in different direction but
moves fees in different direction but
automatically I'm not sure if the
automatically I'm not sure if the
automatically I'm not sure if the
approach other approach or is centers
approach other approach or is centers
approach other approach or is centers
and Soroban is sources because
and Soroban is sources because
and Soroban is sources because
creates some new interactions in classic
creates some new interactions in classic
creates some new interactions in classic
st that going to be kind of tricky to
st that going to be kind of tricky to
st that going to be kind of tricky to
implement and maintain and are generally
implement and maintain and are generally
implement and maintain and are generally
much more invasive than what proposed in
much more invasive than what proposed in
much more invasive than what proposed in
this cap.
this cap.
this cap.
but yeah, if anyone is curious, they
but yeah, if anyone is curious, they
but yeah, if anyone is curious, they
may look up the history of the cap
may look up the history of the cap
may look up the history of the cap
because it's the first version that was
because it's the first version that was
because it's the first version that was
merged. All right. I think we have
merged. All right. I think we have
merged. All right. I think we have
like 20 more minutes. So why not go
like 20 more minutes. So why not go
like 20 more minutes. So why not go
through cap 73 while we at it?
through cap 73 while we at it?
through cap 73 while we at it?
And cap 73 really supports cap 72 on
And cap 73 really supports cap 72 on
And cap 73 really supports cap 72 on
one hand to allows the accounts to sign
one hand to allows the accounts to sign
one hand to allows the accounts to sign
for the trust l creation but also in
for the trust l creation but also in
for the trust l creation but also in
general it just closes the feature gap
general it just closes the feature gap
general it just closes the feature gap
that has been there from the inception
that has been there from the inception
that has been there from the inception
of soraban and I think some people are
of soraban and I think some people are
of soraban and I think some people are
very well aware of it and
very well aware of it and
very well aware of it and
it happened I guess just in some flows
it happened I guess just in some flows
it happened I guess just in some flows
that do not involve from custom o or
that do not involve from custom o or
that do not involve from custom o or
anything. and the the issue is
anything. and the the issue is
anything. and the the issue is
basically that when you're doing
basically that when you're doing
basically that when you're doing
contract operations in Soroban you cannot
contract operations in Soroban you cannot
contract operations in Soroban you cannot
create new balances for the G account
create new balances for the G account
create new balances for the G account
and new balance being an account
and new balance being an account
and new balance being an account
entry itself for the XLM token
entry itself for the XLM token
entry itself for the XLM token
specifically and a trust line for any
specifically and a trust line for any
specifically and a trust line for any
other token
other token
other token
and it is like not completely
and it is like not completely
and it is like not completely
blocking usage of sack right for G
blocking usage of sack right for G
blocking usage of sack right for G
accounts. you can ask the users to
accounts. you can ask the users to
accounts. you can ask the users to
set up the trust point first. but
set up the trust point first. but
set up the trust point first. but
there are contexts where you may want to
there are contexts where you may want to
there are contexts where you may want to
do this programmatically. There is of
do this programmatically. There is of
do this programmatically. There is of
course a capstone 72 context. You may
course a capstone 72 context. You may
course a capstone 72 context. You may
want to use your C account logic to
want to use your C account logic to
want to use your C account logic to
manage your trust lines.
manage your trust lines.
manage your trust lines.
And it also helps to kind of bundling
And it also helps to kind of bundling
And it also helps to kind of bundling
this with some programmatic operations.
this with some programmatic operations.
this with some programmatic operations.
such as for example an example I I
such as for example an example I I
such as for example an example I I
saw recently from Tyler week. with
saw recently from Tyler week. with
saw recently from Tyler week. with
that you would be able to for example
that you would be able to for example
that you would be able to for example
create a new classic asset effectively
create a new classic asset effectively
create a new classic asset effectively
and create a distribution account
and create a distribution account
and create a distribution account
transfer asset to the distribution
transfer asset to the distribution
transfer asset to the distribution
account
account
account
distribute later to the users all in the
distribute later to the users all in the
distribute later to the users all in the
same transaction
same transaction
same transaction
which is pretty convenient. so
which is pretty convenient. so
which is pretty convenient. so
yeah I guess there are convenience
yeah I guess there are convenience
yeah I guess there are convenience
there is convenience factors there is a
there is convenience factors there is a
there is convenience factors there is a
factor of really closing the gap and
factor of really closing the gap and
factor of really closing the gap and
factor of being more compatible with
factor of being more compatible with
factor of being more compatible with
C designers of J account with cap 72
C designers of J account with cap 72
C designers of J account with cap 72
that's the gist of the motivation
that's the gist of the motivation
that's the gist of the motivation
and the way it works is via two
and the way it works is via two
and the way it works is via two
new functions for this to asset
new functions for this to asset
new functions for this to asset
contract.
contract.
contract.
these functions are change trust and
these functions are change trust and
these functions are change trust and
has trust and again the exact interface
has trust and again the exact interface
has trust and again the exact interface
is still a bit up to debate but as it
is still a bit up to debate but as it
is still a bit up to debate but as it
states now the change trust function
states now the change trust function
states now the change trust function
operates in the same fashion as the
operates in the same fashion as the
operates in the same fashion as the
forget the name of the operation classic
forget the name of the operation classic
forget the name of the operation classic
the I think it's called change trust as
the I think it's called change trust as
the I think it's called change trust as
well in classic the operation
well in classic the operation
well in classic the operation
and what it does is basically sets
and what it does is basically sets
and what it does is basically sets
a trust line limit for a given address.
a trust line limit for a given address.
a trust line limit for a given address.
if the limit is zero, then the trust
if the limit is zero, then the trust
if the limit is zero, then the trust
line is removed. If the limit is non
line is removed. If the limit is non
line is removed. If the limit is non
zero and the trust line hasn't been
zero and the trust line hasn't been
zero and the trust line hasn't been
there, then created and of course if it
there, then created and of course if it
there, then created and of course if it
is there it can be just modified.
is there it can be just modified.
is there it can be just modified.
the question is whether we need to
the question is whether we need to
the question is whether we need to
manage limit at all. I did some
manage limit at all. I did some
manage limit at all. I did some
analysis
analysis
analysis
among the trust lens that have been
among the trust lens that have been
among the trust lens that have been
active during the last year with
active during the last year with
active during the last year with
98 plus% use
98 plus% use
98 plus% use
limit trust and limit over one to the
limit trust and limit over one to the
limit trust and limit over one to the
power of 18 which basically represents
power of 18 which basically represents
power of 18 which basically represents
infinity. but if anyone is aware of
infinity. but if anyone is aware of
infinity. but if anyone is aware of
any use cases for limits that are low
any use cases for limits that are low
any use cases for limits that are low
please let us know u because we might
please let us know u because we might
please let us know u because we might
get rid of it for the sake of simplicity
get rid of it for the sake of simplicity
get rid of it for the sake of simplicity
because yeah it is not really obvious
because yeah it is not really obvious
because yeah it is not really obvious
if it's necessary and for this
if it's necessary and for this
if it's necessary and for this
programmatic manipulation of trust
programmatic manipulation of trust
programmatic manipulation of trust
twines. really likely that only
twines. really likely that only
twines. really likely that only
binary modifications would be possible
binary modifications would be possible
binary modifications would be possible
because if you need a non- infinite
because if you need a non- infinite
because if you need a non- infinite
transpoint limit, you're doing something
transpoint limit, you're doing something
transpoint limit, you're doing something
super specific probably and it seems
super specific probably and it seems
super specific probably and it seems
kind of weird that you would know that
kind of weird that you would know that
kind of weird that you would know that
the wants to do that. It seems really
the wants to do that. It seems really
the wants to do that. It seems really
unlikely.
unlikely.
unlikely.
And another function has trust just
And another function has trust just
And another function has trust just
checks if an address has a trust line.
checks if an address has a trust line.
checks if an address has a trust line.
And the purpose of this function is
And the purpose of this function is
And the purpose of this function is
really to
really to
really to



make for better programmability of trust
make for better programmability of trust
make for better programmability of trust
management because change trust
management because change trust
management because change trust
operation requires authorization from
operation requires authorization from
operation requires authorization from
the address that the trust lane belongs
the address that the trust lane belongs
the address that the trust lane belongs
to. And for example, you are performing
to. And for example, you are performing
to. And for example, you are performing
a DSD transfer to a new address, right?
a DSD transfer to a new address, right?
a DSD transfer to a new address, right?
And normally you would only need O from
And normally you would only need O from
And normally you would only need O from
the transfer source. but if you
the transfer source. but if you
the transfer source. but if you
wanted to create a destination trust
wanted to create a destination trust
wanted to create a destination trust
lines then you would also need us from
lines then you would also need us from
lines then you would also need us from
the destination as well.
the destination as well.
the destination as well.
you cannot just unconditionally call
you cannot just unconditionally call
you cannot just unconditionally call
change trust to make sure that the trust
change trust to make sure that the trust
change trust to make sure that the trust
point exists. Maybe you could, but then
point exists. Maybe you could, but then
point exists. Maybe you could, but then
you know you could make it so you
you know you could make it so you
you know you could make it so you
don't need to require us if well it's
don't need to require us if well it's
don't need to require us if well it's
not verified is really something up
not verified is really something up
not verified is really something up
to the further discussion how this
to the further discussion how this
to the further discussion how this
interface looks like. But anyways this
interface looks like. But anyways this
interface looks like. But anyways this
is the current proposal.
is the current proposal.
is the current proposal.
The h trust function really helps to
The h trust function really helps to
The h trust function really helps to
check if you actually need to call
check if you actually need to call
check if you actually need to call
change trust or not and thus whether you
change trust or not and thus whether you
change trust or not and thus whether you
need to require o from the receiver
need to require o from the receiver
need to require o from the receiver
of the balance or not. which is kind
of the balance or not. which is kind
of the balance or not. which is kind
of convenient and if you wanted to call
of convenient and if you wanted to call
of convenient and if you wanted to call
this from Z contract
this from Z contract
this from Z contract
similarly to cat 72 this modifies
similarly to cat 72 this modifies
similarly to cat 72 this modifies
base resource and again in the same vein
base resource and again in the same vein
base resource and again in the same vein
we we cannot avoid that because it's
we we cannot avoid that because it's
we we cannot avoid that because it's
classic semantics
classic semantics
classic semantics
and
and
and
we require authorization on the change
we require authorization on the change
we require authorization on the change
trust operation in same way of classic
trust operation in same way of classic
trust operation in same way of classic
so the base reserve modification ation
so the base reserve modification ation
so the base reserve modification ation
is just yet another thing that you're
is just yet another thing that you're
is just yet another thing that you're
authorizing by signing this u and it has
authorizing by signing this u and it has
authorizing by signing this u and it has
the same
the same
the same
downside of saying about it going
downside of saying about it going
downside of saying about it going
that sponsorships are not available. So
that sponsorships are not available. So
that sponsorships are not available. So
if you want to create a trust line, you
if you want to create a trust line, you
if you want to create a trust line, you
need to have sufficient excellent
need to have sufficient excellent
need to have sufficient excellent
balance for it.
balance for it.
balance for it.
And
And
And
for the excellent specifically there
for the excellent specifically there
for the excellent specifically there
are no trust lines and instead just
are no trust lines and instead just
are no trust lines and instead just
create a new account.
create a new account.
create a new account.
Then an excellent transfer is
Then an excellent transfer is
Then an excellent transfer is
performed to a G address that does not
performed to a G address that does not
performed to a G address that does not
exist yet. And this account will be
exist yet. And this account will be
exist yet. And this account will be
funded with this newly transfer balance.
funded with this newly transfer balance.
funded with this newly transfer balance.
the only caveat is that the minimum
the only caveat is that the minimum
the only caveat is that the minimum
transfer amount here is one XLM because
transfer amount here is one XLM because
transfer amount here is one XLM because
that's the minimum balance that H
that's the minimum balance that H
that's the minimum balance that H
account may have. If the balance is less
account may have. If the balance is less
account may have. If the balance is less
than one XLM the operation will fail as
than one XLM the operation will fail as
than one XLM the operation will fail as
it does today. well it will fail with
it does today. well it will fail with
it does today. well it will fail with
an error. So yeah XLM is arguably much
an error. So yeah XLM is arguably much
an error. So yeah XLM is arguably much
simpler because it does not require any
simpler because it does not require any
simpler because it does not require any
, and yeah, it just is very simple in
, and yeah, it just is very simple in
, and yeah, it just is very simple in
this sense.
this sense.
this sense.
, and yeah, I think that's pretty much
, and yeah, I think that's pretty much
, and yeah, I think that's pretty much
it on your head over that's a pretty
it on your head over that's a pretty
it on your head over that's a pretty
simple cap. , yeah, the only tricky
simple cap. , yeah, the only tricky
simple cap. , yeah, the only tricky
part about it is really handing down the
part about it is really handing down the
part about it is really handing down the
interface. because yeah we could make
interface. because yeah we could make
interface. because yeah we could make
it much simpler if you went for like
it much simpler if you went for like
it much simpler if you went for like
binary either zero or infinity trust
binary either zero or infinity trust
binary either zero or infinity trust
but we need some signal whether it is
but we need some signal whether it is
but we need some signal whether it is
too restricted or not. Okay question in
too restricted or not. Okay question in
too restricted or not. Okay question in
classic one of the reasons sponsorship
classic one of the reasons sponsorship
classic one of the reasons sponsorship
were added was to print accounts created
were added was to print accounts created
were added was to print accounts created
by wlets from being merged by Z party
by wlets from being merged by Z party
by wlets from being merged by Z party
for the base reserve. Is it a concern
for the base reserve. Is it a concern
for the base reserve. Is it a concern
for creating accounts on transfers of
for creating accounts on transfers of
for creating accounts on transfers of
sponsorships?
sponsorships?
sponsorships?



I am not sure I understand the question
I am not sure I understand the question
I am not sure I understand the question
create an account on transfer
create an account on transfer
create an account on transfer
why would you isn't that how it works
why would you isn't that how it works
why would you isn't that how it works
for
for
for
for classic as well like when you
for classic as well like when you
for classic as well like when you
create an account you
create an account you
create an account you
it's like an excellent transfer maybe I
it's like an excellent transfer maybe I
it's like an excellent transfer maybe I
could go to this page
yeah we can discuss this I think I am
yeah we can discuss this I think I am
still not sure I understand this maybe
still not sure I understand this maybe
still not sure I understand this maybe
it is some
it is some
it is some
bit of classic protocols that I'm not
bit of classic protocols that I'm not
bit of classic protocols that I'm not
aware of I want to count out on
aware of I want to count out on
aware of I want to count out on
currencies cap ,
well, technically the
well, technically the
Okay, I think it's technically the
Okay, I think it's technically the
Okay, I think it's technically the
transpoint part and XLM part are kind of
transpoint part and XLM part are kind of
transpoint part and XLM part are kind of
independent. I bundled them into the
independent. I bundled them into the
independent. I bundled them into the
same cap because they really serve the
same cap because they really serve the
same cap because they really serve the
same mission of like dealing with
same mission of like dealing with
same mission of like dealing with
non-existent G account balances. So I
non-existent G account balances. So I
non-existent G account balances. So I
thought like it makes sense to close
thought like it makes sense to close
thought like it makes sense to close
this gap all at once and not just for a
this gap all at once and not just for a
this gap all at once and not just for a
part of the site balances. But yeah, if
part of the site balances. But yeah, if
part of the site balances. But yeah, if
we figure out that something is much
we figure out that something is much
we figure out that something is much
harder to do or much easier to do, we
harder to do or much easier to do, we
harder to do or much easier to do, we
could build this up further. But given
could build this up further. But given
could build this up further. But given
how simple it is, I would hope we could
how simple it is, I would hope we could
how simple it is, I would hope we could
do both atomically.
do both atomically.
do both atomically.
,
,
,
so yeah, that's recaped. , I guess the
so yeah, that's recaped. , I guess the
so yeah, that's recaped. , I guess the
only one thing to say for now is that
only one thing to say for now is that
only one thing to say for now is that
we are still not sure which protocol
we are still not sure which protocol
we are still not sure which protocol
will this go into this get through.
will this go into this get through.
will this go into this get through.
, so
, so
, so
likely some of the caps will come a bit
likely some of the caps will come a bit
likely some of the caps will come a bit
later,
later,
later,
may come sooner. So just stay tuned for
may come sooner. So just stay tuned for
may come sooner. So just stay tuned for
that. And yeah, please feel free to
that. And yeah, please feel free to
that. And yeah, please feel free to
leave any feedback, suggestions in the C
leave any feedback, suggestions in the C
leave any feedback, suggestions in the C
discussion.
discussion.
discussion.
, thanks Ariel.
