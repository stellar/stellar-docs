All right.Uh I'll get started.I.Welcome everyone to today's protocol.Meeting where we'll be discussing some.Recent changes to two core advancement.Proposals uh CAP 63 and 67.So first.I'll start with uh some se several cap.67 updates.Uh the first one is that we.Emit the uh set authorized event to give.The unified events parody with the.Stellar asset contract.Uh there's also.A change specified that the inflation.Operation will uh emit a mint event for.Each.Payout.Uh there's also uh a change to.Prohibit mox source accounts and memos.For sorbon transactions and the uh this.Is because like so the the mox source.We're prohibiting the mox source to.Avoid any confusion confusion on events.And that along with the memos are not.Signed in the o payload.So we're just.Prohibiting them altogether.Uh there's.Also a change to have all diagnostics.Live in the single transaction level.Vector and remove the operation specific.Diagnostics vector that CAP 67 uh.Originally.Implemented.Uh and we also added the.Emu account support that we discussed uh.At the last protocol meeting and all.These changes can be in the CAP 67 link.Can be seen in the CAP 67 link that I.Shared below.Uh and the last change is.That it's not a change, it's more of a.Detail that we will discuss in this.Meeting which is that there's no.Specific event for fee refunds.Uh and.This it's conflated to the fee event.And.Uh this is related to the CAP 63 change.That I I'll discuss in a moment.But.Before I move on, does anyone have any.Questions?
All right.Then uh then I'll.Move on to the uh the CAP 63 change.One.Sec.Can can everyone hear.Me?
Okay.Yeah.Then uh yeah, I'll move.On to the CAP 63 change.Uh which is the.A change to apply the fee refunds after.All sorbond transactions have been.Applied instead of after each.Transaction like it is today.Uh so we.This this was done because the fee.Source is not part of the footprint and.This is an issue because it's possible.For that same account to be used in a.Sorbon transaction.So if you apply.Transactions in parallel uh you would.Need to make sure that the fee source.Doesn't conflict the the the refund.Doesn't conflict with a different.Transaction that modifies the ex the.Native excellent balance of an account.Uh so we had two options here.You would.Either need to make the fee source an.Implicit number of the readwrite.Footprint or we just changed uh how.Refunds are are applied and apply them.After all store run transactions have.Been applied and we decided that.Applying the refunds later made more.Sense.That's what CAP 67 CAP 63 went.With.And the relevant CAP 67 topic uh.To discuss here is that the refund is.Conflated into the fee event.So this is.Fine if the goal is to just track.Balances at the end of every ledger.If a user wants to uh infer anything.Related to balances in a ledger or in a.Transaction then this can be an issue.Uh because imagine that you have a.Contract as a example Lee mentioned.you.Have a contract.Where uh it uh the contract does an.Action based off an account falling.Below a certain balance.Uh because the fee was charged to that.Account.Uh but if we emit the the fee.As the fee plus refund when you look at.The events later on like for example if.You're doing an audit you will never see.That the account dropped below that.Balance that the account triggered on.That the contract triggered on.Uh so.This is an edge case and I'm not sure if.This like something we can discuss is if.This if this use case actually matters.Uh but the alternative would be to maybe.Emit a a separate refund event.But we.Actually open up another can of worms.Here which is that if you're the fees.Are applied all fees are applied before.Are charged before the the operations.Are applied.So you would need to make.Convey the information about the.Ordering in which the balances change in.The events and currently the events are.Just uh a transaction level vector and.An operation level vector but we would.Need to we might need to make some.Changes where the structure that's in TX.Meta which is you have the you have.Everything that happens pre-apply.Uh everything that happens during.Transaction application and everything.That happens post transaction.Application.we need to uh convey that.Same information in the events and we.Should and if we do need this.Granularity that might be the path to.Take.Uh so so uh yeah if does anyone.Have any questions about this or or have.Any input?
Um uh what I wanted to tell is that like.Um uh what I wanted to tell is that like.We don't have many people today.Um and.We also don't have Lee and we don't have.Nico and others.So I mean you.Definitely could listen to what folks.Who are present think.But yeah sounds like I can afford just.Yeah exactly uh yeah I'm inclined myself.To just uh not do anything and just.Clarify in the CAP that events should.Not be used for modeling the exact.Balances during the ledger application.Time because fees are in general charged.At different points in time.Um, okay.Here's.Nicholas.Uh, yeah, it seems to me like that's uh.The thing to do here and if someone has.Objections, you can discuss them async.Um yeah because otherwise we would.Introduce a lot of structural complexity.In meta.Uh for meta in events and we wanted.Events to be rather simple to consume.And hopefully the.Consumers of events not worry about.Just reor operation but yeah that's my.Take on this.Um Yeah.I agree.I I the use cases we've.Discussed with rel in relation to CAP 67.Tend to be for just tracking balances.Uh which seems like you know.Tracking you updating your balance at.The end of every ledger is what what.This was designed for.And if you if you.Want to use this for if you when you do.Anything related to like audits or.Anything more granular, I feel like TX.Meta should be enough.Um and making.This system more complicated to handle.Those use cases doesn't seem to to be.The right right move here.So I I I.Agree with you.Exactly.I guess the bottom line here is that.Like even though the effects are when.The ledger has been applied, you still.Get the correct value for transaction.It just applied at different points in.Time, but then when you're looking at.Transaction events, you'll still get the.Correct key charge that corresponds to.What happened in reality.Um, you just.Don't know the exact details when.Exactly has been charged.So, um,.Hopefully for most.Intense purposes, please.So yeah, I I.Guess we can write this up and update.The CAP and yeah, we can update the cap.And respond in that thread.Okay.Does anyone else have any have any.Input?
We have a small group today.Um.So unless anyone has any uh any other.Questions, we can probably call it call.It early.Well, it was a quick one.Today.Thank you for joining and uh.Yeah, thanks Nemo for your.Input.See you.
