Welcome everyone we're trying out.Something new by holding the Stellar.Protocol meeting here on the Stellar.Stage in the Stellar dev discord .We've been experimenting a bit with.Platforms the goal is to try to have.These meetings in public so that people.Can see what's going on and can ask.Questions and can understand the.Thought process behind changes to the.Stellar protocol but we also want to.Make sure that the platform is not buggy.That it works that it's easy to.Reproduce the meetings and it's that.It's easy to attend them and so we're.Hoping that this works we've tried a.Few different things if this doesn't.Work we'll keep trying things until we.Get the right.Fit.But we'll see what happens today so .Bear with us. I will say that these meetings the.Stellar protocol meetings are designed.So that we can discuss upcoming changes.To upcoming versions of the Stellar.Protocol in order to advance the.Protocol to meet ecosystem needs so a.Lot of the times what we discuss are.Caps core advancement proposals and this.Is where sort of new features that we're.Going to add to Stellar are big changes.To the Stellar protocol start right.And they are essentially technical specs.That outline changes that we plan to.Make to the Stellar protocol and .Anyone can read these caps they're in a.Public github repo the discussion for.These caps happens on a public mailing.List and some of them also here in the.Stellar dev discord again if anyone is.Interested in this process or in.Understanding the caps or in leaving.Feedback about them or asking questions.We encourage you to do so and in fact if.You're going to follow along with this.Meeting it's a very technical meeting so.I would suggest taking a look at the.Caps.In question.At the moment we're focused on project.Jump cannon which will bring smart.Contracts to Stellar and there are.Actually we've sort of modularized our.Approach to this we're taking different.Segments.Of the engineering work that needs to be.Done to make changes to the protocol to.Allow for smart contracts and created a.Series of caps each of which sort of.Addresses a specific portion of that.Work and so at the moment there are.Actually five caps that relate to smart.Contracts.We have 46 47 48 49 and now 50.And over the past week there have been.Some changes to CAP 46 and 47.And CAP 50 is a new CAP today we're.Going to start to continue the.Discussion about these things and .You know as part of that we we certainly.Again encourage you to take a look at.The caps encourage you to take a look at.The mailing list and we in these.Meetings try to address some some.Questions synchronously that are.Important to discuss together but a lot.Of the work also happens asynchronously.So I encourage everyone to follow along.With that and so today .It's a fairly open-ended meeting .And I think.I I don't know I I'm not even sure the.Exact best place to start I know that.There may be some stuff to discuss on.Cap 47.I don't know if we're ready to discuss.Cap 50 yet or if we still have open.Questions about CAP 48 and CAP 49..So I guess the the first question I have.I guess lee is not here I know that.There were a few questions about CAP 46.But it looks like sid you may have.Addressed those questions.Maybe we can get a quick review by john.Over CAP 50 and the latest changes made.There.Perfect thank you let's do that.Done.Great. we can open up there although I do.Think we probably should go back and.Talk about 47 what's in earth later i.Don't think we've actually spoken about.It much in any of these meetings but.Let's let's start with some overview of.What's going on on 50.So CAP 50 is if you saw the the first.Draft that came out I don't know about a.Week ago. maybe a little more than a week ago.It was really focused on just like .The question of like what does it mean.To sign smart contract transactions on.Stellar.The scope of it over the course of the.Week as I thought about it and talk to.People a lot of people a lot of times.Really change from just like what does.It mean to sign but more of what does it.Mean to do and what is the ownership.Model that.We think should be like the default.Basically.Of owning it like basically like what.Does it mean to take an account take.An action where your action affects some.Assets that you probably own.And so basically like. in terms of what's in CAP 50 and what.Has changed in the most recent .Edition.Basically it opens up with .With let me actually look at it while.I'm talking about it.It opens up with some comparisons.Against like.Why the model that is used in ethereum.Is really effective the model being.Basically like.You can take actions in general for.Message.sender in ethereum..There are some exceptions you know where.You use signed messages and stuff but.You know prc-20 tokens for example kind.Of a bedrock aspect of ethereum.Are based on this notion of like if.You're a message.sender you control the.Assets and you can do whatever you want.If you need to delegate that control you.Use transfer from which works via an.Approval message where first you were.Message.sender to commit that approval.So this is the same kind of model that i.Then propagate to Stellar.And so we introduce some new types of.Transactions basically.Which I'm talking about here is like an.Invoke contract transaction. this transaction starts off looking.Just like a classic seller transaction.Source account sequence number fee all.The stuff you're expecting to see.Then the next set of parameters are.What contract do you want to interact.With what symbol are you looking up what.Parameters are you going to pass that.Function that corresponds to that symbol.If it exists.And then a read write set which I don't.Talk about at all and has nothing to do.With this CAP and it's really more to do.With cat 46 I'm not going to talk about.It.Then the next thing that introduces like.Okay well like who is running this.Transaction like when I ask who is.Message.sender or the terms I'm using is.Like this get invoker function. host function.What is it going to return when I run.That contract.And so basically there's a new signature.Slot that basically identifies that. that person that key.And then there's one more layer outside.Of that which has your normal Stellar.Decorated signatures.And there's a ton of justification about.Like why that's a good model.Why certain things are done like this.Like why do you have this like three.Deep nesting of structure and all this.Other stuff why shouldn't you you know.Just do signature verification in every.Contract why shouldn't you do replay.Perfect prevention every contract all.The stuff kind of ties into it but.That's kind of what's in here.So john one thing that strikes me here.Is that it's a fundamental shift from.The Stellar the current Stellar account.Model.In the sense that. you know it doesn't have.The all the kind of like the high level. stuff that you get in a Stellar.Account it really boils down to like a.Single signer account right.Yeah exactly.And I think there's like a lot of merit.To this model .Mostly because like.One of the things you get from like.Having a Stellar account is this like.Ability to have multiple signers.But like in reality we use like 80 25.519 and you can do a threshold scheme.For that anyway so like.You can just sign with a signal signal a.Single signature on chain.That is like produced to be a.Multi-party communication.Multi-party computation off chain.Get a lot of the same results as you.Know having an account with multiple.Signers. the other things that are on the.Account.There is like when you're running.A smart contract you don't have access.The way that I'm proposing that we've.Been talking about things right now you.Don't really have access to like your.Native balance your native trust line.Directly. so there's no need to have an account.To store that balance instead you would.Potentially do like a cat 49 wrapped xlm.Type of thing.You don't.Like you can use a different account.Sequence number you don't need like if.You want to have a sequence number you. with the same key you can but you.Don't need to so.Basically this is just like a strictly.More flexible model that's going to be.More efficient on chain because.Everything boils down to a single.Signature.That's my stance at least.Yeah it's worth mentioning that even if.You use threshold signatures if you want.To rotate keys you still need to modify.The the key which is basically not an.Option here.That is.Sort of true.There are two ways you could do.Threshold signatures I'm like not an.Expert on photography but like.If you want to rotate the underlying key.Like for example if you're like.Underlying secret key was compromised.Then yeah.You definitely don't have that option.Here but if you just want to rotate the.Key shares.That's actually possible in a re-deal in.Like a in a threshold system that.Supports redealing.So.It depends what what level of security.You're looking for here.Interesting and what's the relationship.Between.The.Classic Stellar accounts and these new.Jump cannon accounts.None whatsoever.Like.You might have an account that's like.Gabc. and you know you might want to sign.For.You know your smart contract.Interactions as like gtomer.Assuming that you actually had the.Secret key for that.Vanity .In terms of running like in terms of.Becoming the invoker the message.sender.You don't need a seller account to exist.For that purpose.It it's totally completely logically.Separate I guess as long as you control.The key you can become message.sender.I think the distinction is not the jump.Cannon there are jump cannon accounts.And there are Stellar accounts I think.The distinction is that there are.Stellar accounts and john cannon doesn't.Actually have accounts jump cannon just.Has.Signers or signatures.That's a really good way of putting it.Lee.Well.You you still have a concept of an.Account on.On the jumpcat side but it's more of an.Like it's like an emergent behavior.Thing right it's like the sum of.Everything that this signer. you know owns in different contracts.Becomes the account it's like an.Abstracted .Yeah I mean you you couldn't describe it.Like that.But I think there's no physical.Representation.Yeah I think there's like what the.Protocol defines and the protocol.Doesn't actually define an account.In the encounter in the cap50 proposal.So I mean the ecosystem.And tooling can all refer to these.Things as account they can treat them.Like accounts they can display them in.That way but the protocol doesn't.Actually.Enforce that.Like it does today.In principle if everybody hated this get.Invoker mechanism even though it's like.Very it's exactly parallel to the.Message.sender.Mechanism in ethereum but suppose that.Everybody in the Stellar ecosystem.Totally hated it. the proposal actually described so.You could just completely ignore it and.Like everything would work because oh.That's actually that's one thing i.Should point out compared to the earlier.Version that you and I have discussed.Tomer this version actually makes the.Invoker signature optional. which was something that came up when.I was talking to nico.About like there are lots of times when.You just like.Don't need an invoker signature like the.Contract will never ask who the invoker.Is. because it's not relevant and the.Invoker's saying friends in ed25519.Where you need to reveal the key also.Ends up being like 96 bytes.And you just like y sign with some.Random key for no reason you could just.Do nothing so if people don't like this.Mechanism ignore it.I'm still trying to wrap my head around.The interaction between like from the.User perspective.You know they have like a an account on.The Stellar side.And like what happens when they move you.Know let's say we're in the world of cap.49 not that I'm suggesting we should do.That let's say we're there and I move an.Asset to the smart side. and let's say that my my classic side.Has some sort of like multi-sig.Baked multi-sig scheme.Like what would be like the the the.Behavior here the expected behavior.That's a really good question I think it.It depends on what the wallet kind of.Wants to do.For me the kind of same thing to do.Would basically be to let's say this is.The first time you're interacting with.Smart the wallet generates a new key for.You or it asks you if you want to use.Some key that you have.But probably it should just generate a.New key for you.And then like somewhere in this.Proposal. there's like a lot of stuff here now. in the like.Compatible with CAP 49 section wrap.It basically what you end up doing is.You end up signing with the whole.Multi-sig configuration on classic that.You need.You run this rap and it'll be at the.Medium threshold I should say you run.This wrap operation.It wraps it up into a smart asset in the.Cap 49 cents.And it sends it to that address whatever.Address you specify now that's the.Address that owns it on the smart site.So I'm expected to migrate to.A new.Account id.If you don't have multisig setup you.Don't need to.If you do have multi-sig setup and you.Like you uniquely control the key you.Like for example like imagine that i.Have like you know three hardware.Wallets. and I need two out of three of them.To sign to do anything on my account.Well it's perfectly fine for me to do.The public for me to use the master key. I'm the only one who knows it.But like if I'm not the only one who.Knows the master key then that's not.Going to work.So it really depends a lot on the.Configuration of your account but you.Should propose.Address is going to be the same no.Do we propose a new stir key for the.Jumpcat inside for these account ids.I don't know. that's a good question homer. they're.Maybe maybe we should yeah.I mean you will need.Yeah you will need that anyways for yeah.If you want to deposit into contracts.So I think the like the dangerous thing.Here is that I have an account on the.Classic side it's a it's a account.It's a multi-sig and let's say that the.The master signer is is nullified.And now I ask someone to send over an.Asset on the smart side.They use that. like the public account id.And now.I don't have that and so I'm screwed.Indeed if that happens you are.Completely screwed.Sounds like a pretty big footcon.I mean in general on smart.And this is like this is not unique to.Stellar this is like true on ethereum.With the rc20s too if you send money to.The wrong address.Bye bye money.Like it's not like seller where we're.Just like oh that account doesn't exist.Sorry.Yeah but if the wrong address is the.Right address and it's on classic that's.That's problematic.Yeah that's that's the big problem the.Fact that they're like two domains and.You have like these addresses that are.Valid in both domains but actually mean.Different things that's that's like a.A huge foot gun so I do think.If we're going down this route I would.Definitely say that we need a new.Sturkey for accounts on.John cannon.Well and or a new way a new.New type of.Account on classic right the people.Should create deterministic accounts on.Classic that don't have a master signer.So you can't accidentally use the master.Signer.But yeah having a different circuit i.Guess would.Would mostly do the same thing.Huh that's actually not a terrible idea.It just seems kind of wasteful to me to.Require a classic manifestation.Of an account to do stuff on smart.There's there's actually no dependence.On that thing having any physical.Manifestation so like requiring it to.Come from a deterministic account just.Seems like.Super unnecessarily fast like a lot of.Them you know I'm just saying then you.Can't interpret a deterministic account.As a .You know because like a deterministic.Account would have a difference turkey.Right and so people kind of moved over.To that I mean I guess the question is.Is the plan to kind of like completely.Junk classic and get ready for is is.A plan that like.You know classic will form the basis of.Like a super low cost like high.Performance decks and payment network.Right so in the latter case.It seems worth it to like say that.Because these smart contracts are.Designed to interoperate with classic we.Should like make use of the.You know this author did the we should.Have like a single.Sign-on if you will for both.Sides of the network but if the plan is.Eventually.To deprecate classic then maybe it makes.Sense not to have single sign-on.I mean like single sign-on is a myth no.Matter what in the world of smart.Contracts what if I just build a smart.Contract that doesn't use the same.Scheme like what if I wrote a smart.Contract that actually just does.The same thing.As the current get invoker scheme you.Know it does it by you know you submit a.Single signature I validate that.Signature and that's that yeah I mean.You know of course you can you can.Implement crypto schemes that aren't.Even supported in classic or whatever.You can do anything it's a smart.Contract well the question is what are.We going to make like super easy and.What are the idioms that we're going to. kind of train our our developers to.Use effectively.Yeah john I definitely agree with with.David here because.If you look at both CAP 50 and CAP 49.There is. you know they kind of imply.That you know we expect everything to.Kind of like move to.The smart side in reality if we want.Them to coexist.Then you know CAP 49 CAP 50 are I would.Say.Simple from a protocol perspective.But they introduce.Downstream complexities across the.Ecosystem of having you know two types.Of accounts and two types of .Of balances.So the question is. you know does it actually make sense.If we do think that they'll coexist you.Know what david proposes like for like.Having this like.Another new account that you can migrate.To.It's a minimal it's a different type of.Account it's a minimal it's a single.Signer account but it actually has.Representation on both sides.That might be. you know something that that's worth.Considering if we expect classic and.Jump cannon to coexist.Yeah I actually just want to jump on.That and just just emphasize this you.Know that two sets of keys like two sets.Of accounts I think we have to.Evaluate this in the context of the goal.Of.Equitable access.So this is a like.All of this complexity for users.Is maybe easy for someone who is.Immersed in the crypto. like in the blockchain space. but.For for your average user who is an.Immersed in in blockchain technology. that's a pretty high bar. of complexity to to navigate.Yeah and it's not it's not just the.Absolute complexity but kind of the the.Shape of the curve leading there like in.An ideal world the sort of the the .Expert there's kind of a smooth line of.Like the amount of expressivity you gain.Versus like your expertise right and so.Like if you start just using classic and.You want to write your first smart.Contract it's actually there's like a.Relatively gentle on-ramp to get get.You.Doing that right versus okay now create.A new account type and whatever and i.Don't know.What I don't understand is david's.Proposal doesn't eliminate the need for.Having.Two sets of keys.Like you just end up with like okay like.Now I have a classic account a normal.One a g account i'll call it. in the in the terminology we're using.An eternity ago when we were talking.About deterministic accounts.And now I'm going to create another.Account that's a d account that has a.Different key.And I'm right back where I was.So I don't know.My interpretation of david's proposal.Is not. to maintain these in parallel but you.Know you get an option to migrate to.This new account type you know the.Account this d account.Is a single signer account that's valid.On both sides.And from that point on the user the.User doesn't actually interact with with.The g account anymore like they they.Have like this one time migration.And presumably new accounts are this d.Type but by the way I don't actually.Think this is necessarily better right.Like I think that.Our.You know maybe the concept of .Just like you know account authority .Is is something that.Makes.Sense to just kind of expose in the.Smart contract world right and say like.Well these aren't smart contracts and.Avoid their smart contracts intended to.Interoperate with the legacy ..Stellar accounts and so to just kind of.Expose that.The way.You know we expose single sign-on across.Multiple services is is a useful thing.Is there is there like. again what's the driving force for.Like why we can't have this key.Signature be the decorator signatures we.Have today.And.Instead of. having the source account be.Message.sender so like the account the.Classic account id.Being message.sender which means.Contracts still are only dealing with a.Single.Identifier like you know they're dealing.With.Account id or contract id as the message.And then the protocol just hiding the.Fact that.You know for the most of the time that's.Going to be the master key.But sometimes there might be a.Multi-seek key but contracts don't.Actually get exposed to that so from the.Contract from the jump cannon side it's.The same experience. it's an account id.Or it's a contract id and that's it. and like I think.If I understand correctly the thing we.Were going for with key signatures is.That accounts don't have to exist.And then we just say that.An account id doesn't have to actually.Exist on the classic side for it to be.Usable on the.Well I guess it does doesn't it okay.No it doesn't like it's this it's.Actually the same in classic right like.You you don't have the account doesn't.Need to exist to use it.Like you you can if it's a single. key.Like you know like you can always.Reference it and use it in different.Schemes like you know as a signer for.Example it's just a key.So i'd intended to write about this.Before this meeting today there wasn't.Enough time it's on my list of things to.Talk about like why it should work this.Way and not be just the account signers.Signing for it but at the end of the day.My justification just comes back to.Pre-signed messages.All the time for this.Which is that if we don't expose what.The account signers are what does it.Mean to have a pre-signed message let me.Give you an example imagine that you're.Writing an erc20 token.Which is all my examples nowadays.Because it's like super fundamental.Token that we're all familiar with. you have these these operations.You know you have.Balance of and allowance and approve and.Transfer and transfer from and blah blah.Blah blah blah blah blah.And in this model everything still works.Based off of message.sender.So now what I do is I sign with my.Account let's say that I have a two out.Of three multisig account like I was.Talking about before with like you know.I own three hardware wallets I sign with.Two of them that's how I do stuff.The account only gets message.sender.Which is my source account in this model.Okay but now I want to implement eip2612.Permit.How do I do that.Like how would you even default. how would I even define either 2612.Also I'm seeing people.Complaining about my mic volume.Okay david then you should just adjust.Your .Just my volume for you everyone sounds.Good it's just some people are much much.Louder than others so I have to like.Constantly adjust my volume which is.Annoying but.If you.Right click on me you can adjust my.Volume to you.Anyway.Oh awesome thank you yeah I got you .So how would you even do eip2612 permit.Like the way that that works is it works.Based off of signing a message.For the public key and that was. okay so basic and like what.Signatures do I use now.Like do I use the account signatures.Then it's not transparent. I have to go and actually look up the.Account find its signature find the.Designers check them against that blah.Or do I just use the single signature.For the public key which is the very.Much more computationally efficient.Thing to do.But it would be wrong it wouldn't convey.The right access controls.Can we maybe like I think there are.Like two problems that we are that we.Are trying to deal with here there's one. around I think.And I think this one exists even in the.Current version of cap50 like regardless.When I give somebody my address right.Like my public address.How does it look like if I decide to.Upgrade my account you know when I say.Upgrade to my account to a smart wallet.Like I really want to move all my.Balances and stuff right under my wallet.So how would that look like I don't.Think the current.Proposal kind of allows you to deal with.This type of situation.And then for the.For the signature scheme like like.Why not so right now we have keyed.Signature now that it's actually inside.I think what we can do is actually make.Add a new case.That would be like classic scheme or.Something right that.That is just account id.And then threshold and then and then.And then the decorated signatures.And that's it.And then you can actually use your.Like the invoker can be an a classic.Which means you can actually.Use that as a.You know when you.As a recipient for.Anything really and then you have the.Threshold.Like you do on classic.Great but then right back to the eip2612.Permit like you still have to go and act.Like if I'm a contractor implementing.The ip2612 permit.I have to actually go and read the.Account look at all the signers check.The signal no no you do you wouldn't do.That like.Because you never sign like to sign.Something like when you sign a a payload.What you the the statement that you have.Here's a binary blob right that you want.To sign as a specific invoker right.And then here the signature is fresh.Like like basically you have to sign.A statement that says those.Signatures when you add them to.When you yeah like .Evaluate them in the context of this.Account you reach this threshold you.Cannot guarantee that.I don't understand how the account could.Not go and like could avoid going and.Checking.The contract could avoid going and.Checking I just I don't see how that.Yeah yeah well it's the same like.Well that you mean verification wise is.That what you're asking that's that code.Is yeah that would be like like we.Need a a function of source that is like.Verify right that is.Suppose the classic scheme I think.That's kind of all there is to it.But that has quadratic complexity.Yeah.That's okay like.It's really not.No like it's all about.What is it.No.No like it's gas codes right like if.People want to do that they're not.Blocked from doing it.But it's like really really expensive.Whereas like just checking a single.I'm not saying to remove the single.Signature I'm saying that you you have a.Way out of the like.My public address is g whatever and i.I don't.If somebody you know like sees my public.Address and decides to send me funds.Using smart.I want that to not go to the devnet and.Then you want the contract in you.Want the contract implementer to go and.Implement both verification methods.I mean what you think is we could also.Have like a.You know like a parameter type or.Something like a signed blob.Or an account authenticated blob that.Would that would be you know it would.Be checked .Independent before executing the.Contract basically like maybe we don't.Need to verify dynamic data like all the.Signatures can be checked statically.We're getting into the area of being.Like super parental and telling people.How to write their contracts when as a.Matter of fact you know they already.Have especially things like the the type.Of bridging applications that need this.Type of capability they already have.Implementations on other networks we.Don't want to be to.Parental i.I think.I'm on I'm on john's side with regards.Keeping simplicity. you know as a core value and and.Really like zooming in on these like.Single signer.Accounts.But I'm really concerned about the.Interoperability aspect you know.For the ecosystem and I do think that.Having migrating to some sort of like a.New account that is a single sign or.Simple account. that you obviously you can only.Migrate to you know if you if you.Have a single sign or a current account. but having that.Being existing on both sides. is something that the ecosystem can.Tolerate.It's a little bit more complicated than.That tumer it's not just that you can.Only migrate if you have a single signer.It's that you can only migrate if the.Only signer is the master key.And that means lots of accounts will be.Locked out.Yeah so I so what I see is you know.Like your wallet can you know.Obviously there's like a migration thing.And your wallet can tell you hey. if you want to work on smart you need.To migrate to this new account .Most accounts by the way are just you.Know like single signers and they do.Have a hundred percent of the of the.Like master weights so I don't actually.Think that's a problem but you know.Your wallet can tell you hey like this.Is . you know this is like the new type of.Account if you still want to maintain.Your multisig these are like other ways. you know you can do multi-sig in like.This brand new world.But but the thing is that that migration.Happens once right I don't have to.Actually as a user as a well while.Developer need to I don't even think.About about this every time I move.Between sites.Yeah I think it makes it pretty.Difficult for wallets either today or.That are developing for standards like.Sub 30 for example to be able to to then.It will also interact with this world .Like we're still sending people down.This track of like.You need to have two sets of keys.Because the migration path is not.Particularly clear I think.Otherwise.Or we're saying like you have to migrate.All the way to this only smart only jump.Cannon.Construct.Like how how like how would you have.Multisig on jump cannon and multisig off.On classic at the same time with the.Same account is that doable.I'm I'm proposing.Like not to actually ever like having.Just a single migration and then you're.In this other world which is both.Classic and jump canon but it's on a.Simplified account model now if you have.A multi-sig account on.Right now on Stellar.Then.We can think about ways to either.You know either do threshold signatures.Or just actually deploy a multisig.Contract the same way that multisig.Contracts are on.You know ethereum and other ecosystems.What you're describing is every account.That exists on the network today that.Uses multisig deploying their own.Contract on jump cannon.That is one option again that's only if.You want to interact to interact with.Jump cannon right so if you're a vibrant.User and you don't you know you're not.Using any smart contract. like these are not things that we.Need to have figured out like the first. you know like.At launch. and yeah it does not have to be like.One contract per per wallet right it can.Be.Obviously the parity wallet is not a.Great example but the parity wallet was.Like a single contract that provided.Multi-sig for a lot of a lot of accounts.Right.You hear that while it's super secure in.Fact nobody's ever been able to get.Their money out of it.Yes it is super secure I mean I still.Don't understand the whole like I call.Immigration thing how does that I mean.Like if if you look at some of the.Interesting accounts that are multisig.Right issuers like are we saying that.Changing the issue are probably key.No I'm not saying.I'm not saying that at all I'm saying.You only need to. to.Migrate to a new type of account if you.Want to interact with .With jump cannon and CAP 49.Proposes that exactly but like to a much.Greater extent right you need to every.Time you move.Between between the like I'm I'm talking.About the issuer.Why would the issue where needs to need.To migrate.They don't want to have like any.Presence in jump cannon.They will have to use a different.Account I guess. I think like there will need to be a.Distribution account. potentially that if they want to.Interact with smart contracts they need.To be on.On smart but i.You know I think that depends a lot on.The the asset interoperability story. which.You know we still need to think about.Can you just tell me what this migration.Looks like like I want to mic.You know I want to migrate from my.Classic account to a smart account.What is what has to happen.I actually have to like somehow move.Balances or does it just like transmute.Balances.And annihilate the classic key.Very simple happy path for something.Like this is that.You log into your wallet your wallet.Tells you hey we have a lot of new.Functionality on smart contracts but.For that to work you need to migrate to.A new account let's call it a d account. it takes you through the process and.Once you end it.You know effectively like merges your.Account and and I'm saying happy path.Meaning that it's there's just a single.Signer and it's a and it's the master.And then you know now you have a d.Account and you can either.Operate on regular Stellar classic.You know make classic payments and such.Or you can operate on smart contracts.But it's a simple account you cannot you.Can never actually do on-chain multi-sig. the way that you did with your.Previous account.I don't know if we need to explore.Necessarily like yeah like in this.Meeting like the.Actual.This actual migration flow.It sounds like it will have a lot of.Edge.Cases like I'm thinking like.From a kyc point of view right like you.Have a bunch of trust lines.Like you probably I mean.You need those d accounts to have the.Exact same.Public key because that's what got kyc.All you you deauthorize trust lines you.Know that's another option.But you know.Things like that.Yeah again like happy path constitutes.Of accounts that are very simple they.Have a single .Master signer and and assets that are.For the most part you know the.Overwhelming majority are.Not asset not auth required or and.And can can easily be moved.Cool yeah just that that's all I was.Hoping for was a very quick explanation.To like help clarify in my mind what it.Was that we were talking about .Thanks.I mean like.I need to think about it more.I.I'm like.I'd really what I really would need to.Do is go and like look at what the.Current like configuration of accounts.Network wide is you know there's like.6.7 million accounts or something like.That.Can most people actually just migrate to.A new public key.Meaning that like their master weight.Has weight one.All the thresholds are equal to one.If that's the case.Or I said migrate to a new publication.Migrate to only their public key.If that is what most accounts are like.Then like maybe this is reasonable.If most accounts aren't like that or.Even if many accounts aren't like that.Then I don't think it actually gets us.Anything there's no worth there's no.Worth poking holes in it because it's.Just like.Not general enough to be worth.Considering.So I need to go and like you know hit up. hubble and figure out what the.Situation is.Wait hold on quick.I think the alternative people.Still can't use. smart except now they could lose.Money if people accidentally send the.Money on smart.I'd rather have a world where most.People can't use smart than one where.Most people can't use smart but it looks.Like they can and so money gets.Destroyed.Yeah I also just want to point out like.We can research this with hubble but.What we should also evaluate is.There may be a lot of accounts on hubble.That are not actually meaningful and.Whereas we should also have a look at.Products that are getting developed .Either recently or in the future that we.Know of that are getting developed on.Stellar are they using multisig are they.Using things like SEP 30 how are.Those.Products like what's the story going to.Be for products that are that are just.Setting out now with multisig. because.If we do just have a look at just hubble.We may find a large number of accounts.That only use a master key they also may.Be inactive accounts maybe accounts from.The past accounts that are not actually.Relevant to.Where we're going from here.Yeah but lee like we're not saying we're.Not annihilating the idea of multi-sig.Right we're just saying .These you know we need to find like a.Different.Multisig construction for these accounts.Moving to this new account type.Well it sounds like.On some level at least though doing some.Research is is a good idea to understand.How people are using multisit currently.Any other thoughts on this issue I mean.We have about 14 minutes left and we can.Stay here or we can move on.Now i'd like.To go back to like the first thing.Because maybe that's what that would be.A different approach to this problem.That is like the the question i.I was asking earlier that is how do we.Think about.Like I don't know how this is solving.Ethereum like if you if you have this.Flexible. invoker thing like.If I decide to.To take my account and move my assets.Into a smart.Wallet.My smart wallet becomes my public .Address in a way.I think right.How does the money gets routed if.Somebody sends money sends funds to.My.Old key.If you have the address.And sorry if you have the key and only.You have the key you just go grab it.Public key no no what I mean is that.Well it's kind of funny right like does.It mean I have to even though I decided.To upgrade my you know my setup to a.Smart wallet.I still have to keep this kind of.Single key setup around forever upgrade.To a smart wallet you also have a smart.Welcome.There's no way to stop using that.Address other than to tell everybody to.Stop sending money there.I mean it's no different from when you.Move houses right like people will keep.Sending mail to your old address much to.Usps's display.Unless you tell them not to so you can.Do forwarding right in that case so.That's kind of what I'm getting through.There's no way we're going to do that.Probably.Like no but like for like if we had.To support those type of scenarios some.Way to do forwarding you could do.Forwarding for.Those multisig accounts.Why do forwarding though just keep the.Key around until you don't want to.Forward anymore and go and collect the.Money.Like we don't need to be.You know we don't need to be dad for.These people if they know if they want.To switch to a smart smart wallet they.Should know what to do.No I'm just trying to kind of compare.The complexity of like migrating to.Those d you know whatever accounts.Having a way to. to kind of.Make it easy for people to change their.Keys basically and.Even in smart.If you make it easy for people to change.Your keys you're just gonna end up right.Back at the okay well now I have to go.And read this other thing and check the.Signatures based off of that and.Everything becomes less efficient like.Do we care about performance or not.If we don't care about performance let's.Just glue on the evm and get 13 tps i.Don't understand why we're working so.Hard if we care about performance we.Can't do that and we have to do better.But that means we should be making.Decisions that matter.I mean it's it's not just about.Performance right it's about like the.Whole reason we are talking about this.Is for usability right like making it.That people don't have those food guns.You know everywhere.But I mean I think that we.We care not so much about performance in.Absolute terms as the the scalability of.Performance in terms of cores so if we.Can kind of split it up into work that.Can be parallelized and work that can't.Be then as long as there's a way to do.The signature checking such that it can.Be paralyzed I don't care if it's you.Know i'd rather have it be four times as.Expensive but embarrassingly parallel as.Like you know four times faster and like.It's competing for like the same cpu.Core as like all the other logic and all.Transactions.Sure but i'd also rather it just be.Embarrassingly parallel and not four.Times slower and like what I'm saying is.Like these the discussion we're having.Right now doesn't change the.Parallelization well it probably makes.It a little worse because there'll be.More contention. but it doesn't like it definitely.Doesn't make it better that's definitely.Like nico's proposal will not make it.Better but it does mean there's more.Work for everybody to do so it's.Definitely going to be slower.Should we just add bls signatures the.Other thing is like do we have a.Particular it seems like.Not all implementations of threshold.Schnorr.Like people like cut some corners like.Do things that like.We don't know how to attack but they.Don't.They prevent the proofs from growing.Through .There's the fact that like.The multi-state we have now is it may be.Slow but it is.Very simple and very easy to understand.The security.And if you want this level of security.You can still use a smart a smart model.You just pay for it.And if you trust the threshold schemes.You use the threshold schemes and if.You're happy having a single key you use.A single key .Same thing I said before.Like I don't need to to tell people.What to do in the land of smart.Contracts because.In a land of smart contracts if they.Don't like the thing that I told them to.Do you know what they're going to do.They're just going to do it slower.Differently right anyway you can make it.Easy for them to do right so you can.Make it very easy for someone to use it.In a smart contract to check that.Something's been authorized by a.Particular classic account right and if.That is something that's easy to do then.People will use it where it's.Appropriate and there'll be more.Coherence across the two worlds.Do we want to talk a bit about contract.Lifecycle today.We have we have like eight minutes .But I mean there are some open questions.That came up during the .In the dev mailing list that I can talk.About. if we think.We have enough time.I think we should start on it and if we.Run out of time we can bring it back up.At the next meeting.Okay. so one of the questions we're.Still discussing discussing is if the .Contract.Code vector should be.Like the size should be fixed in the xdr.It should be configurable by the.Validators.And you know the advantage of having it.Configured by the validators is if for.Some reason we think it's.You know if there's an issue the.Validators can. if there's an overlay issue for.Example.And fix it through the values instead of. you know updating the xdr which would.Require a I believe require a protocol.Upgrade.Does anyone have any thoughts on this i.Think john is john's advocating for it.To be fixed in the xcr and nico was.Advocating for it to be configurable.Well you need a parameter upgrade either.Way right or are you suggesting that.Different validators have different.Thresholds. no so yeah you yeah so you would need.You need to be a parameter upgrade.And like an upgrade to the validators.Or a protocol upgrade.Right so either way it goes to a.Consensus in one.You don't need to recompile.That seems reasonable to not have to.Recompile I guess.Or to pick maybe maybe we don't pick.Like four gigabytes but we pick.Something that's much larger.Than we think people should need in the.Xdr and then we enforce a lower limit.In validators.That's what I was thinking .Yeah I I'm just like my big concern.About this is like it's not safe to ever.Make the number lower you can only ever.Make it bigger.And I'm just like.What is the point of this work.Like why why shouldn't we just choose a.Number.That makes sense.Basically if we want people if people.Want to write bigger contracts just.Split your logic up among two contracts.I mean it's not a big deal.Do we really want people uploading this.Upload like a gigabyte 100 megabytes.Like what's what's the number that we're.Happy with people uploading in a single.Operation.Choose that number and call today.Likewise what's the number that we're.Happy loading up into the vm as a single.Operation we'll call it a day.Great and I can see you're talking i.Can't hear you at all I don't know if.Anybody else can.Hey can you hear me now.Yes.Cool yeah I just wanted to point out .We have the same.Issue basically with like there's.Gonna be quite a lot of fixed numeric.Parameters in the system it's it's.Really not just one although the cost.Factor is all the memory limits all the.Parallelization factor when we get to.Parallel parallel execution there's.There's.There's gonna be a big bucket of numbers.That are just constants that the system.Runs on and.There's gonna be .This is this is a CAP coming at some.Point we haven't got to it yet but.There's going to be a a parameters block.We're not we're not going to have a a.Single parameter in the ledger header.For every single one of these because.The ledger header will get gigantic.A new magic ledger entry called smart.Contract numeric parameters.And people are going to have to vote on.That on a regular basis so.I I would just say.It is a number.But we would have to agree it's a number.That can only go up then.Never forget.No I don't agree or or it can go down.With we have to.Have a policy that like we'll give you.Two months notice before we reduce it or.Something but no I don't agree with.That it cannot go down you can break.Somebody's smart contract by making it.Go down even if you say like I'm still.Willing to run a smart contract that's.That's longer than this was uploaded.Before.What if that smart contract itself is a.Factory which deploys new smart.No no no no there's there's no question.That there's going to be perimeter.Changes that will break existing smart.Contracts that is that's guaranteed.Because if we if we change gas limits at.All in any direction.Some smart contracts will will begin.Passing that didn't or and and that.Implicitly means some will fail that.Didn't because they were expecting the.Other one to pass there there are ways.In which you break people's code by.Changing parameters guaranteed there's.There's no way to just make it one-sided.That's not going to work.I'm not clear on why changing the gas.Factors would.Break people's code like you could.Always just run it with more gas right.Right but like.It's something that you expect to work.On one set of parameters will work.Differently on another set of parameters.Sure that's fine as long as I can figure.Out how to still run it it is fine but.Like if you lower the size fact that you.Can like fundamentally break never to be.Recoverable a factory contract.It's totally recoverable you just have.To convince everyone to raise the number.Again.So right so it's only possible to go up.As a consequence without breaking.People's okay no this.No no I just know I completely disagree.With your premise these numbers.Affect.Whether.I mean.Seriously suppose your contract relies.On on.You call two contracts in order and it's.Really important that the first one.Fails for some reason because you you.Didn't notice that it fails but it's.Part of the semantics of your system.Working that the first call fails we.Increase the element now that now it.Succeeds.Your system stops working like people.Can rely on things in the wrong order if.There's no.And there's no fix for that if you want.The numbers to only ever go up right.Like yeah you sometimes you have to.Redeploy things sometimes you have to.Change things back if you want to fix.Them because there's no other there's no.Other way you've set a specific set of.Parameters.That you've defined as the ones that my.Thing works in and if the parameters.Change it is possible everything will.Work.I mean I think it's it's.When it comes to all those yeah like.Weird parameters I think they're like.Especially when it comes to any kind of.Limit.I think they will will always have like.You know when it comes to coming down.Right like from those limits like.If you're close to that limit.Yeah I would say like you may get broken.Like by some.Some.Weird tweaks like that like if you.Want to be safe just play in a much.Smaller you know much further from the.Well I think it's I think it's totally.Reasonable to expect that that something.Like code size is not gonna like there's.No there's no pay-per-view reason why.We're going to start reducing that over.Time it's probably the case that would.Stay the same and go up and I think it's.A reasonable assumption but it's.It's no different than saying you know.Your your.Set of pre-signed transactions.That you know .Can only have a certain .Fee that they work under and and they.Won't work if the base fees increase or.Something like that like there's.There's ways we were actually concerned.About that problem grading yeah and we.Were so concerned about it that nobody.Wanted to raise the base fee and we.Actually did CAP 15 fee bump.Transactions to fix that problem.So like that's actually like an example.That like proves the point that this is.A problem.I'm.It will continue to be a pro there's i.Just there's absolutely no way you can.Fix this by saying it can only move in.One direction that doesn't fix the.Problem so.As far as I can tell you're you're.Demanding that we fix a problem that.Can't be fixed.I think we need to just set expectations.Appropriately right if we tell people.Your contract we promise never to break.Your smart contracts it's going to be a.Problem right because we will end up.Breaking them and we'll also end up not.Innovating in ways that we should have.Innovated. and so.You know.People.Validators may vote that they they're.Not interested in seeing a particular.Parameter upgrade that's that's fair.Right it's not it's not like us making.Parameter changes it's like.Us collectively the entire network right.It's not just sf making these changes.But if a change happens and all the.Validators vote for it the validators.Could vote to to to migrate to a new.Protocol version that turns off smart.You know there's there's there's changes.That can be made among the validators.That will break existing functionality.I guess the core of my argument here is.There are things that we should.That are like worth promising not sorry.That are worth not promising to break.And there are things where we it's like.Completely reasonable to make a promise.Not to break your stuff.And I think code size is definitely an.Example where it is completely.Reasonable to promise not to break.People's stuff.You said it yourself you can't foresee a.Reason why we would want to make the.Code size smaller. not a really simple one but I mean if.You give me a couple of minutes I could.Probably come up with something I i.Just don't think it's I don't I don't.Think it's lightly but you know there's.A difference between likely and what i.Think we should be promising I don't see.Why that promise I guess I don't see why.That promise is more important than any.Other problem there are so many other.Promises we could be making that are.Also not reasonable this is just another.One that.This really feels like we're bike.Shedding at this point like let's get a.Thing built and then like.How hard or easy we make it to tweak one.Number like that's something we can.Figure out it's just not an important.Thing.At this point.I think david gets the final word in.This meeting because we're out of time.But .We'll reconvene next week and obviously.There's still activity happening here on.The .Stellar dev discord and on the.Mailing list and so anyone who's.Watching.Obviously feel free to jump in there or.To see what what the discussion where.It's tending anyone in this meeting.Obviously will also.Talk on those lists and get back.Together here next week but we're out of.Time for now.
