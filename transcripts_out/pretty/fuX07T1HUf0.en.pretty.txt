Great.Uh, hi everyone.I think we have.Bit of an issue here without clear.Uh your agenda in terms of who is.Supposed to speak.Um I guess the purpose of today's.Meeting was just.To revisit the caps that we have.Uh before the final approval and uh the.Agenda suggests that the CAP authors.Would present.Them and I think um almost all the caps.Have been discussed before besides cap.70.So maybe if parent is.Here.Yeah.Maybe you could talk about.Cap 70 because it's completely new and.Then we could I don't know I guess.Quickly recap other caps.And there any questions um concerning.Any.Cool.Uh yeah that sounds good.Um so I.Guess getting started with CAP 70.Uh.This one is a recent addition to.Protocol 23 um but it's fairly uh small.And straightforward.And so essentially.What this does is it introduces a couple.Of new uh network config settings that.Control um some of the timing parameters.Around consensus.Uh so essentially uh.Today um like during consensus there's a.Couple of hard-coded values such as the.Block of the ledge or the length of the.Ledger being 5 seconds as well as some.Of the uh more nitty-gritty details on.Consensus as to like how long um nodes.Wait for certain rounds like timeouts uh.Between certain uh consensus rounds and.Things like this.This CAP doesn't actually change.Anything um but it just allows us uh to.Change these values in the future.So.For instance today stellar core all the.Nodes are hardcoded to have a 5-second.Ledger time.Um but with this CAP it.Allows that to be dynamic and.Configurable.And so kind of the uh the.Motivation behind this is that as we uh.Want to move towards you know higher.Throughput and lower block times um.Making you know large jumps is.Difficult.Going from 5-second blocks to.2 and 1/2 second blocks is very very.Challenging.Um so the goal with this is.To allow us to kind of make small.Incremental changes uh via SLPs where.You know to get to that goal of 2 and a.Half seconds or whatever it may be uh.You know we start uh by just trimming.Off like one or 200 millconds at a time.And over time we'll get there and so.Essentially this CAP introduces all.These new config settings um but the.Default values are the exact same values.That are currently hardcoded into core.And so CAP 70 will have no noticeable.Change um when it's uh initially.Implemented but just opens the door to.Have more configurability and hopefully.Tighter iteration cycles as we go to.Improve consensus and nomination timing.In the.Future.So, I think it's uh pretty.Straightforward and probably um not.Super controversial, but if anyone has.Any questions or wants to talk about,.You know, feel free.Um yes have a small question which I.Kind of already asked in the but.Basically.Um is it.Possible like for example for seran.Network settings it is relatively easy.To understand what every settings means.And you know if you're for example.Increasing the prov limit for.Instruction like 100x it is kind of easy.To spot that it's probably not going to.Work because we will take 100 times more.Time to close the ledger.So my question.Here is.Uh how risky is this set of parameters?
Uh how risky is this set of parameters?
Uh how risky is this set of parameters?
Is it possible to um accidentally uh v.Is it possible to um accidentally uh v.For an upgrade that breaks the network.In an unintuitive way because we're kind.Of uh altering the uh consensus.Algorithm which on its own is used to.Uh well do everything on the network.Such as upgrades.So unbreaking the.Network would be tricky.So you know how.Risky it is to break the network.So I I do agree with you.Uh these.Are pretty kind of uh you know low-level.Technical settings.Um I think kind of.The reason uh it makes sense from a.Technical standpoint to be config.Settings is that these are things that.We want to change often and kind of.Slowly over time um to you know make.Small incremental progress and all the.Nodes have to agree on them.So it makes.Sense to be conflict setting but they.Definitely are difficult to understand.And so I think as far as validation um.Pretty much the only tool that we have.Is supercluster and kind of simulating.The network and seeing the effect these.Values will have.Um and they definitely.Have effects that are sometimes not.Super intuitive.And so I think what we.Might want to do is uh at the uh.Especially when we just launched these.Features um is to put tight bounds onto.The acceptable values.Uh so for.Instance like if today um the default.Value for you know electric close timer.Is 500 or 5,000 milliseconds or 5.Seconds uh if you were to change that to.50 milliseconds uh the network uh that.Bad things would happen um and uh the.Network would be very unstable and so.Perhaps uh what we can do is um given.That at least my thinking the goal with.This gap is to make small incre.Improvements uh we could have very tight.Bounds um just at the uh you.Implementation uh level.Um and so say.For instance like in protocol 23 uh we.Could say that the lower bound on the uh.Ledger close time is like four 4 seconds.Or maybe like 3 and a half or like that.And so worst case you know if someone.Was to propose like a 50 millisecond.Change it just wouldn't go through.And.You know um even like these lower bounds.I think these would be like kind of uh.Guesses at this point uh because there's.Still lots of testing um and validity.Checking that needs to be done on these.Values.But I think like you know um if.You go from 5 seconds to 4 seconds that.Might still cause some network.Instability.But I don't think you would.Break the network um in the same way.That you would if you went from like you.Know 5 seconds to 50 milliseconds.Um.And so uh would something like that.Maybe some tighter bounds uh alleviate.Some of your concerns?
Yeah.Yeah, that makes sense.Um this I.Still feel it might be a bit scary but.Yeah I guess we can try make sure that.Maybe one.Thing I thought of when you were talking.Uh is that maybe we could limit the.Upgrade not only in absolute sense but.Also in relative sense that you cannot.Reduce by more than.X% the current value something that.So that yeah we don't need to guess too.Hard.It just kind of enforces.Incrementality.Yeah, that's a good idea.I think I mean.Like relative uh values like might have.Some potential issues like so for.Instance um I I think I like the limited.Bounds a little bit better than relative.Changes because you might be in a.Scenario uh where for some reason um the.Network is broken either because you've.You know changed limits in some way or.Maybe that there's like some sort of.Like um like a thing that's uh external.To these parameters that's gone wrong.That um also needs fixing.So I could.See a uh a possibility where uh due to.Um the network being in a bad state, it.Would be advantageous to make large.Changes to these values.Um and so I.Don't know if the relative uh sort of um.Safety measure um is as safe as it.Sounds from like a disaster recovery.Standpoint.Um but I think I think.Limited bounds um at the minimum would.Be good and like even for like the.Relative you know limit uh the relative.Limitations.The issue is is that for.Some of these values um you can you know.Uh do damage going in both directions.Right so like uh you know increasing.Nomination timeout um may improve.Performance um but uh you know so uh.What I mean by this is that like uh.These parameters um it's not that like.You know the network gets uh more.Unstable if you go you know one.Direction and then uh less or and then.More stable if you go the other and so I.Think um you So having relative bounds.Might be a little tricky.I agree like the uh yeah having bounds.In general is just absolute bones is.Probably the way we want this.Um, like I think we may want to have.Those be more like some sort of like.Config settings because I could see like.For as the goal of this is to understand.It in in you know like in in the context.Of like we want eventually to move those.In the on the public.Network have like the same defaults.That public network yeah is like uh it.Would take basically many uh you know.Many things to uh to be overridden.for.For a bad vote to be accepted.But in a.Other environment like test net or a a.Test.Cluster maybe you want to actually see.What happens if you set those things to.You know like half a second or whatever.So yeah, so I think it's the type of.Thing that we should do on the.Uh the thing I wanted to add though to.This uh CAP is that um yeah it's it's.The it's only the first building block I.Mean or the first change I think uh I.Imagine that is needed uh to really move.Uh on the latency front because I can.See certain things like that are going.To be impacted as um if HD this runtime.Gets uh too small cuz today we have uh.For example the um uh a lot of things on.The network that are tied to uh to like.This 5 seconds.So like the uh the thing.I can think of is uh uh we um we take.Snapshots every 64 ledgers or the how.Fast do we spill from you know one level.To another.those things maybe need to.Change uh as the block time gets goes.Down and right now they are not.Uh, of course.Changing the the u speed of spilling uh.Is a much more involved change than uh.Than changing the runtime.But that's I.Think something that maybe we'll have to.To think about.And I think that's uh one of the.Things that makes like this is a complex.Thing.um interesting is that you know.Uh lowering the block time is down is.Bound to break something.I mean you.Know we can test dollar stellar core and.Simulation environments and stuff and.Even if you know the actual like layer.One doesn't break downstream like.Something will break somewhere for sure.Um and so the hopefully if you you know.Shave 100 milliseconds off the time you.Have you know one thing breaking at a.Time in minor ways whereas if you went.From like 5 seconds to two and a half.I'd imagine many many things would break.All at once which would be sad.I have more questions but the only.Comment that I have is that um again.This is a similar property of all the.Settings but since there is no like.Protocol version bump attached that.Doesn't that means that uh network may.Run on different versions of the core.Software which means that um the the.Plan of like uh doing an upgrade based.On some minor release changes may not be.Necessarily sustainable because it's.Kind of tricky to get everyone on the.Same version of the software and I guess.This may like we can try to make it.Happen but uh still imagine the like.Major changes this direction would still.Need to be tied to like major releases.Probably.So I'm understand config.Setting.It's just an observation that.Even though it's a config setting, we.Might not be able to change it too.Often.And I think that's why I'm kind of.In favor of like a runtime bound limits.Um I think Nico might have been hinting.At like having like a config setting.That's like the actual value and then an.Additional config setting for the bound.Um, but I think like to Dimma's point,.You know, like a protocol 23 package,.Um, it's it should be known um, that.Like, you know, the 23.0 package.Probably can only run within like these.Timing envelopes.And so I think that.Might be what uh, what's interesting um,.Is that, you know, even though.Technically it's a config setting, what.We might do is that we can only um, you.Know, even though the bounds are um, uh,.Part of runtime or, you know, they can.Even be part of the protocol at this.Point.Um and then like uh say the bound.Like the lower bound is 4 seconds in P23.And then uh the lower bound in P24 could.Be like 3 seconds.And so you don't.Change the actual value um on the P23 to.P24 upgrade.Uh but you chose you change.How low the value can be.And I think.That might be the uh the best way to.Kind of think about these settings is.That you know there is uh the bounds can.Change as you know our latency on.Ellipse gets better but the actual value.Is dependent on the network config.Settings.And I guess to that point like.Since.Bounceration.Yeah actually not sure if you can make.Some notes to disagree on the upgrade.Validity.Maybe yeah anyways that's not super.Important but yeah something to I don't.Think this really needs to be part of.The protocol I mean I think this can be.Like a safety thing where um you know.There's like a contract that the the.Upper and lower bound are just you know.Constants in the C++ code similar to how.The upper and lower bounds for other.Config settings are um and there is just.Like a agreed upon you know contract.That you change these bounds on protocol.Boundaries I guess there's a question.Chat so do we run the changes on the.Super cluster and then provide the.Validators input on any hardware of AM.Upgrades in a timely.Manner I guess can answer yeah yeah So I.Think um uh yeah I think the answer is.Yes.Uh so we're doing lots of.Supercluster testing and I think part of.This work too is that I've been kind of.Running um you know uh some one-off.Tests myself of late and I'm not sure if.The default values on mainet today are.Actually the best values uh for the uh.Network as it exists.um in particular.The 1 second nomination timeout value.And the 1 second ballot nomination or.Ballot timeout value are kind of like.Hard-coded magic constants that have.Been in core forever that we haven't.Really questioned and so I think um part.Of this uh while not uh part of the.Actual you know CAP itself is you know.After we've released 23 doing testing.Both in supercluster and um you know.Intestance and things like this and.Finding out what the uh the true value.Of these things should be I don't think.Um you know ledger close time I think.That one's you know pretty pretty set at.5 seconds.But for these other values, I.Think um there probably is some.Experimentation to figure out what the.Actual correct value should be in.Protocol 23 and then of course in future.Protot um figuring out the correct.Values are there as well.I have a lot.To say.Uh the intention is not to you.Know um I think to answer those question.More specifically to not use these.Config parameters to like force hardware.Changes or like force validators to you.Know upgrade to beefier EKS.I think.That's a different conversation.Um but.Uh so so I think yeah we'll definitely.Test um and the goal is not to use these.Parameters to require you to you know.Buy more expensive.Right.And guess if there are no more.Questions on this topic, uh we.Can make a quick round up.Propos this protocol.This is what this.Med is supposed to be about.Um yeah.Maybe can I suggest like uh yeah not.Spending a whole lot of time on each cap.And it's more like if there are caps.That maybe had like some significant or.Some changes in the last uh you know.Last month maybe we can briefly talk.About that but otherwise yeah like just.Yeah yeah exactly that was my.Plan basically what I wanted to start.With is uh quickly go over caps that uh.Haven't changed and uh I That's the only.Thing the only action item that remains.With them is just uh to approve them I.Guess.Uh no particular order cup 65 reusable.Module cache has been both finalized a.While ago and also implemented and.Merged.No changes.There.Um then.Uh parallel uh.Sorry memories.Um okay.Cap 62 and 66 about uh state.Archival and in memory resource current.Um are still in implementation progress.But there were no changes to the cap.Semantics as well.So please stay as.They.Are.Um, cap.Uh, CAP 63 prior proism friendly.Transaction scheduling.Uh, again no.Changes.uh.Protocol part of the implementation work.Is done for the most part.The actual.Parallel execution is work in progress.But again no substantial changes.Um caps.Uh CAP 70 has just been discussed.Um CAP 69 new host functions hasn't been.Implemented but there were no new.Suggestions there and what remains are.Cap 68 and.67 and I guess for CAP 68 uh there.Weren't any changes themselves as a cap.About host function for getting.Executable for a contract address um but.I know Lee is Lee here uh.Uh might not be here.We had some.Concerns about necessity of this.Function and uh we could maybe work it.Out during this meeting.But um yeah,.Since we doesn't seem to be here, I.Guess we'll take this offline.Um but in.Any case, I don't think there will be.Changes to this cup.Like the worst case.Is that uh we'll just not do it if you.Think it is not necessary.Um and I guess what remains is CAP 67.Which is uh the unified asset events.And there has been a lot of discussion.About this CAP and pretty sure there.Were changes to it um recently and the.Changes were basically ironing out some.Edge cases.Um specifically.Um okay looking like working backwards.From the history what we did update is.That um we completely removed.Uh from max ID from all the classic.Events.So for some context.Um originally CP 67 proposed um for.Transfer events uh emitted by by the.Classic operations this CAP 67 and uh by.Sban token transfers.Um starting from prole 23.Uh initially.There was a proposal to allow.Multiplexing for the transfer source.But since it leads to.Uh a number of inconsistencies and is.Generally not something super widely.Used basically it's like a transfer.Where you want to know that some virtual.Cast account has initiated it even so I.Still need to sign for it.this kind of.A weird use case and I guess the outcome.Of the discussion on all the edge cases.This comes with was that uh let's not do.This for a while uh until at least next.Protocol and uh let's just focus on the.Minimum things that we definitely know.Is useful which is uh to multiplex idea.And we know this is useful because this.Is how exchanges typically.Identify uh their users that represent a.Non- custodial accounts so they can.Attribute uh token deposits to their uh.Owner.Database.Um so this is one change.Um, another change is.Actually what makes this CAP still uh.Not ready for for the final approval I.Guess is.Um the change to how we.Uh how we emit the information about the.Fury funds.So again from the previous.Discussion the current status is that uh.It will emit two events um called fee.And the first fee event is what we.Charge initially before applying the.Transaction and the second event is also.A fee event but with negative value and.It represents a refund.So no and sorban.Refund there is refund both portion of.The resource fee.Um whatever portion of the fees that.Hasn't been used will be funded after.Applying the transaction and this is.What we have in kept now.Um what we.Still haven't converged on is uh whether.We want to add some additional.Attributes to this fee events that uh.Tell the consumer of the event when.Exactly did this charge appear because.Um fees are charged before all the.Transactions are applied.So it's like.Not a part of the typical transaction.Flow and fee is refunded.Uh before protocol 23 it is refunded uh.After the transaction is applied and.Starting from protocol 23 if you will be.Refunded after all the transactions are.Applied.So there is this annoying.Inconsistency with all the other events.Because all the Azure events happen.During transaction being applied.Fees.Happen before sometimes after all the.Transactions were applied.And I.Guess the outcome is that we might alter.The MXR slightly to add some information.On what is the timing of the FE to kind.Of make this more obvious.But yeah, I'm.Still not sure if we have converged this.Uh value.So this is something I guess.We'll try to prioritize and um finalize.This cap.Um yeah, it.Is yeah I guess not a major is happening.Here but that's lots of small pieces.That it keep coming up.So kind of it.So I guess that's the.Only CAP that is still not fully.Finalized.Um and I I hope this uh timing will be.The last small that we kind of clarify.Um yeah that's pretty much it.Um right any questions from this camp or.Any other caps?
But again as I said.Before we proer caps are no changes.I guess there are no questions.So I don't.Discuss it.I was curious if uh.Yeah if if there was like any feedback.On the uh on the restriction that were.Put on the memo from anybody.Okay.I don't see any feedback.Um my my.Concern generally is that this stuff may.Not be super discoverable.Um my suspicion is that.Uh if we make some incorrect decisions.In terms of event layout, we'll learn.After we have uh launched CAP 67 when.People start actually consuming the.Events and find find out some uh use.Cases that are not covered.Um to be frank at this point, I think we.Should just converge on something that.Uh simply works.95% of the cases and uh yeah if we find.Some issues.Um after it has been launched uh we can.Address them in the future.Protocols protocols the good thing about.Ma events is that part of the protocol.So we can issue a quick fix some.Information is missing or not necessary.Or not represents a value as it should.So it is fixable and I think a cup 6 to.7 is in a reasonable scale trip now.And it's too much room for.Centralization.So I I mean we are obviously open to the.Feedback but yeah as I said objectively.Like I feel like at this point like we.We got in such such edge cases yeah not.Sure if it is clear enough for anyone.Who's who was even going to consume this.Events I don't think it's clear enough.For them.But things are happening or.Okay, can see typing.Um, I've been.Talking a bit about CAP 69, the getter.For the address.Executable.Um, yeah, for CAP 67, the timing uh of.The fees.I I don't think this has been.We need to finalize this I.Guess outside of this meeting.Um I think you're almost there.We can.Just add the timing email to the.Transaction events.Um but yeah, we.Still need to uh make the respective.Update and post some discussions thread.I guess.Um so what I wanted to talk.About is CAP 69 I get 66 69 I get for.The address uh.Executable I know that you had some.Comments on this and there was some.Amazing discussion so maybe if you.Wanted to talk about this like you're.Concerned about it in general uh we.Could go on the stage.Yeah, I think I think I.I I don't want to read just rehash what.Um, we discussed about I I think I was.Just like a little bit fuzzy on it.Uh,.Second I'm just trying to find the cut.Sorry, what was the number?
Sorry, what was the number?
Um, it's 69.Oh, sorry.Uh 16.No,.That's Yeah, because we split it.We we.That's right.We um split up into.So I I guess I kind of like like here is.My point of view on this like.I kind of understand some of the.Concerns about like the use cases for.This that say not as well defined but.That said um just from the API.I don't have like like what I'm looking.For is if there are concerns for the API.Itself like if someone thinks that it is.Not the information we should be.Exposing at all um because if there are.Concerns like that then that's valid we.Could discuss them but you know if.You're like trying to understand like.The nuances of the use cases I like like.I feel like we can fulfill some of the.Use cases at least and.Uh we can work on more advanced tools.Ess.Yeah, I think I think like the the API.That's proposed is very reasonable.I I.Think it it is very reasonable.Um I.Think it's the question is what you what.You just highlighted in the is.It is there a reason not to expose this.Information?
And it's sort of it reminds.Me a little bit of the um when we were.Looking at what APIs to expose and what.Ones not to expose.one that we chose.Not to expose that other blockchains do.And Ethereum does is the concept of a um.Message.cender.Uh so like I think you.Know if there was a proposal to add.Message sender to sorban it would also.Look sort of similar to this one.It.Would look very reasonable.um it sort.Of makes sense as a primitive that a.Contractor would have access to, but we.Made an intentional decision not to.Include it in the original you know CAT.46s.Because uh in we have seen the effect of.It in other ecosystems where uh you know.It can be used.Inappropriately you know in a way that.It's like a security issue.Um, and it.Sort of it provided a view into who's.Calling you.Uh, as opposed to like what.The or framework that we've designed is.Like a a better safer way um that.Abstracts the concepts of like accounts.And address like accounts and.Contracts.Um, so yeah, I guess that's.That's where I'm coming from.That's.Where my concerns are coming from.When I like when I read through these.Motiv the motivations in here, I think I.Understand the motivations now um but it.Doesn't it doesn't really completely.Address those those use cases.So you.Know if you want to pin the exact.Implementations yes it does work for.Direct dependencies but not um for you.Know transitive dependencies.Um, so as a primitive, it sounds like it.Will fit some use cases.It's unclear if.It's completely solving those use cases.To me.And then yeah, I just have this.Concern as well of will this result in.Patterns of use that harm.Interoperability.Um,.Yeah, I agree on the parent's point.I'm.Not sure if transitive dependencies.Necessarily like this have I think two.Concerns that are kind of incompatible.Um because like if we went down the.Pinning road then like and the concern.Is that the pinning is not strong enough.And we should also allow for transitive.Pin uh then we are actually going deeper.Into the whole like uh no.Interoperability because not Not only do.You like pin the direct call, but you.Also want to pin something that happens.In the like as an implementation detail.Of that call.Um, honestly, like the harm well the.Harm impro interability piece.Sorry,.That's I think there's there's like a.Few different that's not so much about.The pinning.It's more to do with um.Making contracts aware of say the.Stellar asset contract versus another.Token and then writing behavior that you.Know is explicitly different for the.Two.I mean I kind of guess it's.Concern like this asset contract.Specifically say you can do this right.Now if you want to.Um you need to like do a bit more work.Um than do that.So given that like like for for the site.Versus non-sack like I I kind of get the.Concern but we cannot really hide the.Either.So I don't know.Like yeah not Oh you're saying you can.Do this today.You can already do this.Today because you can go and get the.Name.And you can encode the XDR.And then verify if they match the same.That's a good point.So, so.Basically like like here the trade-off.Is not between like whether like this is.Faster or not.The trade-off is like if.People want to do it, should they keep.Doing this in a hacker, less efficient.Way?
And you know, whether their use.Case is good or not, like they still.Miss themselves into it because they.Kind of messed up with extern.Um versus providing something that at.Least they kind of know works.And yes,.You can build something better out of.But you know, on the other hand,.Like there are different ways of kind of.Sensoring which contracts can interact.With your contract.And this is actually.Something that people have been.Requesting and uh this is like how stuff.Like string key contract ID hard coding.Might end up working and people kind of.Keep coming up with this idea of like.What if I want my contract on the.Interact with for example XLM or.Something.So I don't know I feel like.You're kind of past the point where you.Could make things truly abstract.So I.Kind of get this concern but yeah at.This point I feel like for the most part.Like much about.It this guess you can get any of any.Contracts at least you can hard codes.And contract ids.Yep.I don't have anything else.To add to it.I'm not I'm not like.Opposed I'm not like strongly opposed to.Um they were just my concerns.So um.I get the.Benefits and yeah I think it looks good.Thanks.Sounds good.Um I mean.Yeah I I'll think a bit more about this.Like and yeah maybe double check with.Other folks but yeah honestly like I.Feel especially for something like.Transitive dependencies like this is I.Think this actually strikes reasonable.Balance because like you still can.Achieve that but you need to make this.Explicit and making this implicit sounds.Like a bit sketchy because technically.You shouldn't have control over what.Other contracts are doing.So,.Um I don't know.Uh I guess that's.Kind of was it more or less.Yeah, I'll.Think a bit more about this, but hope.Should be more or less on the same page.Here and uh should be good to go with.This.[Music].Kind.Um I guess it should be truly for today.And there are no more concerns.Um thanks.Everyone.Yeah, thank you.Later the next protocol meetings and.
