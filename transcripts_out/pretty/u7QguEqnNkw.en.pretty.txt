Okay so let's kick this off.Um today we're trying to make a very.Important decision with regards to how.Stellar assets are represented in.Soroban and this is.Um a decision that we've been.Exploring various paths to achieve and.Uh in in the past few months and we've.Gotten to a point where we really need.To make a decision and uh and anchor.This so that we can move forward.So in order to facilitate this.Discussion we put together this doc uh.Which Justin just shared in the live.Chat uh if uh if you haven't read it.Please.Um open it up and take a look at it.While we're talking because it's very.Important.Um so the kind of like the Crux of the.Decision that we need to make is between.This idea of.Um how Stellar assets are represented in.In SOROBAN the current implementation.That we have is has like this maximum uh.Separation where sorobond tokens are.Completely uh detached from Stellar.Assets so you can have a balance both in.A stellar trust line and in a SOROBAN uh.Token by balance.Um and we're trying to figure out.Whether we want to keep it that way or.Uh change.Um to a single balance approach before.We touch on what a single balance.Approach means I do want to mention that.We talk a lot about wrap tokens here rap.Tokens is is probably a really bad.Semantics it's a bit vestigial to how we.Uh how we refer to these tokens when we.When we started off so we'll probably.Um uh change up semantics but I just.Want everyone to be on the same page.That we're talking about you know what.Is the sorobond interface into Stellar.Stellar assets.So.Um I talked a bit about dual balance.Approach the single balance approach is.That basically accounts have just a.Single balance in their trust line and.That is also exposed as a sorbon balance.Through this built-in contract.We put together in the stock a set of.Requirements and non-requirements we.Haven't gotten a lot of feedback on.These so I think it looks like people.Are on the same page.Um and.Maybe because single balance approach is.A bit new uh lee uh would you mind uh I.Don't want to poke you too hard but can.You give a very high level overview of.The single balance approach as the.Original proposer.Yeah so um.Uh yeah so the the goal with the single.Balance approach is really to.Um to make it so that any participant in.The ecosystem uh when they're.Interacting with an asset that exists on.Stella today in a truck being held in a.Trust line.They only have one place to look for.They for that account so that account.Um you know an application doesn't need.To know a wallet developer doesn't need.To know they need to go and look at.Balances in two places they only need to.Look at that one place users don't need.To decide where.Um you know which balance they're going.To send from or send to all of those.Things but on the same note with the.Single balance is really mostly focused.On Stellar assets.So you know if somebody goes and makes a.Token on sarban.Um their own custom token.Um you know that that's like a.Completely separate thing so.Um so the idea with single balances is.Um the if you're interacting with that.Stellar asset.Um within sarban.Um you know it looks to you just like.It's any other token so it's a stellar.Assets still have.Uh are still exposed in Soren with the.Exact same token interface they look.Like any other.Um token uh like an erc20 style token on.Sorbin but we're just storing that.Balance in the trust line so there's.Just a single location.Right and and there's some.Um fork in the second section of this.Dock around single balances whether uh.You know the trust line semantics are.Only preserved for accounts or do we uh.Include trust lines for new types of.Entities like contracts and this um uh.In this approach and and we can talk a.Bit about that.Um later I think my my first big.Question probably would be to uh.Siddharth if you're if you're live on.This I know you you've been the main.Implementer you and John for uh uh dual.Balances and maybe you can share with us.From like uh you know from a Hands-On.Technical perspective if we are going to.Move to a single balance approach what.Would be the implications.Yeah so.You know our like I've John and I took.The perspective that.We would like to minimize the.Relationship between classic and sorbon.Uh what and I say minimize because we.Can't like importing and exporting.Actually touches.Uh I require sorbon to interact with.Trust lines and you know there's.Actually some pretty uh complex code in.There where we actually replicate.Uh electrostline semantics in sorbon.Uh.Like.I I think I I I think we should like I I.I'm still I'm still like support uh on.That side in that you know that question.The thing you mentioned about how uh.Trust lines on for contracts not just.Seller accounts that I think is like.Moving in the wrong direction if we do.Single balances we are introducing more.Of classic into sorbonne and we're.Introducing more of the classic protocol.Into sorbon and when it's much simpler.To maintain the separation as much as we.Can.That specific point is something and I.Think and Nico has a strong opinion.There as well we can we can ask uh we.Can ask that later I think that the.Before we go to that the question is you.Know you mentioned that right now we're.Replicating trust line semantics in.Um sorovan because we need to interact.With trust lines through the Import and.Export functionality so that is true for.Dual balances.Um and obviously it will also be true.Um if we go for like a single balance.Approach is there significantly uh.More.Kind of like classic semantics that we.Need to.Um uh that we need to adopt in order to.Move to single balances.Uh the answer I would the answer is no I.Don't think there would be significant.Uh any significant changes for example I.Think we've talked about so you can.Actually use those functions the.Functions that Import and Export use to.Implement a transfer uh using the single.Balance world right.Um so in that case there would not be.You know it's not like the tone contract.Would change much I mean we already have.To pre-flight with the trust lines right.Um you're just you know it's pretty much.Like a.You're just running an import right uh.As a transfer uh it's just like there's.There's some slight differences so yeah.If the answer to that is no there are I.Differences.Okay so I just want to make sure we're.All on the same page with regards to.What you're saying here you're saying.That in terms of interaction with.Classic what do we have right now as.Import export on Dual balances.Um you can think of a single balance.Transfer as basically like as these two.Things can combine like an import and.Expert at the same time uh so there's no.Added overhead of like interaction with.The class approach.No.There isn't.Okay so before we go into the details of.Uh more uh kind of like thinking about.Uh the specific implementation of single.Balances is there anyone here that wants.To like Advocate some more for dual.Balances.I mean okay maybe the only thing I can.Add to to this thing to the Dual balance.Uh like what is good about the dura.Durable so I think it's actually on the.Performance side.Um.Because if you con if you think about.The type of legendaries that you need uh.In the.Dual balance world when you're doing uh.Sorbent payments.Uh you only have to deal with basically.One place whereas in the.Single.Uh balanced world when you do things.Like uh allowances now you're dealing.With well actually you're dealing with.Two.Um Legend trees plus you need to read uh.Issue our information uh you know from.Classic so there's like some other added.Overheads but you know we can maybe set.That for the performance or.Implementation discussion.Okay but I just want to make sure like.When we're dealing with allowances today.Um even if it's pure sorobon you still.Need to touch.Both the balance Ledger entry and the.Allowance Ledger entry right.Yeah I think the only difference would.Be anything you would read from the.Issuer right because you still have two.Balances you're gonna transfer.On the StoryBots side and you know on.The classic side you have two trust.Lines.Yeah so you have like you have the one.Time transfer right like like as far as.Like the balance where we store it.Versus the allowances there is actually.Um requirement that they are separate in.The current implementation.You could actually store them in the.Same place too that's true you're saying.That you would have one Ledger entry.With right all the information yeah.That's not how it works at the moment.But that is true.I think that's a bit weird because.Balance is.Operate on a key of a single account and.Allowances operate on two accounts like.Who owns the balance and who gets the.Allowance.Right it doesn't matter it's basically.On one when you do a payment as part of.An allowance right you you have like one.Of the endpoints is basically.Holding the allowance.So you pick which side but it doesn't.Need to be a third one.Right but but also just to zoom in on.That sit in terms of if we want to.Adhere to.Um current authorization semantics even.If the do with the Dual balances.Approach.Isn't there a read to the issuer account.Anyway.Yeah if you want to do uh like if you.Want to check off required for example.Is that what you were talking about yeah.Yeah there is the issuer although you.Can minimize that right at least like.That prototype we I wrote up if it's an.You can only need to check if it's a New.Balance after that auth required doesn't.Matter right.Um but that I mean that's like a minor.Implementation detail.Does that make sense.Yep that makes sense uh I see that Eric.Is raising his hand maybe you can invite.Him to speak.Eric you're invited.Hey can you hear me yeah.Um I just wanted to ask are there any.Security implications in terms of.Surface area uh in the in the single.Balance approach because in the Dual.Balance approach it feels like classical.Assets are pretty separated from Smart.Contracts and they can't be interacted.With directly and so on uh so in terms.Of things we may not have thought of.Bugs that could be introduced and so on.Are there any security implications.Uh by getting a single process.By the way this is a question that Fred.From Lightman was asking in the live.Chat too.Yeah and I think that's a really good.Point I think it's in the docs somewhere.But.Um just to give some more context on.This uh you know smart contract balances.Are susceptible to.Um various approval issues so let's say.For example that either.Maliciously or uh because of an error a.Contract asks me for like uh to approve.More uh.Funds than they actually need and they.Somehow managed to get me to sign that.Approval now they can access funds that.Logically I don't want them to have.Access to.Um and that's definitely a problem and.That's definitely an issue that if with.The clear separation of classic and.Sorobon.Um it it doesn't exist.Um it's and by the way this is a problem.In in blockchains and in general and and.Defy I do think that there are user.Um actions that can uh that can.Alleviate some of this I can basically.Have like you know different accounts uh.For uh as a user I can have different.Accounts for you know the risky stuff.Quote-unquote that I'm doing in.Soroban versus the the less risky stuff.I'm doing in in Stellar but the the.Protocol doesn't mandate that separation.But yeah I think that's a that's a super.Important uh perspective here.If.And and maybe like I'll add to this that.In terms of risk.Uh if you look at either implementation.Has actually a way to manipulate the um.The the trust line right the balance on.The classic side.Uh so like either it's like through this.Bridge you know like import export type.Of function or uh it's actual you know.When you do a transfer.In either case if you have a bug you're.Kind of you know in trouble so I think.It doesn't like from that point of view.Implementation wide I I don't think it.Has uh you know much consequences.Actually.Yeah I agree with you I think from an.Implementation perspective it's the same.Surface area uh but at uh like Eric and.And Fred's point the approval.Uh surface area is a bit more robe for.People to hang themselves with.But that's something that yeah I mean I.Guess maybe something here but that's.Not part of this conversation because.You know like at the same time I do want.The serban tokens to be secure right so.I think I think this is part of like uh.Improvements we can make to the uh.Contract interface.Um I think they are like obvious flaws.In if you were taking their verba team.Something like erc20 yeah I know we.Already started to incorporate some of.The changes that were done later but it.You know we don't need to stop there.Right like it's something that I think.We have to double down on actually.Before we launch that thing.Right and and here's a this is a a great.Shameless plug for some of the work that.We've been doing on our token contract.With supporting things like.Um like permit style approvals in which.You only approve the specific amount.That.Um uh that you'd like your you know D5.Protocol to use at the time.So I do want to go a bit further down.The document and.Um Talk a bit about this uh trust line.Yes trust line no trust line discussion.That we've had.Um I know that the original proposal.That Lee made was to preserve for a.Single balance was to preserve trust.Lines only for accounts but uh contracts.And other non-account entities uh do not.Require a trust line.Um which means that they can do things.Like you know they don't have a minimal.Reserve.Um and they don't need to opt in to hold.An asset.Um there's another folk in the road that.We can take and which is to.Um to mandate trust lines across the.Board even for non-account entities like.Contracts like other identifiers.Um Lee can you tell us a bit about why.The original proposal.Um did not have trust lines for.Non-account identifiers.Yeah.Um I guess it just didn't seem.Particularly necessary like uh accounts.Have trust lines today and so they have.A balance that's there and everybody.Knows where to go to find that balance.Um when contracts exist tomorrow uh or.Now in future net.Uh you know we already.I think that's that's an entirely new.Thing like there's not really any need.For them to depend on trust lines well.We don't expect them to.Um inherit everything uh you know all.The semantics around trust lines so.Yeah I guess this didn't really seem.Like an obvious advantage to do so um.But maybe there's some implementation.Reason to do so.Got it and I will mention that there is.A non-requirement section in this Doc.And uh a later addition to the.Non-requirements is that opting in to.Hold a stellar asset is not a hard.Requirement so today you need to.Explicitly create a trust line in order.To hold an asset and we are loosening.This requirement for the sake of interop.Um right now we haven't gotten any.Um to be honest we haven't had gotten.Any qualitative feedback on uh either.Direction whether this this is really.Good or really bad but we do know that.Trust lines have been uh an extreme pain.In the ass to a lot of us throughout the.Years and we are looking uh for uh for.Ways around them uh which some of these.Proposals include including 2.1.Um and yeah this is uh still an open.Question but.We're probably going to loosen that.Request.Um Nico can you uh talk a bit from a.Technical perspective what are the.Implications for for not having uh trust.Lines on contracts and why do you think.We should have them.So yeah like the trust lines when I say.Trust lines here by the way like I.Didn't mean necessarily A.Classic dress line it's more of a.Standardized.Format right like a ledger entry or.Whatever for holding balances that I'm.Thinking about and this would be.So that.Um when we think about wallets uh you.Don't have to necessarily.Like right now the way you can get a.Balance for cereban.Token is.Is by calling the get balance endpoint.On the on the token.Um and there is basically no way to do.Something.Um efficient like what you like uh like.A block Explorer Style.Uh you know give me the balance for any.Ledger entry uh or any account right a.Servant account.So so that what I was thinking is that.Maybe.There's room there for for that.Um and in particular I was thinking in.The context of classic uh so classic.Assets so existing assets that are being.Held by let's say a smart contract.Wallet uh so basically Where You Are uh.Balance is not held behind a stellar.Account but held by a.By contract that enforces you know.Policies basically.Um like in that world.Uh it's.You you don't have the Horizon.Experience basically that you get with a.Classic account like a a standard.Account.And that felt a bit.Like a limiting right from a.Like a efficiency point of view and all.That I mean I can see that for the.If you get into the generic uh you know.Type of contracts.Um you can do a lot better than calling.The you know the actual get balance.Because you know maybe it is actually.Some actual code happening there uh but.For those uh type of accounts the.Classic uh classic assets right like uh.I thought we could actually do something.A little bit closer to what you get with.Standard icons if that makes sense.So I think this touches on how.Downstream systems.Um handle tokens I think it's still an.Open question for uh Horizon for example.How they deal with with tokens.Um Eric do you see.Um Horizon actually reporting token.Balances for contracts.Um like you say I think that is still an.Open question that we're thinking about.There's pros and cons here obviously if.We go down this road where assets and.Tokens become the same thing then you.Sort of get a default uh answer to that.Question.But um.In theory you can imagine a world where.There's some kind of standardized token.Uh that obeys the interface of of you.Know the standard contract and we make.That available the question that I want.To understand if we're going to go down.That road is what other use cases there.And can we solve those problems in other.Ways say through uh streaming endpoints.And then fast catch up for history so I.Think we're still trying to understand.The use cases and with respect to.Horizon in general there's this question.Of uh what does horizon solve and for.Who Horizon is like a Swiss Army.Chainsaw you can do everything it turns.Out that when you actually analyze what.People use Horizon for.Uh the vast majority of users are using.A very small number of endpoints and.Also in a relatively recent time period.So we have the possibility to.Differentiate with different products.That can actually map much more cleanly.To the actual requirements right so.That's like part of where we're thinking.And trying to understand better what uh.Will be the best form factor so I don't.Have an immediate answer but it's.Definitely something we're actively.Trying to understand more.I I love Swiss Army chainsaw I think.That should be the description on the.GitHub repo.Um so it does seem like if we're.Thinking about Downstream systems uh you.Know going back to the big discussion of.Single balances versus dual balances it.Does seem like single balances is the.Least amount of friction to actually get.Horizon to keep accurately report.Um you know like the classic account.Yes I would say yes and no yes in the.Sense that it uh on the face of it feels.Like there will be almost no work.Required it will just automatically.Happen.Um the complication is to think about.Whether having it automatically happen.Is in the end uh a net positive right so.To give you one example of a trade-off.That we have here when Horizon provides.Token balances natively.Um that actually encourages some.Centralization in the ecosystem because.In practice today most Horizon users.Actually use the SDF Horizon instance.Um another example is well if we.Actually identified the need for tokens.Uh we could produce a form factor that's.Extremely minimal uh that lots of people.Could run very cheaply that might.Actually Aid our decentralization goal.So there are some questions around that.Kind of stuff that you know I would like.To put some ideas on the table around.But it is true that I think from our.Perspective if balance is combined they.Would just pop up and appear in Horizon.And I do see a benefit from a usability.Standpoint it is pretty confusing to.Consider them tokens and assets as.Separate things.Uh yeah.I imagine you'd still have to account.For trust for transfers that go in and.Out of things that you're not tracking.Like contracts.Um so yeah that's true.But that's much more bounded problem.Yeah I hear you.Um Sid you were talking a bit about.Um your.Um concerns with adding.Um kind of like opt-in semantics to uh.Contracts and other sorobon entities can.You.Um tell us a bit about your concerns.Yeah I mean for example if you know you.Have a liquidity pool uh that's going to.Accept that that's going to allow.Trading uh with like a classic asset.Um so the contract would have to opt in.Right that's friction uh I mean if this.It sounds like this it won't be an.Actual trust line which is where some of.My concerns were.Um but yeah I had questions like who.Would own the trust the trust line.Um and just it adds friction that and.That I don't think is necessary and it's.Something I talked to Nico briefly about.But uh you know if you really wanted the.Balance of a contract uh or the token.Balances for any for a tone contract you.Could actually look at The Ledger.Entries right and maybe this is.Something we can encourage that that is.An option.Right uh like like the structure is.Pretty well defined at least for the the.Built-in token contract.So I don't like this sounds like.Something that we don't need to do it.Was pretty much what Lee said right like.Accounts already have trust lines and.That's where the balances live.Uh but a special case the balances for.Contracts.Uh it it doesn't sound like like unless.We have a really good reason to do it I.Don't see why we would.Got it.Um another thing that is an open.Question for uh for single balances is.Whether or not we make them compatible.With uh classic Stellar operations like.For example can I just like make a.Regular payment to a contract.Um this is uh actually in the.Non-requirements section but it's still.An open implementation detail.Um I was wondering if people here have.Any.Um opinions in the space.I mean to me that seems like a pretty.Good thing to have.Um just because like you can imagine a.Situation where maybe there's like I.Don't know like some contract or.Something that's so successful that we.Want to like.Implement that functionality in in.Classic and make it you know super.Efficient or something so the more uh.Sort of compatibility you have like like.The easier that is to do without sort of.Upending things the better.So I have I have concerns about that.David.Um I think one of the concerns is that.Uh like what is the use case like.Usually when you send funds to a Smart.Contract you actually want to do.Something on a smart contract side for.Example you know I don't just like send.Funds to UNI swap to get a swap I.Actually send funds and I uh facilitate.A swap so just you know just letting the.Classic operations.Um send to a contract or a payment sent.To a contract doesn't necessarily.Um save me the need to communicate with.That contract on the SOROBAN side so if.It doesn't necessarily save me that much.And if classic operators on the network.Think exchanges for example.Have to uh adapt their currently.Supported operations and you know this.Is something that we've had uh a lot of.Uh pain with dealing with exchanges I'd.Support for muxed accounts most of them.Still don't.Um I think.I think that's a like a strong argument.To.Um you know to keep the you know the.Smart stuff on the smart side.I don't I I don't think that's.Necessarily what uh David was saying.It's like he like I think the idea is.More like if you have.Scenarios that are very high value you.Don't want to necessarily.Uh have this kind of uh like concretely.Uh like like Frozen.Um you know like a wall between what is.Classic today and and SOROBAN like I.Think over time we want to kind of have.Some ways to integrate those uh a bit.Better.And.And this doesn't necessarily mean like.You have to uh for example.Uh use the same data you know like.Format in you know in behind uh you know.The the scene but like.Um you need to kind of think ahead in.Terms of.What type of.Interactions I want to enable in the.Future like for me like the deposit into.A contract.Uh like in the the shot uh you know like.Uh like in the near future I would say.Yeah it's for something like an mm no.Use case right or like those.Optimizations right away you can think.Of like maybe it's like an actual.Deposit and do stuff right that we under.Implementing natively but like I do.Think that in the short term those type.Of uh depositing into a smart contract.Is actually useful uh if that smart.Contract is a wallet.So I guess I've heard this brought up a.Couple times and I like this idea of a.Smart contract wallet and and this is.Kind of the the like concept that.Concerns me because the whole if the.Whole thing that we're debating is.You know single balance versus dual.Balance and our solution to single.Balance is to keep Stellar Assets in.Stellar trust lines.But we could also still have this smart.Contract wallet that bypasses trust.Lines and it sounds like we could end up.In a world where there are still two.Um like we could we could end up in a.World where even if we go with the.Single balance approach we end up in a.World where there are dual balances and.Applications still have to look in two.Different places.I'm following like I think what you're.Saying is because you have to when you.Think of like this this the uh.Contractors or what it I think this is.Actually something we're discussing.Actually uh in a different context in in.Uh in the existing protocol that was we.Wanted to decouple your identity on the.Network in in today on the network is.Kind of your master or public key right.And often and so in something else you.You have like you actually have like.Different Keys attached to that thing.And you actually disable your master key.Um and then your identity is kind of.Weird because it's this uh you know.Public key that actually doesn't mean.Anything.Um so at some point we were talking.About hey maybe we should have accounts.Like your actual identity is like uh you.Know a hash or something something more.Deterministic and and then you the way.You authorize uh using this account is.Actually a separate topic right.Um and I think in SOROBAN you have.Actually a similar analogy there where.Your identity your account is actually.The contract or some maybe like some.Other like Alias on top of that but.Basically your.You have that as an identity as in and.Then how you use it right how you.Um withdraw funds or you know platform.Transactions with that uh with that.Account is actually the uh managed by.The account so you can have like very.Flexible type of uh policies right.Around how the account works that's.That's like uh I don't know if you.Looked at the um.I mean this is a topic for a different.Day because we are actually been.Thinking a lot about authorization right.Like in an authentication.Um and I don't think we're ready to kind.Of discuss this in this meeting but like.There are things that are highly.Inspired by the type of research in.Italian that has been done with the.Account abstractions and things like.Great so I think if I try to summarize.What Nico is saying there are ways uh if.Users choose to do that there are ways.In which they can have.Um you know on under the same.Um you know signer they can have.Multiple balances whether you have like.Multiple accounts with the same signer.Or whether you have multiple smart.Wallets with the same signer uh on the.On the smart side the question is what.Is like the what is the default Behavior.Like do we default to two balances uh.Like in the Dual balances proposals or.Do we default to a single balance.Foreign.Okay.Um I I am going to say that we have been.Getting a lot of overwhelming.Like the the responses tend to be.Towards the single balance uh approach.Um and so I just want to open it up for.Um you know anyone else who's who's in.The crowd right now I think this is a.Lot of people uh if anyone wants to talk.In favor of dual balances.Okay hang on go.I just said hi Kyle here I just have a.General question around dual balances.Versus single balances is there any so.If we think about use cases down the.Line for sorobon you know either at an.Enterprise level or a consumer level is.There any reason why the double balance.Would make more sense.Um to enable.Other use cases I just want to ensure.Like as we were discussing this is there.Any limitations to use cases dependent.Upon this decision.So I I do want to mention that uh if you.Look at the dock uh at the top section.There's semantics you can create pure.Soroban tokens that either adhere to our.Standard interface or even adhere to.Whatever weird interface you want like.None of this actually prevents you from.Doing pure SOROBAN whatever crazy asset.You can imagine the the context of this.Discussion is for these standard assets.That are issued on the Stellar status.Stellar assets that are already.Supported in various exchanges and.Custody Solutions and wallets uh like.For these assets what capabilities we.Have on the SOROBAN side now there are.The Dual balances if you look at the pro.Section for dual bounces there are.Several things there for example you.Have.Um you know you can have a a much bigger.Your balance because the standard token.Have an i and and into a 128 integer.Type instead of the the kind of like the.Sine 64-bit integer that we have in in.Stellar assets so there are there are.Some like small things there but.Generally speaking from a capability.Perspective I don't think we're uh we're.Losing anything significant by moving a.Single balance.Thanks for the answer.And maybe like something I will add to.To this is that one of the like things.That is actually a big TBD right like we.Don't know it's in the I think it's in.This last section like open issues is.Um by uh.When you move to this single balance.Right like you you you have to support.Some of the clicks that you know from.The uh uh like um from the the classic.Tokens like in particular you have like.The the balance question like what is.The balance of the account because there.Is a difference between the what you.Want to show in the in a UI depending on.The scenario right like is it the usable.Balance or is it the your actual net.Balance you know accounting for.Liabilities.Um so this will actually have.Consequences on the um.Token interface and as a and because of.That right like you end up actually.Taking on.This type of this type of additional.Requirements for any token that you want.To issue on the network even if it.Doesn't it's not a classic token right.So like those other tokens basically.Need to implement.The uh like if we if we need a concept.Of liabilities for example like uh they.Need to implement that and maybe they.Are there are no apps but you still need.To think about that stuff.Yeah so to your point Nico I think you.Know I think we I commented on the.Google.com this but the idea of having.Like a like a get available balance on.The standardized like token contract.Doesn't seem like a huge Legend and like.Standardized or sorry native tokens on.Sorbon the value returned from get.Balance and get available balance would.Effectively always be the same you know.If as long as it's the standard token.Contract but.But I I do agree I think personally.Though this is a pretty easy uh.Adjustment that we can make so like you.You know just having a get available.Balance that you know takes away.Um from the return value.I mean this is one of the ones we know.Right like we as we go through the you.Know designing this I think we may find.More of this type of stuff like the.If you want to to write like a safe code.You know like you need to ensure that.You're not overflowing in different ways.Uh like which is something you don't.Necessarily need to care about as much.In the uh in the uint uh 120 you know.Because the interface is even oh in one.Uh 28 right.Whereas here the balance is hidden.As a 64-bit number.So you have to deal with like a special.You know uh checks and in order to.Perform those checks if you don't want.The the payment later to fail.And you want to kind of pre you know.Like as part of pre-flight I don't know.Some other check right that you want to.To ensure that the payment would work.You need to know what the behavior what.Are the safety you know like what are.The constraints right on your own on.Your balance for example maybe I don't.Know like I think this is the type of.Stuff we'll have to go through.Yeah seriously.And I think this is an important con.That we uh it's in the dark but we.Haven't discussed today which is uh you.Actually uh there's this idiosyncrasy.Where the uh the single balances are in.Practice you know when they're in a.Trust line they're constrained to a.64-bit integer but the actual interface.The current interface that we're.Discussing is uh 128 bit integer so you.Have these uh failures that are.Unexpected just by.Um kind of like observing the types.Uh they're unexpected but it's I think.It's important that we recognize that.Those failures can happen anyway so you.Know if you have a near max 128-bit.Value in your in your contract data and.You try to add a value that's kind of.Overflow you're going to get narrower so.This it's not like this is a new error.Case it's an existing error case.Um it's just that.Um if you take if you have a less than.If you have a less than 64-bit value in.There and you add another 64-bit value.You might assume that that would succeed.One of my fail.Um so I think like that's the.Exactly like the code the contract code.Is written you know you write checked.Code basically using 128-bit arithmetic.But then when you actually if you are.Actually interacting with those other.Contracts you uh those classic contracts.You actually get some other Trader mode.So your check code is.No irrelevant basically.Lee were you trying to say something.Yeah I think it's a really good point I.I think the more like over time once.There are custom tokens or like new.Forms of tokens.They're going to have new failure modes.Too so I'm not sure like how like I'm.Not really sure how much contracts.Should try.Um can make assumptions about that sort.Of thing anyway but.Like if we're talking about Stellar.Assets and everything is just a stellar.Asset then I could definitely see people.Making those assumptions.So yeah that could be bad.Got it and uh lee after uh.Nico talked a bit about uh why he's.Interested in adding the opt-in.Semantics uh even for dual balances even.For single balances.Um it are you uh persuaded in any way.Leader muted yeah I I feel like I want.To think about it a bit more but I like.Um this second model is.I think.The arguments for it are that are.Compelling.Um it's just the the 120 and 128 bit.Issue is is what gets me.Um okay.Justin do we have any uh questions from.The audience.Well first of all I think if anyone is.In the audience and wants to speak you.Can raise your hand and we can bring you.Onto the stage.There is actually a fair amount going on.In in the live chat Channel although a.Lot of it's sort of been answered in one.Way or another.Um either via text in the live Channel.Because people are sort of talking.Amongst themselves.Trying to look through to see any that.Haven't already come up or that haven't.Already been answered.Got it so there is one question that I.Want to uh ask the group about this is.Not actually part of of this specific.Decision but as we're talking about uh.The capabilities of this um you know.This single balances token contract.Should we consider you know there are.Two built-in token contracts that we're.Talking about right now one of them is a.Pure SOROBAN uh token contact.Implementation the other is this rap.Token contract or single or or just an.Interface to Classic assets uh which by.The way right now is implemented as an.Extension of that first contract.Should we just ditch.Um all together the concept of a native.Soroban only built-in token contract in.Favor of the Stellar asset one or should.We maintain both of these.So the argument this is something Nico's.Brought up before they argument to.Keeping it is that the the Nate the uh.Pyrosauribon contract would be more.Performant right you don't have to spin.Up a custom laws in VM well yeah a.Separate wise and Via just for the.Invocation into that contract but it's.Not necessary right because the the.Point of the.We only need to make it native we only.Need to make the classical in Native.Because you uh so you can run the Import.And Export.Um so we could remove it now.Um it's just that anyone has concerns.Over the performance of the cost of.Running like the pure sorbine contracts.Than or this matters.Right but but if you try to think about.Like the spectrum of contracts that.Might be interested in in the soroban.Only built-in implementation.Um it's contracts that are not.Interested in being a stellar asset for.Some weird reason even though Stellar.Assets uh have like you know more you.Know ecosystem-wide support so they want.Something that is not in the cloud in.The Stellar asset which might be.Um you know like i128 instead of i-64s.And it might be because they're.Interested in a custom decimal uh value.That's not seven but but at the end of.The day besides that like what are they.Getting like why should they do this.They may just not be interested in uh.Like classic Stellar support right and I.I can't I don't know how many people.Would fall on that category but uh.That's one reason right.Right and and we're not saying that you.Can't do it but if we are removing that.Contract then basically it'll be.Deploying your own contract and it's.Less performant.The but the question is like is this.Important enough to first class uh lee.Uh you unmuted yourself.Yeah I feel like.Um in the I mean I feel like we always.Place some value or importance on.Interoperability and so I think if.You're making a token that will will.Interrupt with Stella.Classic assets.Um I think the network can be.Opinionated and say well you know if it.Can if it were if it functions like that.It should just show it should just work.It should just be interoperable.Yeah I really don't see the advantage in.Saying like.In even making that an option right.Like we can make it we could make it.Flexible we can keep it this way so it's.Flexible and anybody.Um can choose to say no I don't want it.To also be available on Stellar but that.Just harms interoperability.Have completely different functionality.Where they're incompatible then yeah.That makes sense you know they're only.Going to operate on Soren and they're.Going to have a great time there but.Join the uh the team here.Um boots from uh adapt developer.Perspective you probably have the most.Experience with uh SOROBAN and uh and.The various token contracts uh any any.Thoughts.Yeah and my thoughts might not be super.Cleared out yet but from like a pretty.High level.I guess my expectations would be that.Um if I'm going to be attempting to.Interact with anything on Stellar.Um I would at least expect that.The way that kind of works to be.Consistent.Um and I I think from you know not.Having thought about this too long yet.Like option 2.2 kind of speaks the most.To me like at the current moment.And I think the main reason is that.Keeps the most separation actually which.Said I know you disagree with.Um between stellar and sorbon mainly.Because if I'm ever going to touch.Anything it's Stellar it's never.Actually going to leave Stellar Classics.Control such that it's going to be a.Trust line or some other.Um trustline-esque data source that'll.Live on stellar and if I ever want to.Interact with something that's sorb.Unfocused.Um that can just exist and saurabhan by.Itself.And that kind of keeps a clear line.Between the sand uh there was one.Comments I made on the dock I mean I.Think things for users especially will.Get really confusing.Um if you're in 2.1 or um or option one.With which is either dual balances or I.Have some ability to have a balance on.Soroban of a stellar classic asset.Um if we have state expiration that can.Get really really weird for users to.Keep track of.Um and trying to solve that Earth think.Through some way that you can present.That and make it clear to users is is.Quite confusing.Um and then just says like a little.Second part during during the.Conversation after I I um popped up here.I don't really see a reason why we can't.Have two separate token contracts.Uh you know ones that are actually going.To run and rest and be performant uh one.Specifically to interact with assets.That are on cellular Classics so they'll.Be able to manage trust lines in one.That's just a reference implementation.Of.Uh a basic quite usable token so we.Don't.Have 8 000 different reference.Implementations of an erc20.It seems like both of those could be.Executed and rested quite easily.Can I just said something regarding like.The native or built-in contract and.Non-wrapped non-classic tokens so.Basically what we need to Define anyway.Is the interface and uh like there is.Really no value in not implementing the.Non-wrap tokens uh in Russia just.Because.Um like someone would need to do this.Anyway and there is literally no benefit.Of not doing so because the interface 2.Has to be called right it's not like we.Can have two contract two contracts.These two different interfaces that uh.You know one would be called classic.Only tokens in another one is.Now they both have to pull the same.Interface so they will effectively be.The same contract no matter how exactly.How where exactly has been implemented.So ideally what we should try for is to.Have some standardized token interface.So that contract Traders could reuse it.And you know whether or not there will.Be like another implementation series I.Don't see any value of not implementing.The.Vanilla version that behaves in great.Vote points way uh just means a protocol.I don't really see anybody like it.Doesn't give us any more freedom than.Not implemented in the current interface.Uh does it uh fill this requirement the.Current standard interface that we have.Uh sort of.Modular import expert which only it.Makes sense for the classic tokens yeah.But yeah of course.Okay so we are uh pretty close to uh.Being at time are there any other uh big.Questions topics that people want to.Discuss.Yeah so um uh George was uh mentioning.Something to me.Um uh around how payments and transfers.Work um so like payments on Stella and.Something that we haven't really.Discussed is okay so if this if there is.A single balance or this is even.Relevant okay sorry if this is single.Balance and someone's doing a transfer.Um someone might assume that that would.Show up as a payment operation.On the Stellar side so you know you.Might look on Horizon and you might be.Expecting to see a payment operation my.Assumption has always been that these.Things wouldn't show up like the the.It would be much the same as how.Important export works.Does anyone have any thoughts about how.That would work.I think and this uh this came up in uh.What what Eric was saying like at the.End of the day uh if you have balances.Changing in Horizon you need to provide.Um an explanation for why that happens.Whether it shows up as like a payment.Operation or it shows up as an effect uh.I think we we can discuss but it needs.To show up somehow or else.Um you know like value balances are.Changing with no explanation correct and.I think I think in the past we discussed.That you know the Import and Export.Operations would show up as credit and.Debit effects um and so there would be.Visibility in that sense.Um I guess.Yeah I'm just curious like is the fact.That there wouldn't be a payment.Operation.Um going to be like a really big deal or.Not it sounds like you're saying no but.It shouldn't be a problem because this.Is no different than when you do it when.You have like trading right like you.Have a somebody does a path payment or.Whatever and then you know you get.You have like those little no micro.Payments happening in between right.Uh well your balance changes so it's.Just a standout effect not a payment but.Just an effect yeah yeah I agree.Thank you.But yeah to clarify though this would be.Only for uh yeah classic tokens we would.Not do like this type of stuff for like.Arbitrary tokens on the network by.Default.Because that's the Horizon question that.I think uh every cut earlier that you.Don't want to pull like arbitrary tokens.Uh you know into Horizon uh because then.The data model is becomes extremely.Complicated.Okay I see that we're really almost out.Of time I just want to say uh I know.That there's someone with their hand.Raised and I know that there's a couple.Questions in live chat and we will try.To get to those um after this call but.Since we're almost out of time I'll give.It back to Tomer.Thanks Justin so um I think.Um you know all the responses have been.Positive towards single balances I think.This is something that we need to try.And uh prototype and or put a CAP around.There are still open questions uh the.The question around opt-in semantics is.Uh is a big one and it also depends on.Some feedback from more ecosystem.Members and and partners and.Um uh and you know just giving us some.Time to wrap our heads around uh but I.Think there is overwhelming support for.Single balances and we are going to try.And pursue these.Uh thank you all and have a great rest.Of your day.
