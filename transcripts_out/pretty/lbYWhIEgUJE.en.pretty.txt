I think that's our cue hello everyone.And welcome to the Stellar open protocol.Discussion as always in these.Meetings we discuss core advancement.Proposals aka caps caps are technical.Specs that suggest changes to the.Stellar protocol in order to allow the.Protocol to continue to drive forward.Make progress evolve to meet the needs.Of the ecosystem.These meetings if you're watching this.Is probably pretty obvious are live.Streamed so that you can follow along.I do want to know this is a very very.Technical discussion right so if you're.Watching you probably want to take a.Look at the caps that are linked to in.The show descriptions as are the.Previous conversations about those caps.On the Stellar dev mailing list.I'm not going to identify all the.Participants they're also listed there.So you can look them up.They're qualified .So today what are we doing today we will.Again discuss CAP 42 multi-part.Transaction sets which was what we.Discussed last time but it's been.Significantly revised since that.Discussion we are also going to have.An initial discussion about CAP 44.Speedx configuration and we'll get into.What those proposals entail in a minute. but first I want to give a quick word.About the life cycle of a CAP and.There's a purpose for me saying all this.That i'll get to so this meeting is.Really just part of the process of the.Creation and implementation of a cap.Open discussion about caps it happens on.The Stellar dev mailing list there's a.Link to that in the event description as.Well so if you want to join that's the.Current discussions or future.Discussions sign up for that mailing.List.Caps are drafted and sort of iterated.On based on the async feedback and.Suggestions that come in via that list.Before they end up here being discussed.In this meeting so in this meeting we go.Over very specific questions and the.Goal is to get a CAP ready to move on if.A CAP is ready it may be put up for a.Vote before the CAP committee and.They decide on whether or not to accept.It.So after a CAP committee vote by the way.The CAP enters into a one week final.Comment period and that gives everyone a.Chance to sort of raise questions again.On the Stellar debt mailing list if cap.Makes it through a final comment period.It's implemented in a major Stellar core.Release.Before that Stellar core release.Actually hits the network validators.Have to vote to upgrade the network to.Accept that release and so ultimately.Any sort of proposal that makes it into.Implementation into a Stellar core.Release is accepted by the network.Through that governance mechanism so.Part of the reason I'm bringing all that.Up today is that before we go on to.The main discussion about caps 42 and.Caps 44 we're going to revisit a couple.Of caps CAP 21.Which generalizes transaction.Preconditions and CAP 40 which adds a.New signer type that multiple parties.Can use to more effectively share a.Transaction set for signing so these are.Two caps that we sort of got pretty much.Across the finish line.They have they basically include changes.That are helpful for people that are.Looking to develop innovative solutions.On Stellar specifically payment channels.And bridges to other network the goal of.These is to sort of unlock the potential.For greater interoperability so again.These caps they already went through the.Ringer.They're currently in a waiting decision.So that's their official status awaiting.Decision but first things first i.Think the CAP committee is ready to.Approve both caps.And so I want to check in with the cap.Committee and see if that's true now the.Cap committee is jed and nico and.David and jed who is not here I checked.With before and he is ready to approve. nico and david are you also ready to.Approve or is there more to talk about.For capital 21.David you approve okay yeah.It's the same for me yeah yeah same for.Me like the there was a change.Yesterday or the day before on CAP 40.But it's yeah it's a minor change so.We're good.All right.Approved so after this meeting .I'm going to change the status of those.Caps to final comment period pending.Approval and again that gives everyone a.One week window to like raise any final.Questions or concerns. I guess if a legitimate concern comes.Up during that time we can send it back.To draft mode but if there's no concerns.Legitimate concerns that arise during.That time those caps will be approved.And that means they're going to be ready.To move on to implementation.For inclusion in the next protocol.Release which is protocol 19.so as of.Right now.Shortly after this meeting CAP 21 and.Cap 40 officially move into final.Comment period.All right now on to the real meat of the.Matter we're going to talk about.These two caps and the first one that.We're going to talk about is CAP 42.Multi-part transaction sets.This CAP gives validators control over.Which fee policy to use for individual.Transactions included in a ledger we.Discussed it two weeks ago and there.Were several suggestions about how to.Improve it and based on those.Suggestions it was revised and so i.Think to start with let's just get a.Quick overview of the changes to CAP 42. nico you want to take that.Yeah and yeah so what I ended up.Doing is .Basically I added the .Notion of execution phase that in the.Short term we are not going to have a.New phase it's more incorporation for.Things like speed x where we expect to.Have that being done in.As a separate phase isolated from.The.The existing transaction subsystem.And then within a phase what I did is.That. yeah after our conversation last time..Like i.It was clear that we needed to maybe.Clarify better like what like when.Transactions.Or make it more explicit I guess that.There was actually full control of .The fee regime.That was given to validators so what i.Did was I added a new.Tag that allows validators to.To basically .Use the actual feedback as fee being.Charged for certain transactions.As well as .Having the possibility of having a.Discounted .Rates .When it comes to for example.I mean actually that's what we do today.Like we actually give.Large discounts to to transactions.That are when we're not in search.Pricing. so that's what I did I also added.Some clarifications on. on on.How this makes and why this makes sense. I think there were more questions.Actually and that maybe where we we can.Maybe like spend some more time today.Around.Like are we basically defeating like. existing guidance that we give people. when we say bid.Whatever you feel comfortable with and.Then.The network will.You will actually you're unlikely to.Actually pay for what you're bidding if.You're over bidding and I think.There's a this is a fair question.So on that yeah I don't know if .David or john I know like we use I mean.I I you know I like this new version i.Think it's a lot cleaner I think.Possibly in line with with.What you're saying if I have one one nit.To pick in the.Backwards in the protocol upgrade.Transition we state. as this CAP does not change.Transition semantics I think maybe we.Should just qualify this or you know.Like you know changes the fee but it's.Within this.Originally permitted semantics or.Something .But that's.That's pretty .Nitpicky.Yeah I mean I think yeah like .Yeah.I can fix that definitely like.I think the .Interesting thing that was raised both.By john that is on the call and by lee.That is not here today.Are actually good questions around like.Today you can basically bid.By a factor of like a million let's say.And.You're actually very unlikely to be pay.For I mean you're exposing yourself to.That but then a bunch of other people.Would have to pay.That type of fee.Whereas with this proposal.Depending on on which the data you.You run into you may actually pay.That fee.So.Like for me the rationale for that is.That we are actually.Kind of .Put it's it's I think I put that as.My notes as .We can actually rely on some of the..A contract between validators that.You know the responsibility of a.Validator is to actually have lower fees.And then we can actually use in a way.That as an expectation for validators.When they.Just like today when you run a validator.You have to have an archive like you.You basically have a contract with .With other validators. and at any time other validators can.Basically decide to remove that.Faulty or not not fully compliant.Validator from their current set and.Then we end up with.With I think a system that.Yeah that's realized more on this on.This contract that it's not necessarily.A technical contract it's a.Kind of a.In order to be.Aligned with the.Values of the network..You have you know you shouldn't be .Forcing like isolating for example.Transactions so that they just to.Mess with people.Just a question if it's more of like a.Social contract or a set of expectations.That validators follow .Is there a method for them to to know.If other validators are living up to.That yeah so that's actually a good.Question so like it's we actually have a.Similar contract today with .Like.Validators should not be .Excluding certain transactions.From their current set like you would .Like the only way you can discover that.Today is by.Looking if there are.Patterns where some transactions let's.Say for certain assets or things like.That are.Always excluded by some validators you.Can actually go through history this is.All public and you know.You can basically kind of audit.The behavior of the details.And I think we.This is a similar problem here where you.Want to have the tools for.Auditing validators when it comes to.This .New power that we are giving them so the.Data will be in history .I think what we have right now is that.In horizon for example we don't actually.Expose much of the.Sap information.So we don't know if.What was actually happening during.Consensus runs.For example like we don't know if some.People are.Never.Aligned with other people like for.Example so.I think this is this is the type of work.That can be done.Either by yeah by the SDF or by other.People in the community to kind of raise.The bar just like we have.Raise the bar when it comes to what.It means to run a validator with you.Know like projects like .Like Stellar b right that are showing.When validators are flailing or things.Like that.So I mean this is like what you've.Just mentioned is sort of one solution.Like yes we need a.We need a .You know some kind of validator.Conventions and.Ultimately there needs to be some kind.Of companion companion document that you.Know this guy might not be a CAP but it.Discusses a like how you configure your.Stellar core to express these policies.And like what we make easy and hard to.Do like in the kind of default Stellar.Core release it's obviously gonna have a.Big impact on this but I think there's.Another side of this which where you.Know we don't want people to have the.Trust validators so we should be maybe.Promoting fee bump transactions like a.Bit more heavily right I mean certainly.You know one thing that like wallets.Could do is they could sort of by.Default like you know whenever you sign.A transaction it would also sign like a.Couple of fee bump transactions that it.Would kind of like resubmit. you know.Like more expensive versions if the.First one didn't get through or things.Like that so I think we should.Be you know in terms of backwards.Compatibility I think we should not.You know I think we should make clear.That there may be some expectations on.On the ecosystem.The sort of wallet side yep.Yeah I'm sorry justin go ahead I was.Just gonna say because on some level.There needs to be education and tooling.To understand how to manage.Dynamic fees.More actively because right now as nico.Said you can just set your highest fee.And dynamic fees the network you know.What to expect but you won't necessarily.Is that so what you're saying david is.That we would need documentation and.Potentially tooling.To in order to educate people to the.Expectation that they like wallets will.Need to more actively managed dynamics.Or maybe maybe we need a feature an.Optional feature for horizon that people.Would enable on their private horizons.Maybe on the public ones but where you.Submit three versions of a transaction.And it sort of.Like keeps submitting like the more.Expensive one if the previous one hasn't.Cleared in some period of time or.Something right.You know I can't design the the.The feature on the fly but it seems like.Something you we might want to to think.About and if people if want to take.Their wallets offline or not be sort of.Constantly monitoring the network maybe.This should be this should be part of.Horizon maybe this is an incentive for.Organizations to run their own horizon.Because they can you know control this.Better.Asked me to say the following.The cp is built on reputation the.Concern that a reputable validator is.Going to go rogue and build an.Alternative transaction set nomination.Rule set is a bit far-fetched.And the ecosystem can build tools that.Monitor validators for behaving sensibly.Sorry but there's a there's a big space.Between rogue and between like something.Like I might not agree with right. so I think like the point is like.There could be legitimate disagreement.About this and we want users to be in.Control or to you know they might you.Know rather not have their transaction.Be .Be executed if they're gonna get charged.Way more than somebody else.I think like .As far as tooling goes I think like you.Know one thing that seller beat could do.That would do would be really cool in.This context would be like hey like.What are the like you know.You know every 10th percentile 10 20 30.Etc. fees that this this validator is.Nominating if.Validators are being like pretty fair.You would expect every.Validator to nominate.Basically the same percentiles total.Fees. more or less and that would give a.Lot of people evidence about like oh you.Know like this guy's being a big jerk.And really just trying to get people to.Pay whereas other people aren't doing.That but I agree with you david that you.Know that doesn't change the fact that.You know your validator might say like.Hey like I think this type of.Transactions pay high fee and this one.For payloafi.I think the opposite they're equal.Distributions.And so like our stats look the same but.We're treating people differently.Maybe all the validators agree but it.Just turns out that it's there's some.Small number of like legitimate.Transactions that are hard to separate.From spam right and so you need to.I think just not.Participate we need we need an up we.Don't people shouldn't be forced into.Participating in the dutch auction right.They should be able to.You know control their.You know maximum fee to ensure that.They're not paying more than like twice.As much as other people and that's.Something that's it's doable it just.Requires a little bit of support on the. you know sort of platform side of.Things.For me kind of the like.I've been thinking about this this whole.Thing since we since we spoke about it.Last.Was that last thursday two thursdays ago.Whenever it was.And i've kind of convinced myself that.In the long run like looking like let's.Say that we did this in x months and.Then you look at x plus 12 months in the.Future.Like probably everything is fine.Everybody adapts to the new world you.Know maybe some new tooling develops.Like david is talking about everybody.Switches to kind of this lower fee.Mentality where you don't just bid like.10x 100x whatever what you're willing.What you actually want to pay at the.Present. but like looking right now you know i.Was looking at dashboard for the last.Couple minutes like every minute.And the 50th 60th 70th percentile fees.Have been sitting around 20 000. stroops pretty much non-stop in that.Period sometimes it's been the 60th 70th.80th.But .20 000 troops.And that's you know about one-third of.The total traffic.So there are a lot of people who are.Bidding.Way above the fees that are actually.Getting accepted in the short run if.Those people aren't paying attention.Those people are going to be pretty sad.I think yeah they're just 100 million.Stroop .Bid yeah yeah yeah so I mean I guess.That's 10 lumens or whatever is that.250.Yeah it's not insane I'm I have to say.I've literally said to many many people.And I just do a hundred thousand troops.You'll be fine.Don't worry about it just said 100 and.You know.I'll try to tell those same people if.If that changes that made sense right .So this change I think what you're.Saying.Yes yeah.This short-term pain long-term gain.Thing that you're pointing out john.May well be true .I mean like I think the difference is.That like.Yeah like if for example like these fees.Of the network are like you know around. like the minimum like like like when.You're not in such pricing price right.That's kind of where you are .Like if you paid like even.100 times more than that like that still.Gives you.Like some advantage compared to other.People like you're still doing some.Level of bidding like I think that's the.Difference with this CAP is that.You would not be bidding.Like yeah like a million times more.Like you would be bidding only you know.A thousand times more.I mean that that's I think that's the.Shift is that you you have to be maybe.Closer to what you want to pay. unless like like in some.Situations like the I'm like the.The people like putting 10 lumen as a.Fee I mean this is what .We we I think discussed in the.Past those are the type of numbers.I would expect when if you do like.Some some trades that actually.Are going to be.Valued at more than than that.And I think those over the long term.They will continue to actually be.Bidding that high.And that makes.Sense.But they will actually pay them pay that.That's the difference.Well those fees should come down quite a.Lot actually and that's one of the.Things that made me think in the long.Run.This would be better like right now.Imagine that you're you're racing for an.Arbitrage opportunity let's say the.Arbitrage opportunity using the numbers.That we were just using is worth you.Know 11x allowance you're like I'm.Willing to bring 10xl I'm going to try.To get you know one excellent profit in.The worst case maybe you're even willing.To bid 11.But let's just say 10 for the sake of.Argument.Well right now it's like I'm going to.Bid 10 but I'm probably going to pay.100 troops a thousand strips whatever .Based on like what normally happens.During surge pricing.And so you've got let's say like 500.People or something trying to do this.One of them wins the other 499.Transactions go in the garbage. but in the real world where everybody.Is actually bidding.For this you know 10xlm thing and.They're going to pay 10 meaning with.This proposal when I say in the real.World.Everybody would actually lose money and.Expectation so they'll all have to drop.Their fees by a factor of the.Competition.So fees will actually like their peak.Fees would come down by a factor of 500.In this example so that's pretty cool.That gives other opportunities a much.Better chance to be competitive.So I think long term there could be.Benefits beyond just like you know.People bidding closer to reality but.Also just like changing the discrepancy.Between like I'm trying to send a.Payment to my friend and I'm trying to.Take advantage of some arbitrage.Opportunity.I got one more question from tomer here.Actually it's too how do we envision.Validators controlling this will we give.Them configuration options in Stellar.Core.So yeah like I thought a little bit.About this all right like last time.There were actually questions around.That like are there like certain.Configs. I think it depends on the type of.Strategies we're going to implement.Some of the.The things where I can see some configs.Being.Useful are if we start to have.This type of surprising in a way that is.Doing something maybe over historical.Data like when you look at the last few.Ledgers instead of just looking at the.Current pledger.And then as soon as you said the last.Few ledgers were then how many right so.That would be an example where you have.A tunable.For the.Cur like there's another tunable I think.That .That I can think of .That is.Related to the.Actually the first example I had in the.Cap that was.Can we.Limit the number of .Of the operations in for that are.Potentially touching the decks right so.Like that number is an example of a.Tunable also for that for that policy. but of course you know people can.Always go around any of those things .Like they can write custom code if they.Want.So that's a.That's for that.But yeah for the for the ones that i.Think that we will be implementing like.They.Likely will have yes some tunibles in.Them.To.Potentially even disable them.Companion document.Right that would be more in the actual.Box of .So is the general consensus at this.Point that people feel I feel like i.Literally just interrupted justin who's.About to say the same thing but.Do people generally feel good about this.Now feel bad about this I feel a lot.Better than I felt when we spoke about.This two weeks ago I feel like we're in.A place where like.I think we could get people behind this.And it'd be a bit of a mind shift but.People would feel good about it. I don't know if everybody else feels.The same way.Yeah I think this has been better than.The than the.Much better than the last draft I think.It's this is a tool and I think there's.Understandably some anxiety over like.How is the tool going to be used but i.Think the worst case scenario is not.Terrible that like we just get rid of.The dutch auction and the most likely.Scenario is that.People that you know.Stellar core has some parameters and.The thing you know it's done in such a.Way that you know it's like like simple.Payments are very unlikely to do this.Because they would require changing the.Sequels plus and that yes we understand.That certain assets and then overloaded.Decks may end up.Getting this.Treatment.Yeah exactly like the worst case.Scenario is that we end up with what.Basically everybody else in the space is.Doing.And what we used to have before we went.From construction which was before the.Fee bump transaction and so I think that.There's some I still like the dutch.Auction but I think it would have been.Harder to make the case for the dutch.Auction if we already had the fee bump.And so you know now we've got both.Options.Yes.I think.Like I don't know if.People so and I think that would be.Actually part of.How to.Explain to people like the shift here is.That I think by renaming.What we do to discount.I think it's actually helps quite a bit.People understand what is actually.Happening.In terms of like you know when you think.Of a discount I'm potentially going to.Give you a discount you go to a store.You actually.Expect to more or less pay what is you.Know displayed. before you start to haggle. and I think that's kind of the.You know I think.It's it's more similar to this.Via slack tomer is asking questions.About downstream systems so how do we.Expect downstream systems to understand.The fees collected.And then he also said dutch auctions are.Already an oddity in the space so this.Only makes fees more opaque.And then again raises a concern we need.To figure out how to explain this to.Downstream systems.So I know that this is a.Well I think that's a valid question.Downstream systems how do we expect to.Explain this that we've removed the.Oddity at least some fraction of the.Time.Right I think there was a question.Around .Like being able to see which groups and.All that from horizon.From lee on the mailing list I mean the.Data will be there like it's actually.Part of the.Of the consensus value.So yeah like I think.Yeah we'll probably have to.To think about how to.Maybe like expose this a little better.From the the main api that comes on.Maybe it's the the api also is like.Going to give better.Idea of like what's going on and the.Current one is actually.Also kind of strange because the stats.Of other if you look at as a as a.Developer if I hit that api that gives.Me stats about the last five ledgers.It's actually not.Even today it's actually not that great.In terms of experience because you're.Looking at like a lot of people like.Should I use the.Tenth percentile or my year's percentile.Like and.And actually you're not even guaranteed.Of anything by using this they're.Sometimes because it's only five ledgers.And you know past performance doesn't.Predict future.Yeah I think for a lot of developers.They just ignore they don't they just.Say why do I need to check like they've.Learned.Why do I need to check fee stats if i.Just can set my fee super super high and.Only be charged the lowest.And so I guess this comes back in part.To that question right like if suddenly.Yeah displaying information about fees.In order to make an informed decision is.More important.I think the so it will be actually.You can still have like the approach.Can still be done very much in .Isolation. because we you know by.Like similar to you know what what we.Have today right where people build like.Some high number and then that's kind of.It like now they will have to be.A lower.Lower than not better than that if they.Are.Not comfortable with that higher number.And and then.And then retry and then do a.Maybe like a.Like depending on the on the app right.Like it depends like like for.Like for many applications building like.A tenth of a cent is actually fine.Right in fee. and that's kind of the end of the.Story if.Like if you really want that transaction.To make it but you don't want to.Necessarily expose yourself to.Variations.I think a fine strategy is just to have.Like a timeout and multiplier on top or.Something like that right like and it's.Not complicated.Okay.I mean I guess if I had one reservation.About this maybe I should just.Voice this now I'm not sure this is a.Problem but in the nomination value.Comparison.I'm not 100 convinced that the second .Item in the in the.Four tuple the second most significant.Item should be total fees that the.Transaction set will collect an.Alternative which I don't know if it's.Better but the point is I don't know an.Alternative would be to say.It's the total pledged fees the total.Offered fees even if the total collected.Is less because some transactions ended.Up in the discount bucket now.I understand there's there's definitely.A good argument why total fees of course.Is better otherwise maybe validators.Could like game the system or do other.Weird things.However there's just one scenario that.Maybe I'm concerned about imagine a.Situation where we have this thing that.We think is not very economically.Beneficial and it's spam so we say okay.We're going to put that in the.Non-discount bucket and everything else.Goes in the discount bucket and now you.Have these transactions that are very.Important that are willing to pay a lot.Of money but because they're in the.Discount bucket two kind of maxed out.Nomination values that are completely.Both completely full so have the same.Number of operations end up favoring.The one that collects more fees.Where.It actually even though more fees were.Pledged to the other one it's just that.The other people are getting a discount.That maybe they don't even want .Yeah I mean that yeah that I mean.I think I don't.Think it like using the total.Feedback.Is necessarily a problem.Like we do we just need a way to compare.Right like the quality so I think.That you know it actually is aligned.With the.The intent.Yeah so.I think yeah like the bid is fine.Probably.Are there are there other questions to.Raise here or points to discuss.I feel like there's still.Issues that maybe already exist on on a.Mailing list.Is that correct.Or actually I guess i'll just say it.This way I feel like this should that.This is not quite ready to move into a.Vote or anything that there still may be.Some time for marination just to think.About a few of these issues.Including maybe thinking about the.Downstream implications just yeah i.Think I want to maybe.Add a little bit of detail of like the.Type of expectations for the downstream.Systems and then.And then we can.Actually move forward with this one i.Mean here's another thing we could do.That I don't I don't necessarily think.Is a good idea but just so that it's.Been on the table we've decided it's not.A good thing to do so we could so.Unfortunately there's no like flags.You know .Section for the fee bump transaction but.We could kind of add a new type of fee.Bump transaction where there's a flags.Field.And sort of you know.One of these flags could control could.Say like basically like like this is.Very important like I'm willing to pay.My full i'd rather not have a discount.If it like you know.Risks my transaction having like less .Chance of getting in.So then at least somebody who like their.Transaction is very important they say.Like hey don't exclude me just because.You're giving me a discount I don't even.Want that discount.Yeah I don't I don't.Think we would.Of all the strategies we talked so far.Like we would basically have like those.Groups right and then within those.Groups you may or may not get a discount.But even if you do get the discount you.Have to be the highest bidder so I think.If you bid more than everybody else.Like you know what I'm saying we'll get.In right.Not necessarily because you might not be.In the winning nomination value.Right I'm concerned what I mean a.Validator right that's going to craft a.A set right with all those groups.You will be.Included.Not if you're yeah sorry you'll be.Included in the nomination value but it.May get beaten out by another nomination.Value.Oh in practice we normally only have.Like one nomination value right or two.Yeah that's very small yeah but that's.But now we're starting to place you know.It increase the amount of trust in you.Know like that's not what scp is.Designed to.Take to guarantee right so yeah I mean.At this point what you're saying like.Well the other value right that's from a.Different validator would also not.Include that transaction that is the.Highest bidder right so that's.Why I'm imagining I think this is a.Different problem that you're.You you have no.A.That's the same problem the problem is.That somebody keeps nominating.A block that has more spam transactions.And therefore collects higher fees and.Value kind of ends up beating out a.Value with more.Useful transactions.But I think this is more of a like why.Would other validator if there if there.Are more spam values right like.This high fee transaction would be .Nominated by this other validator unless.They are actually decided that they.Would no but I mean like scp is.Byzantine fault tolerant right we we're.Supposed to assume that like some.Fraction.Of validators could be misbehaving.Yeah of course yeah and in this case .And so and so I want to make sure that.That doesn't like severely impact the.You know the what we consider the good.Can I clarify here is this not solved by.Switching the second criteria to the.Total feedback oh sorry if we're just.Gonna do that then that's fine yeah yeah.That's right that's what I said earlier.Oh okay okay sorry I thought you were.Gonna consider it but you weren't so.That's why I was saying here's another.Thing that you do yeah okay sure.I I could still imagine the utility of.Like no seriously I really mean to pay.This bid. flag I just wouldn't support that.Today but if somebody were to come.Around and be like no like seriously i.Have a real reason why I really want to.Pay these ski bids and waste my money.Maybe we maybe there is a real reason.For that I don't know it yet but like.That wouldn't be a hard change to make.Like you were describing about adding a.Flags thing to the transaction to the.Debunk transaction.Right.So I guess that's another thing is.Switching that second value to be keep.It instead of what it is now okay.Okay cool.I feel like that's in progress.And now.I think it's time to move on.To speed x .So the next CAP for today's discussion.Is CAP 44 speed x configuration speed.X is.A new design for a fully on chain.Decentralized exchange that can scale to.An arbitrarily high transaction.Throughput.It's implementing it is something we sdf.Mentioned in our 2022 roadmap.It's something that's important to sort.Of the future scalability of Stellar.It's going to take a few caps to.Implement speedx and this first one is.Really just about setting up validators.So they can configure speed x.But rather than me trying to explain.That I will pass it I guess.I guess to john or maybe to jeff who.Wants to sort of give an overview of.What this CAP does.I'll pass it to john and john if you.Want to pass it to jeff up to you I'm.Gonna pass it straight to jeff and what.I was thinking is jeff could open with.Just like like a quick pitch on what.Like what speed x is why speed x and.Then maybe I can go and kind of give a.Quick pitch on like why we're breaking.Up the caps into a bunch of different.Things like why we're going section by.Section.And kind of what this one is about.Jeff jeff wrote all the drafts of all of.This stuff in the summer and we've just.Been cleaning it up and kind of like. like trying to like make it as.Physically simple as possible but all of.These ideas are really jeff's ideas so. thanks yeah so speedx is a.Design for trading .Settling a bunch of trades in batches.Instead of serially and the reason for.This is on the one hand if you if you.Settle trades in batches .You can parallelize the operational.Exchange so you can scale to .To many transactions per second and also.By trading in batches you get .The market becomes more fair and you get.Better liquidity between assets that.Aren't very traded very much and .You cut down on a lot of .The common front-running attacks or .The the arbitrage opportunities that.We've been talking about that clog up.The network.As if as for this particular cap.Speedx needs a certain amount of .Configuration data in particular the big.Thing is one.Control parameters on how you actually.Run the batch.Computation and and two .A way of choosing which assets are.Traded in the batch and which ones.Aren't .And so what this CAP does is take a very.Like the simplest approach towards .Deciding which assets in the batch.Namely there's some set list and then.The validators can upgrade that with.Some kind of upgrade protocol but you.Can imagine the future doing some other.Way of choosing which assets are.Traded in the patch and it's not.Quite clear exactly which kinds of.Configuration data we need in the CAP at.This point what actually we need will.Probably depend on.What we finalize for other speed x.Related caps.But this is we'll at least need the.Data that we have here.And just to just give a little.Information about like why we're.Breaking this down into a bunch of small.Pieces.So I kind of learned a lesson after we.Did the liquidity pools work where like.We produced this like 1500 line CAP and.It was just like really unwieldy and.People never knew what parts of things.We were talking about and what are the.Interactions between things and stuff.So this time different concept.Let's break basically let's break this.Problem into all the logical parts like.This the configuration of the upgrades.This is like the technical pricing.Algorithm that we're going to use this.Is how we're going to get the.Commutativity and this is how we're.Going to settle the trade and those are.Kind of like the four verticals that I'm.Seeing.And so this one came out first because.It was short and kind of easy and like.It was very well established like what.The space of options were. pricing will come out in the next few.Days and then.We'll keep going but I think jeff.Already gave a good overview of what's.Kind of in this particular proposal so.Yeah and this one contains actually the.Most controversial part of the speed.Example is it's actually related to what.We just talked about with validators.Being able to do things that maybe.They shouldn't have control of.So maybe we should start right on to.That particular topic.Yeah just quick question like so when.They're determining this list of assets.This is an extra protocol just like.Decision that they're somehow making.Like they're saying hey hey guys I think.These are the assets that we should add.And then they all.I sort of imagine there's like a listing.Process or something where you know like.We have this whole set of upgrades for.Like changing the transaction set size.Or whatever so i'd sort of imagine.We'd do a similar kind of mechanism.There.But like whatever we do it would be kind.Of outside the scope of the protocol you.Know whatever the ecosystem wants to do.Is their system that's what they should.Do.I.My hope is that this list isn't changing.Like every second that would be really.Unnecessary like.So it should be the type of thing that.People can coordinate pretty easily on.Like a day-to-day basis.But the the real question I have here is.Kind of like.Are people going to be upset about.Handing this kind of power to validators.I mean it's.It's very much like not in the kind of.Scope that we currently.Explore at least before CAP 42. it's very much the same kind of power.Of like hey like these assets live in.This privileged world where they have.Access to this feature and these other.Assets don't.Do people feel bad about this.Because I have something I mean.Personally.The way .Go ahead.I mean I guess the the.The thing that I would.Like to at least consider is that.Instead of one magically privileged.Speed x you could at least theoretically.Have room for like multiple speed x's.Where asset issuers could you know by.Default be included in any speed x but.Could also like say like which speed x.They want to be included in.So they could kind of revoke permission.For being in a particular speed x so if.You did this then this is seems like a.More Stellar way of doing things because.Then in practice like all the assets.Anyone would care about will probably.All want to be in a speed x together but.If some another bunch of random assets.Wanted to be in a speed x together like.You know importance is in the eye the.Beholder no one's to no one is to say.That like assets a b and c are less.Important than assets x y and z it's.Just that you know.X y and z are happy together and a b and.C are happy together.This is an interesting.Concept. not something that actually came up.In the earlier discussion at all so.Already I I'm intrigued.I guess my first kind of like.Reactionary question to this is like.The main motivation for breaking out.Like a speedex list.Is just computational concerns.So how does that square with having.Multiple.Lists or having to like you could even.Imagine a world where like everybody's.Like okay well you know like there's.This one list which has this preferred.Status but like let's put everything.Else into this other list.Well because the the problem is that the.The list themselves would have to be.Capped right because there's a super.Linear stuff in the in the kind of.Number of assets right and so if you can.You know it's cheaper to compute two.Small two speed x's with like 100 assets.Than one speed x with 200 assets.Isn't it. certain parts of it at least i.Haven't figured out how to scale .Beyond some fixed quantity of assets.Effectively.Which parts are those .So the the price computation the the.Number of rounds that you need .Seems to like increases somewhat as.The number of assets goes up and but.The the big limitation I think is the.The the linear programming follow-up.Phase. the hand rolled the hand world solver.That I wrote for Stellar over the.Summer was turns out doesn't work.Very well at all past like 20 assets if.You take an office shelf solver I was.Getting it to.50 to.80 and then a custom hand rolled solver.That I had all sorts of you know.Sparse optimizations and everything in.It I could push that to 100 but .But the performance of that really.Starts to.Increase very non nonlinearly after a.While. I don't I wasn't able to push it.Past like a 100-ish ish.So I think some other technique might be.Needed there.What's the incentive for an asset issuer.Wanting their asset to be in a speedex.You get .Basically more liquid trading and or.Like better usability on the asset.Going on on what david was saying.So one of the things that comes up.In.Speed x.Is like in the speedx pricing cap.That I'm still in the middle of working.On based on jeff's. but we.Spoiler alert we agreed on this kind of.Scheme where basically like in the.Pre-nomination phase validators nominate.A set of prices and then.In order to see if those prices are like.Relatively sane. you know we also like have all the.Validators do like the standardized.Computation using the solver parameters.In the config.To try to produce a second thing and.Then we choose whichever price to seem.Like they're better.That second phase requires that linear.Program that jeff was talking about.Which he doesn't know how to scale up.Very high.But if we just said like hey like we.Have this one one speed x that we're.Gonna do both phases for.We'll do the pre nomination and the post.Nomination and that's how we'll try to.Produce a really good reliable set of.Prices.And then for the second phase or sorry.For all the other speedx lists.You have to both present the prices.The network flow that's already rounded.So we don't need to do the linear.Program.Then we avoid that scaling issue and.Then maybe we can do more we don't do.The internal calculation we just accept.Those prices maybe they're good maybe.They're bad.And that's the cost of not being in that.Main list.But that is a lot fairer than saying.Like you're either in the list you're.Not nonetheless.I mean somebody has to do the linear.Program either way though.Right sure but.I guess my argument would be if you.Can't produce a solution.You won't trade.Right but it's not necessarily people.Who want to trade who are.Producing the solution it's the people.Who have access to the order book.Because they're you know.On you know.Validators in the network.But like you could very much.Like bear with me for crazy ideas you.Could very much imagine running.You know like hey like you know we're.The people who like want the speed x to.Happen we run this web service.All your validator has to do is hit this.Web service and we'll spit out the.Answer for you so that you don't have to.Actually do the computation well oh but.The point is now it's not a sorry but is.That the valid or the end user is doing.Is it like is there's a special.Operation type which is like speedx.Solution or it's like right so the point.Is like you were disempowering the end.Users if we're saying like now you're.Kind of like you're reliant on like.Whatever solver your .Your validator happens to be willing or.Not willing to to use.But the flip side of it is like there's.90 when I looked at this when we were.Working on this in the.Early winter there were 89 000 and.Something assets on Stellar.Even if we broke it into.100 groups of 90 to standard jeff's 100.Threshold we couldn't do all of that.In the same way like we couldn't give.Everybody the same level of attention.There's not enough time to do it well i.Think you just have to price it properly.Right I mean that you know we could have.You know a super linear. you know we.Reserve fee for like putting your asset.Into a speed x or something right it.Could like increase with the number of.Assets and speed exits I think you know.I'd rather like take the actual costs we.Have and reflect those back onto users.And say like this is what it's going to.Cost to network so like you have to be.Willing to pay for it rather than.Having validators make value judgments.About like which assets are good and.Which are bad.I'm sorry you're so willing to have.That it would cost the issuer of the.Asset would be the one that would bear.The cost of being listed into a speedx.List not the cost but the reserve.Requirement the reserve requirement.Potentially.And again I'm not saying that like you.Know I do think that there are kind of.Spam assets in their assets that.Everybody cares about but.I think that the va that we should kind.Of instead of just magically decree the.Value of an asset we should have.Existing asset issuers say hey i.Actually value having a market between.My asset and this other asset.Right and that's the sense in which.Maybe you could end up with multiple.Speed x's like maybe there's a.Weird like in-game currency market for.Like a whole bunch of and then there's.Like an actual real currency of like.Stable coins or something.And you know maybe those two markets.Don't need to inter-operate or they only.Operate on the native asset or something.And then the validators aren't don't we.Don't have to be in a position of saying.Like actually we think like euros are.More important than like game credits or.Whatever which like we might but like.Why why should we be making that value.Decision.So so we could say like .Each speed x batch has like an id or.Something.And it's not the validators that.Choose what's in that it's the asset.Issuers can like propose to put their.Asset into a batch and then if you put.Your asset into a batch then all the.Other asset issues were there. like say yes or no or they have a.Vote or something and basically the.Asset issuers are the ones choosing.Who's in the batch and not the.Validators.Yes I mean that is one way to do it.Another way to do it is sort of like.Each person who joins the batch it gets.Like exponentially more expensive and.You need an exponentially larger like.Reserve so it's like.You know you can sort of out or maybe.You can outbid whoever it's whoever has.Like the largest reserves who gets in or.Some combination of of the above I feel.Like we probably want some amount of.Input I mean what are the signals that.Are sort of.Like in some sense egalitarian at least.Kind of .You know like a.Objectively egalitarian. but like are potentially useful so.One signal is like does an asset issuer.Value a market between his or her asset.And some other asset and another signal.Is like what is my.How much how many native assets do i.Have you know what do I do I meet a.High reserve requirement.And so like if we could sort of factor.These two things in so the reserve.Requirement is is an absolute thing and.The whether one asset thinks another.One is interesting is a relative thing.I think you still need some kind of.Veto power from the people who are.Already there it's just so well that's.What I mean that's the first one that's.The relative thing that I'm talking.About I'm saying like what.I mean maybe it's a video or maybe it's.A preference.I I I'm going to avoid something that.Tomer just also shared on slack which is.A concern with like creating too much.Complexity around these around how these.Configurations work that make it really.Hard for people to interact with Stellar.Just because there's too many.It's just like.Issuers don't have to do this kind of.Thing anywhere else.Adding a lot a lot of complexity makes.Stellar just less appealing for use.It's something I think that is worth.Considering in this design yeah so I i.Mean and part of the way we can get.Around that is by having like really.Sensible defaults.Right but I feel like we should.We at least need some of these we need.To like.Work through some of these designs.Before we decide that they're like too.Comp complex or before we give up like.This is just.There's too much.Like I just don't want validators.Picking winners and losers you know.If we can at all avoid it so we need to.Either.Avoid that or convince ourselves that.There's no way to avoid it and I just.Don't think we're quite there yet.And like.This maybe different.Related questions so like what was the.The reason to.Like if you had a.A limit.Right so that's what you're like the the.Only thing really there that you need.For sure is the.Maximum number of assets. involved in this fedex run so.Then what was what is was there any.Reason for not just using fees as a way.To force people to to just like.You know you you basically.Only keep.The top the.Top k.Assets.Right that are involving speed x and.That is defined by fees.The reason that that doesn't work is.That you can imagine.That there are time like you can imagine.For example like a us government bond.Take that it's like one of the most.Liquid markets for anything in the world.Probably like on the same par as like.Other at like other very ultra liquid.Things like usd euro.But like those are like some ultra.Liquid things but like I want to focus.On the bonds because the prices don't.Change all the time. like prices change but like if you.Look and then you look again one second.Later.You might see the exact same prices.In fact you're probably pretty likely to.See the exact same prices in those cases.There might be nobody who's willing to.Pay a fee to trade.But there'd probably be an incredibly.Liquid.Liquidity pool.That also would be willing to trade to.Help settle out all the other trades.That people want to make.That liquidity pool isn't bidding any.Fee.So do you just say like oh sorry like.We're not going to include the most.Liquid market in the world.Because nobody wants to trade this exact.Second.That seems really perverse to me right i.Think what you want everybody.What you want is for all the other.Assets to say hey I want people to be.Able to like trade you know these.Treasuries or whatever from my asset.Because that's like it's a useful.Feature.For users of my asset to have right.So that that's why.You need .You need some amount of kind of.Configuration you need some you need.Some kind of input from the asset.Issuers.Right we should at least consider a.Design that has some amount of input.From asset issuers.I mean like I still don't understand.Like you know in your example john.Yes you have this asset that is very.Stable and so on.But like.Even if that asset is included in a pool.If people don't make money of.Doing a trade against some other asset. like.If the if that trade is not that.Valuable like how is such pricing.Going to work no it is valuable it's.Just not valuable to the asset issuer.Right imagine suppose you know the fed.Issues a digital dollar on on Stellar.I get it like it's more like like.Like what I was suggesting is that you.You the way you pick.The top 10 assets is by actually looking.At the trades that are happening.Across you know the network.Because you have to have this function.That you know which top k.Top end transactions are you keeping for.That speed x.Round and as part of that you can wait.Sorry is it for a round I thought this.Was a more coarse grained thing like we.Just kind of.You know every once in a while we'll .Configure a you know speed x to have.A different set of assets I mean yeah it.Should be a wrong I mean it's there's.A level of granite granularity there i.Don't know like but you know I mean if.We are going to do it find granularity.Then we should do it through some kind.Of transaction as opposed to through.Like a protocol upgrade or whatever the.Upgrade .Part of the nomination message of value.If it's per asset issuer it should be a.Yeah transaction and not an upgrade i.Guess.I think doing it to find grain is a.Little dangerous just because .There's gonna be a lot of assets that.Are sporadically traded and so like.If you try and like optimize like i.Don't know some max over the transaction.Set assets are gonna be going in and.Out of the pool a lot and that's hard to.Predict for users and so usually kind.Of gonna get a lot of like really failed.Transactions which is a bad.Experience.Yeah the CAP mentions that and I totally.Agree like I definitely wouldn't want a.World where that set changes every.Ledger that sounds like really.Impossible to use and everybody will.Just be really frustrated and hate it.Well at this point we are out of time.For today's meeting I guess just jeff.And john do you sort of have.Some input that allows you to go move.Forward I mean I know that we can bring.This back to the mailing list too.Is there any like final question that's.Like what what should happen what's the.Next step that we need to answer here.Are we ready to move.You sort of have enough.I think it's pretty clear that people.Want us to ask other questions about.What could be done.Like I have some pretty strong opinions.About what what like why it should be.The way I proposed but like I'm really.Happy to go and explore some other.Things and try to write up what they.Would be like and like what pitfalls we.Might encounter it'd probably be kind of.Fun honestly so I kind of know what i.Need to do. jeff you feel the same yeah I agree.With that yeah.Well I mean I think I think maybe it's.Like for me it's like that.There are some questions here that I'm.Not sure we can answer without actually.Having.How do you actually produce the.Denomination value like like if if i.Don't have a clear idea of like.How do we pick which transactions to be.You know like based on fees like it.Sounds like some of the properties.You're looking for actually.You're looking for a more balanced.Like composition as opposed to.Just high fees. and I'm not sure are you talking.About me or about david.No.About you yeah john.I I'm looking for whatever whatever.Simple thing we can do that people can.Agree on.Like that's why I just gave it to the.Validators because I thought we'd be.Able to agree on that and they could.Agree and figure out what what is good.For the network.That's what like when lee posted on the.And about like other things we could do.And my response was basically like you'd.Have to convince me that a heuristic.Would outperform the validators who care.About stewarding the network. assuming that we are actually.Restricting like a small number of speed.X assets in a world like david's where.We have multiple sets maybe and we're.Expanding the capacity by like breaking.Them up maybe it's a different trade-off.But like if we're going to look at a.Single block you'd have to convince me.That like the heuristic could outperform.The validators who just want to do.What's good for the network.I mean the other question is would it.Make sense to have two tiers like you.You'd have like the core speedx assets.And then other assets that can be traded.For any of the 20 core speedx assets but.But it's not making a market between any.Of the like a pair of non-core assets.Shmedex has assets shmedex and speedx.Sorry.We've exhausted justin he's trying to.Kick us out and.All right look to be continued.[Laughter].Thanks everybody yeah to be continued.Seeing a couple weeks and on the mailing.List again everybody out there thanks.For watching.If you're interested join the Stellar.Dev mailing list to participate in the.Discussion as it unfolds.
