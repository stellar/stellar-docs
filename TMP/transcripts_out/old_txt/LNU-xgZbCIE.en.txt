hear me my name is Julia Martinez
hear me my name is Julia Martinez
senior developer Advocate and I'm super
senior developer Advocate and I'm super
senior developer Advocate and I'm super
excited to get today's session kicked
excited to get today's session kicked
excited to get today's session kicked
off where we will be learning the ins
off where we will be learning the ins
off where we will be learning the ins
and outs of Russ smart contract
and outs of Russ smart contract
and outs of Russ smart contract
development so I'll go ahead and kick it
development so I'll go ahead and kick it
development so I'll go ahead and kick it
off with a quick introduction again my
off with a quick introduction again my
off with a quick introduction again my
name is Julian Martinez senior developer
name is Julian Martinez senior developer
name is Julian Martinez senior developer
Advocate and Common Man here at the
Advocate and Common Man here at the
Advocate and Common Man here at the
Stellar development foundation once
Stellar development foundation once
Stellar development foundation once
again over the next I guess half an
again over the next I guess half an
again over the next I guess half an
hour to an hour or so depending on how
hour to an hour or so depending on how
hour to an hour or so depending on how
you guys are feeling we're going to dive
you guys are feeling we're going to dive
you guys are feeling we're going to dive
into some basic smart contract
into some basic smart contract
into some basic smart contract
development and we may even scale it up
development and we may even scale it up
development and we may even scale it up
to maybe getting into a staking smart
to maybe getting into a staking smart
to maybe getting into a staking smart
contract just kind of depends on how
contract just kind of depends on how
contract just kind of depends on how
the flow goes all right so first things
the flow goes all right so first things
the flow goes all right so first things
first we're going to go ahead and dive
first we're going to go ahead and dive
first we're going to go ahead and dive
into a great online IDE tool here it's
into a great online IDE tool here it's
into a great online IDE tool here it's
called okashi again okashi is an
called okashi again okashi is an
called okashi again okashi is an
online IDE it's really good for
online IDE it's really good for
online IDE it's really good for
iterating on your smart contract ideas
iterating on your smart contract ideas
iterating on your smart contract ideas
it's got a cool code window where you
it's got a cool code window where you
it's got a cool code window where you
can type in all your syntax there's
can type in all your syntax there's
can type in all your syntax there's
the contract window where you can
the contract window where you can
the contract window where you can
actually call the functions related
actually call the functions related
actually call the functions related
to the smart contract that you've
to the smart contract that you've
to the smart contract that you've
just you just coded there's also a
just you just coded there's also a
just you just coded there's also a
console window here that shows the
console window here that shows the
console window here that shows the
output of the smart contract calls or
output of the smart contract calls or
output of the smart contract calls or
the function calls rather so if you'd
the function calls rather so if you'd
the function calls rather so if you'd
like to follow along you can actually
like to follow along you can actually
like to follow along you can actually
scan this QR code and as I'm updating
scan this QR code and as I'm updating
scan this QR code and as I'm updating
the smart contract online you should be
the smart contract online you should be
the smart contract online you should be
able to see the smart contract
able to see the smart contract
able to see the smart contract
being updated on your local machine as
being updated on your local machine as
being updated on your local machine as
well so what I'm going to do here is
well so what I'm going to do here is
well so what I'm going to do here is
bring okashi to my main screen you
bring okashi to my main screen you
bring okashi to my main screen you
should be able to see it
should be able to see it
should be able to see it
here all right so this is okashi
here all right so this is okashi
here all right so this is okashi
again we have the code window ready
again we have the code window ready
again we have the code window ready
for all the syntax and you know this
for all the syntax and you know this
for all the syntax and you know this
is where the bulk of your your logic
is where the bulk of your your logic
is where the bulk of your your logic
will live for your smart contracts we
will live for your smart contracts we
will live for your smart contracts we
have the contract window which is going
have the contract window which is going
have the contract window which is going
to hold all the functions and will allow
to hold all the functions and will allow
to hold all the functions and will allow
you to you know execute and invoke
you to you know execute and invoke
you to you know execute and invoke
different functions that live on that
different functions that live on that
different functions that live on that
contract and you have your console
contract and you have your console
contract and you have your console
window here which is just going to
window here which is just going to
window here which is just going to
Output the I guess or it's going to
Output the I guess or it's going to
Output the I guess or it's going to
show the return data of the function
show the return data of the function
show the return data of the function
call itself all right so let's go
call itself all right so let's go
call itself all right so let's go
ahead and dive into rust and sorond if
ahead and dive into rust and sorond if
ahead and dive into rust and sorond if
you don't already know sorond is
you don't already know sorond is
you don't already know sorond is
Stellar's smart contract platform so
Stellar's smart contract platform so
Stellar's smart contract platform so
a few things here first things first
a few things here first things first
a few things here first things first
you see the flag nod that is to tell the
you see the flag nod that is to tell the
you see the flag nod that is to tell the
compiler to not use Russ standard
compiler to not use Russ standard
compiler to not use Russ standard
Library sorb on Smart contracts this
Library sorb on Smart contracts this
Library sorb on Smart contracts this
flag and optimize for smaller contracts
flag and optimize for smaller contracts
flag and optimize for smaller contracts
so they don't take up take up as much
so they don't take up take up as much
so they don't take up take up as much
space on The Ledger this makes for
space on The Ledger this makes for
space on The Ledger this makes for
you know good good forward term thinking
you know good good forward term thinking
you know good good forward term thinking
for things like State bloat and overall
for things like State bloat and overall
for things like State bloat and overall
just being mindful of not taking up
just being mindful of not taking up
just being mindful of not taking up
more space and storage than you need to
more space and storage than you need to
more space and storage than you need to
because in the future it can lead to
because in the future it can lead to
because in the future it can lead to
bottlenecks and user experience and
bottlenecks and user experience and
bottlenecks and user experience and
overall just becomes IM manageable
overall just becomes IM manageable
overall just becomes IM manageable
so you see here on line three you Soroban
so you see here on line three you Soroban
so you see here on line three you Soroban
SDK this is because Soroban uses a
SDK this is because Soroban uses a
SDK this is because Soroban uses a
special dialect of rust with
special dialect of rust with
special dialect of rust with
dedicated data types and some special
dedicated data types and some special
dedicated data types and some special
attributes so we're importing a
attributes so we're importing a
attributes so we're importing a
couple of attributes here namely
couple of attributes here namely
couple of attributes here namely
contract contract implementation the
contract contract implementation the
contract contract implementation the
N data type symbol string and symbol
N data type symbol string and symbol
N data type symbol string and symbol
short now let's go ahead and cover a few
short now let's go ahead and cover a few
short now let's go ahead and cover a few
of these these two attributes reg are
of these these two attributes reg are
of these these two attributes reg are
mainly pertain to telling the
mainly pertain to telling the
mainly pertain to telling the
compiler to treat all the following
compiler to treat all the following
compiler to treat all the following
syntax as a contract would be treated so
syntax as a contract would be treated so
syntax as a contract would be treated so
when it comes to the contract
when it comes to the contract
when it comes to the contract
implementation it exposes all the
implementation it exposes all the
implementation it exposes all the
publicly facing functions to the
publicly facing functions to the
publicly facing functions to the
environment for processing through
environment for processing through
environment for processing through
different mechanisms like testing
different mechanisms like testing
different mechanisms like testing
static envir static function testing
static envir static function testing
static envir static function testing
Etc so with EnV this data type is
Etc so with EnV this data type is
Etc so with EnV this data type is
going to be responsible for accessing
going to be responsible for accessing
going to be responsible for accessing
smart smart contract storage within the
smart smart contract storage within the
smart smart contract storage within the
contract itself as well as data from
contract itself as well as data from
contract itself as well as data from
The Ledger so you'll see how we use
The Ledger so you'll see how we use
The Ledger so you'll see how we use
this a little bit later when we're
this a little bit later when we're
this a little bit later when we're
creating a key value kind of like
creating a key value kind of like
creating a key value kind of like
storage mechanism for the smart contract
storage mechanism for the smart contract
storage mechanism for the smart contract
symbol now symbol is a I don't want to
symbol now symbol is a I don't want to
symbol now symbol is a I don't want to
say it's another term for string but
say it's another term for string but
say it's another term for string but
you can think of it as a string so there
you can think of it as a string so there
you can think of it as a string so there
are two types of symbols short symbol
are two types of symbols short symbol
are two types of symbols short symbol
which is a string of up to nine
which is a string of up to nine
which is a string of up to nine
characters and then long symbol which is
characters and then long symbol which is
characters and then long symbol which is
a string of up to 32 characters but the
a string of up to 32 characters but the
a string of up to 32 characters but the
difference here is that long symbols
difference here is that long symbols
difference here is that long symbols
actually require you to pass in the N
actually require you to pass in the N
actually require you to pass in the N
data type before constructing them here
data type before constructing them here
data type before constructing them here
on the next data type we have the string
on the next data type we have the string
on the next data type we have the string
string is exactly what it sounds like
string is exactly what it sounds like
string is exactly what it sounds like
here it's going to be a concatination of
here it's going to be a concatination of
here it's going to be a concatination of
letters symbol short is a function
letters symbol short is a function
letters symbol short is a function
that we use to kind of just quickly
that we use to kind of just quickly
that we use to kind of just quickly
create short symbols in this case we're
create short symbols in this case we're
create short symbols in this case we're
going to create a short symbol for the
going to create a short symbol for the
going to create a short symbol for the
word title now you see here on line five
word title now you see here on line five
word title now you see here on line five
const title symbol equals symbol short
const title symbol equals symbol short
const title symbol equals symbol short
title we're just going to use this as
title we're just going to use this as
title we're just going to use this as
kind of like a label for the key value
kind of like a label for the key value
kind of like a label for the key value
system that we're about to set up so
system that we're about to set up so
system that we're about to set up so
again you see const title symbol equals
again you see const title symbol equals
again you see const title symbol equals
symbol short and then we're using the
symbol short and then we're using the
symbol short and then we're using the
word title all right here on line
word title all right here on line
word title all right here on line
seven you see the contract attribute
seven you see the contract attribute
seven you see the contract attribute
followed by line eight Pub struct title
followed by line eight Pub struct title
followed by line eight Pub struct title
contract so we're creating an empty
contract so we're creating an empty
contract so we're creating an empty
struct and all sorond smart contracts
struct and all sorond smart contracts
struct and all sorond smart contracts
will follow a similar pattern you see a
will follow a similar pattern you see a
will follow a similar pattern you see a
contract attribute the empty struct with
contract attribute the empty struct with
contract attribute the empty struct with
the name of the contract itself and Then
the name of the contract itself and Then
the name of the contract itself and Then
followed by a contract implementation
followed by a contract implementation
followed by a contract implementation
attribute and then the implementation of
attribute and then the implementation of
attribute and then the implementation of
the actual contract so let's go ahead
the actual contract so let's go ahead
the actual contract so let's go ahead
and start writing some functions here
and start writing some functions here
and start writing some functions here
this is our title contract and the main
this is our title contract and the main
this is our title contract and the main
purpose of this is to kind of
purpose of this is to kind of
purpose of this is to kind of
illustrate the key value system when it
illustrate the key value system when it
illustrate the key value system when it
comes to storage so I'm going to create
comes to storage so I'm going to create
comes to storage so I'm going to create
a value for a key and then I'm going
a value for a key and then I'm going
a value for a key and then I'm going
to go ahead and well I'm going to create
to go ahead and well I'm going to create
to go ahead and well I'm going to create
the key value get her and Setter so
the key value get her and Setter so
the key value get her and Setter so
we're going to be able to set a value to
we're going to be able to set a value to
we're going to be able to set a value to
a key then we're going to be able to
a key then we're going to be able to
a key then we're going to be able to
retrieve that value from a key so let's
retrieve that value from a key so let's
retrieve that value from a key so let's
go ahead and say Pub function we're
go ahead and say Pub function we're
go ahead and say Pub function we're
going to say set title this is going to
going to say set title this is going to
going to say set title this is going to
take in two arguments we're going to say
take in two arguments we're going to say
take in two arguments we're going to say
m of the type n we're going to take in a
m of the type n we're going to take in a
m of the type n we're going to take in a
string and this is going to be for the
string and this is going to be for the
string and this is going to be for the
title value we're not going to return
title value we're not going to return
title value we're not going to return
anything so we'll go ahead and get right
anything so we'll go ahead and get right
anything so we'll go ahead and get right
into the logic again referring back to
into the logic again referring back to
into the logic again referring back to
the n data type up here you see M
the n data type up here you see M
the n data type up here you see M
storage we have to go
storage we have to go
storage we have to go
instance do
instance do
instance do
set and then we're going to actually
set and then we're going to actually
set and then we're going to actually
if you see set we're going to say set
if you see set we're going to say set
if you see set we're going to say set
and title and then we're going to bring
and title and then we're going to bring
and title and then we're going to bring
the argument from the title or bring
the argument from the title or bring
the argument from the title or bring
in the argument title in from the the
in the argument title in from the the
in the argument title in from the the
functions here or the the argument
functions here or the the argument
functions here or the the argument
here so let's go ahead and compile this
here so let's go ahead and compile this
here so let's go ahead and compile this
let's see if this
let's see if this
let's see if this
works again you see and storage we're
works again you see and storage we're
works again you see and storage we're
taking in the we're taking in the or
taking in the we're taking in the or
taking in the we're taking in the or
we're accessing the smart contract
we're accessing the smart contract
we're accessing the smart contract
storage here we have instance which
storage here we have instance which
storage here we have instance which
is a certain type of data type for
is a certain type of data type for
is a certain type of data type for
Soroban smart contracts of which there
Soroban smart contracts of which there
Soroban smart contracts of which there
are three temporary persistent and
are three temporary persistent and
are three temporary persistent and
instance and then you see the set method
instance and then you see the set method
instance and then you see the set method
here where we're actually setting a
here where we're actually setting a
here where we're actually setting a
value to the title to the title key
value to the title to the title key
value to the title to the title key
and then the value will be title but it
and then the value will be title but it
and then the value will be title but it
looks like we have some errors here
looks like we have some errors here
looks like we have some errors here
unused variable signature length unused
unused variable signature length unused
unused variable signature length unused
variable signature little literal cannot
variable signature little literal cannot
variable signature little literal cannot
find type title in this scope okay
find type title in this scope okay
find type title in this scope okay
public function string title and
public function string title and
public function string title and
storage okay we got
storage okay we got
storage okay we got
some we got some issues here so let's
some we got some issues here so let's
some we got some issues here so let's
see what we got
H so this looks like it was compiled
H so this looks like it was compiled
function set
function set
function set
title all right I'm just going to go
title all right I'm just going to go
title all right I'm just going to go
ahead and do a quick sanity check I do
ahead and do a quick sanity check I do
ahead and do a quick sanity check I do
have the correct function on the side
have the correct function on the side
have the correct function on the side
here I'm also wondering
here I'm also wondering
here I'm also wondering
if this
if this
if this
is going to work
all right let's go ahead and see what
all right let's go ahead and see what
the issue was in the
the issue was in the
the issue was in the
last set title and
title okay not sure what the issue was
title okay not sure what the issue was
here but let's go ahead and let's see if
here but let's go ahead and let's see if
here but let's go ahead and let's see if
we can actually debug it side by side
we can actually debug it side by side
we can actually debug it side by side
let's go ahead and find the
let's go ahead and find the
let's go ahead and find the
difference see this see if this compiles
difference see this see if this compiles
difference see this see if this compiles
it probably won't
it probably won't
it probably won't

okay well I'm not sure what the issue
okay well I'm not sure what the issue
was here but long story short here is
was here but long story short here is
was here but long story short here is
the correct function as you can see we
the correct function as you can see we
the correct function as you can see we
see Pub function set title we're
see Pub function set title we're
see Pub function set title we're
taking in two arguments one is the data
taking in two arguments one is the data
taking in two arguments one is the data
type n the next is the data type
type n the next is the data type
type n the next is the data type
string for our title
string for our title
string for our title
we're accessing the smart contract
we're accessing the smart contract
we're accessing the smart contract
storage Again by typing m. storage.
storage Again by typing m. storage.
storage Again by typing m. storage.
instance again there are three types of
instance again there are three types of
instance again there are three types of
storage in sorb on Smart contracts and
storage in sorb on Smart contracts and
storage in sorb on Smart contracts and
they each kind of serve a purpose when
they each kind of serve a purpose when
they each kind of serve a purpose when
it comes to how long you want your
it comes to how long you want your
it comes to how long you want your
data to live by default again
data to live by default again
data to live by default again
temporary instance and persistence for
temporary instance and persistence for
temporary instance and persistence for
this use case we're just going to use
this use case we're just going to use
this use case we're just going to use
instance we have the set method here
instance we have the set method here
instance we have the set method here
where we are setting a value to the key
where we are setting a value to the key
where we are setting a value to the key
title and the value will be the title
title and the value will be the title
title and the value will be the title
argument that we're passing in so let's
argument that we're passing in so let's
argument that we're passing in so let's
go ahead and set a title we'll say
go ahead and set a title we'll say
go ahead and set a title we'll say
soron
soron
soron
rocks cool it looks like our function
rocks cool it looks like our function
rocks cool it looks like our function
call went through and we didn't get
call went through and we didn't get
call went through and we didn't get
any return data however to access
any return data however to access
any return data however to access
this or to access the data that we just
this or to access the data that we just
this or to access the data that we just
set to the contract storage we need to
set to the contract storage we need to
set to the contract storage we need to
create a getter function so to do this
create a getter function so to do this
create a getter function so to do this
we actually just have to follow the same
we actually just have to follow the same
we actually just have to follow the same
structure here Pub function we have to
structure here Pub function we have to
structure here Pub function we have to
say get title we're only passing in one
say get title we're only passing in one
say get title we're only passing in one
argument that is of type in and if we
argument that is of type in and if we
argument that is of type in and if we
want to return a
want to return a
want to return a
string so for this we're going to go end
string so for this we're going to go end
string so for this we're going to go end
storage end storage
storage end storage
storage end storage
instance and we're going to say get and
instance and we're going to say get and
instance and we're going to say get and
we're going to say and
we're going to say and
we're going to say and
title title and we are going to say do
title title and we are going to say do
title title and we are going to say do
unwrap
string
string
from
from
from
string and we're going to pass in the n
string and we're going to pass in the n
string and we're going to pass in the n
and we're going to say
and we're going to say
and we're going to say
default
default
default
default
message all right so default message
message all right so default message
here so what is this doing let's see if
here so what is this doing let's see if
here so what is this doing let's see if
this compiles first
this compiles first
this compiles first
don't want to hit a block okay instance
don't want to hit a block okay instance
don't want to hit a block okay instance
instant so it looks like we got a typo
here all right so what are we doing in
here all right so what are we doing in
this function you see Pub function get
this function you see Pub function get
this function you see Pub function get
title so we have one argument that we're
title so we have one argument that we're
title so we have one argument that we're
returning or one argument that we're
returning or one argument that we're
returning or one argument that we're
taking in that's of N and then we're
taking in that's of N and then we're
taking in that's of N and then we're
returning the data type
returning the data type
returning the data type
string so here you see n. storage again
string so here you see n. storage again
string so here you see n. storage again
this is how we access the contract
this is how we access the contract
this is how we access the contract
storage you see instance which is the
storage you see instance which is the
storage you see instance which is the
storage type doget which is the metal
storage type doget which is the metal
storage type doget which is the metal
the method to retrieve data and you see
the method to retrieve data and you see
the method to retrieve data and you see
the key title so retrieving the value
the key title so retrieving the value
the key title so retrieving the value
that lives at the key title and to
that lives at the key title and to
that lives at the key title and to
access this value see. unwrap and now
access this value see. unwrap and now
access this value see. unwrap and now
usually this would be fine right but
usually this would be fine right but
usually this would be fine right but
if no value lives at that key then you
if no value lives at that key then you
if no value lives at that key then you
need to have some error you need to
need to have some error you need to
need to have some error you need to
have some like error handling right so
have some like error handling right so
have some like error handling right so
if there is no value that lives at
if there is no value that lives at
if there is no value that lives at
this key we're just going to return a
this key we're just going to return a
this key we're just going to return a
default message in the form of this
default message in the form of this
default message in the form of this
string that we defined so let's go ahead
string that we defined so let's go ahead
string that we defined so let's go ahead
and get the title all right so this is a
and get the title all right so this is a
and get the title all right so this is a
new deployment inside of a contained
new deployment inside of a contained
new deployment inside of a contained
web browser inside contained web app so
web browser inside contained web app so
web browser inside contained web app so
technically I have not set any data to
technically I have not set any data to
technically I have not set any data to
this this new deployment after creating
this this new deployment after creating
this this new deployment after creating
this function so I click get title the
this function so I click get title the
this function so I click get title the
default message will be returned right
default message will be returned right
default message will be returned right
so get title default message I'll go
so get title default message I'll go
so get title default message I'll go
ahead and set a new title we'll say
ahead and set a new title we'll say
ahead and set a new title we'll say
Stellar
Stellar
Stellar
rules all right so we set a new title
rules all right so we set a new title
rules all right so we set a new title
instead of Soroban rules we'll say
instead of Soroban rules we'll say
instead of Soroban rules we'll say
Stellar rules we go ahead and get that
Stellar rules we go ahead and get that
Stellar rules we go ahead and get that
all right cool so now you see that we
all right cool so now you see that we
all right cool so now you see that we
are able to set some data with the set
title right and then we can get the data
title right and then we can get the data
by retrieving it using the get title
by retrieving it using the get title
by retrieving it using the get title
method now once again this was okashi
method now once again this was okashi
method now once again this was okashi
which is an online ID for sorond
which is an online ID for sorond
which is an online ID for sorond
smart contracts now what I'd like to do
smart contracts now what I'd like to do
smart contracts now what I'd like to do
is actually U the kind of tutorial over
is actually U the kind of tutorial over
is actually U the kind of tutorial over
to the CLI part of things and we'll
to the CLI part of things and we'll
to the CLI part of things and we'll
actually start coding and deploying
actually start coding and deploying
actually start coding and deploying
on testnet which you can actually do on
on testnet which you can actually do on
on testnet which you can actually do on
okashi as well but I do want to get
okashi as well but I do want to get
okashi as well but I do want to get
you guys familiar with the tools that
you guys familiar with the tools that
you guys familiar with the tools that
the SDF offers mainly because when it
the SDF offers mainly because when it
the SDF offers mainly because when it
comes to the Stellar CLI this will be
comes to the Stellar CLI this will be
comes to the Stellar CLI this will be
one of your best friends when or one
one of your best friends when or one
one of your best friends when or one
of your best friends along your Stellar
of your best friends along your Stellar
of your best friends along your Stellar
smart contract development Journeys so
smart contract development Journeys so
smart contract development Journeys so
let's go ahead and switch the windows
let's go ahead and switch the windows
let's go ahead and switch the windows
here all right close this out for
here all right close this out for
here all right close this out for
now all right so getting started with
now all right so getting started with
now all right so getting started with
the Stellar CLI and rust on your
the Stellar CLI and rust on your
the Stellar CLI and rust on your
local machine takes three easy steps
local machine takes three easy steps
local machine takes three easy steps
right so what you're going to want to do
right so what you're going to want to do
right so what you're going to want to do
to make this easier for yourself is to
to make this easier for yourself is to
to make this easier for yourself is to
actually scan this QR code here at the
actually scan this QR code here at the
actually scan this QR code here at the
bottom left this will take you right
bottom left this will take you right
bottom left this will take you right
to the getting started section of the
to the getting started section of the
to the getting started section of the
docs where you'll be able to find these
docs where you'll be able to find these
docs where you'll be able to find these
exact commands you'll them right into
exact commands you'll them right into
exact commands you'll them right into
your CLI but for the sake of the
your CLI but for the sake of the
your CLI but for the sake of the
tutorial I might as well kind of go
tutorial I might as well kind of go
tutorial I might as well kind of go
through the steps with you guys so we
through the steps with you guys so we
through the steps with you guys so we
see curl Proto
see curl Proto
see curl Proto
https tslb
https tslb
https tslb
1.2 s
1.2 s
1.2 s
F
https and we're going to say rust
https and we're going to say rust
up ROP
up ROP
up ROP
sh.
sh.
sh.
sh so what this is going to do
sh so what this is going to do
sh so what this is going to do
tlv T
lsv
lsv
https RS okay so what this is going to
https RS okay so what this is going to
https RS okay so what this is going to
do is install the rust tool chain on
do is install the rust tool chain on
do is install the rust tool chain on
your computer I've actually done this
your computer I've actually done this
your computer I've actually done this
already so you can see I have rust
already so you can see I have rust
already so you can see I have rust
version 1.79 it takes a little while
version 1.79 it takes a little while
version 1.79 it takes a little while
so I will kind of spare you guys on
so I will kind of spare you guys on
so I will kind of spare you guys on
moving forward so fast because I know it
moving forward so fast because I know it
moving forward so fast because I know it
takes about two and a half minutes so in
takes about two and a half minutes so in
takes about two and a half minutes so in
the mean time I can kind of go through
the mean time I can kind of go through
the mean time I can kind of go through
the installment process for the rest of
the installment process for the rest of
the installment process for the rest of
the tools we say rust up and
Target add wasum oh my gosh
Target add wasum oh my gosh
32
32
32
unknown
unnown the demo effect unknown
unnown the demo effect unknown
unknown all right so what this is going
unknown all right so what this is going
unknown all right so what this is going
to do is tell the Russ compiler to
to do is tell the Russ compiler to
to do is tell the Russ compiler to
compile Russ smart contracts into wasum
compile Russ smart contracts into wasum
compile Russ smart contracts into wasum
and it's going to Output those files
and it's going to Output those files
and it's going to Output those files
into a Target directory we'll see
into a Target directory we'll see
into a Target directory we'll see
this process a little bit later but
this process a little bit later but
this process a little bit later but
yeah so that's what what the second
yeah so that's what what the second
yeah so that's what what the second
command does is tells the Russ compiler
command does is tells the Russ compiler
command does is tells the Russ compiler
to compile Russ files into WM and the
to compile Russ files into WM and the
to compile Russ files into WM and the
last command we have cargo
last command we have cargo
last command we have cargo
install and we have locked Stellar
install and we have locked Stellar
install and we have locked Stellar
CLI so this is going to install Stellar
CLI so this is going to install Stellar
CLI so this is going to install Stellar
CLI the latest version so we're on
CLI the latest version so we're on
CLI the latest version so we're on
version
2.2.0 and I know again this would
2.2.0 and I know again this would
probably take around 2 and a half
probably take around 2 and a half
probably take around 2 and a half
minutes so if you're following along
minutes so if you're following along
minutes so if you're following along
and and it takes a little while not to
and and it takes a little while not to
and and it takes a little while not to
worry I'll I'll move slow throughout
worry I'll I'll move slow throughout
worry I'll I'll move slow throughout
the rest of the tutorial so just to kind
the rest of the tutorial so just to kind
the rest of the tutorial so just to kind
of like make sure we have the correct
of like make sure we have the correct
of like make sure we have the correct
version of Stellar installed we'll say
version of Stellar installed we'll say
version of Stellar installed we'll say
Stellar DV again you see Stellar
2.2.0 cool so what we'll do next is
2.2.0 cool so what we'll do next is
we'll actually actually go here and
we'll actually actually go here and
we'll actually actually go here and
we're going to say
we're going to say
we're going to say
Stellar contract actually we'll say
Stellar contract actually we'll say
Stellar contract actually we'll say
Stellar and then we'll take a look at
Stellar and then we'll take a look at
Stellar and then we'll take a look at
all the methods that you see you see the
all the methods that you see you see the
all the methods that you see you see the
commands here completion contract events
commands here completion contract events
commands here completion contract events
Keys
Keys
Keys
xdr Network Etc so let's go ahead and
xdr Network Etc so let's go ahead and
xdr Network Etc so let's go ahead and
dive into contract we'll go ahead and
dive into contract we'll go ahead and
dive into contract we'll go ahead and
clear this
clear this
clear this
out we'll say Stellar contract and then
out we'll say Stellar contract and then
out we'll say Stellar contract and then
we'll say init and we want we want
we'll say init and we want we want
we'll say init and we want we want
Hello World so hello and world all right
Hello World so hello and world all right
Hello World so hello and world all right
so you see the messages here writing
so you see the messages here writing
so you see the messages here writing
hello world Etc ET all these good all
hello world Etc ET all these good all
hello world Etc ET all these good all
these files being written and you see
these files being written and you see
these files being written and you see
it has injected a cargo or a rust
it has injected a cargo or a rust
it has injected a cargo or a rust
project right into the directory that we
project right into the directory that we
project right into the directory that we
were working for or working from and
were working for or working from and
were working for or working from and
let's go ahead and click into our cargo
let's go ahead and click into our cargo
let's go ahead and click into our cargo
Tomo file you see a backwards compatible
Tomo file you see a backwards compatible
Tomo file you see a backwards compatible
SDK s Soroban SDK 20.3 point2 this
SDK s Soroban SDK 20.3 point2 this
SDK s Soroban SDK 20.3 point2 this
is a local issue so I'm just going to go
is a local issue so I'm just going to go
is a local issue so I'm just going to go
ahead and restart my rust analyzer see
ahead and restart my rust analyzer see
ahead and restart my rust analyzer see
if that fixes this little error
if that fixes this little error
if that fixes this little error
but we're going to go ahead and dive
but we're going to go ahead and dive
but we're going to go ahead and dive
right into the hello world directory
right into the hello world directory
right into the hello world directory
so we'll CD hello world cool and let's
so we'll CD hello world cool and let's
so we'll CD hello world cool and let's
take a look at the contract here and you
take a look at the contract here and you
take a look at the contract here and you
see an older contract that we were
see an older contract that we were
see an older contract that we were
not using or not an older contract but
not using or not an older contract but
not using or not an older contract but
you see a boilerplate contract that is
you see a boilerplate contract that is
you see a boilerplate contract that is
different from the one that we're using
different from the one that we're using
different from the one that we're using
however I'm just going to go ahead and
however I'm just going to go ahead and
however I'm just going to go ahead and
bring the contract that we're using
bring the contract that we're using
bring the contract that we're using
right into
right into
right into
here and we're actually going to work
here and we're actually going to work
here and we're actually going to work
right from
right from
right from
this
this
this
so you see this here where we have
so you see this here where we have
so you see this here where we have
the Hello World project that we're in
the Hello World project that we're in
the Hello World project that we're in
and one cool thing about the Stellar CLI
and one cool thing about the Stellar CLI
and one cool thing about the Stellar CLI
is that you can actually generate key
is that you can actually generate key
is that you can actually generate key
pairs right from the clii itself so
pairs right from the clii itself so
pairs right from the clii itself so
what we're going to do is exactly that
what we're going to do is exactly that
what we're going to do is exactly that
I'll go ahead and go to Stellar Ci or
I'll go ahead and go to Stellar Ci or
I'll go ahead and go to Stellar Ci or
stellers
stellers
stellers
keys and we'll go ahead and list the
keys and we'll go ahead and list the
keys and we'll go ahead and list the
keys we have already so Stellar Keys LS
keys we have already so Stellar Keys LS
keys we have already so Stellar Keys LS
will list the different key pairs that
will list the different key pairs that
will list the different key pairs that
you have available to actually sign
you have available to actually sign
you have available to actually sign
transactions and what that means is
transactions and what that means is
transactions and what that means is
every time you deploy a contract or
every time you deploy a contract or
every time you deploy a contract or
invoke a function Etc that takes fees
invoke a function Etc that takes fees
invoke a function Etc that takes fees
right so there has to be a source
right so there has to be a source
right so there has to be a source
account assigned to that transaction
account assigned to that transaction
account assigned to that transaction
to pay that
to pay that
to pay that
fee now we have two that exist already
fee now we have two that exist already
fee now we have two that exist already
but let's go ahead and demonstrate how
but let's go ahead and demonstrate how
but let's go ahead and demonstrate how
to create a new one and we'll say
to create a new one and we'll say
to create a new one and we'll say
Stellar generate we'll say Stell Keys
Stellar generate we'll say Stell Keys
Stellar generate we'll say Stell Keys
generate and we'll Define the network
generate and we'll Define the network
generate and we'll Define the network
network testet and we'll give this a
network testet and we'll give this a
network testet and we'll give this a
name so for this name we want it to be
name so for this name we want it to be
name so for this name we want it to be



shy so let's go ahead and generate a new
shy so let's go ahead and generate a new
shy so let's go ahead and generate a new
key pair called sty for the testet
network cool you see that the
network cool you see that the
function has went through or the method
function has went through or the method
function has went through or the method
has been executed Ed let's see
has been executed Ed let's see
has been executed Ed let's see
LS right so you see stroy Alice and Joe
LS right so you see stroy Alice and Joe
LS right so you see stroy Alice and Joe
and we'll see address
and we'll see address
and we'll see address
shy and N
shy and N
shy and N
Stellar Keys show
Stellar Keys show
Stellar Keys show
Shy all right you see the two key or you
Shy all right you see the two key or you
Shy all right you see the two key or you
see the key pair here this is the public
see the key pair here this is the public
see the key pair here this is the public
key and private Key by the way I'm just
key and private Key by the way I'm just
key and private Key by the way I'm just
doing this for demonstration purposes
doing this for demonstration purposes
doing this for demonstration purposes
only please never share your private key
only please never share your private key
only please never share your private key
with anybody but here is is what
with anybody but here is is what
with anybody but here is is what
happens when you generate a new key pair
happens when you generate a new key pair
happens when you generate a new key pair
using the Stellar Keys generate method
using the Stellar Keys generate method
using the Stellar Keys generate method
as you can see you can see the address
as you can see you can see the address
as you can see you can see the address
it begins with G and the source account
it begins with G and the source account
it begins with G and the source account
or the source key that begins with s so
or the source key that begins with s so
or the source key that begins with s so
moving forward let's go ahead and deploy
moving forward let's go ahead and deploy
moving forward let's go ahead and deploy
this smart contract to the
this smart contract to the
this smart contract to the
network and we're going to go ahead and
network and we're going to go ahead and
network and we're going to go ahead and
say
say
say
Stellar contract
Stellar contract
Stellar contract
deploy and we'll say actually we have to
deploy and we'll say actually we have to
deploy and we'll say actually we have to
start with Stellar contract build
start with Stellar contract build
start with Stellar contract build
Stellar contract
buildt and again what this is going to
buildt and again what this is going to
do is actually compile the rust smart
do is actually compile the rust smart
do is actually compile the rust smart
contract into its wasm format here and
contract into its wasm format here and
contract into its wasm format here and
it'll be in the directory wasum Dash or
it'll be in the directory wasum Dash or
it'll be in the directory wasum Dash or
wasm thir 2- unknown D
wasm thir 2- unknown D
wasm thir 2- unknown D
unknown it'll take a little bit maybe
unknown it'll take a little bit maybe
unknown it'll take a little bit maybe
around 1 to two
around 1 to two
around 1 to two
minutes maybe
minutes maybe
minutes maybe
less all right so about 1 minute we'll
less all right so about 1 minute we'll
less all right so about 1 minute we'll
go ahead go ahead and look at the
go ahead go ahead and look at the
go ahead go ahead and look at the
release directory you see here WM 32-
release directory you see here WM 32-
release directory you see here WM 32-
unnown D unknown in the release
unnown D unknown in the release
unnown D unknown in the release
directory you have the hello world wasm
directory you have the hello world wasm
directory you have the hello world wasm
file that's because we're actually
file that's because we're actually
file that's because we're actually
still defining this project as Hello
still defining this project as Hello
still defining this project as Hello
World so when it gets compiled you'll
World so when it gets compiled you'll
World so when it gets compiled you'll
see that it it gets compiled into the
see that it it gets compiled into the
see that it it gets compiled into the
name of the project itself so to
name of the project itself so to
name of the project itself so to
resolve that we would actually have to
resolve that we would actually have to
resolve that we would actually have to
go and change the name of this project
go and change the name of this project
go and change the name of this project
as as a whole but we won't we won't
as as a whole but we won't we won't
as as a whole but we won't we won't
do all that for the sake of this for
do all that for the sake of this for
do all that for the sake of this for
the sake of this demo so we're still
the sake of this demo so we're still
the sake of this demo so we're still
working from the hell World directory
working from the hell World directory
working from the hell World directory
and we are going to deploy the Stellar
and we are going to deploy the Stellar
and we are going to deploy the Stellar
smart contract onto testnet so we'll
smart contract onto testnet so we'll
smart contract onto testnet so we'll
say contract
say contract
say contract
deploy right and we have to define the
deploy right and we have to define the
deploy right and we have to define the
wasum wasum is going to be
wasum wasum is going to be
wasum wasum is going to be
Target
Target
Target
wasm release and we'll say hello world
wasm release and we'll say hello world
wasm release and we'll say hello world
and was
and was
and was
and we'll say the network it's going to
and we'll say the network it's going to
and we'll say the network it's going to
be testet and we're going to say source
be testet and we're going to say source
be testet and we're going to say source
is going to be
is going to be
is going to be
shy all right so this is the command to
shy all right so this is the command to
shy all right so this is the command to
deploy contracts onto the network you
deploy contracts onto the network you
deploy contracts onto the network you
see Stellar contract deploy you're
see Stellar contract deploy you're
see Stellar contract deploy you're
defining the wasum location right where
defining the wasum location right where
defining the wasum location right where
the the location of the wasum file so
the the location of the wasum file so
the the location of the wasum file so
the compiled file of the smart
the compiled file of the smart
the compiled file of the smart
contract you see network is test net and
contract you see network is test net and
contract you see network is test net and
then the source is troopy so let's go
then the source is troopy so let's go
then the source is troopy so let's go
ahead and send this transaction fingers
ahead and send this transaction fingers
ahead and send this transaction fingers
crossed we get a contract ID back all
crossed we get a contract ID back all
crossed we get a contract ID back all
right that was very fast and you see
right that was very fast and you see
right that was very fast and you see
that this begins with the letter c so
that this begins with the letter c so
that this begins with the letter c so
let's go ahead and go back to our key
let's go ahead and go back to our key
let's go ahead and go back to our key
pair just a quick lesson on how
pair just a quick lesson on how
pair just a quick lesson on how
addresses are defined on Stellar you see
addresses are defined on Stellar you see
addresses are defined on Stellar you see
G is for the public address C is for
G is for the public address C is for
G is for the public address C is for
contract addresses s is for Source
contract addresses s is for Source
contract addresses s is for Source
account or Source Source keys or
account or Source Source keys or
account or Source Source keys or
private Keys rather all right so we've
private Keys rather all right so we've
private Keys rather all right so we've
deployed deployed the contract and here
deployed deployed the contract and here
deployed deployed the contract and here
is our
is our
is our
ID let's go ahead and call some
ID let's go ahead and call some
ID let's go ahead and call some
functions on that contract so let's go
functions on that contract so let's go
functions on that contract so let's go
ahead and do Stellar we got to do
ahead and do Stellar we got to do
ahead and do Stellar we got to do
contract and for this we're going to do
contract and for this we're going to do
contract and for this we're going to do
invoke and we're going to define the ID
invoke and we're going to define the ID
invoke and we're going to define the ID
here and we're going to say
here and we're going to say
here and we're going to say
network and we're going to say
network and we're going to say
network and we're going to say
testet source is going to be stroy and
testet source is going to be stroy and
testet source is going to be stroy and
then we are going to find our function
then we are going to find our function
then we are going to find our function
by doing the following say dash dash
by doing the following say dash dash
by doing the following say dash dash
we're going to call the function or
we're going to call the function or
we're going to call the function or
Define the
Define the
Define the
function and then we're going
function and then we're going
function and then we're going
to Define the argument here so set
to Define the argument here so set
to Define the argument here so set
title takes in one argument for title
title takes in one argument for title
title takes in one argument for title
and we're going to use quotes and we're
and we're going to use quotes and we're
and we're going to use quotes and we're
going to say
going to say
going to say
Stellar smart contracts Ah that's too
Stellar smart contracts Ah that's too
Stellar smart contracts Ah that's too
long we'll just say Stellar drop
long we'll just say Stellar drop
long we'll just say Stellar drop
cool all right you can see here that
cool all right you can see here that
cool all right you can see here that
there is an unrecognized sub command so
there is an unrecognized sub command so
there is an unrecognized sub command so
what does that mean basically means that
what does that mean basically means that
what does that mean basically means that
I spelled a command wrong right so
I spelled a command wrong right so
I spelled a command wrong right so
one cool thing about the error messaging
one cool thing about the error messaging
one cool thing about the error messaging
with the CLI is that it'll actually kick
with the CLI is that it'll actually kick
with the CLI is that it'll actually kick
back some functions that it thought that
back some functions that it thought that
back some functions that it thought that
you meant so we see here set title
you meant so we see here set title
you meant so we see here set title
you can use an underscore or a dash or a
you can use an underscore or a dash or a
you can use an underscore or a dash or a
hyphen I'm going to go with the
hyphen I'm going to go with the
hyphen I'm going to go with the
underscore here and we're going to go
underscore here and we're going to go
underscore here and we're going to go
ahead and we're we're going to
ahead and we're we're going to
ahead and we're we're going to
demonstrate calling that function so
demonstrate calling that function so
demonstrate calling that function so
we'll say set
we'll say set
we'll say set
title and we have the correct
title and we have the correct
title and we have the correct
function name so it should work it looks
function name so it should work it looks
function name so it should work it looks
like it did and let's go ahead and get
title all right so just like that
title all right so just like that
we've used the Stellar CLI to create a
we've used the Stellar CLI to create a
we've used the Stellar CLI to create a
new keyp pair deploy a smart contract to
new keyp pair deploy a smart contract to
new keyp pair deploy a smart contract to
the test Network and invoke the
the test Network and invoke the
the test Network and invoke the
functions for that smart contract and
functions for that smart contract and
functions for that smart contract and
just to do a quick recap some some of
just to do a quick recap some some of
just to do a quick recap some some of
the smart contract Basics that we
the smart contract Basics that we
the smart contract Basics that we
learned today were data types as
learned today were data types as
learned today were data types as
well as a little bit of the ins and outs
well as a little bit of the ins and outs
well as a little bit of the ins and outs
of contract storage so really quickly I
of contract storage so really quickly I
of contract storage so really quickly I
kind of want to recap those again we
kind of want to recap those again we
kind of want to recap those again we
have contract comp cont contract
have contract comp cont contract
have contract comp cont contract
implementation which are both attributes
implementation which are both attributes
implementation which are both attributes
specific to soron and which is
specific to soron and which is
specific to soron and which is
responsible for getting data for the
responsible for getting data for the
responsible for getting data for the
smart from the smart contract as well as
smart from the smart contract as well as
smart from the smart contract as well as
a blockchain on Stellar we call it the
a blockchain on Stellar we call it the
a blockchain on Stellar we call it the
Ledger you have symbol which is
Ledger you have symbol which is
Ledger you have symbol which is
either a string of up to nine characters
either a string of up to nine characters
either a string of up to nine characters
or 32 characters string which is the
or 32 characters string which is the
or 32 characters string which is the
string that you're familiar with
string that you're familiar with
string that you're familiar with
symbol short which is a function that
symbol short which is a function that
symbol short which is a function that
helps you create short symbols so
helps you create short symbols so
helps you create short symbols so
that's a little bit about the data types
that's a little bit about the data types
that's a little bit about the data types
and now when it comes to contracts
and now when it comes to contracts
and now when it comes to contracts
storage we kind of went into some 101
storage we kind of went into some 101
storage we kind of went into some 101
for key values I guess structure on
for key values I guess structure on
for key values I guess structure on
Stellar smart contracts here you see on
Stellar smart contracts here you see on
Stellar smart contracts here you see on
line five cons title symbol equals
line five cons title symbol equals
line five cons title symbol equals
symbol short again we're just using this
symbol short again we're just using this
symbol short again we're just using this
line as a placeholder to kind of have an
line as a placeholder to kind of have an
line as a placeholder to kind of have an
easy reference for a key that we that
easy reference for a key that we that
easy reference for a key that we that
we're naming throughout the smart
we're naming throughout the smart
we're naming throughout the smart
contract contract
contract contract
contract contract
attribute with the blank struct with
attribute with the blank struct with
attribute with the blank struct with
the title here and this is basically how
the title here and this is basically how
the title here and this is basically how
all sore Bond smart contracts look
all sore Bond smart contracts look
all sore Bond smart contracts look
the contract implementation attribute
the contract implementation attribute
the contract implementation attribute
followed by the implementation of the
followed by the implementation of the
followed by the implementation of the
struct or the contract itself and the
struct or the contract itself and the
struct or the contract itself and the
functions here you see Pub FN set title
functions here you see Pub FN set title
functions here you see Pub FN set title
again we're taking in two two
again we're taking in two two
again we're taking in two two
arguments the first one you will always
arguments the first one you will always
arguments the first one you will always
see n as an argument within each
see n as an argument within each
see n as an argument within each
function for soron smart contracts
function for soron smart contracts
function for soron smart contracts
and this will kind of be like the
and this will kind of be like the
and this will kind of be like the
pattern that you'll see throughout your
pattern that you'll see throughout your
pattern that you'll see throughout your
development Journey with Stellar so
development Journey with Stellar so
development Journey with Stellar so
just get familiar with this structure Al
just get familiar with this structure Al
just get familiar with this structure Al
together so we have en as the first
together so we have en as the first
together so we have en as the first
argument and then title as the next
argument and then title as the next
argument and then title as the next
argument taking in a string value again
argument taking in a string value again
argument taking in a string value again
to access storage within a smart
to access storage within a smart
to access storage within a smart
contract you have to write the syntax
contract you have to write the syntax
contract you have to write the syntax
end. storage Dot and then the type of
end. storage Dot and then the type of
end. storage Dot and then the type of
storage so in this case instance but
storage so in this case instance but
storage so in this case instance but
again three types temporary instance and
again three types temporary instance and
again three types temporary instance and
persistent to set of value to a key you
persistent to set of value to a key you
persistent to set of value to a key you
call the set method right and then
call the set method right and then
call the set method right and then
you're defining the key so in this case
you're defining the key so in this case
you're defining the key so in this case
title which is a placeholder or the the
title which is a placeholder or the the
title which is a placeholder or the the
title or the name of the key and then
title or the name of the key and then
title or the name of the key and then
the value that we're setting is the
the value that we're setting is the
the value that we're setting is the
argument that we're passing in for the
argument that we're passing in for the
argument that we're passing in for the
function also called title all right and
function also called title all right and
function also called title all right and
then to retrieve that data you have to
then to retrieve that data you have to
then to retrieve that data you have to
go and through a similar process but
go and through a similar process but
go and through a similar process but
reverse so again accessing the smart
reverse so again accessing the smart
reverse so again accessing the smart
contract Storage and. storage instance
contract Storage and. storage instance
contract Storage and. storage instance
right. getet is the method that you'll
right. getet is the method that you'll
right. getet is the method that you'll
be using you're referencing a key for
be using you're referencing a key for
be using you're referencing a key for
the key in the smart contract storage so
the key in the smart contract storage so
the key in the smart contract storage so
the key here title and to get the value
the key here title and to get the value
the key here title and to get the value
of the key you have to use the unwrap
of the key you have to use the unwrap
of the key you have to use the unwrap
method in this case we're planning for
method in this case we're planning for
method in this case we're planning for
errors so we're saying unwrap and if no
errors so we're saying unwrap and if no
errors so we're saying unwrap and if no
value lives at that key then return this
value lives at that key then return this
value lives at that key then return this
default message all right so that's a
default message all right so that's a
default message all right so that's a
quick recap about on on some basic SM
quick recap about on on some basic SM
quick recap about on on some basic SM
contracts but we do have quite a bit
contracts but we do have quite a bit
contracts but we do have quite a bit
of time left so I'm going to go ahead
of time left so I'm going to go ahead
of time left so I'm going to go ahead
and kind of just like dive into some
and kind of just like dive into some
and kind of just like dive into some
more Advanced smart contract methods
more Advanced smart contract methods
more Advanced smart contract methods
or not methods a little bit more
or not methods a little bit more
or not methods a little bit more
smart contract a little bit more
smart contract a little bit more
smart contract a little bit more
advanced smart contract
advanced smart contract
advanced smart contract
logic and I'm going to go ahead and just
logic and I'm going to go ahead and just
logic and I'm going to go ahead and just
kind of freestyle this but I do have a
kind of freestyle this but I do have a
kind of freestyle this but I do have a
staking repo that you guys can
staking repo that you guys can
staking repo that you guys can
reference for your own kind of like
reference for your own kind of like
reference for your own kind of like
studies if if you want to and you
studies if if you want to and you
studies if if you want to and you
could find it here in this QR code so
could find it here in this QR code so
could find it here in this QR code so
this will take you to a hackathon repo
this will take you to a hackathon repo
this will take you to a hackathon repo
that I set up that has a couple
that I set up that has a couple
that I set up that has a couple
directories in it you'll find a
directories in it you'll find a
directories in it you'll find a
workshop directory and I think you'll
workshop directory and I think you'll
workshop directory and I think you'll
also find a slides directory but we'll
also find a slides directory but we'll
also find a slides directory but we'll
be working from the workshop directory
be working from the workshop directory
be working from the workshop directory
here you should see staking and data
here you should see staking and data
here you should see staking and data
types so I'll go ahead and give you a
types so I'll go ahead and give you a
types so I'll go ahead and give you a
quick overview on how data types kind
quick overview on how data types kind
quick overview on how data types kind
of look and I guess how they're
of look and I guess how they're
of look and I guess how they're
implemented here
implemented here
implemented here
so some of the main things that you're
so some of the main things that you're
so some of the main things that you're
going to want to know is like
going to want to know is like
going to want to know is like
enumeration right one thing that we
enumeration right one thing that we
enumeration right one thing that we
use here kind of at when it comes to
use here kind of at when it comes to
use here kind of at when it comes to
Stellar smart contract development we
Stellar smart contract development we
Stellar smart contract development we
often use enumerations as Maps so when
often use enumerations as Maps so when
often use enumerations as Maps so when
what does that mean right when you look
what does that mean right when you look
what does that mean right when you look
at a data key of a smart contract when
at a data key of a smart contract when
at a data key of a smart contract when
you look at a data key of a smart
you look at a data key of a smart
you look at a data key of a smart
contract you're basically setting a
contract you're basically setting a
contract you're basically setting a
key value system similar to the key
key value system similar to the key
key value system similar to the key
value system that we defined earlier
value system that we defined earlier
value system that we defined earlier
when we go back to I guess we can go
when we go back to I guess we can go
when we go back to I guess we can go
back to this basic smart contract here
back to this basic smart contract here
back to this basic smart contract here
hello world all right so you see con
hello world all right so you see con
hello world all right so you see con
title right this is the key and then
title right this is the key and then
title right this is the key and then
again we're setting the value later with
again we're setting the value later with
again we're setting the value later with
the title right so key is title and then
the title right so key is title and then
the title right so key is title and then
the value is also named title so if we
the value is also named title so if we
the value is also named title so if we
go back to the staking smart contract
go back to the staking smart contract
go back to the staking smart contract
right go ahead and dive into it you see
right go ahead and dive into it you see
right go ahead and dive into it you see
here the data key we can set we can host
here the data key we can set we can host
here the data key we can set we can host
many keys and throughout the smart
many keys and throughout the smart
many keys and throughout the smart
contract logic we can Define the values
contract logic we can Define the values
contract logic we can Define the values
for these Keys so we'll actually just
for these Keys so we'll actually just
for these Keys so we'll actually just
Dive Right into this smart contract
Dive Right into this smart contract
Dive Right into this smart contract
over the next 30 minutes and then by the
over the next 30 minutes and then by the
over the next 30 minutes and then by the
end of it you should be able to
end of it you should be able to
end of it you should be able to
understand more data types more ins
understand more data types more ins
understand more data types more ins
and outs of smart contract storage and
and outs of smart contract storage and
and outs of smart contract storage and
then we'll kind of like take a look at
then we'll kind of like take a look at
then we'll kind of like take a look at
some more examples of Setters and
some more examples of Setters and
some more examples of Setters and
Getters as well as cross contract
Getters as well as cross contract
Getters as well as cross contract
calls all right so so go ahead and
calls all right so so go ahead and
calls all right so so go ahead and
strap in stick with me thank you so much
strap in stick with me thank you so much
strap in stick with me thank you so much
if you've been with us thus far and I
if you've been with us thus far and I
if you've been with us thus far and I
hope you're learning something yeah
hope you're learning something yeah
hope you're learning something yeah
so let's go ahead and get it kicked off
so let's go ahead and get it kicked off
so let's go ahead and get it kicked off
again at the top you see no STD again
again at the top you see no STD again
again at the top you see no STD again
that's to tell the smart cont or to tell
that's to tell the smart cont or to tell
that's to tell the smart cont or to tell
the compiler not to use Russ standard
the compiler not to use Russ standard
the compiler not to use Russ standard
Library when compiling Russ smart
Library when compiling Russ smart
Library when compiling Russ smart
contracts or when compiling sorb on
contracts or when compiling sorb on
contracts or when compiling sorb on
Smart contracts keeping them optimized
Smart contracts keeping them optimized
Smart contracts keeping them optimized
small so they don't take up so much
small so they don't take up so much
small so they don't take up so much
space on the Ledger again on line three
space on the Ledger again on line three
space on the Ledger again on line three
you see us Soroban SDK some familiar
you see us Soroban SDK some familiar
you see us Soroban SDK some familiar
attributes we saw from the last example
attributes we saw from the last example
attributes we saw from the last example
contract contract implementation now you
contract contract implementation now you
contract contract implementation now you
see contract type this is to this is
see contract type this is to this is
see contract type this is to this is
to derive a certain type of what's it
to derive a certain type of what's it
to derive a certain type of what's it
called certain type of how do I put
called certain type of how do I put
called certain type of how do I put
this object from the sorond SDK and
this object from the sorond SDK and
this object from the sorond SDK and
treat it accordingly so we can dive
treat it accordingly so we can dive
treat it accordingly so we can dive
into the ins and outs after and I'd be
into the ins and outs after and I'd be
into the ins and outs after and I'd be
happy to get you more information on how
happy to get you more information on how
happy to get you more information on how
attributes work after the stream so
attributes work after the stream so
attributes work after the stream so
here you see VC Vector is a an array
here you see VC Vector is a an array
here you see VC Vector is a an array
of conc continuable data so what does
of conc continuable data so what does
of conc continuable data so what does
that really mean it's just an array not
that really mean it's just an array not
that really mean it's just an array not
specific to to types you can have
specific to to types you can have
specific to to types you can have
a vector for integers you can have a
a vector for integers you can have a
a vector for integers you can have a
vector for Strings Vector for symbols
vector for Strings Vector for symbols
vector for Strings Vector for symbols
Etc address is just the way that that
Etc address is just the way that that
Etc address is just the way that that
we or the data type for Soroban smart
we or the data type for Soroban smart
we or the data type for Soroban smart
contract addresses U byes n which is a
contract addresses U byes n which is a
contract addresses U byes n which is a
fixed bytes array or fixed bytes value
fixed bytes array or fixed bytes value
fixed bytes array or fixed bytes value
you have the end data type which is
you have the end data type which is
you have the end data type which is
again used for accessing data on the
again used for accessing data on the
again used for accessing data on the
blockchain and Ledger and then interal
blockchain and Ledger and then interal
blockchain and Ledger and then interal
we're not going to get into this but
we're not going to get into this but
we're not going to get into this but
ve again this is the actual data typee V
ve again this is the actual data typee V
ve again this is the actual data typee V
here in lowercase is the function that
here in lowercase is the function that
here in lowercase is the function that
we use to quickly create vectors all
we use to quickly create vectors all
we use to quickly create vectors all
right so let's go ahead and dive into
right so let's go ahead and dive into
right so let's go ahead and dive into
the data key enumeration here in the
the data key enumeration here in the
the data key enumeration here in the
comment it kind of explains everything
comment it kind of explains everything
comment it kind of explains everything
but this is used to represent the state
but this is used to represent the state
but this is used to represent the state
variables stored in the smart contract
variables stored in the smart contract
variables stored in the smart contract
storage again it allows for super easy
storage again it allows for super easy
storage again it allows for super easy
convenient access to data within the
convenient access to data within the
convenient access to data within the
smart contract we covered this a
smart contract we covered this a
smart contract we covered this a
little bit earlier but each one of these
little bit earlier but each one of these
little bit earlier but each one of these
Keys here has a value that's attached
Keys here has a value that's attached
Keys here has a value that's attached
to them so you see public enumeration
to them so you see public enumeration
to them so you see public enumeration
data key and a list of all the keys
data key and a list of all the keys
data key and a list of all the keys
within this within the contract you see
within this within the contract you see
within this within the contract you see
contributions in parentheses address so
contributions in parentheses address so
contributions in parentheses address so
what does this mean this means
what does this mean this means
what does this mean this means
contributions is attached to many keys
contributions is attached to many keys
contributions is attached to many keys
so all these Keys must hold the data
so all these Keys must hold the data
so all these Keys must hold the data
type address right so address a b c
type address right so address a b c
type address right so address a b c
and d u but all of these addresses are
and d u but all of these addresses are
and d u but all of these addresses are
mapped to one value so basically this
mapped to one value so basically this
mapped to one value so basically this
data key will record which address made
data key will record which address made
data key will record which address made
which contribution right rors is just
which contribution right rors is just
which contribution right rors is just
going to be a vector of all the
going to be a vector of all the
going to be a vector of all the
addresses that have made
addresses that have made
addresses that have made
contributions token is just going to be
contributions token is just going to be
contributions token is just going to be
the address of the token that the
the address of the token that the
the address of the token that the
contract corresponds
contract corresponds
contract corresponds
with share token is going to be the
with share token is going to be the
with share token is going to be the
we're actually going to Mint a token
we're actually going to Mint a token
we're actually going to Mint a token
from this contract to use as a a
from this contract to use as a a
from this contract to use as a a
share token so we're going to distribute
share token so we're going to distribute
share token so we're going to distribute
tokens when a user makes a deposit
tokens when a user makes a deposit
tokens when a user makes a deposit
and here we're actually going to write
and here we're actually going to write
and here we're actually going to write
that into the contract itself is active
that into the contract itself is active
that into the contract itself is active
is going to be a Boolean so if this
is going to be a Boolean so if this
is going to be a Boolean so if this
value is true certain logic ensues if
value is true certain logic ensues if
value is true certain logic ensues if
this if this value is false again a
this if this value is false again a
this if this value is false again a
certain path of logic ensues admin is
certain path of logic ensues admin is
certain path of logic ensues admin is
going to be an so this address will
going to be an so this address will
going to be an so this address will
have certain capabilities and be able to
have certain capabilities and be able to
have certain capabilities and be able to
hold domain over various functions
hold domain over various functions
hold domain over various functions
initialized is going to be a Boolean
initialized is going to be a Boolean
initialized is going to be a Boolean
that tells the caller whether or not
that tells the caller whether or not
that tells the caller whether or not
this contract is or is not already
this contract is or is not already
this contract is or is not already
initialized all right
initialized all right
initialized all right
so this is our staking contract right
so this is our staking contract right
so this is our staking contract right
and again you see the contract attribute
and again you see the contract attribute
and again you see the contract attribute
empty struct with the name contract
empty struct with the name contract
empty struct with the name contract
implementation attribute and let's go
implementation attribute and let's go
implementation attribute and let's go
ahead and dive into our functions so
ahead and dive into our functions so
ahead and dive into our functions so
this is our initialized function it
this is our initialized function it
this is our initialized function it
takes in three arguments again and the
takes in three arguments again and the
takes in three arguments again and the
execution environment of the contract
execution environment of the contract
execution environment of the contract
admin pretty obvious it's the address
admin pretty obvious it's the address
admin pretty obvious it's the address
of the admin token wasm hash this is an
of the admin token wasm hash this is an
of the admin token wasm hash this is an
interesting one because
interesting one because
interesting one because
we'll actually be creating a new token
we'll actually be creating a new token
we'll actually be creating a new token
right from the wasum hash itself and
right from the wasum hash itself and
right from the wasum hash itself and
then the token will be the address of
then the token will be the address of
then the token will be the address of
the deposit token contract so the
the deposit token contract so the
the deposit token contract so the
acceptable token for the campaign for
acceptable token for the campaign for
acceptable token for the campaign for
for the staking campaign so it must cor
for the staking campaign so it must cor
for the staking campaign so it must cor
the token being deposited must
the token being deposited must
the token being deposited must
correspond with the address that is set
correspond with the address that is set
correspond with the address that is set
here within the smart contract
here within the smart contract
here within the smart contract
function during this initialized call
function during this initialized call
function during this initialized call
and the token wasm has we're actually
and the token wasm has we're actually
and the token wasm has we're actually
going to be able to use a wasm hash to
going to be able to use a wasm hash to
going to be able to use a wasm hash to
access an interface whereby we will
access an interface whereby we will
access an interface whereby we will
be minting a random token or a just
be minting a random token or a just
be minting a random token or a just
generated token a soron token if you
generated token a soron token if you
generated token a soron token if you
will to people who make deposits to
will to people who make deposits to
will to people who make deposits to
the campaign all right so diving in you
the campaign all right so diving in you
the campaign all right so diving in you
see some familiar functions here all
see some familiar functions here all
see some familiar functions here all
right so first thing we're going to do
right so first thing we're going to do
right so first thing we're going to do
is set the admin address in storage so n
is set the admin address in storage so n
is set the admin address in storage so n
storage. instance set again as
storage. instance set again as
storage. instance set again as
previously covered and to access the
previously covered and to access the
previously covered and to access the
smart contract Storage storage to access
smart contract Storage storage to access
smart contract Storage storage to access
you know the actual part of the smart
you know the actual part of the smart
you know the actual part of the smart
contract for storage instance is the
contract for storage instance is the
contract for storage instance is the
type of storage we're accessing set is
type of storage we're accessing set is
type of storage we're accessing set is
the method and just a a quick variation
the method and just a a quick variation
the method and just a a quick variation
from the demonstration before you see
from the demonstration before you see
from the demonstration before you see
and data key and then admin same thing
and data key and then admin same thing
and data key and then admin same thing
as before when you see the other
as before when you see the other
as before when you see the other
smart contract
smart contract
smart contract
here right let's go ahead and open this
here right let's go ahead and open this
here right let's go ahead and open this
same thing as you see here and storage
same thing as you see here and storage
same thing as you see here and storage
instance set and title let's go ahead
instance set and title let's go ahead
instance set and title let's go ahead
and go back
and go back
and go back
here end storage set and data key
here end storage set and data key
here end storage set and data key
admin here it's just defined in this
admin here it's just defined in this
admin here it's just defined in this
data key so you're just literally
data key so you're just literally
data key so you're just literally
accessing that and then you're passing
accessing that and then you're passing
accessing that and then you're passing
in the argument for the admin argument
in the argument for the admin argument
in the argument for the admin argument
here in the
here in the
here in the
function all right so you see let share
function all right so you see let share
function all right so you see let share
contract equal token create
contract equal token create
contract equal token create
contract we're actually able to do
contract we're actually able to do
contract we're actually able to do
this
this
this
by importing do we import the token
by importing do we import the token
by importing do we import the token
data type all right so there is a module
data type all right so there is a module
data type all right so there is a module
here mod token and we're actually
here mod token and we're actually
here mod token and we're actually
importing that importing this module
importing that importing this module
importing that importing this module
this file here into the main smart
this file here into the main smart
this file here into the main smart
contract and what this will do is import
contract and what this will do is import
contract and what this will do is import
the pre-compiled Soroban token contract
the pre-compiled Soroban token contract
the pre-compiled Soroban token contract
file and will allow the main smart
file and will allow the main smart
file and will allow the main smart
contract to use use the functions
contract to use use the functions
contract to use use the functions
that live on on this contract so
that live on on this contract so
that live on on this contract so
actually from a compiled wasum file
actually from a compiled wasum file
actually from a compiled wasum file
we're importing that into the main
we're importing that into the main
we're importing that into the main
file into the main smart contract
file into the main smart contract
file into the main smart contract
rather so where were we I'm getting all
rather so where were we I'm getting all
rather so where were we I'm getting all
ahead of myself here so that's how we're
ahead of myself here so that's how we're
ahead of myself here so that's how we're
able to use the token U file the token
able to use the token U file the token
able to use the token U file the token
smart contract to call the function
smart contract to call the function
smart contract to call the function
create contract so let share token right
create contract so let share token right
create contract so let share token right
here we're going to create a new
here we're going to create a new
here we're going to create a new
contract cont by calling the by
contract cont by calling the by
contract cont by calling the by
calling the create contract method that
calling the create contract method that
calling the create contract method that
lives on the token
lives on the token
lives on the token
file and we're going to use the token
file and we're going to use the token
file and we're going to use the token
wasm hash here to create pretty much
wasm hash here to create pretty much
wasm hash here to create pretty much
the token file of the the token contract
the token file of the the token contract
the token file of the the token contract
from this compiled wasm hash and we're
from this compiled wasm hash and we're
from this compiled wasm hash and we're
going to take in we're going to call
going to take in we're going to call
going to take in we're going to call
that interface at the token contract
that interface at the token contract
that interface at the token contract
that we are setting in the initialized
that we are setting in the initialized
that we are setting in the initialized
function here again you see token client
function here again you see token client
function here again you see token client
new all right so we're going to
new all right so we're going to
new all right so we're going to
create a new token kind of like
create a new token kind of like
create a new token kind of like
interface over the share contract and
interface over the share contract and
interface over the share contract and
then again we're going to call the
then again we're going to call the
then again we're going to call the
initialize function so here we're going
initialize function so here we're going
initialize function so here we're going
to set the admin as the current contract
to set the admin as the current contract
to set the admin as the current contract
address so the staking contract
address so the staking contract
address so the staking contract
itself we're going to Define the
itself we're going to Define the
itself we're going to Define the
decimal places and then we're going to
decimal places and then we're going to
decimal places and then we're going to
define the name and then we're going to
define the name and then we're going to
define the name and then we're going to
define the symbol so just a quick recap
define the symbol so just a quick recap
define the symbol so just a quick recap
what are we doing here we're going to
what are we doing here we're going to
what are we doing here we're going to
say let the share token equal a new
say let the share token equal a new
say let the share token equal a new
token contract right so we're going
token contract right so we're going
token contract right so we're going
to create a new token contract again
to create a new token contract again
to create a new token contract again
token wasm has token
token wasm has token
token wasm has token
address all right so we've created a new
token we've created a new token and then
token we've created a new token and then
on that new token we're call the
on that new token we're call the
on that new token we're call the
initialize function and this is what
initialize function and this is what
initialize function and this is what
we're initializing that new token with
we're initializing that new token with
we're initializing that new token with
all right so moving forward let's go
all right so moving forward let's go
all right so moving forward let's go
ahead and see what else is happening we
ahead and see what else is happening we
ahead and see what else is happening we
have end storage instance set so we're
have end storage instance set so we're
have end storage instance set so we're
setting the token key with the token
setting the token key with the token
setting the token key with the token
smart contract address and then again
smart contract address and then again
smart contract address and then again
moving forward we're setting the
moving forward we're setting the
moving forward we're setting the
share token key value as the share
share token key value as the share
share token key value as the share
contract address and then we're setting
contract address and then we're setting
contract address and then we're setting
initialize to true so after this is all
initialize to true so after this is all
initialize to true so after this is all
set in done
set in done
set in done
most of the data Keys have been
most of the data Keys have been
most of the data Keys have been
defined you have the token being defined
defined you have the token being defined
defined you have the token being defined
as the actual token address that has
as the actual token address that has
as the actual token address that has
been passed in by the user the share
been passed in by the user the share
been passed in by the user the share
token is defined when the share token is
token is defined when the share token is
token is defined when the share token is
deployed and initialized is active
deployed and initialized is active
deployed and initialized is active
hasn't come into play yet admin was
hasn't come into play yet admin was
hasn't come into play yet admin was
passed in in the initialized function
passed in in the initialized function
passed in in the initialized function
and then initialized the value here gets
and then initialized the value here gets
and then initialized the value here gets
changed at the very end of the
changed at the very end of the
changed at the very end of the
initialized sequence all right so
initialized sequence all right so
initialized sequence all right so
moving forward we have start campaign
moving forward we have start campaign
moving forward we have start campaign
and what this is going to do is just
and what this is going to do is just
and what this is going to do is just
basically set the isactive value to true
basically set the isactive value to true
basically set the isactive value to true
the thing here to note is that we're
the thing here to note is that we're
the thing here to note is that we're
actually making a super cool use of
actually making a super cool use of
actually making a super cool use of
authorization the authorization
authorization the authorization
authorization the authorization
framework on Stellar so you see Pub
framework on Stellar so you see Pub
framework on Stellar so you see Pub
function campaign admin address so
function campaign admin address so
function campaign admin address so
admin. require off this means that
admin. require off this means that
admin. require off this means that
the person making the call must be the
the person making the call must be the
the person making the call must be the
same value that is passed in in the
same value that is passed in in the
same value that is passed in in the
admin argument I can't pass in G2 if
admin argument I can't pass in G2 if
admin argument I can't pass in G2 if
my address is G1 so this will fail if
my address is G1 so this will fail if
my address is G1 so this will fail if
I'm passing in an address that is not
I'm passing in an address that is not
I'm passing in an address that is not
the wallet that I'm calling from so let
the wallet that I'm calling from so let
the wallet that I'm calling from so let
current admin equals end storage
current admin equals end storage
current admin equals end storage
instant get so we're defining the
instant get so we're defining the
instant get so we're defining the
current admin right so we're saying
current admin right so we're saying
current admin right so we're saying
we're going to get the current admin
we're going to get the current admin
we're going to get the current admin
from the contract storage here by
from the contract storage here by
from the contract storage here by
unwrapping the key the data key admin
unwrapping the key the data key admin
unwrapping the key the data key admin
and then we're going to say if there is
and then we're going to say if there is
and then we're going to say if there is
no value that lives there which it
no value that lives there which it
no value that lives there which it
should right because we've just
should right because we've just
should right because we've just
initialized a smart contract then we're
initialized a smart contract then we're
initialized a smart contract then we're
just going to return this current
just going to return this current
just going to return this current
contract
contract
contract
address and we're going to say here
address and we're going to say here
address and we're going to say here
we're going to create an assertion if
we're going to create an assertion if
we're going to create an assertion if
the admin does not match or if the admin
the admin does not match or if the admin
the admin does not match or if the admin
address that was passed in for the
address that was passed in for the
address that was passed in for the
argument does not match the current
argument does not match the current
argument does not match the current
admin address value then we're going
admin address value then we're going
admin address value then we're going
to panic and we're going to make this
to panic and we're going to make this
to panic and we're going to make this
function fail
function fail
function fail
all right so if that's all good then
all right so if that's all good then
all right so if that's all good then
we're going to say end storage instance.
we're going to say end storage instance.
we're going to say end storage instance.
set data key is active right so once we
set data key is active right so once we
set data key is active right so once we
set that value to true the campaign has
set that value to true the campaign has
set that value to true the campaign has
started and let's go ahead and take a
started and let's go ahead and take a
started and let's go ahead and take a
look at what that means right so we can
look at what that means right so we can
look at what that means right so we can
we can go the other way stop the
we can go the other way stop the
we can go the other way stop the
campaign again same exact logic except
campaign again same exact logic except
campaign again same exact logic except
for here at the end for setting that
for here at the end for setting that
for here at the end for setting that
value data key is active to false
value data key is active to false
value data key is active to false
after this we can easily check the
after this we can easily check the
after this we can easily check the
campaign status right Pub function check
campaign status right Pub function check
campaign status right Pub function check
campaign status we're returning a
campaign status we're returning a
campaign status we're returning a
Boolean value so same as from the
Boolean value so same as from the
Boolean value so same as from the
demonstration before M storage.
demonstration before M storage.
demonstration before M storage.
instance. getet with the I guess Target
instance. getet with the I guess Target
instance. getet with the I guess Target
location for lack of a better term and
location for lack of a better term and
location for lack of a better term and
then we're using the unwrap or method if
then we're using the unwrap or method if
then we're using the unwrap or method if
there's no value that lives at the key
there's no value that lives at the key
there's no value that lives at the key
is active we're going to return false by
is active we're going to return false by
is active we're going to return false by
default all right so go let's go ahead
default all right so go let's go ahead
default all right so go let's go ahead
and take a look at the deposit functions
and take a look at the deposit functions
and take a look at the deposit functions
in which draw functions I just want
in which draw functions I just want
in which draw functions I just want
to make sure that we are in fact using
to make sure that we are in fact using
to make sure that we are in fact using
the isactive variable doesn't look like
the isactive variable doesn't look like
the isactive variable doesn't look like
we are okay actually we are here all
we are okay actually we are here all
we are okay actually we are here all
right so let's go ahead and dive right
right so let's go ahead and dive right
right so let's go ahead and dive right
into it so what does this function do
into it so what does this function do
into it so what does this function do
this function will actually record a
this function will actually record a
this function will actually record a
deposit made by a contributor if the
deposit made by a contributor if the
deposit made by a contributor if the
staking campaign is active so it
staking campaign is active so it
staking campaign is active so it
takes in four arguments and as always
takes in four arguments and as always
takes in four arguments and as always
going to be the execution environment of
going to be the execution environment of
going to be the execution environment of
the the contract contributor the address
the the contract contributor the address
the the contract contributor the address
of the U person making the deposit the
of the U person making the deposit the
of the U person making the deposit the
token the address of the token to
token the address of the token to
token the address of the token to
deposit and obviously the amount so the
deposit and obviously the amount so the
deposit and obviously the amount so the
contribution in tokens here you see
contribution in tokens here you see
contribution in tokens here you see
contributor require off meaning that
contributor require off meaning that
contributor require off meaning that
again only the wallet making the call is
again only the wallet making the call is
again only the wallet making the call is
allowed to make the call I can't call
allowed to make the call I can't call
allowed to make the call I can't call
deposit and then pass in another wallet
deposit and then pass in another wallet
deposit and then pass in another wallet
address it has to be the wallet that I
address it has to be the wallet that I
address it has to be the wallet that I
am making the call from that I am
am making the call from that I am
am making the call from that I am
clicking the button with all right so
clicking the button with all right so
clicking the button with all right so
let's go ahead and move forward if
let's go ahead and move forward if
let's go ahead and move forward if
the status okay let is active equals and
the status okay let is active equals and
the status okay let is active equals and
then we're going to Define this value as
then we're going to Define this value as
then we're going to Define this value as
a Boolean value then we're going to call
a Boolean value then we're going to call
a Boolean value then we're going to call
the function check campaign status right
the function check campaign status right
the function check campaign status right
so we get that return value and we
so we get that return value and we
so we get that return value and we
Define that is active we going say if
Define that is active we going say if
Define that is active we going say if
active is not true we're going to panic
active is not true we're going to panic
active is not true we're going to panic
and return this message campaign is
and return this message campaign is
and return this message campaign is
inactive long story short if the
inactive long story short if the
inactive long story short if the
campaign is not active you can't make a
campaign is not active you can't make a
campaign is not active you can't make a
deposit all right moving forward we
deposit all right moving forward we
deposit all right moving forward we
have token client new all right so we're
have token client new all right so we're
have token client new all right so we're
going to put the interface over the
going to put the interface over the
going to put the interface over the
token address right so in this case
token address right so in this case
token address right so in this case
we're using the sorond smart contract
we're using the sorond smart contract
we're using the sorond smart contract
address and we're putting the interface
address and we're putting the interface
address and we're putting the interface
over and we're going to call the
over and we're going to call the
over and we're going to call the
transfer method so we're calling the
transfer method so we're calling the
transfer method so we're calling the
trans on the xlm token address at least
trans on the xlm token address at least
trans on the xlm token address at least
according to the test here and we're
according to the test here and we're
according to the test here and we're
going to transfer that over to the we're
going to transfer that over to the we're
going to transfer that over to the we're
going to transfer that from the
going to transfer that from the
going to transfer that from the
contributor from the wallet making the
contributor from the wallet making the
contributor from the wallet making the
call over to the current contract
call over to the current contract
call over to the current contract
address so the staking contract and then
address so the staking contract and then
address so the staking contract and then
we're going to transfer the amount
we're going to transfer the amount
we're going to transfer the amount
specified in the Contra or in the call
here next we're going to Mint the share
here next we're going to Mint the share
token to the contributor so we have let
token to the contributor so we have let
token to the contributor so we have let
share token equal get share token again
share token equal get share token again
share token equal get share token again
remember in the initialized function we
remember in the initialized function we
remember in the initialized function we
deployed a new token called share token
deployed a new token called share token
deployed a new token called share token
and then we recorded the address of that
and then we recorded the address of that
and then we recorded the address of that
share token to the smart contract
share token to the smart contract
share token to the smart contract
storage so here in this call get share
storage so here in this call get share
storage so here in this call get share
token we're able to retrieve the address
token we're able to retrieve the address
token we're able to retrieve the address
of the share token we're creating a new
of the share token we're creating a new
of the share token we're creating a new
client or interface to lay over the
client or interface to lay over the
client or interface to lay over the
share token
share token
share token
right we're saying token. mint right
right we're saying token. mint right
right we're saying token. mint right
so we're telling the share token to Mint
so we're telling the share token to Mint
so we're telling the share token to Mint
an amount of share token tokens to
an amount of share token tokens to
an amount of share token tokens to
the contributor and then here we set the
the contributor and then here we set the
the contributor and then here we set the
contribution right so there's a command
contribution right so there's a command
contribution right so there's a command
in here or a function in the smart
in here or a function in the smart
in here or a function in the smart
contract called set contribution that
contract called set contribution that
contract called set contribution that
manages the value for the contributor
manages the value for the contributor
manages the value for the contributor
value or manages the value for the
value or manages the value for the
value or manages the value for the
contributor key according to the address
contributor key according to the address
contributor key according to the address
so set
so set
so set
contribution we're saying getting the
contribution we're saying getting the
contribution we're saying getting the
address of the contributor and then
address of the contributor and then
address of the contributor and then
setting the amount to that key all right
setting the amount to that key all right
setting the amount to that key all right
and then similarly if we go to the
and then similarly if we go to the
and then similarly if we go to the
withdrawal function it works exactly the
withdrawal function it works exactly the
withdrawal function it works exactly the
same but in Reverse so we say Pub
same but in Reverse so we say Pub
same but in Reverse so we say Pub
function withdraw contributor address
function withdraw contributor address
function withdraw contributor address
recipient and token so you see
recipient and token so you see
recipient and token so you see
contributor require off again super cool
contributor require off again super cool
contributor require off again super cool
here that you can just use the require
here that you can just use the require
here that you can just use the require
author the authorization framework right
author the authorization framework right
author the authorization framework right
in the smart contract right from the
in the smart contract right from the
in the smart contract right from the
smart contract SDK to kind of have this
smart contract SDK to kind of have this
smart contract SDK to kind of have this
Dynamic authorization framework for
Dynamic authorization framework for
Dynamic authorization framework for
things like managing different calls
things like managing different calls
things like managing different calls
from addresses so again you see
from addresses so again you see
from addresses so again you see
contributor do require off meaning that
contributor do require off meaning that
contributor do require off meaning that
only the wallet making the call can
only the wallet making the call can
only the wallet making the call can
make this call can't be another address
make this call can't be another address
make this call can't be another address
right you must pass in the address that
right you must pass in the address that
right you must pass in the address that
you're using is active again we're
you're using is active again we're
you're using is active again we're
doing a call to a function that exists
doing a call to a function that exists
doing a call to a function that exists
within the smart contract that returns a
within the smart contract that returns a
within the smart contract that returns a
true or false value so Boolean value if
true or false value so Boolean value if
true or false value so Boolean value if
is active does not return true then the
is active does not return true then the
is active does not return true then the
campaign or the withdrawal will be
campaign or the withdrawal will be
campaign or the withdrawal will be
null right it will not go through so
null right it will not go through so
null right it will not go through so
again the campaign must be active to
again the campaign must be active to
again the campaign must be active to
make a withdrawal we should probably
make a withdrawal we should probably
make a withdrawal we should probably
change
change
change
that all right cool so we're getting a
that all right cool so we're getting a
that all right cool so we're getting a
couple values here so let contribution
couple values here so let contribution
couple values here so let contribution
equal equals self get user
equal equals self get user
equal equals self get user
contribution this is going to return a
contribution this is going to return a
contribution this is going to return a
an amount we'll go ahead and dive
an amount we'll go ahead and dive
an amount we'll go ahead and dive
into how that comes into play a little
into how that comes into play a little
into how that comes into play a little
bit later again token client new laying
bit later again token client new laying
bit later again token client new laying
that interface over the token address
that interface over the token address
that interface over the token address
so in this so so this time it's going to
so in this so so this time it's going to
so in this so so this time it's going to
be xlm at least according to the test
be xlm at least according to the test
be xlm at least according to the test
and then we're going to say from this
and then we're going to say from this
and then we're going to say from this
current contract address from the
current contract address from the
current contract address from the
staking address we're going to transfer
staking address we're going to transfer
staking address we're going to transfer
xlm over to the
xlm over to the
xlm over to the
recipient and the amount will be the
recipient and the amount will be the
recipient and the amount will be the
contribution amount that is defined
contribution amount that is defined
contribution amount that is defined
here and get user
here and get user
here and get user
contribution next we're going to go
contribution next we're going to go
contribution next we're going to go
ahead and keep moving forward let share
ahead and keep moving forward let share
ahead and keep moving forward let share
token equals get share token so we're
token equals get share token so we're
token equals get share token so we're
returning an an address value here
returning an an address value here
returning an an address value here
and again laying that interface over the
and again laying that interface over the
and again laying that interface over the
share token address and calling the burn
share token address and calling the burn
share token address and calling the burn
method the contributor is going to be
method the contributor is going to be
method the contributor is going to be
the the I guess wallet is going to
the the I guess wallet is going to
the the I guess wallet is going to
Target and the amount that it's going to
Target and the amount that it's going to
Target and the amount that it's going to
burn is the contribution amount so again
burn is the contribution amount so again
burn is the contribution amount so again
total contribution being defined here
total contribution being defined here
total contribution being defined here
and then you see the burn happening here
and then you see the burn happening here
and then you see the burn happening here
so the address of the contributor
so the address of the contributor
so the address of the contributor
burning their entire contribution and
burning their entire contribution and
burning their entire contribution and
last but not least you see set
last but not least you see set
last but not least you see set
contribution we're going to take in
contribution we're going to take in
contribution we're going to take in
the contributor value or the contributor
the contributor value or the contributor
the contributor value or the contributor
address and set the value of that key
address and set the value of that key
address and set the value of that key
contributions to
contributions to
contributions to
Z all right so that's a quick rundown
Z all right so that's a quick rundown
Z all right so that's a quick rundown
and I'd like couple of cool things that
and I'd like couple of cool things that
and I'd like couple of cool things that
happened during this time so again we
happened during this time so again we
happened during this time so again we
have our data keys and smart contract
have our data keys and smart contract
have our data keys and smart contract
storage right data key here a good
storage right data key here a good
storage right data key here a good
place to keep all your keys all these
place to keep all your keys all these
place to keep all your keys all these
Keys have values how do you manage these
Keys have values how do you manage these
Keys have values how do you manage these
values well you use the set method right
values well you use the set method right
values well you use the set method right
so that's the contract storage right so
so that's the contract storage right so
so that's the contract storage right so
to set a value to a key you have to go n
to set a value to a key you have to go n
to set a value to a key you have to go n
storage instance. set to get a value
storage instance. set to get a value
storage instance. set to get a value
from a key you have to go and
from a key you have to go and
from a key you have to go and
storage. instance. getet so there's some
storage. instance. getet so there's some
storage. instance. getet so there's some
data types and contract sorts action
data types and contract sorts action
data types and contract sorts action
happening there and then one cool
happening there and then one cool
happening there and then one cool
thing that I'd like to point out is the
thing that I'd like to point out is the
thing that I'd like to point out is the
cross contract
cross contract
cross contract
calls so when you actually when we're
calls so when you actually when we're
calls so when you actually when we're
looking at the deposit function one
looking at the deposit function one
looking at the deposit function one
thing that we may have looked over is
thing that we may have looked over is
thing that we may have looked over is
that we're actually making a cross
that we're actually making a cross
that we're actually making a cross
contract call so you see token client
contract call so you see token client
contract call so you see token client
new all this is is that we're using the
new all this is is that we're using the
new all this is is that we're using the
token contract right we're using this
token contract right we're using this
token contract right we're using this
token contract to access functions at
token contract to access functions at
token contract to access functions at
another address outside of the staking
another address outside of the staking
another address outside of the staking
contract so token client new laying
contract so token client new laying
contract so token client new laying
the interface over the external address
the interface over the external address
the interface over the external address
which is the token address and then
which is the token address and then
which is the token address and then
we're calling the transfer function
we're calling the transfer function
we're calling the transfer function
on that token address that is defined
on that token address that is defined
on that token address that is defined
by this import here so that might be
by this import here so that might be
by this import here so that might be
a lot for some but this is a cross
a lot for some but this is a cross
a lot for some but this is a cross
contract call and it's made super easy
contract call and it's made super easy
contract call and it's made super easy
by being able to use this contract
by being able to use this contract
by being able to use this contract
import function whereby you can actually
import function whereby you can actually
import function whereby you can actually
import wasum files so compiled Russ
import wasum files so compiled Russ
import wasum files so compiled Russ
smart contract files and actually call
smart contract files and actually call
smart contract files and actually call
the functions from these compiled
the functions from these compiled
the functions from these compiled
Russ smart contract files on other
Russ smart contract files on other
Russ smart contract files on other
contracts and it's all super Compact
contracts and it's all super Compact
contracts and it's all super Compact
and very very I guess malleable for
and very very I guess malleable for
and very very I guess malleable for
lack of a better term all right so let's
lack of a better term all right so let's
lack of a better term all right so let's
go ahead and actually dive into some
go ahead and actually dive into some
go ahead and actually dive into some
tests here I'll just go ahead and
tests here I'll just go ahead and
tests here I'll just go ahead and
quickly go into the staking directory
quickly go into the staking directory
quickly go into the staking directory
we'll go ahead and run cargo test cargo
we'll go ahead and run cargo test cargo
we'll go ahead and run cargo test cargo
test all right there wasn't very much
test all right there wasn't very much
test all right there wasn't very much
action here but
action here but
action here but
we have one huge test for everything
we have one huge test for everything
we have one huge test for everything
that kind of goes over all of the things
that kind of goes over all of the things
that kind of goes over all of the things
that we just went over let's go ahead
that we just went over let's go ahead
that we just went over let's go ahead
and just kind of like dive in here
and just kind of like dive in here
and just kind of like dive in here
you see the test contribute we're
you see the test contribute we're
you see the test contribute we're
letting the end be defined as like a
letting the end be defined as like a
letting the end be defined as like a
simulated environment or the end here is
simulated environment or the end here is
simulated environment or the end here is
just going to be like a default
just going to be like a default
just going to be like a default
environment being simulated here
environment being simulated here
environment being simulated here
we're saying all authorizations have
we're saying all authorizations have
we're saying all authorizations have
been accepted so
been accepted so
been accepted so
users are able to call different
users are able to call different
users are able to call different
functions when it comes to when it comes
functions when it comes to when it comes
functions when it comes to when it comes
to the authorization framework that
to the authorization framework that
to the authorization framework that
we have used here it's going to make it
we have used here it's going to make it
we have used here it's going to make it
easier for us to kind of get around
easier for us to kind of get around
easier for us to kind of get around
any blocks that may occur all right so
any blocks that may occur all right so
any blocks that may occur all right so
we're generating a couple of new
we're generating a couple of new
we're generating a couple of new
addresses some some mock addresses if
addresses some some mock addresses if
addresses some some mock addresses if
you will by using the generate method
you will by using the generate method
you will by using the generate method
so address generate we're using two so
so address generate we're using two so
so address generate we're using two so
one for admin one for user we're
one for admin one for user we're
one for admin one for user we're
creating a token contract so token 1
creating a token contract so token 1
creating a token contract so token 1
equals create token contract right so
equals create token contract right so
equals create token contract right so
create token contract we're going to
create token contract we're going to
create token contract we're going to
we won't dive into the ins and outs of
we won't dive into the ins and outs of
we won't dive into the ins and outs of
this just yet but essentially it's
this just yet but essentially it's
this just yet but essentially it's
going to create like a mock token and
going to create like a mock token and
going to create like a mock token and
we're going to be able to use the
we're going to be able to use the
we're going to be able to use the
functions from the token file or this
functions from the token file or this
functions from the token file or this
token. RS file on this token contract so
token. RS file on this token contract so
token. RS file on this token contract so
you see we're taking in one argument
you see we're taking in one argument
you see we're taking in one argument
which is it the which is the address the
which is it the which is the address the
which is it the which is the address the
admin address and we're going to return
admin address and we're going to return
admin address and we're going to return
a token client so we're going to say
a token client so we're going to say
a token client so we're going to say
token client new we're going to
token client new we're going to
token client new we're going to
register like a default kind of asset
register like a default kind of asset
register like a default kind of asset
contract available from the
contract available from the
contract available from the
SDK and we're going to set the admin as
SDK and we're going to set the admin as
SDK and we're going to set the admin as
the the admin
the the admin
the the admin
address all right so let's go ahead and
address all right so let's go ahead and
address all right so let's go ahead and
keep moving forward contract
keep moving forward contract
keep moving forward contract
contract ID equals register contract
contract ID equals register contract
contract ID equals register contract
we're going to pretty much just like
we're going to pretty much just like
we're going to pretty much just like
upload the staking contract here
upload the staking contract here
upload the staking contract here
using this this command client we're
using this this command client we're
using this this command client we're
going to define a new client so a new
going to define a new client so a new
going to define a new client so a new
interface for the staking contract at
interface for the staking contract at
interface for the staking contract at
this contracted ID and again mind you
this contracted ID and again mind you
this contracted ID and again mind you
this is all kind of just like setting up
this is all kind of just like setting up
this is all kind of just like setting up
the
the
the
environment all right so you see here
environment all right so you see here
environment all right so you see here
token one. mint this is some setup here
token one. mint this is some setup here
token one. mint this is some setup here
that we're just minting the user kind
that we're just minting the user kind
that we're just minting the user kind
of like prefunding their their wallet
of like prefunding their their wallet
of like prefunding their their wallet
to interact with the contract assert
to interact with the contract assert
to interact with the contract assert
that the token or the the token balance
that the token or the the token balance
that the token or the the token balance
for the user is what we just minted so a
for the user is what we just minted so a
for the user is what we just minted so a
th here you see initialize so client.
th here you see initialize so client.
th here you see initialize so client.
initialize so when you see the word
initialize so when you see the word
initialize so when you see the word
client it just means that you're
client it just means that you're
client it just means that you're
interacting with the staking contract so
interacting with the staking contract so
interacting with the staking contract so
client initialize this could be staking
client initialize this could be staking
client initialize this could be staking
contract. initialize here you see the
contract. initialize here you see the
contract. initialize here you see the
admin token token wasm that we're
admin token token wasm that we're
admin token token wasm that we're
using and then the token one address so
using and then the token one address so
using and then the token one address so
let's go ahead and dive into this token
let's go ahead and dive into this token
let's go ahead and dive into this token
wasm file or this token wasm function
wasm file or this token wasm function
wasm file or this token wasm function
so you see function install token WM is
so you see function install token WM is
so you see function install token WM is
going to return a by value and what
going to return a by value and what
going to return a by value and what
we're doing reporting the sorond
we're doing reporting the sorond
we're doing reporting the sorond
token contract that we just kind of have
token contract that we just kind of have
token contract that we just kind of have
pre-compiled here and we're going to
pre-compiled here and we're going to
pre-compiled here and we're going to
upload that to the contained
upload that to the contained
upload that to the contained
simulated blockchain that we're working
simulated blockchain that we're working
simulated blockchain that we're working
in from the test environment but the
in from the test environment but the
in from the test environment but the
main thing to focus on here is that
main thing to focus on here is that
main thing to focus on here is that
we're using we're importing the token
we're using we're importing the token
we're using we're importing the token
file and we're able to use different
file and we're able to use different
file and we're able to use different
functions from this token file thanks
functions from this token file thanks
functions from this token file thanks
to this installed token wasm function
to this installed token wasm function
to this installed token wasm function
so again this returns a bytes 32
so again this returns a bytes 32
so again this returns a bytes 32
value and that's what we're going to use
value and that's what we're going to use
value and that's what we're going to use
within the
within the
within the
test all right so client. initialize
test all right so client. initialize
test all right so client. initialize
we're passing in the admin we're passing
we're passing in the admin we're passing
we're passing in the admin we're passing
in the token wasum value and then we're
in the token wasum value and then we're
in the token wasum value and then we're
passing in the token address right
passing in the token address right
passing in the token address right
we're we're calling the function start
we're we're calling the function start
we're we're calling the function start
campaign so this is going to set the is
campaign so this is going to set the is
campaign so this is going to set the is
active value to true and again we can't
active value to true and again we can't
active value to true and again we can't
make deposits or withdrawals unless that
make deposits or withdrawals unless that
make deposits or withdrawals unless that
is active value is true moving forward
is active value is true moving forward
is active value is true moving forward
client. deposit so we're taking in a
client. deposit so we're taking in a
client. deposit so we're taking in a
deposit from a user which token that
deposit from a user which token that
deposit from a user which token that
they're depositing and the amount that
they're depositing and the amount that
they're depositing and the amount that
they that they are depositing we're
they that they are depositing we're
they that they are depositing we're
going to say assert that the user
going to say assert that the user
going to say assert that the user
contribution of the user that just
contribution of the user that just
contribution of the user that just
deposited matches the total deposit that
deposited matches the total deposit that
deposited matches the total deposit that
they made and we're going to assert that
they made and we're going to assert that
they made and we're going to assert that
the to total share token balance of
the to total share token balance of
the to total share token balance of
that user matches the deposit of matches
that user matches the deposit of matches
that user matches the deposit of matches
the initial deposit that's all should
the initial deposit that's all should
the initial deposit that's all should
have right now and then we're going to
have right now and then we're going to
have right now and then we're going to
go ahead and test the withdrawal
go ahead and test the withdrawal
go ahead and test the withdrawal
function U making sure that the user
function U making sure that the user
function U making sure that the user
after they make the withdrawal has zero
after they make the withdrawal has zero
after they make the withdrawal has zero
contributions left within the contract
contributions left within the contract
contributions left within the contract
so again just as an
so again just as an
so again just as an
example when we run that test everything
example when we run that test everything
example when we run that test everything
is okay and all of this logic passes the
is okay and all of this logic passes the
is okay and all of this logic passes the
way it
way it
way it
should all right so that's about it for
should all right so that's about it for
should all right so that's about it for
me again if you want to check out the
me again if you want to check out the
me again if you want to check out the
defi contracts portion or if you want to
defi contracts portion or if you want to
defi contracts portion or if you want to
check out the I'll go ahead and like go
check out the I'll go ahead and like go
check out the I'll go ahead and like go
through the links again one more time
through the links again one more time
through the links again one more time
so we have the okashi link here if you
so we have the okashi link here if you
so we have the okashi link here if you
want to check out the set title smart
want to check out the set title smart
want to check out the set title smart
contract in an online IDE kind of
contract in an online IDE kind of
contract in an online IDE kind of
environment you know that contract
environment you know that contract
environment you know that contract
should be built out you should be able
should be built out you should be able
should be built out you should be able
to just quickly hit compile start
to just quickly hit compile start
to just quickly hit compile start
testing out all of the functions that
testing out all of the functions that
testing out all of the functions that
live there again this setup slide this
live there again this setup slide this
live there again this setup slide this
QR code here is going to take you to the
QR code here is going to take you to the
QR code here is going to take you to the
setup part of the getting started
setup part of the getting started
setup part of the getting started
section of the docs you're just going to
section of the docs you're just going to
section of the docs you're just going to
run three simple commands to get started
run three simple commands to get started
run three simple commands to get started
with the Stellar
with the Stellar
with the Stellar
CLI if you want to check out some more
CLI if you want to check out some more
CLI if you want to check out some more
advanced smart contracts that we just
advanced smart contracts that we just
advanced smart contracts that we just
went through including more advanced
went through including more advanced
went through including more advanced
what's it called data storage
what's it called data storage
what's it called data storage
cross contract calls as well as some
cross contract calls as well as some
cross contract calls as well as some
more various examples of Getters and
more various examples of Getters and
more various examples of Getters and
Setters you can go ahead and check out
Setters you can go ahead and check out
Setters you can go ahead and check out
this QR code here which will take you to
this QR code here which will take you to
this QR code here which will take you to
the consensus hackathon and you should
the consensus hackathon and you should
the consensus hackathon and you should
see a couple of directories namely
see a couple of directories namely
see a couple of directories namely
staking and data
staking and data
staking and data
types all right so in conclusion I
types all right so in conclusion I
types all right so in conclusion I
always tell developers to read the docs
always tell developers to read the docs
always tell developers to read the docs
as you can never go wrong with that
as you can never go wrong with that
as you can never go wrong with that
feel free to scan this QR code here and
feel free to scan this QR code here and
feel free to scan this QR code here and
it will take you right to the
it will take you right to the
it will take you right to the
Stellar.org
Stellar.org
Stellar.org
developers landing page where you'll see
developers landing page where you'll see
developers landing page where you'll see
all the good developer docs that you
all the good developer docs that you
all the good developer docs that you
will need and last but not least once
will need and last but not least once
will need and last but not least once
again my name is Julian Martinez senior
again my name is Julian Martinez senior
again my name is Julian Martinez senior
developer advocate here at SDF it's been
developer advocate here at SDF it's been
developer advocate here at SDF it's been
an absolute pleasure I love talking
an absolute pleasure I love talking
an absolute pleasure I love talking
about this stuff you know really love
about this stuff you know really love
about this stuff you know really love
having developer workshops and tutorials
having developer workshops and tutorials
having developer workshops and tutorials
happy to do them anytime and I really
happy to do them anytime and I really
happy to do them anytime and I really
hope that you guys all learned something
hope that you guys all learned something
hope that you guys all learned something
today if you have any questions then
today if you have any questions then
today if you have any questions then
please please please do hop in the
please please please do hop in the
please please please do hop in the
developer Discord or the Stellar Discord
developer Discord or the Stellar Discord
developer Discord or the Stellar Discord
in the should be Soroban ddev or or
in the should be Soroban ddev or or
in the should be Soroban ddev or or
Dev dhel any one of those channels in
Dev dhel any one of those channels in
Dev dhel any one of those channels in
general just join the Discord and you
general just join the Discord and you
general just join the Discord and you
can also ping me at the God
can also ping me at the God
can also ping me at the God
handore again that's atthe godhand and
handore again that's atthe godhand and
handore again that's atthe godhand and
then an underscore sign if you have any
then an underscore sign if you have any
then an underscore sign if you have any
questions but yeah thanks again so
questions but yeah thanks again so
questions but yeah thanks again so
much for your time and I hope to see
much for your time and I hope to see
much for your time and I hope to see
you all soon take care
