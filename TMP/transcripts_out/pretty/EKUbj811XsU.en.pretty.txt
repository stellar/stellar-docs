Hello.And welcome to the Stellar open protocol.Discussion. so for those of you watching at home.I just want to give a quick overview.The goal of these meetings is to talk.About and plan for changes to upcoming.Versions of the Stellar protocol.We go over core advancement proposals or.Caps for short.These are open source specs that.Describe new features designed to evolve.The protocol to meet ecosystem needs.All caps begin with a draft and they go.Through a rigorous process before.They're actually implemented in Stellar.Core.And even then they don't actually hit.The network until validators vote to.Upgrade to the new version of the.Protocol that implements them.So crucially not all drafts make it.Across the finish line right changes to.The protocol.They require deliberation diligence and.Meetings like this.They're just one part in the CAP life.Cycle so.Today we have two caps to discuss and.Again these are both.Drafts CAP 37 and CAP 38.Both of which have the same goal which.Is to introduce automated market makers.Or amms for short.At the protocol level so automated.Automated market makers are a simple way.To provide liquidity necessary.For asset exchange you may have heard of.Things like uniswap.They've shown that automated market.Makers are effective at providing an.Easy to access liquidity at scale.They essentially allow for the creation.Of liquidity pools which are simple and.Non-interactive.And which can attract large amounts of.Capital and enable high volumes of.Trading.So the goal of both these proposals cap.37 and CAP 38.Is to add automated market makers to.Stellar in order to improve.Overall liquidity on the network they.Differ slightly but that.They have the same goal so two things.Before we start.One this is a technical discussion very.Technical so if you want to follow along.I suggest that you read the caps and the.Recent developer mailing list threads.About them.Both of which are linked to in the event.Description two.Amms are a big topic and the goal today.Is not to get to the end of the.Discussion about them.Rather we're just beginning the.Discussion so we'll start to bring key.Questions about these proposals to light.So that the discussion and debate can.Continue on the Stellar developers.Google group.Just getting started that group is open.Participation which means that if you.Have an opinion or some great insight.About amms to share.You too can join in just follow the link.In the event description all right.Without further ado let us start to talk.About amn so again we have these two.Proposals but they have a lot of.Questions. in common and then they also have.Some differences and we're sort of going.To get into both today.And the first sort of topic that we.Wanted to talk about was.A question about reserve requirement and.How it works in each of these caps so.Cap 37.Has the pool creator the person who.Creates the liquidity pool.Paid for the pool ledger entry and.Cap 38 does not increase.The reserve requirement so I guess the.First question is.Which model is better is there any.Concern about.Either model so reserve requirements.Well this isn't very deep but it's.Easier to reduce reserve requirements.Than.Increase them so you know if.If there's doubt I guess it'd be more.Conservative to.To have the reserve requirement.Initially.Maybe we can go over the motivation for.Not having reserve requirements because.Most ledger entries do .Yeah I can sound just kind of weird. anyway .So in cat 38 that that version of the.Proposal does not.Have the reserve requirement and the the.Main motivation is basically. it's it's not remotely obvious who.Should own this thing in the first place.Like why should.Any given account be responsible for.Paying this which is you know it can't.Be used by a single person in the first.Place.Intrinsically a multi-party thing.And being the person who created it.Isn't necessarily a meaningful concept.But more importantly it's not that.There's no reserve requirement at all.Because the pool can't exist if there.Isn't at least one.Trust line for the pool. for the pool share I should say so.Basically.It's kind of like you get it like you.Know when you're the first person to.Create the pool.You get it like half off you basically.Get two entries for the price of one. but then you know if there were a.Thousand people using the pool it would.Actually be like a thousand people.Paying a reserve for one single entry. or if there were you know ten.Thousand people would be even more more.Like that.So that's kind of the way that I see.This motivation.All right so there's no way to abuse.This because you can't just create an.Infinite number of these you'll need.Infinite number of trust lines as well.So so in other words basically the trust.Line it sort of serves as the reserve.Requirement rather than creating a new.Reserve requirement specific to a.Liquidity pool.Right that's a pretty good explanation.Of it yeah.I mean I think like I mean that's a.Reasonable explanation.Yeah so.It'd be a bummer if we changed our minds.But yeah and later.Wanted to like increase it but that does.Seem reasonable. I mean if that's the case maybe we're.Done talking about reserve requirements.Like does anyone have anything else.To to to say about them yeah we sort of.Started with the easiest topic.Just to warm up so if that one's that.Easy and we can move on.I guess like maybe so the reason i.Added that question in the first place.Was because. it was more like thinking for.Like like they are .Potentially very large. I mean the the.Pool basically to describe it you need.To.Basically describe you know what which.Assets are.Part of that pool right now we're.Only discussing concern products.As part of this but you can imagine.Having a lot more complicated type of.Pools.So maybe the.The amount of data that is tied to this.One pool.Could be much larger than what we are.Talking about now. for example I think in the .I think compound type of world they.Have like multi assets.Like more than two assets actually in.Your pool .And I think in if you have like kings.Or v3 type of stuff. yeah now you have like those bitmaps.That are in there as well.I mean like the the cost of that becomes.Much larger so I don't know.You know is it does that count really.Just as a single.Single ledger entry or do we need to do.Something better. if we if right now we make it.Basically implicitly.Attached to a truss line we're kind of.Stuck with that model forever. as opposed to maybe if it had if it.Was separate we could imagine okay if we.Change our mind and it has to be more.Expensive because you know those things.Are gigantic. we can you know we have that as a.A separate thing but maybe maybe that.That's fun because.Yeah the creator like we can maybe.Give the first trust line free or.Something I mean kind of equivalent.Right like as part of this.I mean the thing is like there shouldn't.Be like a gazillion of these things.Right.So if it turns out that you know I mean.I can imagine.Going forward that it turns out that.There's any number of things like it.Might turn out that we really only want.A few hundred of these liquidity.Pools in the network and so.We would turn it into like an auction to.See like which asset pairs are like you.Know worthy of of having the automated.Market maker or you know or it's just.Kind of.The thing is even if it costs like 100.Lumens to create one of these things.It just wouldn't be that big a deal.Because that if it's actually a useful.Liquidity pool that cost would be.Amortized over.A large number of users so I guess.It doesn't seem like it really matters. because I guess we could also say.Later on like hey.Price just went up but will grandfather.In the existing liquidity pools or.Something.So what happens what happens to the pool.When the last trust line.Disappears I think in both proposals.It's supposed to be automatically.Removed.I'm just wondering if there's some kind.Of spammy edge case where.People create and destroy trust lines.Quickly to get some kind of.Ephemeral pull advantage.I mean I guess it could but like the.Nature of the pool it's not really.Useful if it's not sitting around.Right so.And you you can't be a participant in.The pool if your.Trust line doesn't exist because you.Wouldn't be able to hold the shares so i.It's hard to see how you could get value.From that.I do think that like nikola has a good.Point about the.The multi-asset pools you know like.Balancer type pools.And I think in in that kind of a setting. we could always say you know like.Okay well we're gonna charge fees for .Charge reserves for those types of pools.But not for these types you know.I think there's a lot of flexibility .You know we already have a mechanism.By which we can do this which is.Sponsorship so we wouldn't have to.Invent anything new.It's just a matter of like do we think.That that's even necessary at this point.For me the answer's like probably no.I mean like if we to me yeah I agree.That right now we don't need it.It's more like are we is it possible to.Add it later if we have to. if we don't if we're not careful.Because in the capital eight world.I guess we would have to force people to..Wrap their trust land creation with some.Sort of like sponsorship.Thing or maybe responsible by default i.Don't know yeah maybe that.Maybe that's fine it just changes the.Cost of. creating a trustline so maybe that's.Okay I mean what would what would the.Change.Look like like in general I'm not a fan.Of complicating today's thing because of.Potentially tomorrow but you want to.Like.Add like one field to the operation.That's like the extra fee for.Creating the trust line or the extra.Reserve for creating the trust line or.I think we should just be on type so i.Think it wouldn't actually change the.Contract.So it's actually fine yeah like we ever.Have a new type of of of pools that.Are like those.Gigantic things and we believe that they.You know there should be no free riding.On this. then we can always add like this. like those would be sponsored.Basically instead of right now they.Would.Like the I mean right now you have the.Field that allows them to be sponsored.Except we don't use it.All right I think we can move on okay so.The next question is about.Dex integration which I think is a.Bigger bigger question so.Both proposals give access to liquidity.From both pools and the decks but they.They vary in their approach .John will you just walk us through the.Difference between CAP 37 and CAP 38 in.Their approaches to.Dex integration sure thanks. so basically basically.Both of them put the access to.Trading with liquidity pools or.Automated market makers.Inside of path payment and that's the.Only access point to this functionality. there is no like trade only with an. trade only with the order broker.Trade only with the amm. it's just one operation which is more.Like trade. now the the difference in how these.Work.Is that in CAP 37 OrbitLens proposal.Like the idea is that you're going to.Try to always get the best price.So you might imagine a situation where.Like the you know you have.Let's say you have an order and the.Price is at like a hundred dollars or.For whatever you're trying to buy and.Like the marginal price on the amn is at.95.Right now but the amm has like really.Really small reserves.So you might say like okay well first.I'm gonna trade against the amm.Until the price hits a hundred dollars.Then.I'll go and cross the order book and.Take that first order.And then you know now I'm going to now.The next price is at 105 and so I'm.Going to trade against the am until it.Goes to 105 etc and you do both.Stepping back and forth between the two..Depending on which one gives you the.Best margin price.In CAP 38 to kind of avoid that.Complexity. the approach is basically just what.If I what if I took the entire trade.Against the amm.Or what if I took the entire trade.Against the order book and just.Give you whichever of those two produces.The best price so you would never do.Some amn and some order book it would.Either be all order book.Oil a m sorry best price or best volume.So even if the volume is tiny you would.Take it.So I'm saying best price in the context.Of like imagine that I'm trying to.Trade a specified amount like I wanna.I wanna you know buy three thousand.Widgets or something. I'm gonna do whatever it takes to get.The best price for those three thousand.Widgets.If I can't get 3 000 widgets on one of.The two options then. that's not an option wait sorry so.It's they're all or nothing.Now oh I see yeah because that's working.That's right that's right okay.But so in in the CAP 37 example where it.Always tries to get the best price and.May.May execute part of it on it via the amm.And part of it via the order book what.Does it do it.It splits the amount that you want into.A bunch of different path payments. I guess I mean it's kind of hard to.Explain what it does at like an.Implementation level but it.It's all it's like still going to come.Through as a single operation.And just inside the implementation it's.Going to know to you know kind of do.This incremental approach.So it's completely invisible to the user.And so so in both proposals can you.Have arbitrage.Opportunities between the order book and.The amm.So in the cap37 proposal there are no.Arbitrage opportunities between the two.Because they get resolved automatically.As you trade.In the cap38 proposal there can be but.The reality is that with like.Spreads as wide as they are on the order.Book today.If there were ever a situation where.There was an arbitrage opportunity.Between the.Amm and the order book there would also.Be an arbitrage opportunity.Between the amm and any external order.Book for the same product.Probably I mean like I can't I can't.Give you 100 guarantee on that but you.Know I think. it's pretty common to have like.Spreads on the order book today.Greater than half percent so I would.Think that.You know if you're looking at any more.Liquid place in the world that would.Probably get you into an arbitrage.Universe there.First.With the cap37 implementation would it.Be possible to.To build an attack where you constantly.Switch between the order book and the.Pool.Like a with a single path name like is.That a concern.What what kind of it like what would.This attack do exactly right.It would take the minimum amount from.The pool and it decides that the order.Book has the next best price.And then after that it would switch back.To the pool and just keep going back and.Forth.While in CAP 38 you would just choose.One or the other right do you see what.I'm saying.So this is I mean like there can only in.The world where there's exactly one.Order book.And exactly one amm there can only be as.Many switches as there are offers.In the worst case.So like if there's 10 000 offers there.Could be ten thousand switches but there.Couldn't be twenty thousand that would.Be impossible.Does that make sense do I need to.Convince you of that I could no I think.That makes sense.Okay yeah the worst case behavior.Is to dex not you know.That's always the answer one comment i.Have is that whatever we implement in.Core we have to be able to model it.Outside of core.Like horizon has to be able to calculate.The same thing to give you.The best path payment and presumably.Third parties would also want to do that.So.We should bear that in mind like it.Can't be completely opaque.What do people kind of feel about what's.The.Good approach here.I think one one important question here.Is like cap.37 seems to.Suggest that the dex.Is a valuable thing and should be.Maintained and the markets will be.Maintained alongside because.If the if if everything just migrates to.The automatic market makers.Then have this like complexity of.Interleaving requests of no leaving.Offers.Seems to be like doesn't make sense.Right so the question is like.Do we think that the ecosystem is going.To migrate. like are we are there use cases that.Automatic market makers are not.Providing a good solution for as much as.The dex is I think there are but.It'll probably be per asset pair.Anywhere like if I had to predict i.Would say that.For you know if I want to like you know.Do an ipo of my company on Stellar.I'm gonna just basically like put the.Order book there I mean it'll be offer.My shares for sale like on the order.Book or something right. and if I'm trying to do like forex.Exchanges or whatever then.Probably the the .Probably the the amm is going to be best.It it seems unfortunate that kind of.The more intermingling of these.Abstractions the harder it's going to be.To like you know improve each individual.One in the future the more complexity.There's going to be and it's not.Clear what the payoff is going to be.The market will do better with.Impermanent loss right so when there's.Knowledge.Outside of the blockchain.The market will take advantage of it.Much more effectively than the amm.Yep seems like an argument to have it.You know I'm not saying get rid of the.The existing decks I'm just saying.You know have have both but don't.Have them.Terribly intermingled like they sort of. ideally improvements to the mm don't.Need to like you know change the logic.Of the order book.As you know as much as possible and vice.Versa.So then it would just be a user choice.More than anything whether to.Use the amm or use the dax a market.Maker choice the user would just get the.Best price available for a path payment.Right but someone who's trying to.Make a market could either use our amm.Or if it's not good then they could use.The .The decks.Comer I would kind of ask you like can.You think of anything.Where people would want to use like.Would have a good justification for.Using both.On the same product because I agree with.David like I can think of lots of cases.Where.The amm will be better than the decks or.Lots of cases where I say the decks i.Should say the order book.Lots of cases where the order book would.Be better than the amms but I can't.Think of a case where.People would be obviously indifferent.Between the two.Well I think what what could happen is.That you know.That amms are used to like bootstrap a.Market but that then when the market.Is like you know a really big deal then.Some big market maker will come along.And they would rather.Have the control of setting explicit.Limit orders because they can set.Have a lot of depth and they can kind of.Adjust to x you know.External factors that affect the.Price.And so they would prefer that and so i.Could see the amm is way to bootstrap a.Market and then like a full-on market.Maker.Using the the the order book once it.Makes sense for them to do that because.There's enough volume that is profitable.For them to make the market in the.Traditional way.But cap38 would satisfy that without.The extra complexity.So at the moment it doesn't seem like.Anyone's arguing that the extra.Complexity of cop 37.Is is worth has has a benefit. that makes it worth.While really is that true is there.Anyone who who thinks cap37.And the super interleaved process is.Is substantially better.But I think the argument for for that.Behavior.Is actually what orbit wrote.I think this morning on the dave mailing.List.Which is trying to limit. like the number of times you have.Like this .Arbitrage opportunities between emm.And the the existing.Order book the thing is that. I don't know if you have any data.Really to.Kind of say that this is going to be.A big problem inside .Like this is like inside a specific .Like even on the on the decks overall.Like you have.Pairs that I mean yeah are assets that.Represent the same thing.Right they're just issued by different.People and.That doesn't solve I mean CAP 37 doesn't.Solve that.So that's why I'm I'm kind of a.In the camp of like starting with this.Simple thing.First see how that goes and then adjust.Like based on that because yeah.This interleaving .So far on you know the type of of things.I'm saying it's actually very hard.To even come up with with like.Environments or things that you want to.Happen.If we want to change the. what the mm is doing like if it's .Something more complicated than.Than constant product I'm not even sure.We we can. yeah explain what we exp what we.Expect to happen.Like we want the best price but when you.Have like grounding and all those issues.That come in play.It it actually becomes really.Complicated to try to reason about this.So I would delay that decision as much.As possible that's.That's my opinion and there's a chance.That. you know we'll want a third thing.That's neither an amm.Nor the existing decks and so .You know it's nice the idea that okay we.Can just have multiple approaches to.This.Coexisting and they don't have to be.Tightly integrated.That leaves us more flexibility in the.Future.Great anything else about dex.Integration or should we move on to the.Next topic.Great the next topic is pool parameter.Updates .I think sid was working on something.Related to this is that true.Yeah I wrote something on the that.Mailing list yesterday. I can talk about that if you like.Yeah will you talk us through it.Yeah so it it's it's what I propose is. an extension on what orbit pros where.You.Include the the fee in the ledger.Header so instead of just having one fee.You have.You know all the fees you may want to.Use for example if you.If you had a couple different constant.Product pools with different fees. you have all them the ledger header.And depending on which pool you're.Interacting on.You would pull the fee from there .This will allow you to upgrade the .The fees without a protocol update .The issue here though is that.You know the more the more pools we add.More parameters we add.Wherever we if we store this in the.Ledger head it'll get polluted wherever.We decide to store it somewhere else .Like it may become an issue. so that that was what I proposed i.Think niko had a had a different.Proposal. related to storing the parameters in.In the ledger pull key I believe and.Maybe.You can talk about that.Right so I guess like what I described.Was not necessarily. where to start I mean like there's.There are actually different concepts.Here .Because let's see.It is the other question after. so just.Maybe one thing that will help me can we.Just talk about what parameters there.Might.Be that that we would need to store.Other than right.So like the type of things that i.Think .People were talking about so for the.Obvious one is. we have a proof a puffy right. that's the one that.Is kind of the really the only parameter.And a constant product.Pool we have.Other parameters also.Like minimum.Amounts that we want people to to be.Able to deposit like.Basically a unit you can think of it as.A as a unit of deposit or.Withdrawal that helps with .Guaranteeing certain levels of liquidity.Basically when you do all those.Operations. what there's.I think some of those when you have.The more than two assets type of course.Those have actually formulas that are.Getting even more complicated because.Now you have like different weights. for those assets. I think those are like the the ones.That are known.Right now right I think for like.Unison b3 type of pool you have like a.Step.Size also I mean yeah.It's up to future so.And there are a few other things that.Are like for example.Curve has this amplification factor. and that would be something else that.Would have to be.Stored if we were to use that.Is is there an issue with storing all of.This in the leisure header.I'm assuming like you want to get two.Actually so the the one actually I guess.When I wrote this question what I was.Thinking at the time was more like.There's this question of if you store.The parameter.As a global as opposed to be something.That is. attached to the pull itself.Well that means is that if you want to.Ch if you change the value of that.Parameter so if you change the c for.Example you're actually changing the fee.For every pool in existence.Every instance right .And actually have a hard time to kind of.Understand how that model works in a.World where you have.Other parameters other than the key like.For the fee maybe it works.For other parameters I think it changes.The dynamics of the.Pool so much that you're actually you're.Really talking about a very different.Pool at that point.And it may not.Actually be something desirable.This this first version is we are.Establishing the model that we want.Going forward.And you know constant product.Is very special and I don't want to be.Stuck with that.You know with whatever choice comes out.Of that.So you're really focused here on the on.The update like updating the.What should it be possible to update.The parameters on an existing pool it's.Kind of the main crux here.I think it's yeah it derives from this.Choice right that is if it's a global.That means when you update it you change.Everywhere right.My stance on this is that like you.Shouldn't be able to retroactively.Update things you know if you wanted.To switch to a different pool create the.New pool. move your money into there and let.People vote with their feet.Or with their money however you want to.Say it .My stance on this is more a ux thing.Than anything else. you know what I really don't like.Seeing looking on my bank statement and.Being like oh I used to get 1.5.Interest now I get one percent interest. I didn't agree to that.Nobody told me until after my money had.Already been sitting there for however.Long.So I don't think I want to impose that.On to other people.So a pool would have fixed parameters.That could never change once it was.Initiated somehow.So what you're saying that would be the.Stance that I would take on this. I think the only exception to this.Might be.Like perhaps we might make the exception.That these can change during a protocol.Upgrade.Because generally we take the stance.That we can change the rules.On protocol upgrades and you know i.Don't think anybody would be super.Offended if.All the validators plus all the.Developers plus went through this huge.Review process to agree like this is.Gonna be better uniformly for everybody.So we should make it the de facto. but isn't nico's point that when you.Make the second pull if you wanted to.Change the fee in a second pull.It would affect the fee in the first.Pull.Are they coupled like in.In siddharth's proposal and i'll let him.Talk more about it but he's offering.Like these three different fear.In his example he's offering these three.Different fee tiers and you can imagine.Being in the mid-tier fee you know.You could have the low tier one the mid.Two one the high tier one and then you.Know.The validators vote like okay we're.Gonna move the mid tier one from point.Five to.Point six or something like that so it.Would still be possible to be in a world.Where there are multiple pools.And still have multiple fees but have.Them globally controlled so that.Existing ones get changed anyway not.Saying that I support that but I think.That's possible but.Siddharth you can step in here if I'm.Not not hitting this correctly.No that was right.And that like the the nice thing here is.That you and I don't know if this.Actually matters but you you control the.The number of possible pools right i.Don't know if that matters for. like liquid liquidity fragmentation.Right like if we if we allow if we end.Up allowing like 10.Or 15 constant product pools like will.That be an issue or do we assume that.Everyone will move to the most optimal.Optimal pool.Like I I'm not sure what will end up.Happening there.I tend to think that people would have.Probably eventually settled down onto.The right thing. but I also don't think that's a.Particularly nice user experience. it's like decision paralysis when you.Get to the grocery store and you're like.Wow there's a.37 brands of corn flakes which one am i.Gonna buy yeah.Why do you need that in your life.So it's it does sound like like if we.Were to make any of the.Parameters mutable it would it would.Only be the fee right like.If like we shouldn't change anything.Like the curve or anything like that. for any of the you know if we add a.New pool type like those should not be.Mutable.I don't think those should be mutable.Only from.Like I don't know .Their nikolas shared this this very.Cool.Defect report that colton long ago had.Shared with me and I shared with nikola.Nikon he posted it onto sellerdev.Which is about changing the curve.Parameters other than the fee.I say defect report I guess I should say.Vulnerability whatever you want to call.It.And if you're interested more you should.You should review that because it's very.Scary.I almost feel like this shouldn't .This shouldn't be a configurable .Parameter and if.If we do want to introduce a different.Fee.We can might as well just introduce a.New type of. a new type of pool like I think that.Doing like even if you don't change.It for existing pools.I'll still you know i'll i'll put.Some money into a pool one day get.You know one specific fee.And the next day after the configuration.Change it's a safe type of pool but now.I'm getting like a different type of fee.So that there's like it's just not.Explicit enough.A couple of people have said why don't.We just introduce.A new pool or why don't we do this who.Is the we in this situation.Does that make sense. I think there are two different ways.One could take this.One one way to introduce new types of.Pools would be that it's a protocol.Change you know like if we're gonna go.From having only constant product pools.To having constant product rules and .I don't know something curve-like or.Balancer with weights or whatever. we'd have to you know the Stellar.Protocol developers you know.People who work on caps whatever would.Have to make that happen. another way to look at we this is.This is an idea that nikola had a long.Time ago about having this like .This notion of like instead of.Letting people choose any fee they want.Or any whatever they want.There are some configurations that the.Validators have voted on are good.Configurations. when you're creating something you're.Basically choosing from that menu of.Good configurations.And so in that setting we could be like.Validators you know they they voted on.Saying that like now the fee can be both.0.3 and 0.05 you know.So depending on the context I think we.Could be either of those.Cool things.Are there more questions about.Parameters I mean I feel like there's.Still a little bit more.Thinking there that we can sort of do in.Conversation on the Stellar dev list.I I don't want to move on though if.There's important things left to be said.But I feel like we're sort of at a good.Point to move on.Right I agree like the next one is.Actually related and.And maybe more interesting actually you.Want to.Explain it yeah multiple pull support.Yeah so it's basically .The two proposals are actually quite.Different.There like CAP 38. actually allows one.Asset pair to have.Arbitrary variations of pools.For that one pair so the variation can.Be on the.Curve type it can be on any really.Any other parameter like we just talked.About fee so you can imagine having. two pools.On the same two constant product pools.Let's say.On the same asset pair but one is going.To be.You know super low c and the other is.Like going to be a high fee and then.You know the market kind of gets inside.Whatever .Capital e7 identifies pools using the.Pool type.And then related to the thing we are.Talking about earlier the.The fee is global so at this point the.Only.Way you can have multiple pools on a.Given asset pair.Is if they defer on type.Do we want to have more of the first.Kind or the second second time right.Like which one is.Is is maybe more interesting we want.To have like those.A few number of options right in a for a.Given type or do we think that one type.Enough.I think there are some like fundamental.Problems with the notion of like one.Instance of a pool per.Wait hold on actually let me make sure i.Understand.Do you mean one instance of a pool per.Pair.Per pair yeah of course all this is fair.Fair right yeah.So one in I think there's some like.Fundamental.Denial of service flaws with one.Instance of a pool per pair.Which is the question of who gets to.Choose what that pool will be. like is it going to be the hyphy one.The low fee one is going to be curve.You know I think basically.Basically if there can be multiple types.Of pools.We probably have to say that all of them.Can exist for the same pool to avoid.Having some.Arbitrary and by arbitrary you can.Always take that to be adversarial.Decision maker like oh this is a super.Volatile .Asset pair where like you know.Constant product with a high fee would.Be the best I'm going to put in.You know a curve with a super low fee to.Make it so nobody can use this.Don't want that to happen.But here like you have the you know.Using cap37 as like the.Like maybe the as a talking point like.Earlier we were talking about fees do we.Think.That we want to have more than one few.For constant product for a given pair.I mean I think that we probably want to.Have more than.One tea and not just force.Like people to pick like oh yeah this is.The right fit for you because.I think that different. different asset classes.Actually have different like risk.Profile and volatility profile.And therefore you want to have a.Different fee.You know like you basically want the the.Like crypto to crypto assets to have a.Probably a different fee than the stable.Coin to stable coin type of.Type of fair right so yeah.You can let them compete and like you.Were saying like you can't let.A single person decide on which one is.The first one.So then how do you let the market decide.I think that's kind of.What I'm getting.So it would bring market dynamics to.Bear on these given.Uncompeting pools.I don't really like for me the reality.Is I don't really see what we're.Choosing between.Like the choices in my head are kind of.Like there is exactly one type of pool.And we apply that uniformly across the.Board or there's one.You know maybe you say like okay like.You can have different curves but all.The ones with the same curve have the.Same fee.Whatever like whatever you kind of take.That model at.You're kind of saying like I'm gonna try.To fit all the pegs into a single shaped.Hole.If you take that approach and if you.Don't take that approach then you're.Basically saying well like I'm gonna let.The market decide what's the what's the.Non-stupid thing. and I don't like forcing.Pegs into holes that don't that they.Don't fit in so.For me it seems kind of like a like a.Very kind of obvious choice but I'm I'm.Wondering if somebody sees the.The argument that goes in the other.Direction like is there somebody who's.Like no.Like john you're definitely wrong.Well I think the argument I held before.On.On trying to force everybody into the.Same.Group is you avoid. like splitting the liquidity.But I'm not I'm not that's not my.Opinion either you know.So I can't really support it but that i.Just wanted to call it out that's.Actually one of the argument that people.Call out yeah.I mean I guess for me it kind of depends.A lot on what the set of options are.Like you can imagine a world where like.We just imagined that.It was possible to create a constant.Product market maker with a fee.At every thousandth of a percent.There's no difference between I mean.They're.They're not literally identical but.There's no material difference between a.Fiat point.Three percent or point three zero zero.Point three zero one percent or point.Two nine nine percent.They're kind of like exactly the same.And I think in that world.You probably do have liquidity.Fragmentation between people doing.Effectively the exact same thing.Differently.Whereas you know in a world where you're.Like okay like you have two fees.On your constant product one is like.0.05 and one is.One percent for totally different asset.Classes I think.There's going to be like a very obvious.Place that people are going to want to.Put their money.In those kinds of cases and there won't.Be a lot of blurriness.I'm not 100 sure but I think the the.Amount of liquidity fragmentation.Depends on.How distinct the options are.But even in that case if market dynamics.Work wouldn't people be.Drawn to the fool with the lower feet.Right if they were the same but one even.Had a.Tiny bit lower fee and then the two.Pools would be competing.And they would actually that would push.Fees lower.Isn't that what you would expect not.Not.Necessarily like for example.If the impermanent like if prices are.Moving a lot and so there's a lot of.Impermanent loss.Then people might make more money from.The higher fee.Even if people traded less as a.Consequence.And the other factor is if everybody's.In the high fee pool.Then and like let's say that like let's.Suppose.A world where there's 99 sorry 100.Equivalent market makers 99 of them are.In the big pool.Which has the high fees and the one.Other guy is in the small city pool. in like the CAP 38 proposal.For like maybe some small trades would.Execute against the small pool.The small fee pool but all the big.Trades would execute against the big fee.Pool because there'd be less slippage.There.And so maybe that person would end up.Making less money by being in the low.Fee pool and then they decide to join.The high fuel pool anyway.Right so I think it's it's not obvious.There's a bunch of different ways these.Kinds of things could.Shape out.So I mean maybe the answer to this is no.But I'm just wondering if there's any.If it's it just seems better to have.Only one pool.You know other than the fact that you.Would have to agree on the parameters. but I'm wondering if there's any way.To kind of select the pool.Objectively like basically say that you.For any given pool you you you if.There's.If there's multiple pools for an asset.Pair you just pick the one that has the.Highest product or highest product plus.Reserve where people can pledge some.Reserve or something so you can let.People sort of bid on.On what they have because what you kind.Of want is like you want like.You know in the kind of Stellar fashion.Of like it's just to everyone's.Advantage to do what everybody else is.Doing which is kind of like the whole.Philosophy of Stellar on some level you.Would like market forces to decide this.And so to the extent that then.Somebody a lot of people decide that you.Want to do something else then it should.Like make sense to move over to that.That's something else but .I mean that's that's john. briefly mentioned this my new idea. earlier so that's kind of.What I proposed earlier is basically.Try to.Kind of find a good middle ground right.Like you don't you don't want to have.Like a single pool you know where you're.Forcing to this.One rate you know across all assets you.Know that's I think that's kind of .Trying to to that's too.Too prescriptive on the other hand.If you allow people to set any price you.Know any fee and all that you end up.With like this huge. like you can't pick a pool basically.There are an infinite number of pools so.The menu idea is to have validators.Actually.Describe the the combinations that you.Are.That that you can use on the network.And the combinations would be a.Combination for example like constant.Product you can have like low medium.High c.Or something like that and then when you.When you want to deposit assets in a.You pick which of which which item on.The menu.You want right you can say okay this is.Like a stable coin one so I'm going to.Pick this scoff.Paying with this parameter right okay so.Here's.I think you know this is probably not.Workable but just to like get some.Design point out there.Suppose that you know people can.Sponsor these. these liquidity pools. using lumens and.Basically you can propose any value.Any parameter you want however in order.To introduce a new liquidity pool when.There's already one for that .For that asset pair two things have to.Happen one you have to pledge more.Lumens.Than the previous reserve as pledged.And two you have to have it like as at.Least as much liquidity in terms or the.Product has to be at least as.As great in terms of the assets you put.In there so.This would allow people to change when.Everybody wanted to change.But it would sort of make it a little.Bit sticky.What a I get what you're getting at here.But like a kind of just.Practical implementation type question.Before we talk about this on the merits.It's just like .What about the case when you have pools.That were like the .The product is a different number like.The invariant is a different number. you know the curve invariant is some.Really complicated thing that's really.Gross to write down. and so they're obviously comparable.There would be some.There would be some requirement that for.Any pool that we introduce.But there needs to be a depth metric.Which is a number and where somehow we.Believe that in general.Deeper markets are better than shallower.How would you.I guess like what would at like a high.Level what would an implementation of.All of this kind of look like like in an.Abstract sense but like we need some new.Kinds of entries and stuff like.What is it like how do you how do you.Say that you're voting for one of these.Like what does it mean for like if.You're voting for a pool but the pool.Doesn't actually work yet what is.What are how do all these things kind of.Work at a high level.Yeah I guess you have you have some.Number of .Let's say you have some number of .Candidate pools and in order maybe in.Order to create a candidate pool you.Have to pledge sort of.Twice the base reserve that's pledged.For the previous one or something so we.Can't get like an infinite number of.These. and then for the candidate pools.There's some amount of.Capital that's pledged and so if if one.Of the candidate pools suddenly gets.More or more depth right there's some.Amount of capitalist pledge and if if at.Some point one of the candidate pools.Ends up with more depth than the.Existing pool.Then people would switch over so the.Basic assumption here is that like sort.Of.90 of the people participating in a.Liquidity pool would say hey like.Actually we want to go to a lower fee or.Something right and so. and so once everybody wants to do.That they can make it happen.But like you know a random person.Who's just trying to disrupt the.Existing market.Would have to like amass a lot of.Capital and essentially end up making a.More liquid market.In order to in order to .Disrupt the existing market.It's a kind of interesting idea i'd have.To think about that a bit.I like definitely have some concerns.Along the same line as.Somebody mentioned now I think eric.Mentioned about like this like ephemeral.Trust line type of thing.You can imagine somebody putting a lot.Of putting their money where their mouth.Is in like a huge amount and then you.Five ledgers later being like I just did.That to screw you guys all up and then.Just pulling their money back on the.Other hand if what they did is.Provided people like really low fee.Transactions for five ledgers like is it.So bad.Like they could have done the same thing.By placing offers on the order book.It's a fair point.So we only have five minutes left and.And I think that's fine because I think.A lot of these questions can we can.Continue to sort of talk about them or.To think about some of the suggestions.That were raised.And deal with them on the Stellar debt.Mailing list.There were two other topics that we.Didn't really get into one was.Compliance and one was rounding.Do we want to take a second to talk.About either of those right now would.That be useful.Or is it is it too much to take on.Either one of those topics in the last.Four minutes. it seems hard and for me I mean I'm.Like I'm.Very interested in talking about these.But in detail.It just seems like it'll be unsatisfying.To get into them now.Okay that makes sense to me.I mean I think then the the question is.What what is.What are the next steps after this.Meeting do we I feel like it is to.Continue the discussion on Stellar death.But are there other follow-up actions.That need to happen in order to make.Make that possible.I'm still trying to understand whether.We've narrowed down the scope of which.Pools can exist and. which ones can't like for a given.Asset pair.Have we agreed we can only have one pool.Or could we have multiple pools with.Different kinds of curve.For that asset pair for example like i.Would love to.Write that down.Well I think what we were talking about.Was that we I think they.We agreed that there would be more than.Per asset there. what we are talking about last was.More about the governance that goes with.Introducing a new pool like you can do.It in many ways.The good news is that we don't.Necessarily have to solve that.I think in this version because right.Now we're introducing only.One one constant product.And I'm not sure we want to.Introduce in the first version the.Support for.More than one rate right like we can.Basically for now like I think that's.What capital e8.Says or even capital e7 that is.There's only one rate. and I'm it's probably fine for the.Very first version but .It's interesting to think about.How to to change that in the future.If you'd be willing david i'd be like.Very interested to see like a high-level.Write-up.Of what you were describing so I can.Think about that more deeply.Yeah maybe I can just draft something by.Email or something.Yeah that'd be fine it doesn't have to.Be super formal sure and I noticed for.The future but there was the idea of a.Menu.Right that was sort of validator.Determined there was this idea of.You can replace by better with some.Depth metric. were there any other contenders for.Ways to do this well that was the.Question in the first.Thing right that was don't even allow to.Have more than one.Right .Yeah which which is a third option sure.Okay there's also the free-for-all.Option anarchy.I love the anarchy every time I'm.Listening to this I'm like this is we're.Talking about anarchy or we're talking.About like.Soviet style communism or we're talking.About just like free market capitalism i.Feel like there's ideologies behind all.These choices.You know john's like there should only.Be one one kind of corn flake.Right I can go for like three kinds of.Corn flakes just to be fair.Cool yeah you want the you know you're.On the special occasion it's your.Birthday conflict right.Man I hope you have some like something.Flat pink blueberry pancakes on your.Birthday not cornflakes. I don't even know okay.That's time thanks everybody and.Thanks everyone who's watching at home.Again. this discussion will continue on the.Stellar dev google group. which you can find a link to in.The actual event description.There's already a lot that's happened.There and we will continue to have these.Discussions in these meetings to start.To hammer out more of these proposals.But again two proposals a lot of.Discussion many things that we covered.Today but many more things to cover. look there to see what's happening.This conversation will happen both.Sort of asynchronously there and.Synchronously here in the future.And we really appreciate everyone for.Being here thanks everyone.
