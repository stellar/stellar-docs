All right let me know when those.Streams live.All right all right hello like thank you.So much for coming and also thank you.For bearing with us we had a few.Technical difficulties but we're able to.Get it started shortly.You know welcome everyone to the.Workshop my name is uncle liu I'm a.Program manager at the stella.Development foundation and i'll kick off.Today's workshop and this weekend's.Hackathon.You must know me from the many emails.I've sent you over the past few days.With the result of you either being here.In person or watching virtually..And like so .Again thanks all for coming and let's.Start off a little bit about sdf.So the Stellar development foundation or.Sdf for short is a non-profit.Organization founded in 2014.To support the development and growth of.The open source Stellar network and with.Seller stf seeks to unlock the world's.Economic potential by making money more.Fluid markets more open and people more.Empowered.The foundation helps Stellar maintain.Stellar's code base supports the.Technical and business communities.Around Stellar and provides thought.Leadership to regulators and other.Stakeholders so what is this network.That we're looking to support.Stellar is an open source blockchain.Network with the goal to provide.Financial infrastructure that's fast.Cost effective resilient and most.Importantly available and accessible to.Anyone regardless of where they live.And this is really important.Individual individual payment schemes.Are currently not interoperable.In the traditional financial system and.This leads to high fees and delays.Especially when transferring value.And it's also inequitable as it excludes.Billions of people who currently do not.Have access to traditional financial.Services.Blockchain technology is challenging us.To think about money and value in a new.Way presenting the opportunity to make.It better.More effective and more efficient.Its use cases go far beyond just.Investing in cryptocurrencies and.In much the same way that the internet.Democratized access to information.Stellar uses blockchain to democratize.Access to the financial system and it.Can make sending value around the world.As easy as sending an email. Stellar was founded in 2014 after bitcoin.And ethereum.Oh sorry I think my mic had some of my.Hair.And handles millions of transactions.Each day submitted by businesses banks.Governments and developers like.Yourselves all over the world.To build innovative financial products.And services.To date there are over 90.2000.Unique assets issued on Stellar and.There are over 6.6.Million accounts in existence.And in 2021 alone. the network processed over two.Billion operations from which 155.Million are payments.And this shows really that the network.Is built to scale and is actively used.And a Stellar is an energy efficient.Syncing mechanism specifically designed.For remittances and payments.Transactions are processed within.Seconds and cost way less than a penny.So what can you actually do with Stellar.On Stellar you can issue your own assets.As tokens on the network.Think stable coins like uscc.Cryptocurrencies real estate and of.Course nfds.Practically anything.Then you can also trade these tokens.Peer-to-peer.Using a built-in decentralized exchange.Or the recently added automatic market.Maker functionality.You can also transform currency as you.Send it which is a powerful feature for.Cross-border payments.But let's get back to why you're all.Here today the Stellar nft hackathon as.The main sponsors of this year's.South by southwest financial 3.0.Summit the Stellar development.Foundation is sponsoring a 48 hour.Hybrid hackathon starting right now that.Challenges the experience and newcomers.Alike to build a project on Stellar that.Incorporates the use of nfts.So we have ten thousand dollars worth in.Prizes worth of excellent prizes.Excellent Stellar's native currency and.These prizes will will be awarded to the.Best implementations of the following.Challenges.That combine the best of art and.Technology.So let's start with the artist challenge.So first up we have the Stellar nft.Artist challenge where you will create.Art based on a prompt and mint it as an.Nft enlightenment which is an nft.Marketplace on Stellar.And so the art prompt that we'll use for.This challenge will embody the spirit of.The metaverse so there is a very.Different many interpretations to what.The metaverse actually looks like so we.Encourage you to explore your inner.Artists and create an image video or.Audio file that reflect your version of.The metaphors in whatever form it takes.Awards for the most stunning nfts will.Be willow win awards totaling fifteen.Hundred dollars worth of xlm allocated.By the Stellar dev and nft community.And to participate in this particular.Challenge you can scan the qr code or.Enter bit.li.Stellar nft artist.And register.But.More relevant to this workshop we have.The Stellar nft wizard challenge where.You will build.Innovative nft experiences on Stellar.Go beyond just buying and selling and.Explore how these composable nfts open.Up opportunities for you as a developer.Prices totaling.8500 worth dollars worth of xlm will be.Awarded to the most interesting.Implementations.So to all of you watching right now head.Over to stellarnft.devpost.com.And make sure to register today.The deadline for both of these.Challenges is sunday march 13th at 2 30.P.m central time so go out there and.Build something awesome.And all communications will be in the.Stellar developer discord including the.Live chat for today's workshop so .Definitely I recommend if you want to.Ask any questions.Please scan the link or head over to the.Steli developer discord.And ask your questions in the workshop. live chat and all of the virtual.Identities and in personalities should.Have received an email with that link as.Well so if you're not able to scan it .Please look it up in your email.And now I leave this up for a bit while.I give the word to tyler to actually.Start our nft workshop.All right.I will add my welcome.Thank you all so much for attending.Thanks for your patience while we got.Ourselves settled.We're here to talk about nfts.Nfts are an incredible economic.Innovation being developed on the.Blockchain.But as with any innovation there's a lot.Of funk mixed in with the fresh.It's my aim today to focus on some of.The interesting use cases for nfts made.Possible by the incredible technical.Functionality of the blockchain they're.Built on.Specifically the Stellar blockchain.But who am I my name is tyler van der.Hoeven and I lead ecosystem engineering.At the Stellar development foundation.I've been at the SDF for just over two.Years but have been building on the.Stellar stack for.Almost six years.Now.I've built many various production and.Experimental products on Stellar.Everything from games and developer.Tooling to educational resources and.Funding programs.Stellar is a vibrant and expressive tech.Stack able to handle an incredibly.Diverse scope of financial use cases.Before we get into the meat of the talk.I'm going to quickly call out our.Stellar developer discord server as well.And ensure that everyone has a chance to.Join that.Myself and the rest of the devrel team.Will be hanging out there this weekend.To answer questions.And help you.As you continue your exciting journey.Into Stellar.And once you join that discord the.Server you're going to want to look look.For is the workshop live channel.For entering your qa we're going to have.A couple of sessions for q a.Today so if you're in that discord.Server if you have as you have questions.Enter those into that discord server.So we can get to those questions later.On during our q a.All right let's talk road map where are.We headed today.What will we be covering our talk is.Going to be divided into three main.Sections.We're going to talk about kind of the.Theory and background nft's explained.Talk about nfts more specifically on the.Stellar blockchain.And then finally we'll have a break in.There and then and then finally we'll.Come back to actually create an.Innovative Stellar nft so we'll get into.The into the codes.So so firstly we'll dive into nfts.Explain more generally so we'll define.Some terminology.Then we'll cover some basic technical.Underpinnings of nfts with a specific.Aim of ensuring that we lead with the.Tech of nfts and not the hype.This is a cart and horse scenario and we.Must ensure the order is correct or will.End up in the funk arena of nfts and.That is.Not where you want to be finally we'll.Spend a little time covering a specific.Use case involving creator economies.This is an area I believe is ripe for.Innovation and upset so as you're.Thinking through in your heads what.Might I build with nfts or what should i.Produce for this hackathon or even.Looking beyond.This is an area that I'm particularly.Interested in.The goal here simply to to properly.Orient our basic understanding of nfts.As technology first before use case and.Then to hopefully ignite some excitement.For what the proper orientation will.Then allow us to build.Next in section two of our talk we'll.Pivot our attention to observing nfts on.The Stellar blockchain we'll cover some.Basic Stellar terminology to ensure we.Don't get too lost in the woods of mumbo.Jumbo from there we'll take a closer.Look more specifically at the Stellar.Chain itself and its unique benefits.As the host chain for your nft.Initiatives.Next we'll finally we'll spend some.Time dissecting an actual nft. live on the Stellar blockchain.Observe its anatomy it's technical.Composition finally we'll end this.Section.The the second section here actually.Playing around with with the project.That we're going to be building.Later on after the break.The goal here to make a convincing.Argument for Stellar is your chain of.Choice for your next nft project and to.Crack the door.On what they might actually look like in.Practice.After this we'll have some we'll have.Some time for some questions.And then we'll move into a bit of a.Break.Finally we'll come back for section.Three after the break we'll.Come back .Start working on our project for the.Afternoon we'll actually dive into the.Code covering the the layout and design.Constraints criteria of our project to.Ensure that we're all on the same page.For what we'll actually be building then.We'll dive right into the code as i'll.Walk us through the repo that i've.Constructed for this project.It'll be a guided tour if you will.Through the wonderful world of.Innovative nfts on Stellar.Finally of course we'll end with a with.That repo and a website.Where you can you can all clone that and.Play around yourselves.In the hopes that that project will.Serve as a good.Launch pad for your own innovative nft.Projects.All right nfts explained.Let's cover some terminology there's.Really only three main terms that I feel.Like we really need to define at the.Outset terms that regardless of whether.Or not you agree with me or not.Are fundamental to our understanding of.The construction and utility of nfts.And these terms are fungible.Non-fungible and smart contracts we.Won't spend a lot of time.Believering these terms I'm just going.To define them for the context of this.Talk and then move on.So first fungible fungibility is the.Defining characteristic of an asset able.To be divided and interchanged.Indistinguishably from other units of.That same asset.So you can think about it like drinking.From a glass of water you can sip more.Or less water but it's all just water.Each drop is indistinguishable identical.Equal to every other drop in the glass.This is traditional this is like.Traditional currency so dollars dimes.Pennies it's just money divisible.Exchangeable and identical in value its.Utility is to be an avenue of exchange.For something else it is not itself the.Commodity.Alternatively you've got non-fungible so.Non-fungibility.Is aiming to be a commodity or a.Collectible.Remember nft stands for non-fungible.Token so an asset intended to be held.And enjoyed.Or at least to be a direct vehicle for.Those types of experiences non-fungible.Assets achieve this in their nature as.Indivisible assets where each one is a.Whole on its own.Distinguishable and unique.Where fungible assets behave like water.Non-fungible assets behave more like.Tickets.Both opening access to experiences and.Each one being unique at some level even.As there may be tickets to the same.Experience each one may be for like a.Different seat.Finally that brings us to smart.Contracts the final essential term in.The.In the this sort of trifecta of nfts.More generally and this I define as a.Decentralized computer function.Controlling cryptographic accounts.This is the the experience engine of our.Nft.Nfts are the ticket unlocking the.Experiences as defined by these smart.Contracts this is where all of the.Innovation lies in our work on nfts this.Is where we begin to do things others.Could only dream and hope for in.Previous generations what blockchain.Gives us is decentralized cryptographic.Computer functions.Is this this ability to unlock an.Entirely new way to interact and.Transact within our communities.Let's dive into that.A little more.So nfts let's talk about nfts explained.We start at the the fundamental.Foundational layer this is the the.Programmable contractible decentralized.Ticket concept we can move safely and.Powerful into a new realm.Of behaviors.So.Asking questions which must always.Return consistent results these aren't.Necessarily new questions but they've.Never been decentralized and assured to.Be consistent before there was always.Some third party entity in the middle.Able to alter state change the narrative.Disrupt the experience what nfts give us.Is a tech stack on which to build.Consistent programmable experiences.Without disinterested or potentially or.Eventually nefarious middlemen.And this is a revolutionary concept.And I really want to I really want it to.Sink in.And it's tough because nowhere else in.Our world do we operate like this.Absolutely every internet interaction.That we have today operates on fluid.Fundamentals prices change fees change.Morals change availability changes.Culture and ease of access change.Nothing is consistent.But math is computer programs are smart.Contracts on chain.Are.Tie that to internet experiences.And you've just changed for the better.Every online interaction for everyone.Everywhere instantly no if you're not.Getting it yet.Let's look into an example modern.Creator.Economies.So consider all the big social media.Platforms of our day instagram facebook.Tick tock youtube etsy spotify twitch.The app stores.These are all the way that we entertain.Ourselves today these are the platforms.Where creators get paid.It's where audiences pay to enjoy the.Art and creativity of their fellow.Humans it's a wonderful thing that these.Platforms exist but there's one singular.Fundamental flaw.The platforms are fluid there's no.Consistency or guarantee the only thing.That you can be sure of as a creator and.Consumer is that middlemen will squeeze.Out maximum profit margins between your.Money in and the creator's paycheck out.It's unfortunate.But now thanks to blockchain and nfts.It's unnecessary.The programming the contracts that run.These these platforms could and should.Be run on chain wherever the transfer of.Value is involved.Consistency can and should be added to.Ensure the link between creators and.Fans is as close to peer-to-peer as.Possible and then all decentralized and.And all of it decentralized such that no.Single third party can alter the fees.Shut down the content and suck as much.Life out of the experience as possible.So alternatively to that what we have.Today let's consider enlightenment a.Decentralized nft marketplace on Stellar.Which we'll observe.In use in a bit.The essential monetary transaction.Programming is all running directly on.Chain.Enlightenment the visual interface has.Been disassociated from the monetary.Compensation model artists and fans can.Connect directly via on-chain nft data.There's a world of work to be done.Beyond just marketplaces though we.Really need to move away from just.Curation and discovery to deeper.Connections and interactions.With those we already enjoy and.Appreciate.So I really consider this to be a.Greenfield space for innovation.And an entirely new way of looking at.Creator economies it's really a creator.Micro economy where interactions and.Experiences are much smaller and more.Catered directly between artists and.Fans.Living room jam sessions kind of versus.Just another picture and an endless feed.Of content.Nfts allow for this we just need to.Build for it.So this brings us to our second section.Where we move away from nfts more.Generally and begin to look specifically.At Stellar.So just like nfts more generally there.Are some terminologies some some terms.That we should be familiar with before.Jumping into.To Stellar more deeply first is.Core.Core is the fundamental software Stellar.Validators used to run the Stellar.Blockchain all the features and.Functions describing what Stellar can.And cannot do live here in the core.Program.That is Stellar.Next horizon the api access point.Unpacking core data into a collection of.Usable json endpoints for clients to.Connect with both on the browser and on.The server.For the applications we'll build on.Stellar most of your interactions when.You're building Stellar applications.Will be interacting with horizon at some.Level.Another one that you'll see pop up a lot.We talked about just a moment ago is.Lightmint this is our premier nfc.Marketplace which is pioneering nft best.Practices for the Stellar ecosystem.Another one is ipfs interplanetary file.System.It's the de facto decentralized nft.Metadata database so it's not a Stellar.But it is one that we can easily.Integrate with when constructing our.Stellar nfts.That's that's one you're going to see.Popping up a lot.Finally trust lines.This is a Stellar specific technology.These are assets so.Trust lines are assets on Stellar they.Exist as trust lines for an asset to.Exist a holder must first opt in.By creating a trust line to the assets.Issuing account this is accomplished via.A change trust operation which we'll.Observe later on when we dive into our.Project.So these are terminologies you're going.To see popping up a lot in different.Documentation.And we'll cover some of these in more.Detail later on.Next why build on Stellar.There are many reasons you might choose.To build on Stellar not least of which.Are things like Stellar being fast.Accessible affordable lean secure.Scalable compliance friendly and.Reliable.However of all these significant.Benefits there's one often unsung hero.In this entourage of excellence that i.Would really like to highlight and that.Is that Stellar is equitable.Stellar is a purpose-built blockchain on.A mission to become the global payment.Standard.And at the floor of this objective is.The fundamental technical requirement.That Stellar maintain accessibility.The only way to become a global payment.Standard is if everyone in the world is.Able to access and benefit from the.From this foundation of accessibility.Comes reliability.But I don't I don't really mean or i.Don't just mean that the network stays.Up I more primarily mean the reliability.That comes from the actual governance.Structure.Of the Stellar chain.Blockchains are expensive.And validators shoulder that cost.The node's running the core software and.Actually providing the decentralization.Of our network.In most other chains the compensation.For this service is provided in the form.Of transaction fees where validators are.Paid by the network for running the.Network.It's a reasonable model but it has one.Glaring flaw in that now validators are.Directly incentivized to ensure the.Network is maximizing their profit.Returns.For running the network versus using the.So in this world high fees and.Inefficiencies are a good thing for.Validators.On Stellar this struggle is nowhere to.Be seen because the network validators.Have the same incentives as the users.They derive profit from their own.Projects using Stellar versus.Those validators actually running.Stellar validators are not paid by.Stellar they are paid same as you to.Build profitable businesses on the.This fosters a network of low fees and.Innovation for improving network.Efficiencies.When we all make money the same way.We're all aligned on the same mission we.Have a recipe for consistent reliable.And an accessible.An accessible network for building.Long-term.Legitimate profitable businesses.Finally let's let's move away from.Theory to some practice. what does an nft on instiller.Actually look like what are the.Components necessary to pull one off.There are three primary components.An nft issuing account.The nft metadata or the the link to the.Asset.And then there are there's nft issuing.Criteria or the smart contract things.Like timed auctions the royalty payments.Will be building today also things like.Holder restrictions if.You have different controls on your.I'm going to walk through the anatomy.Of an nft on Stellar.Quickly so we're going to jump off of.Our slides for a moment.So this is over on lightmint.This is one of my.Nft projects that I built way back when.I was getting started.It's just a very simple algorithmic.Created.Pixel glyph there's some neural network.That's running you can see did a little.Phrase and it'll build you an.Interesting nft.So it exists as an image a title.Description it's got some tags and stuff.If we scroll down here to our details.You can see the ipfs hash right here.Which would hold.If we were to click on that it would.Pull up an actual json file this is this.Is a kind of standard way of describing.An nft from an ipfs hash.So it's got that title description.An image link.If we were to actually open up that.Image link you can see the the picture.Here on ipfs.If we open up the the actual asset on.Stellar so I'm going to open up Stellar.Expert which is a blockchain explorer.For Stellar.You can see the asset right here we've.Got our issuing accounts kind of hidden.Behind this.Our issuing account right here.You can see that ipfs hash that's been.Associated with our issuing account so a.Stellar account issues the nft other.Users can then open up a trust line for.That asset.At which point the nft.Can move to that account whenever it's.Sold. there's there's a couple other pieces.Of information here if you scroll down.You can see some of the history of the.Nft some different operations for when.It was bought.And sold.We've already mentioned the the ipfs.Hash there you've got that asset.Code.But all kind of going back to that.Original.Issuing account and then when you're on.Lightmint it's just providing this.Visual interface to something that.Exists on chain so if lightman were to.Go down you could very easily spin up.Some other interface and begin using.Horizon to pull in that in that.Information to pull in that data.And show the .Show the nft again.So that particular nft is really.Primarily it just deals in those first.Two elements. an nft issuing account and the.Metadata.The the issuing criteria or smart.Contract ability of the nft when.Interacting directly on the sterile will.Be somewhat limiting in that particular.Scenario.You have the native Stellar decks for.Buying and selling nfts but that's about.It if you want to add more conditions to.The experience of your nft you'll need.To look beyond these.Vanilla nfts and move into the realm of.What I'm calling innovative nfts where.You combine arbitrary smart contract.Logic with this basic issuing account.And stored metadata.For that.We turn to a project that I launched.In fall last year.So nft.klpl.com.I've got a couple of.Innovative smart nfts that i've built.We'll go ahead and take a look at that.I'm going to switch over here again so.I've got a few of them.I became interested in nfts background.August of last year and began just kind.Of poking around at what they were what.You could do with them.Quickly kind of got bored of just making.Art and putting it on chain and wanted.To do something a little different more.Interesting more programmed and that's.Where smart nfcs came from.The one that we're going to look at.Today is called the dig i've only done.Three of these.But they're all quite different so i.Leave it to you to explore the rest of.Those but if we look at the dig.This is a.An nft experience so it's like a social.Experiment.Experience nft.It's this singular nft that's this pixel.Grid 40 by 40 pixels.And the way that you interact with it is.Actually by purchasing individual pixels.Off of the grid so users will come in.They pick they kind of use the interface.To poke a couple of pixels the ones that.They want to buy.And then as this pic as this nft kind.Of becomes minted as it gets as a as.These plot tokens is what they're called.Get purchased you get closer and closer.To the final nft you can see right here.We've actually got a few left so the.Final nft hasn't actually minted yet.Does look like they've kind of uncovered.The wizard in the middle so the secret's.Been revealed I guess.If I were to log in with my albedo.Account which is one of our if you've.Ever used metamask this is kind of.Similar.You can see my.My plot token that I purchased.Somewhere down in here.So there's a couple of different things.Going on in this particular smart nft or.Innovative nft.And that is that there is an nft that.Will be minted but only after certain.Conditions have been met and in this.Case there are two.First all of the pixels have to be.Minted for this final nft to.To be minted and then second if you.Actually want to get this final nft you.Have to hold one of these plot tokens so.Only plot token holders only people who.Participated in the dig will actually be.Eligible to hold or claim this final nft.And so you kind of set up this arbitrary.Logic within your smart contract.Which create this interesting experience.For an nft.If you go and read our.Drop document here you can see.I've outlined.All of the different criteria you know.What's going on.For this nft the different operations.Within the command if you go and look at.There's a guest that has the.The actual code for the smart contract.There's actually three different.Commands in this single smart contract.One for digging up plot tokens.One for minting which you can't actually.Run yet because the nft hasn't been.Fully dug.And then there'll be another one that'll.Open up as well once the mint command.Has been run.Where you can issue yourself.For free essentially that final nft.If you hold a plot token so you can go.Through these different.Functions here that actually provide the.Criteria under which those individual.Commands can actually be run.So again i've done a couple of these.They've all been a lot of fun. to really start to explore what can.We do beyond just putting art on chain.You can build these little.Microcosmic experiences these little.Games where yes it might be pretty.Focused there may not be millions of.People that interact with this.But you don't need that if you can build.Something interesting and something.Focused.You can get your small community your.People to get engaged with the content.That you're generating without having to.Go through any specific third party.Next..That's that's the the kale pale.Collection it's it's quite fancy.But it's a little bit too deep for our.First stab at an innovative nft for for.Our time here this afternoon.For that we're finally going to turn to.The afternoon's task at hand.And that's the project that we'll be.Covering today an innovative royalty.Payments.Nft project.So I'm going to walk through this real.Quick before we have some questions.Again if you've got questions make sure.You're in that.Discord.Pop those into the chat we'll answer.Those in just a moment.But I'm going to walk through the.Project that we're actually going to be.Building.Today so this is a royalty payments nft.So i've got an account.Over in our gorgeous interface.I've got a user account that i've.Generated.So this is this is going to be the.Original minting account.For the nft.Or the nfts that this account mints if.You remember each nft has its own.Issuing account so we're going to go.Ahead and generate a brand new issuing.Account.Which will be the the host of our new.Nft that we're about to mint.The next thing we're going to need is an.Ipfs hash.And I'm using.Nft.storage.To host my nfts.The images.And i've gone ahead and uploaded one.Here.I'm gonna grab that.We've got our new issuing account right.Funded.We'll put in this ipfs hash and then.We'll click mint and when we do.That ipfs hash will be attached to the.Issuing account that we just generated.Up above.Kind of bundling it all together and.Then issuing my user account.This brand new.Nft so we'll go ahead and do that.And this is actually happening right now.On chain.All of these nfts are actually going on.To it's right now the Stellar test net.But we've actually literally gone and.Minted a brand new nft on the Stellar.Test net so there it is that's my nft.I'm going to go ahead and sell this I'm.Going to sell it for.100 xlm you'll remember.That we're actually.Adding a 10 royalty so what's 10 of 100.It's 10 so this nft will actually be.Being sold for 110.Xlm if we go and open up.An alternative.Browser here I'm going to pull this over.I'm also going to open up.Browsers to work with let's go ahead and.Refresh this we should see that.Nft available for sale right there.We can see those nfts.Available to purchase I'm going to go.Ahead and buy this one so this is.We will go down 110 here and we should.Go up 110 for the account that actually.Owns it.So we'll.Make that purchase over on this page.We're able to sell it now because.We're the owner if we refresh this.Browser over here and I'm actually just.Going to shrink this down for a moment.We can see that that now has 110.if we.Sell this let's say we'll do 50.They're going to sell their xlm at a.Loss bummer.And then we'll refresh this page we'll.Should see 55 because it's the the 50.Plus the five for the 10 royalty.And if we buy this what should happen.This account should receive.50 and this account should actually.Receive five because the royalty payment.Is going from.The purchase here where five goes over.To the original minter as a royalty.Payment and then 50 goes to the user.Who's actually selling so we should see.This go up by 50.And this one should go to 10 1 5.And that's exactly what happened so our.Contract is working. the nft is actually being able to.It's being sold between these two.Accounts so these two accounts.Interacting directly with each other not.Involving the minting account at all and.Yet this account is consistently.Receiving its royalty payments as the.Nft is sold.By other users.So this is this is what we're going.To be building today.After a little bit of.Q a so if you're interested excited.Intrigued. I know I am. but before we before we go to that.We're gonna we've kind of gotten a taste.We've gotten a nice overlook of nfts in.General.Nfts on Stellar we'll take a a quick.Moment for some for some q a off of our.Discord server.We'll take a break for about 15 minutes.Or so.And then we'll come back for our.Afternoon of actually looking at looking.At the programming looking at the code.Do we have questions off of discord are.We good.Let's go ahead and start oops let's .Let's start with .Some discord ones.Nope.No in fact the application we'll be.Building will not be fully decentralized.For sake of making it a lot simpler to.Actually initiate.But adding decentralization. isn't super difficult so it's but.It's not required for the hackathon..Yeah sorry the question is does the.Go let's go back just real quick to the.First question so that I can read that.Off again.No no just ask me the first question.Again just so I can get it for the folks.On online does it need to be fully.Decentralized so the question was does.The application does the hackathon.App need to be fully decentralized for.It to be valid and no it does not .It's fine if it's running.Centralized so long as it's actually on.Stellar .And then the second question.Was.Do they need to have like a user.Interface.For interact there needs to be something.That we can actually test and use and.Building a gui is probably a really good.Way to do that if you've got like api.Docs that might be sufficient but there.Has to be something for us to actually. test and play around with so.I would say a soft yes there needs to be.Something to play with.Good question anything else.All right do we have any questions.From the audience anybody have anything.Pressing on their mind before we move.To a break.All right perfect.We will move to a break and then come.Back in about 15 minutes or so and start.Diving into our actual project.All right we're gonna jump back to our.Seats.Or you can stand you know.If you want.All right so who's ready to start.Getting into some code.Before we do though.I've got two slides left that I want to.Cover about both the technical blueprint.For a project along with the.Relationship between how our seller nft. exists and it's like the relationship.Between our seller nft and what I'm.Calling the nft auth server.So first the design.Of our nft.So what we're going to build.What we're going to build is.An application that configures an.Issuing account.Attaches metadata to it.Issues that nft.And then finally obviously it will.Require that all sales of the nft.Sends back a 10 royalty payment to the.Original minting account whenever the.Next how we're going to build it there's.Going to be a client interface so this.Is the website or marketplace for our.Royalty payment nft.And we're also going to build an.Authorization server.So that'll be that the authorization.Server auth server is a Stellar.Transaction builder.That opens and closes authorization for.Our innovative nft ensuring that royalty.Payments are in fact being issued.Whenever the nft. is sold.So finally tying this all together.Let's talk a little bit more about .About our auth server as it relates to.Asset authorization controls so there.Was a question about.Decentralization.So let's talk about that just a little.Bit.Seller's design includes account and.Trustline controls.There are a few different types of.Controls.That assets can have but in our case.We're going to configure full control.Where an asset exists.As an entirely permissioned asset.Its movement then its ability to be.Bought sold and even held is entirely.Under the control of the issuing account.This will allow us to insert our royalty.Payment logic in between.Some authorization operations when.Building Stellar transactions.So the transaction building will be.Taking place on our auth server.Right now this auth server will be.Hosted by us.Not very decentralized.But for those taking notes this.Liability can be removed right now via.An ecosystem initiative called Stellar.Turrets.Which takes the auth server smart.Contracts that we'll be building and.Executes them on a decentralized network.Of servers.Alternatively.The seller development foundation sdf.Has recently announced an exciting.New initiative code named jump can it.Project jump canon which will bring this.Auth server functionality straight to.Layer one.So in a word smart contracts directly on.Stellar.With our nft design understood and the.Foundations of asset authorization laid.We can finally turn to our code editor.To begin walking through the repo.Containing our innovative royalty.Project so I'm going to switch real.Quick to.Mirror my displays.So that I can.Code here.So inside our project and i'll give you.The repo if you haven't already found it.Yet.Some of you.Aggressive personalities probably.Already found my repo.But I'm going to be walking through the.Repo i'll share it with you.Afterwards.But try and follow with me as we walk.Through the project that we have and.Then when you get your own.Version of the repo you can kind of dive.Through what we've got so we've got two.Different directories here one is our.Client and one is our server the client.Obviously being the front end of the.Application and the server being the.Back end auth server for our application.Let's go ahead and start.On the client side.So this would be the website when we.Load in.Something like our.Application not sure why that's.There we go.And so let's walk through that i've put.Some comments in the most. used parts of the the application.So I'm not going to talk about css or.Html much today so we'll go ahead and.Close those ones up.What I want to walk through more.Particularly.Are the actual methods that we're using.To mint an nft.And then offer or trade the nft so those.Are the two primary functions happening.In our.Frontend application right where you can.Mint a brand new nft and then you can.Offer it for sale you can buy it so.There's really just two interactions but.The first thing.Before we can even get to that minting.Of an nft is when we actually click.Generate.For creating a new public key so inside.Of methods i've got three javascript.Files that i.Want to walk through the first one being.Creating an account.So this this is triggered by the buttons.That you click.When you generate or regenerate kind of.Create a new user account.And that lives inside of this.Method right here so let's walk through.It and a lot of this is like once we've.Covered one of these the way that you.Build Stellar transactions is kind of.Always the same so it'll start to feel a.Little bit repetitive but that's a good.Thing.When we initially create an account what.We need to do is generate a brand new.Key pair so 910 here.We generate a new public private key.Pair for for Stellar.And since we're on test net we can use.Friendbot to go ahead and create that.Account so that it exists on changes.Because you have a.Valid public private key fair doesn't.Mean that it automatically exists on.Chain you need to fund it you need to.Get it.Into a state where it exists on chain it.Can begin to receive or be the issuing.Account for an nft or hold nfts.So we're using friendbot here to do that.Where we actually get some free it's.Kind of like a faucet if you've ever.Used those before.Get some free test net lumens.So we call that.Then we're going to load up.The account.To get its status as on chain so after.We've created it we can then call it to.Load up its current state on chain.If we're clicking the button where it's.Just generating a new user account we go.Ahead and exit out of.The then statement.And we just say super duper thanks for.The new account and i'll assign it to my.User. that's what happens when you click on.This generator regenerate button right.If however you are actually.Creating a new issuing account we need.To do a little bit more. what we need to do is create the.Account and then we actually need to.Associate a brand new signer to that.Account so Stellar has a multi-sig built.Right in at layer one.Where you can attach multiple signers.When you initially create a public.Private key pair.The secret key you create for the public.Key those two things are connected when.You go and fund it that private key is.What gives you access to do anything.With the public key make payments send.Operations etc.But you can also associate other private.Keys other keys to that account where.They also will have control over that.Account and in our case that's what we.Need to do remember every nft.Has.Its own issuing account so in your nft.Project scenario you've got.Dozens hundreds of.Individual nfts but each one of those.Needs to be controlled by this.Authorization server where it's kind of.Inserting itself in the middle saying.Like oh.Before you do anything we need to make.Sure that if the sale is happening that.An nft a royalty payment is going back.To the original mentor you can't just.Do whatever you want with this nft.There's an authorization server sitting.In the middle.That's ensuring royalty payments go out.Whenever it's appropriate.And so for that.Check to happen you need.You need a signer.But rather than storing.Hundreds and hundreds and hundreds of.Secret seeds in your database we're.Going to attach one.To every single issuing account so every.Single new nft that we mint we're going.To add this same.Signer that will now act as.The intermediary sort of saying okay i.Have permission to sign for this nft.Anytime you're trying to do something.With it.And so before that can happen we need to.Add this signer to each of these new.Issuing accounts and so that's what.We're doing right here on line. 28 through.33.We're adding this new set operations.Operation so right here in this block in.This if block we're building a new.Transaction for the new account that we.Just created we're on testnet here you.Can read a little bit more information.About fees or network passphrases and.Then on this transaction we're adding a.Single.Operation and this is the set options.Operation where this signer is added.This signer comes from.An environment variable on the client.Side which is the public key.For the auth servers signer.That auth server signer again being that.Single signing key that will be attached.To every single new nft that's minted so.Now the auth server has control over.Every single nft that's being issued.Hopefully this is sending off some red.Flags in your mind this is where the.Decentralization piece will come in.Right you don't want one account.Controlling every single nft on your.Platform.So in the Stellar turrets model which i.Mentioned before you actually add lots.Of different signing keys each holding a.Different weight of the threshold right.So if the if the account has let's say a.Weight of 10 and each of these signers.Has a threshold of one you would need 10.To agree before anything could happen.With that nft.In the on-chain smart contract model the.Actual account itself would be.Controlled by the code there wouldn't.Necessarily be.Some signer it would be the contract.Itself which would control the account.The the contract would act as a signer.And so this right here super useful.Really interesting but this is where the.Decentralization piece becomes really.Important if you were to try and ship.This.More widely.Moving on after we build our transaction.We can then get it signed.And then submit it to the network.Where this issuing account now has the.Signing key.For the authorization server.At that point our account is fully ready.To have nft data associated to it.And that's where api mint command comes.In.So we move after we create our account.We go to api mint this is what comes in.Whenever you have your ipfs hash.Input there will be a button for minting.That will pop up.We don't want to mint until we actually.Have an ipfs hash so if we actually were.To click this.I don't think abc is probably a valid.Ipfs hash but.My check is not particularly. intelligent there's something here.And so then the mint button becomes.Available that button.Fires off this api mint. function.Inside here we're actually all we're.Doing is calling our authorization.Server.Because we need to set up this new.Issuing account with the ipfs hash that.We want to attach which becomes the the.Representation of what our nrft actually.Behaves as.So this we're going to look at this on.The server but this is a a fetch command.That's made to our auth server.We're going to pass it the user account.The issuer account that ipfs hash.That we we input.And then it's going to go to the auth.Server the auth server is going to make.A check make sure everything looks fine.It's going to the out server is actually.Going to build the transaction so we.Don't build the transaction on the.Client side we want to really be sure.That the transaction that's being built.Is exactly what we want it's kind of the.Building a smart contract on the fly if.You will so the request goes to the.Server the server will build this xdr.Will build this transaction the Stellar.Transaction according to whatever your.Smart contract logic is and then send.That transaction back to the client for.Any final signatures that might be.Needed for that transaction to be valid.In our case the user needs to sign it.And we'll look at why that's the case.In a moment when we go to the server to.See what transaction is actually being.Built.Finally then just like before.Once it's signed we can submit it to the.At this point I think it's probably.Worth actually going to the server and.Looking at what's going on here there's.Not a lot.That's going on inside of our server we.Have some environment variables which.Actually denote.Those.Signer secrets there's also a sponsor.Secret which we'll look at in a minute.But this is the signer secret this is.The actual signing key that will be the.Authority for all of the nfts that are.Issued from our project.This is the signing key that will be.That will be added to any xdr in each.Stellar transaction xdr.Seller transaction same thing that will.Be.Generated from the back end of our.Application from our auth server.We've got an index here which is our.Router just a very simple collection of.Some routes you can see contract right.Here and then based off of the command.Of mint or offer.It'll go here and then there's a little.Switch statement if it's a mint it runs.The mint.Function if it's an offer it runs the.Offer function and those.Exist inside of the contracts directory.And so let's go ahead and look at our.Mint.Function here on the server.And so this is going to look kind of.Familiar remember that the Stellar.Sdk that we're using this Stellar base.In this case.Works on both the client and the server.Side.So what you will build when you build.Transactions on the client it'll be very.Similar to how you build it on a server.We go ahead and.Instantiate the function here this mint.Function we can gather our.Arguments you'll notice these look very.Similar to what we passed in on the.Client side.We gather those put them into some.Consts.We instantiate nft as our asset this is.Going to be the.Nft asset that we're actually going to.Issue that this issuing account is going.To send out it's going to be called nft.That'll be the code for it.And then we go and make a quick fetch.On horizon itself looking up this.Got to make sure that it actually exists.And then once we pull in that.Information we can begin to use.That account's information so that the.User account they're going to behave as.The source for any fees that are.Incurred when we actually submit the.Transaction to the network.And then once we have that.It's time to actually begin building out.Our.Transaction.So Stellar transactions exist kind of.These envelopes that you put operations.Into.Transactions on Stellar are atomic which.Means you can put lots of different.Operations into a Stellar transaction.This kind of chain of events and either.All succeeds or it all fails together.You don't kind of have a partially.Successful Stellar transaction the whole.Thing succeeds or fails together and.This allows you to build some really.Complex and relational logic in your.Transaction you can build you can.Include up to a hundred operations so.That's a lot of logic that you can.Include into a seller transaction and.Again it will all succeed or fail.Together you kind of you don't have to.Do this like oops it failed at this.Point now we need to like reverse go.Back up the chain and undo whatever we.Did before.And this becomes really important when.We start getting into the offer contract.Right here we've got a collection of.These different operations inside of our.Mint contract and the first one you'll.Notice is set options.Where we are setting flags an inflation.Destination and then the source.The flags here.This is where we're actually locking.Down the issuing account we're saying.This asset is an authorized asset it's a.Controlled asset no one's allowed to do.Anything with this asset unless the.Issuing account permits it unless we say.You can look there's a couple of.Different flags that you can set.Inside of the set options you can look.Those up later but 15 that's kind of our.Max right now we're I'm allowed to do.Anything is the issuing account I have.Full control over this asset.The inflation destination .Stellar used to have an inflation.Mechanic that was retired by the.Ecosystem decided that it wasn't all.That helpful but there's still a field.That exists on Stellar accounts that you. I'm kind of now sub-opting I'm taking.It over and I'm using it to store.The address for the the original mentor.So that when we come back in the future.And we're trying to make offers I know.Who am I supposed to send the royalty.Payment to this is where I'm going to.Store that.So I'm going I'm gonna go ahead and.Include it right here the user account.The original minter.Next up we've got a manage data.Operation where that ipfs hash is being.Stored nothing fancy going on there.You've got a name and a value so ipfs.Hash so we know what it what key to look.For and then the value of that.We're going to change trust if you.Remember trust lines this is where this.Is going to come into play.You've got we're going to put this on.Put this on the user account the user.Account now is opening up trust for the.Nft right so the issuing account in this.Minting transaction is going to the nft.Is going to exist.But a user still needs to trust it the.User doesn't hold the nft yet the.Issuing account needs to send it but it.Can't send it.Unless the user trusts it first so.That's what we're doing here in change.Trust we're opening up a trust line.Next there are trustline flags this is.Where.This is kind of the magic part of an.Authorized asset anything that exists.Between the set trustline flags.Authorized true and authorized false.This is kind of the.What do I want to allow.That I couldn't.If this asset were not authorized so.Because this is an authorized asset.Now I'm allowed to insert arbitrary.Logic in between in our case it's a.Royalty payment so.I'm trusting the user account to hold.This asset yes they're allowed to.And.Inside of this authorization I'm making.A payment.I'm going to send to the nft now that.It's trusted I'm going to send the nft.Back to.The user for for one one nft that.They're going to hold and then I'm going.To lock that asset back down immediately.So they can hold the asset the asset.Exists in the user account but they're.Not allowed to do anything with it they.Can't burn it.They can't sell it.The only way they're going to be allowed.To do anything else with this nft is to.Go back to the issuing account and get.Some authorization to do something with.It.So at this point again because it's.Atomic you kind of have this chain of.Logic that's going down of these.Different operations that are happening.We open up the trust line.We authorize it.We send the payment and then we.De-authorize it so the user now has it.Once this transaction executes but they.Can't do anything with it.Finally then we've kind of bundle up.This whole transaction into.The the xdr that we send back to the.Client so this is where we take that.Transaction we convert it.Xdr is kind of like json it's a little.Bit more compact but same sort of thing.Where you're just taking some.Instructions and encoding it into a nice.Little package that you can send back.To the to the client in this case.So that is our mint.Method.And so at this point once we've minted.An nft.The user holds that nft they can't the.The original minter holds that nft they.Except whatever the.Authorization server allows for and the.Only thing in this case in our case that.The authorization server allows for is.This api.Offer function.And this is where you can start to get.Really creative like minting the the.Process that i've used for minting will.Kind of be the same.You need to have an authorized asset.That you.Can now control what it's allowed to do.So that people can't just bypass your.Royalty payments or whatever other logic.You have.But after it's been authorized after you.Know that you have an asset that is off.Controlled now you can insert whatever.Kind of logic you want.In our case we're going to do royalty.Payments but you've seen previously i.Had a whole bunch of random arbitrary.Logic inserted between authorizing open.And closed in different transactions.So this is where you're really going to.Start to look at what kind of creative.Interesting things do I want to do.In my case it's royalty payments so.Let's look at that.When you actually go to. on the client side so we're back.Inside the client application.We've got this api offer method so let's.Just walk through it briefly.You've got a sell side or a buy side so.There's two things that are going to.Happen when you have an nft either.You're going to be selling it or you're.Going to be buying it those are the only.Two things you can do. and if you're the only way you can.Buy it is if somebody else is selling it.And so we're going to assume that if you.Don't have it.If you if you do have it that you're.Selling it and if you don't have it.You're buying it right so there's it's a.One of one nft.And so if it does exist. out there as an offer you're going to.Be trying to buy it otherwise if you.Have it you're going to be trying to.Sell it.And so here if you're selling it.You can enter the the sale price for it.I don't actually have any nfts at the.Moment I think if I go to.One of my I think.This one.Holds it at the moment.So I can go and sell that.That little modal pops up we'll put in.That hundred and then this one will be.For sale and we can move.Into seeing that.On this page here.Where we have the option to buy it so.When we sold that right then this is the.Modal that popped up we're on the buy we.Were on the sell side.We configure our price we make sure that.The price is actually something valid.We need to go and find the issuing.Account because that's the account.That's going to hold information about.Who the.Royalty payment should be going to. it's also going to include what nft.Are you selling.And do you actually own it do you have.The right to sell it.Next up we actually call.The the auth server.Contract offers we have mint and we also.Had offer this one is offer.We've got a couple of different.Arguments here you got your user account.Issuer account the offer id you can.Delete open offers.Otherwise you'll be creating a brand new.One.The price that you're inputting. in our case that was that was 100.And then depending on whether or not.It's a buy or a sell you're either going.To be buying an nft.Or you're going to be.Buying I guess xlm right so.It's always going to be putting out this.Offer of I want to give an nft and.Receive xlm or I want to get an nft. and give.Xlm.These are some of these things are.Hard-coded if you wanted to get more.Complex and do other assets you.Absolutely could it doesn't have to be.Done in xlm you can use other assets.There's loads and loads of them as you.Saw previously.In our example to keep things simple we.Are doing xlm for nfts but just be aware.That it's not that difficult actually to.Open up access for for assets other.Than just native xlm.Then just like before we're going to.Make that call to the auth server.Everything's going to we're going to.Check everything make sure it's all.Legitimate then that auth server is.Going to build a transaction and send.That xdr back to the client.The client will then sign that.Sign that transaction and submit it to.The network.So this point.We should actually look at.That particular.Contract over on our.So this is the.This one right here is the offer.So there's a little bit more going on.Here but it's not still not that complex.Essentially we're trying to achieve the.Same thing we're trying to build an xdr.Which is either going to sell an nft.Or buy an nft.Depending on this the state.And the requester the actual user.Account that's coming in and the.Whether or not the that user holds or is.Looking to hold the nft.So we set up some very basic checks we.Get the parameters from.The request.Maybe some of those comments and then.What we do here very similar to what we.Did before we go to the horizon we load.Up the account the user account is going.To be the source of this transaction so.They will consume any fees again.For this transaction.Then we're going to look up the nft.Balance for the user account again this.Is going to be this toggle that if you.Hold the nft you're going to be a seller.If you don't have the nft you're going.To be a buyer.We need to make sure that the user.Regardless of whether or not they're.Buying or selling like you can't do.Anything with an nft if you don't hold.It remember we need that trust line.Opened to be able to do anything with.This nft so the very first thing we're.Going to do is check.If you don't have an nft balance we.Definitely need to open up a trust line.So we do that first.The next thing again regardless of.Whether you're buying or you're selling.You need permission from the auth server.To do anything with this asset and so.We're going to open up that trustline.Flag again and say.As long as this trustline flag is open.So long as you have permission you're.Authorized anything that comes next.You're allowed to do and then we'll lock.It back down again at the end.And so we open up that kind of.Regardless of whether you're buying or.Selling you're going to need.Permission so we're going to open up.That authorization.And then we do the toggle.Of whether or not you're buying or.You're selling if you have an nft.Balance and that balance is greater than.Zero if you hold the nft then you are.Going to be trying to sell it.We're going to grab.And we're going to begin so the sponsor.Account we'll get to this in just a.Minute.This is actually something very helpful.When we're starting to deal with.Horizon and.Showcasing data so we'll skip that for.Just a moment and come back to it.But if you're a seller of the nft the.Thing that you that we really need to be.Doing is is manage a sell offer so.There's a Stellar operation called.Manage sell offer where you take a.Selling asset and a buying asset.An amount that you're trying to sell and.The price that you're trying to sell it.At and then the offer id in our case is.Going to be zero if it's not zero you're.Going to be deleting the offer.But if you're creating a brand new offer.Then that will be zero.So essentially you'll be selling the nft.Buying xlm.You'll be selling one whole nft.For whatever price you set on the client.And then we're going to close that.Sponsorship again we'll come back to.That in just a bit.And so that would be the if statement if.You are selling an entity the only thing.That you need to do if you're selling.The nft is get the nft up on.The the Stellar decks to actually put it.Up for sale so that other people can see.It for sale and then offer to buy it.And so if we skip this other else.Statement.The only thing the only other thing that.That.That exists in that transaction is to.Close.The trustline flags.That we opened up at the very beginning.We closed that so anything that happens.In between in this case the only thing.That's happening is the offer.To open up that offer we lock that down.Now the offer exists on the decks but.You can't do anything else with it.You've been given permission by the auth.To put that nft up for sale.But now you can't do anything else with.And so that xdr that transaction goes.Back to the client and then it can be.Signed and submitted so if we were.Actually.That's what we did.Over here when we created the offer you.Can see delete offer that would.Obviously go take the offer id send it.Back up.Hey we're we're going to delete that.Offer it's removed if we go back and we.Refresh we'll see that there are no nfts.Available to purchase at the moment.So let's go ahead and.Put that back up.So now we've got the ability to sell and.Delete offers as an owner of an nft but.What if we want to buy an nft so we've.Got either we don't have a trustline.Open yet for this nft or we do but it's.Zero we don't we don't actually hold the.Nft yet.In that case we're inside of our else.Statement right.So we've got.Either we've got no nft balance or the.Balance is.Zero less than zero .That's when this else statement. will will fire off.And so in this case what do we need to.Do this is where things get a little bit.Interesting with our inflation.Destination when you hold the nft.And you're offering it for sale there's.No royalty payments involved right i.Don't want to make a royalty payment if.The if the nft is not actually changing.Hands if nobody's actually purchased it.If it hasn't swapped so in that case no.Royalty payment is being made.The only time we actually want the.Royalty payment to be made is when a.Payment is being made when when the nft.Is changing hands.And in that case we need to look up the.Inflation destination that comes again.From our issuing account it's stored.Inside of the inflation destination from.When we were originally minting.And so we grabbed that inflation.Destination that's what's going to be.Used in our royalty payment here as the.Second op.But the first stop we're actually using.A path payment strict receive you might.Wonder why we're not using just a.Counter offer and that's because we have.To be absolutely sure.In this case that and that the nft is.Actually changing hands right can you.Imagine.If we actually made a royalty payment.Using an offer but the offer wasn't.Actually taken but the royalty payment.Was so you would lose your money from.Your royalty payment but you didn't.Actually get an nft.Offers don't have to be taken.Necessarily especially if like.The the offer maybe existed but they.Deleted it right as soon as you were.Trying to take it so your offer went up.To buy an nft but there now is no nft to.Take but the royalty payment would still.Go through if we were just making an.Offer and now there's an offer to sell.The nf.There's an offer to buy the nft. but nobody's at that point in time.Selling the nft but your royalty payment.Got taken. that would be unfortunate so to cover.That case we're actually doing a path.Payment strict receive.And this consumes an offer it is.Guaranteed to consume an offer.For whatever criteria you put inside and.If there if it doesn't succeed if you.Don't meet the criteria of the path.Payment the actual transaction will fail.And so this is a really useful way to.Ensure that the nft has actually changed.Hands before the royalty payment is.Consumed so in this case what's our send.Asset we are sending xlm.And we're sending up to.The price for whatever the nft exists as.In our case it's a 55 lumens I think at.This point.Actually it might be 110.But regardless that's the max we're.Willing to send.The destination is our user account and.The source is our user account the the.User is actually doing like a self pay.If you ever done a market order.On coinbase or something this is kind of.What we're doing we're essentially doing.This like auto swap of an asset we're.Making a payment to ourself where an xlm.Goes out and an nft comes back.The destination asset so what do we want.To receive we want to send xlm and then.Have magically come back on nft.And we have to receive we required we.Are required to receive one nft so the.Whole nft and if we if we don't.Then this operation will fail the whole.Thing will fail nobody will receive.Royalty payments and maybe we'll try.Again maybe the the seller of the nft is.Pulled back.They're not actually selling the nft.Anymore and the whole thing fails if we.Do not receive this one nft.Then nothing else will succeed. the path path payments can be used.For other things where you can have like.Multiple paths multiple hops to go.Through.In our case we're just doing xlm to nft.So we don't need any paths.And then finally that source again we're.Kind of paying ourselves using xlm and.Receiving an nft this is a way to.Consume an open offer but guarantee that.We we consume that open offer otherwise.The whole thing fails.And we don't accidentally make a royalty.Payment without receiving our nft.Once we're guaranteed that we now have.This one nft it's safe for us then to.Make a royalty payment again because.This is all atomic this whole thing.Succeeds or fails together you can't.You can't sort of. time it or or interes intercept this.Transaction and say like oh I got my nft.I'm going to kill this transaction and.Not make the royalty payment the whole.Thing succeeds or fails together.And so at this point we have our nft.In in this transaction at this point.It's safe for us now to make the royalty.Payment we're going to make that royalty.Payment to the influence inflation.Destination.For the selling asset in this case it's.Enforced to be xlm.And what's the amount going to be it's.Going to be whatever the sale price was.Times 10 so if we're selling for 100.It's going to be 10.Once that payment is made we can then.Carry on with that logic of closing down. the user now holds that nft but they.Are not allowed to do anything with it.So we're kind of back where we started.Where some cool arbitrary logic has.Happened in our case royalty payments.Has been enforced but now we've locked.Down the asset nothing else can happen.Until the user then comes back and calls.The offer.Api endpoint again and we offer it for.Sale again and then someone else can buy.It again but the inflation destination.Being that thing that's always going.Back that royalty payment always going.Back to that original inflation.And so at this point when we come back.Into our.Api.Offer.Again they get that xdr back the user.Will sign it the user needs to sign it.Because they're making a payment and we.Need their permission to make that.Payment so that user will sign with.Their key pair.If you're using something like albedo or.One of those .Delegated signing services like metamask.This is where that modal might pop up.And they confirm that they actually want.To sell this I'm encoding putting those.Secret seeds in local storage.Just to make things a little bit easier.For the user.But if you want to have confirm logic.Kind of like that web 3 stuff.You can use.Those different delegated signing.Services where that secret account is a.C that secrecy is managed by the user.All right so at this point we kind of.Have.Really all of the logic through just.Those two.Functions and that original minting.Where we assign the signer to the the.The auth signer to the new issuing.Account there's not a lot of logic here.It's actually quite simple.You might you'll probably want to do.More interesting things.In your project but.A lot of times and this is actually true.In most smart contract programming there.Really isn't a whole lot of fancy stuff.Going on.There might be some complex math for.Some of these bigger d5 projects but a.Lot of this isn't very complex you've.Got a client service a user interface.And some really basic logic the thing.That's magical the thing that's really.Innovative is when you add.Decentralization when you have multiple.Machines running these lot running this.Logic to where you can't just shut this.Down and now anytime this auth server is.Called if it's being run by five.Different machines one decides I don't.Want to run this anymore the four others.Can continue to run it or in the case of.A decentralized.On-chain smart contract. there's there's thousands of machines.That are running this and you can't shut.It down the account is actually.Controlled by the machine not by a.Third party so it's not that the.Functionality the contract logic is that.Complex it's that it's decentralized.There's lots of people that are like.Okaying this that are putting their sign.Their signature stamp on this saying yes.We we approve of this transfer of this.I mean most of these are less than 100.Lines of code and you can get away with.Some really cool stuff in this case.Enforced.Royalty payments for an nft that can.Just exist it's out there it's on.Chain any interface that wants to show.It and sell it can use the same logic to.Accomplish that it's it's quite.Fantastic and again not that complex.There is one more thing though that i.Would like to cover. and that's that it's it's true in any.Sort of defy.Application development where you're.Kind of it's not a fight but sometimes.It'll feel like a fight between the the.Data that's on chain and how you.Actually build an interface around that.Data.So you've got all this stuff happening.On chain usually in a very efficient.Manner that can sometimes make it really.Hard to showcase that.In an interface so in our case.We have a bit of a challenge that i.Haven't discussed.And that is actually showing nft.Nfts on the interface so when you when.You have this ui.How am I how am I supposed to show.Just the offers for my nft project just.The offers that are for royalty payments.Why aren't all of the nfts on Stellar.Showing up in this interface how have we.Gotten it to where it's only showing.Ones that are involved in in my project.Well the way we do that if we look at.App.view again.There's a method here called update.Offers and this is going to you guessed.It update offers that that array of.Different nfts.And this is an actual .Horizon api call that's getting offers.From the Stellar blockchain so if we.Were to go to. laboratory Stellar laboratory really.Quickly on test net and explore.The endpoints here we can actually look.At what this api endpoint that it's.Calling it's calling this one right here.All offers.Now obviously.All the offers.Is not what we want.We don't want all of the offers because.That's going to be literally all of the.Offers on sellers these are not just the.Ones that are involved in my nft project.So how am I going to filter.All of the offers on Stellar to only.Show just the ones that are involving my.We might think you could filter by like.Some sort of nft code or something.And that's actually a it's a good.Assumption so it's not a bad one you.Could maybe use like nft code.Or some some special code the problem is.Now you're open to an attack vector.Right so if you used the nft code where.You just said like nft any any asset.That uses a code nft.Is going to be part of this project.Or you could you could you know use your.Name nft the problem is there's an.Attack vector now that anybody else like.If they want to like insert them their.Nft into your project they just need to.Name their nft after the naming.Convention that you've used.So somehow you need to.Use something that's like official.That's secure that only your project.Knows as a filter mechanic so that.Nobody else can insert themselves and.Say like I'm going to issue an nft.That's actually a scam and get my way.Into your project this is a real.Legitimate concern when you're building.Projects in open on a decentralized.Network it becomes kind of tricky.Because everybody knows what your.Project looks like everybody knows what.Your asset codes are.And so you have to use cryptography you.Need to use something that's like signed.Something that only you have permission.To do to be able to build out filter.Mechanics for your ui.So in our case what we're doing is using.Sponsorship.Sponsorship is something.That exists on Stellar where a sponsor.Will say.Whatever the the fee is to put this on.Chain right so you have to stake a.Certain amount of lumens to to hold.Things on chain so an account is one.Lumen trust lines and offers are half of.A lumen to actually have them exist on.Chain on Stellar.And so a nice mechanic to to offload.That from your users is to use.Sponsorship where your service account.Can say like hey I'm gonna i'll take the.Brunt for you i'll sponsor those things.For your user account so your users kind.Of.Insulated from those fees but another.Nice feature of this is that sponsorship.Can only happen if it's signed for.You can't just add a say like hey you.Sponsor my account please it has to be.Signed for I need to give permission for.Your account to be signed for so we can.Actually use this functionality to.Sponsor the offers.For these nfts.Now they're signed for.So that when we go to horizon we say i.Would like to get all the offers I only.Want the offers that are sponsored by a.Specific account and that specific.Account is something that I the auth the.Authorized.Account controls and so that authorized.Server controls the sponsorship for each.Of these offers.And now when we filter we only get the.Offers that are sponsored by our account.And so if we go back to our code here.Inside of our offer logic that's what.This begin.And end sponsoring future reserves.Operations are where we're sponsoring.The user account.With our sponsor account and this is.Coming from an environment variable very.Similar to the actual .Signing secret the the signing server .That was controlling the nft.This is a sponsor signer that's going to.Sponsor the offers for these nfts.And so by wrapping this managed sell.Inside of this open and close.Sponsorship we now have a mechanic a.Secure mechanic by which we can filter.Our front end to only show offers that.Have been issued or that have been.Sponsored by this particular sponsoring.Account and you're going to see like.There there's only so many there's a lot.Of these like little tips and tricks.That can really help building out your.Front ends but you're going to find.That if you're not careful building in.Public like this building on a.Decentralized chain like this there's a.Lot of little gotchas and this is really.True on.Like fully on-chain platforms where it's.I mean there's just so many little hacks.That people can use when you don't.Control when it's not a centralized.Authority that you have complete control.Over everything.You're going to have a lot of these.Little foot guns but by doing things.Like this where you're sponsoring offers.And having kind of these little nuggets.Of control you now.Can have the interface the the user.Interface that you exactly specifically.Want so there's a couple of those.Sponsorship is a really good one.You'll find a couple others if you go.Through the drop docs on my smart nft so.Kalepale.com you go through the drop.Docs you'll find a few more.That will really help as you build out.And kind of find yourself fighting a.Little bit between server and client and.Things might work great but if you're.Not careful somebody else could say like.Ha ha i've found a vulnerability I found.A way to insert my nfts into your.If it's not fully signed for and secured.So that's just a nice little.Feature here you'll find a few more but.That's a really nice one. so with that.There there are other pieces here but.They're all commented pretty well again.The the application's not super complex.You've got a client and server there's.Instructions for how to run those.I'm going to move now back to.The slide deck.I think this is a qr code for our dev.Discord we're actually moving into the.Part now so hopefully you'll be able to.Build some innovative nfts and actually.Get rolling on some of these interesting.And innovative projects.As promised.There is a github repo if you go to.Nft.steller.buzz there's a link down at.The bottom.Where you can actually grab the.The repo for this and clone it and begin.Poking around get comfortable with the.Code feel free to clone this and use.This as the base for your hackathon.If you want to again if you go to those.Parts where the the.Your opening and closing authorization.That's where you may start to choose to.Insert your own arbitrary.Interesting innovative logic.With that we will move to any qa that.Folks have.Around anything that we've discussed. today.Any.Any questions.So the question is is there any mechanic.Natively on chain.That allows you to ensure that you can't.Issue any more of an nft without locking.The account so by locking the account.You essentially remove signers from the.Such that you can't do anything else.With the issuing account in so if you've.Issued if you've said to the world like.Hey it's a one of one nft but you've.Left yourself as a signer you could go.Actually in the future and issue more.Nfts I don't think so.Right now on Stellar without actually.Locking the account there are some.Things you can do. with signers that would disable you.From.Submitting specific operations like.Payment operations where you would.Send more nft so you could lock yourself.Out of those specific operations through.The signing thresholds.But yeah until we get on chain smart.Contracts or you use turrets and give.Control of the account over to the.Turrets network.I don't think so. it cannot.The the question was can the inflation.Destination be an array of strings for.Multiple accounts it cannot but you.Don't have to use the inflation.Destination to store your royalty.Payment addresses you could use so if.You remember back in the manage data.Operation managed data allows you to.Assign arbitrary key value pairs inside.Of an account and we saw we stored.Ipfshash in the ipfs hash for the.Metadata for nft as a key value pair in.The metadata. you've got up to 1 000 key value.Pairs per account so you could store.Your royalty payment addresses inside of.The set options.Or inside of the managed data operations.For that account and just put.A bunch of your royalty payment.Addresses inside of the managed data.Operations instead of using the.Inflation destination.Yes.The question was can you submit a.Pre-authorized transaction so now we're.Getting into the weeds .So there are different types of signers.That you can add to a Stellar account.The most obvious one is just other.Stellar accounts but you can actually.Also add.Preimages for sha 256 hashes and you can.Add.Transactions so actual.Transaction hashes so whenever you build.A transaction xdr a sha.256 hash is generated and you can store.That hash.Inside of the signer array of your.Account sort of saying I give my.Pre-authorization that if you can ever.Find this transaction again I give my.Permission to sign off on it and so what.You could do in this particular scenario.Is build a transaction that re-enables.Your account that re-adds master signers.That reconfigures the signing thresholds.To your account at some point in the.Future.That would then put your account back.Into a state where it could issue more.Nfts which could be a kind of.Interesting scenario because you could.Actually flip the script on that a.Little bit and say I'm not going to lock.My account but I'm creating a.Pre-authorized transaction to guarantee.That at this point in the future I will.Lock my account so give me six months to.Figure this out and then at that point.I'm guaranteeing to lock my account with.This pre-authorized transaction that.I've like pushed to the public everybody.Can see it and in some at six months in.The future.We will be able to submit this.Transaction and it will lock the account.Or you can yes do the inverse of that.And unlock your account with that.Pre-authorized transaction it's pretty.Cool feature but definitely an advanced.Good question.Good any audience questions feel free if.You if you have questions for projects.You're working on.We're kind of moving into our q a.Building session.There are no dumb questions just you.Know people that didn't ask questions.When they should have.Oh let me read that one let me read that.One off offline that one sounds.Interesting.We'll go ahead and and wrap up we.Have a happy hour coming up we're gonna.I mean the hackathon has already started.So get hacking keep building make sure.You join our developer discord if you.Haven't. we'll be around all weekend to answer.Questions i'll be milling about for.Quite a while to answer questions.Excited to see what you guys are.Building thanks so much for giving me.Your time super bullish excited about.Nfts hope you are as well thank you so.Much.[Applause].
