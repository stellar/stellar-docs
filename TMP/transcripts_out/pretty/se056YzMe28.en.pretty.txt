Hello and welcome to the Stellar open.Protocol discussion .In these meetings we discussed .Core advancement proposals aka caps.Which are technical specs that suggest.Changes to the Stellar protocol they're.Necessary to allow the protocol to.Continue to evolve to meet the needs of.The ecosystem.So we we live stream these meetings.So that anyone who's interested can.Follow along.Although I do want to note it is a.Technical discussion so if you're.Watching you may want to take a look at.The CAP link to in the show description.There's also a description in the.Description all the participants are.Listed . we do keep an eye on sort of the the.Dialogue that's happening in the chat.Box but the goal really is to talk.Through questions about the CAP that.We're discussing which is cat 42 so we.Will only really address questions if.They're directly related to that goal.But we will collect them and take a look.At them later too.Today the CAP we're discussing is CAP 42.Titled multi-part transaction sets it.Suggests a mechanism that makes it.Possible to implement different fee.Structures based on transaction set.Composition so currently in transaction.Set composition it can sometimes be.Heavily biased towards undesirable.Behaviors including spikes of arbitrage.Trades that eventually fail this cap.Basically empowers validators to isolate.Subsets of transactions that can compete.On fees without causing overall fees to.Increase and it also makes it possible.To expand policies to other dimensions.In the future.So CAP 42. again it's linked to before this.Meeting CAP 42 is drafted that's the.Link to it there it was also.Discussed on the mailing list and.There's a link to the thread to that to.That discussion thread as well so our.Goal today is really just to see if.There are any blockers that would.Prevent us from moving it forward.To the next step of its life cycle and i.Will stop talking and I'm going to turn.It over to nico who is the original.Author of this CAP to see.Sort of what if he has any questions .That he wants addressed by this meeting.Nico.Take it away.Hi.You can hear me.All right so yeah I'm happy that I got.To get gap 42 because you know it is the.Answer to everything of course.And in particular the problem with.Fees and.I've already networks in some.Ways that we're not.Necessarily happy with and when I say we.Here it's the community that has been.Also complaining quite a bit about..The number of failed transactions or.Or like.Patterns that that are just not.The type of patterns we want to see .On the network so anyways like maybe.A little additional background that.Is not in the CAP itself is that. it's actually on the dev mailing list.But not in the CAP is that .As part of of .Of the of this.We actually had to roll out some.Changes to overlay in back in.December that we're.Dropping..Based on a heuristic. like but.We think are.Likely to be arbitrage trades.And .Which mitigated to certain extent .Some of the things that.We were seeing at the time.But.That has a lot of undesirable properties.And I think as part of CAP 42 my hope.Is that we can actually go and fix the.Some of those aspects that we introduced.At the time. so in particular like the the type of. aspect I'm looking forward that to.To fix here is. and this is actually true in all.Networks like it's not actually a.Stellar specific type of problem.There has been discussions in the past.Few months.On.Ethereum.And.Solana i'd like to name a couple.On changing these structures when it.Comes to.To this kind of spam and when I say.Spam here I mean it's kind of a funny.Thing but it's basically. like a natural thing that happens i.Guess when when you have .An opportunity.To for somebody to make money.Is .Based on.The cost that you have to submit.Transactions. if you can make let's say a thousand.Dollars on on a trade.Well you you'd be okay actually to pay.900 dollars in fees because you make.Some money.Obviously.This is like.This is where.Like the the way.You can end up with .And at the same time if .If all.The transactions on the network are kind.Of. derived on the step of keys.Then it kind of kills off a whole.Category of of other.Use cases that.That you want the network to have so.For example.Payments or like simple.Airdrops or whatever like people want to.Do that .That are actually.Unrelated to those .To this type of trading trading.Activity.So anyways .That's for the background on why why.This cap.Yeah so like the I don't know like .People had time to to look over in.More detail at the refreshed CAP that.I did it yesterday.Like it has actually two parts to it is.One part that is extending the what.Is the.What is attached to a transaction set.Basically so that we can add like new.Properties to the transaction set.And and the second part is .Actually the.The actual reason for this gap which is. changing.How .How fees get calculated within a.Transaction set.Sorry is the latest version the one.That's in that's in the master branch.In the repo 22 hours ago okay yeah.That's it yeah and I'm sure there are.Typos because I kind of updated it.Quickly yesterday to make sure that.People had time to and to have access to.It but it's a early trough.Summer did you raise a hand.Yes I did otherwise I tried to be polite.But niko didn't see .So.First of all I think this is this is.Pretty cool because it takes.Advantage of something that's unique to.The ecosystem and like we can.Actually prioritize transactions not.Only based on fees.This is very.Different in other ecosystems because .You know validators are kind of like.Incentivized by transaction awards so so.They don't have the motivation to.Actually push these kind of changes .It's pretty cool nico i'd like to hear.Your take on we've been talking a lot.About strategy for 2022 recently and.Things like.Speed x and things like smart contracts.In the future these are like. you know more.Transaction engines or like transactors.How will CAP 42.Interact with these or how do you.Think they'll like it'll interact with.These features.Yeah that's a good question and I think.The this is actually in line with .When I wrote it I was I thought that.We we would actually.Over time.Kind of create more sea lanes or for.Lack of better words so an example of.A three lane that I think would make.Complete sense is.To have a separate lane for speed x.Trades. given that they're a lot more.Efficient .Compared to.Existing dex operations.And yeah we basically say okay if you.You have the choice between a speed x.Trade and a submitted a managed offer to.The network.You're going to go and have.More space basically on that ledger.And for smart contracts I mean it's i.Mean it gets I think a little more.Complicated when we talk about smart on.Tracks like a very.Primitive version of this would be well.We are going to maybe create a lane just.For smart contracts that would be like a.Simple.First step.Obviously there might be.More interesting.Interesting things that can be done. on that front but at the minimum it.Would be you would create a different.Kind of.Free regime right for.For smartphone tracks.I mean I guess the thing is it seems.Like not really optimal for those use.Cases like in those use cases it would.Be much better to just partition the.Transactions because you could you know.Then you could just you might want to.For example say that all the smart.Contracts get.Executed like after all the regular.Operations right so just kind of having.These like .Intermingled like this index set just.Seems like it's gonna add a lot of.Overhead and and not be you know what.You would want.So so so I kind of have two reservations.About this right one is that it just.Seems like a little bit too.Complicated for what we really need.Especially if you want to start having.You know you know blocks with like.100 000 transactions for example which.Would be like totally doable with.With something like speedx if they were.All speedx transactions right you're not.Going to want to also have a added.Overhead of like sanity checking these.Index checks and whatever you're just.Going to want to blast through your.Array of speed x trades and do like a.Parallel execution of those.And I guess the second thing that like.Bugs me a little bit about this .It just seems like very indirect right.Either we believe that dutch auctions.Are the right thing or we don't right.Maybe dutch auctions aren't aren't the.Right thing. but what we're we're sort of trying.To say like well we're sort of going to.Keep the dutch oxygen but we're sort of.Not because we're going to let.Validators really kind of pick and.Choose different sets of transactions.That are going to going to pay different.Fees .I think the reason is because we want to.Filter out spam so like.That is a form of censorship maybe it's.Okay but like maybe we should just like.Be a little bit more direct and say like.Validators should you know we're gonna.Just have a way for like different.Validators to like filter out certain.Transactions that we we don't think are.Are productive and to the extent that.You might not want that you might want.To say well what if my transaction is.Like really really important then i.Should be able to like pay a high fee.And like get it in the problem is that.This doesn't actually solve that problem.Right because I could I could put a.Maximum fee of you know two to the 32.Lumens in my transaction but a validator.Who wants to censor me could like put me.In my own group with a very low base.Fee and then put everybody else in a.Group with a higher base fee and it'll.Look like you know.You know like the block with that.Transaction will like not compare.Favorably. potentially to to to other blocks so.Or I mean whatever you could just like.Filter out the transaction anyway so i.Just.I don't see.This doesn't seem like as much it seems.Like this is partly to solve a problem.But also.Partly to.I don't know like for to appear to be.Preserving the dutch auction when we're.Not and if we're going to have some.Extensible way for validators to filter.Out transactions why don't we just do.That in a more straightforward way.Well.So first of all like the when you say.Like we're not preserving the auction.Mechanism here what I'm saying is that.Validators when they nominate.Those transactions those transaction.Sets. the expectation is that they would.Actually.Be doing this type of action in in any.Given group.But if they can choose the groups they.Might as well not you might as well just.Let validators choose the fee for every.Transaction and just as well it's the.Same thing yeah yeah you can you can do.That straightforward thing just annotate.Each transaction with the fee that would.Like you know a 32-bit number that's.Like or 60.On the right list actually was to just.Annotate every transaction with the fee.Yeah.But that's like that's actually.Even less transparent in terms of what.The intent is.So that's why I didn't do that. like it's a.Like .That's effectively what you're doing.Yeah no I know I know I'm doing that.Like I'm basically allowing for this but.I don't want.People to be doing like arbitrary fee.Structure per transaction but that's.What you're enabling right you're just.Making I mean I know it's being enabled.But that's not what what we.We don't expect for the data to do that.And actually this is there's a.Discussion in the. later in the document that that talks.About.Because like basically today validators.Can already.Censor quite a bit .Like what gets into a transaction set so.The example of.Like following the fee structure today.Is already not.Exactly right like like if if validity.Doesn't want to do it they just don't do.It. yeah like here what I'm trying to.Promote is more of a compact.I guess like the yeah the .Those indexes thing I agree.This could be done maybe in a slightly.Different way I was trying to preserve.The transaction set.Itself like the existing transaction.But that's not good either if it turns.Out that we want to like actually change.The order in which we execute.Transactions then like preserving the.Transaction set isn't actually.That useful.Right we already so for speed x what we.Are what is in the current proposal.Is to just like we partition on type and.It's actually not.We actually keep the transaction set at.It as it is.Like from a serialized version.Because we can always partition after.The fact yeah but it just seems more.Useful to have to have it partitioned.Ahead of time if you have sort of like.Just totally different phases of block.Execution I see no.Intermingling transactions from the.Different phases.That's true.So I mean I guess what I'm saying is.Like this will get the job done but i.Can think of sort of.Much simpler ways of getting the job.Done and.It seems like.This CAP is too concerned with sort of.Like appearances.And those appearances you know.Effectively don't matter when what.You're doing is equivalent to something.Where every whatever validator wins.Nomination can just like literally set.The fee for every transaction.So like.We're giving value if we're going to.Give validators that power let's just be.Upfront about it.I mean I thought it was pretty upfront i.Was optimizing again for. like ease of audit and.And .And like maybe like more compact.Potentially format.That's true it could be more compact or.It could be less compact depending on.How many.If you have an extension point per.Transaction you at least have an integer.Their transaction additional well you.Could just change the transaction set.Format and add like a four byte feed you.Know.No but then.Less expensive like .David can you can you articulate your.Alternative for a second so that we're.All on the same page.The thing is that what we are discussing.Here is more like we're actually not.Discussing.I think we are discussing more like the.Format of the like the transaction set.We're actually not.Talking I don't think we are discussing. and maybe we should start with that.The the.Premise of.Allowing to control. fees right because I think that's the.Important one I mean I guess I can see.Two I can see .I don't have a particular sort of.Alternative proposal because it seems.Like we're trying to do two different.Things and those might be better.Served by like two different mechanisms.That are .You know each that some of which is like.Maybe less complicated or more efficient.To implement than this right so the.First thing that we want is we want kind.Of multi-phase block execution down.The line so we'd like to lay the.Groundwork for things like speedx and.Smart contracts and stuff to coexist.With the legacy Stellar transaction.Format .And then the second thing that we want.Is we want to like weed out spam or you.Know transactions that are gonna gonna.Fail a lot and so.I just think you know these could be.Handled in two separate ways or if you.Wanna have multi-phase blocks let's just.Have multiple phases in the blocks and.Potentially have like fees per phase if.We want to weed out spam then let's just.You know have a way to weed out spam and.You know.Regardless of fees we can just.Weed out the transactions.Without spam without doing it via.Fees is kind of what we're doing now and.It's.Actually very.Hard to keep up with whatever people do.Like you know people are very clever.Right they will find better ways to get.Around it.What power does this give us to weed out.Spam .That that we don't have in the existing.Consensus layer in other words I agree.That we want to be able to kind of.Unilaterally update like update.Stellar core without going through the.Transaction layer or like you know.Eventually have like a configurable.Algorithm to weed out spam potentially.And maybe different validators have.Different different mechanisms but i.Don't see how this change to the.Consensus layer.Actually gives us more power to do that.It may give us some sort of plausible.Deniability or something that works it.Actually gives quite a bit of new.Super powers to the network because .Like I was saying.Earlier like.If I have an arbitrage trade.Where I can make a thousand dollars.Ideally I would want people to actually.Pay up to a thousand dollars in fees if.They if they are really serious about.That transaction.Right now they don't that's not what.Happens because they're actually.Competing with the entire pool of of.And they are filling up entire ledgers.And then the the ledger fees go up to.Okay 20 bucks you know for a transaction.But that's so that's not a thousand.Dollars but that's still ridiculously.High.And 20 bucks is not the number I think.It was like what we saw was .Close to five dollars I think per.Transaction.So your point is you you want the spam.You just don't want it to be as.Profitable like if someone can do like.This.Yeah that's what that's kind of the idea.Here is that like you know in the.Current proposal I'm say I'm saying well.Any decks any operation that may cross.An offer.Is going to be put in a separate bin.And then that bin. we do this the action system on that.And then if you're not interacting with.The dex then you're in the you know.General .Group.So it's you know that's like first step.Like you know we can probably do much.Better than this but you know so why.Don't we just throw in phases and say.That you know like that's what I'm.Saying that's already what I'm saying.Sorry I'm saying instead of indexes.Let's just have straight up phases and.Let's just execute them.In you know. like it's just such that like the dex.Operation oh like you would want also.Execution order to change I mean like.That's fine we want to.We want we want to like.Segregate.Is going to lay the groundwork for.Paralyzation right and so if we're going.To do a change like this or segregating.Operations eventually we're going to.Want sort of the community of operations.In one group and the non-community in.Another and so the.Legacy dex operations are exactly never.Going to be able to make community.Yeah like but like I think the issue.Here if we have groups in.Like impact somehow .Apply order like because we can have.Transactions with multiple operations.I think you can basically take that use.That to your advantage to maybe.Get executed in front of somebody else.Just because you happen to have the.Right operation no it's because you.Don't you'll be people will say that the.Like we'll flag certain operations like.Path payment and you know manage offer.And whatever and say that these.Visa.Any you know there's a first phase .Which is might have a lower fee but the.In order to get into the first phase.There's certain operations that are off.Limit like the ones that we we can't.Necessarily make efficient and then in.The second phase you can you know.Have arbitrary like my point is that.This forces the to think about those .Those those feelings or whatever have.To be.Somehow.Completely independent or something like. like and I'm not sure it's. you can always claim that not.Necessarily you could have like you know.Like I can see like for speed x like.Things like that yes you know that makes.Total sense for the existing.Transaction subsystem I don't know if. well I think.We're going to want to have like fast.Payments and faster payments than we can.Do order book operations so.To. just to you know if we're going to be.Making this this change like why not.Make it in a way that is is will kind of.Facilitate that that future where.Maybe you know payment processing could.Be parallelized even if order book.Processing can't be.It's more like I think of this as it's.It's it may be a multi-dimensional thing.Coffees.And then.How do you how do you turn that into a.Something that makes sense from a.Like a an ordering point of view.Right that's kind of I think I don't i.Think that's leave it as open-ended as.The current draft you could just say.That we're going to do that with our.Groups.Sorry.I think if you say they are groups .If you're linking the groups to.Execution or yeah so you have to apply.Other groups.Yeah and so each group has.It has a different apply order and a.Different fee structure and then we can. you know have different rules for for.Different groups if you want to.Execute early and.Fast then you know.You should you should have a transaction.That goes in one group I think we could.Also.I mean it might be worth considering .If if we're changing the fee structure.Anyway to have a separate.Base fee for successful versus failed.Transactions right.No.That is wrong like that doesn't work.Like I don't see like doesn't work it.Makes things so complicated in the.Existing transaction subsystem that.We've talked about that one a couple.Times before yeah that would be pretty.Tricky.It's super complicated because you can.Merge accounts that's kind of one of the.Reason for example one of the things.That can happen.You have to refund people at the end.Yeah it is kind of crazy stuff.And it doesn't and and this actually.Doesn't solve the.It's it's it's not that we want to.Penalize transactions you're going to.Have buckets the the buckets could they.Could be morgan your granularity on the.Fee but that's fine I believe you that.That would be too hard.For me the most interesting question was.Your first question david which was just.Like.Do we believe in the.Dutch auction still like let's just like.Start with that like do we think that.Even works like do we think that is a.System that is a good system for.Blockchains because like we thought that.What like in 2018 well maybe 2018 us was.Wrong right like I wouldn't deny that.2018 me was wrong about a whole bunch of.Stuff yeah.But that way but the thing is that.If you even if you go back to the.Regular fees it doesn't solve the.Problem that people are still going to.Be.A stupid number and you take over the.Ledger.Agreed but like if we don't believe in.The.Dutch auction thing like one of the.Things that I mentioned in like my email.Was like.We could just like chart instead of like.Assigning a base fee to different groups.We could just say like hey like if.You're inserting groups you actually pay.Your bid.So instead of being like a dutch auction.Now you become like a first price.Yeah I guess like a first price auction.Basically.And then like that that's really.Punitive basically to people who choose.High bid high fee bids.But then if you choose those high fee.Bids you are guaranteed to pay them.Basically so it avoids that situation.Where it's like oh there's a thousand.Dollar opportunity you build 900 dollars.But you end up paying 20.it's like no i.Mean.Transactions right so this is one thing.That's changed now so one of the reasons.Why you might want to have bid a fairly.High amount in 2018 is because you were.Like pre-signing a transaction right and.Now we have a solution to that.It's not just that but also like for.Like clients like it it really avoids.Having to.To keep track of market activity like.The activity like and especially if you.Start to say okay.Predicting fees is basically. is is becoming even harder.I think you have to have this kind of.Mechanism well no but I mean what this.Current mechanism is is basically you.Say the maximum fee and then whichever.Validator wins nomination decides how.Much you actually pay right like that's.That's what this is going on but it's.Sort of right. looks like a dutch auction.Kind of because there's these groups are.You running the dutch auction but like.If I can kind of.Pull people into different groups who.Are paying who are gonna end up paying.Different amounts for the same good then.It's like I might as well just set the.Price.You know it just it seems like it's.Trying to look like it's still a dutch.Auction when it's not so let's just be.More directly what it is which is.Validators setting fees per transaction.But it's like saying oh yeah like.Because like validators may decide to.Not do what we want people to do.Then.Let's throw away the whole thing.Right and make plans as complicated as.Possible no I'm just saying like figure.Out what we want validators to do and.Just directly give them that power.Instead of no but like that that's fine.Like we already like that's the point of.This CAP is we give them that power but.Then saying.We also get rid of the bidding aspect.Well validators could decide to run a.Dutch auction right the point is if we.If we're giving values the discretion to.Set fees then one of the things they.Could do is run a dutch auction but.There's no reason to still have like to.Have CAP five somehow wired into the.Consensus layer CAP five is now going to.True yeah that's yeah exactly that's.Actually that's what the CAP 42 already.Says it.There's no more.Search prices we're running these we're.Running these dutch auctions per group.Which just seems like an inefficient.We're adding this unnecessary level of.Indirection right we're giving we're.Giving validators the ability to set the.Fee of every transaction and then.We're doing it in this like weird clumsy.Bucketing way that you know is gonna.Require you to like check large sets of.Integers that they're not overlapping.And all this other stuff which is just.Why just like set the fee per.But how would you resolve contention if.It came up like if everyone submitted.The same kind of transaction all at once.And there's contention for ledger space.In that situation.It's just you know highest it's.Basically the normal.You know like I'm speaking.At auction or a first.Price auction but just not at the.Consensus layer like it would be the.Block the nominator would be the one.Who's basically setting the fee rules.For the block as opposed to. having.Happen at the consensus layer.And like you don't like when I was.Saying that like we don't necessarily.Want to do the dot auction I wasn't.Saying we don't want to do it for any.Transactions but what do you do but.There's no reason you can't implement a.Duns auction like as you're nominating a.Block right but we might want to like.For certain types of transactions that.We think are very benign we might.Actually want to mandate it basically.Leave it giving clients the opportunity.To do very simple fee estimation.And then if you're trying to do.Something that's very you know.Profit generating deliberately profit.Generating but not otherwise useful. then you have this more complicated.Fee situation to deal with and you pay.Higher fees okay but if you want to.Audit that then it's going to be easier.To segregate the transactions right i.Think I'm not opposed to that at all we.Can say like I could definitely see a.Thing where we say like at the consensus.Layer you know group zero.Is transaction envelope group zero is.Going to be not going to allow order.Book things and it's gonna have to be a.Dutch auction right and then like number.One you know group one is like.Discretionary.Sure yeah that.I would be super comfortable with that.But like for me it just comes back to.Do.Do we want to do stuff like that do like.If we want to keep the dutch auction.Aspect of it I think we should probably.Mandate it in some parts and if we don't.Want to keep it then we should just be.Honest like you were saying and just.Not even have any pretense of doing it.And just say okay like validators you.Choose whatever you want and this is .Like cat 42 supports this.Basically my argument here would be just.Like remove the directions. for what you're supposed to do and.Say like do whatever you want I mean.Like to mandated.You have to actually include whatever.Rule is used for partitioning has to be.Part of the protocol then exactly.At least which makes it into that one.Subset the rest of them which means that.For any any change we want to make. to.This partitioning scheme is a protocol.Change only to that one partition.Well like it could be a parameter too it.Could be like you know a bitmap of the.Operation types that are allowed in.Like actually the first version of this.Cap was not it was not operation type it.Was based on which markets.You would. will you be.You know doing so it was.Much more.Granular.So that's not the type of thing you.Would want to you can encode as a.Parameter it's but those would be the.Things that aren't in.So basically like when you do a path.Payment you are not guaranteed to pay.Dutch auction to get the dutch auction.Treatment if you do a simple.Payment you're guaranteed to get the.Dutch auction treatment that's exactly.The kind of thing I'm talking about.And then of course whether or not you.Get the dutch auction or something close.To it would depend on the particular.Validator and that validator could.Decide it depends on the particular.Assets that you're touching.Do we think that changing the fee.Structure for these kinds of operations.Meaning like these non the non super.Benign very efficiently implementable.Operations.Would make a big difference.I think.That david you were already questioning.That like is this enough control to.Discourage those kinds of things or.Split things up appropriately.Is that right is the fees the thing that.Matters is the.Segregation in terms of number of those.Operations that can enter the.Transaction set the right thing to.Control.Like what is the thing that matters.I mean I you know I think that.Oh yeah of course we want to get .You know we want to.Some of this is going to be subjective.Right it's going to be like validators.Are gonna have an idea that there's some.Stuff that is you know more valuable.To the network than other stuff.Right.And then people creating transactions.Are gonna have some idea of how.Important their transactions are which.Is going to be.Reflected in the fee.Or the max fee that they're they're.Willing to bid for that transaction.And so I think we kind of.We like the idea that you know if my.Transaction's really important I can.Like pay a lot of money and and get it.Included.This CAP doesn't actually guarantee that.Right because I could bid like a large.Amount for my transaction but the.Validator could you know either not.Included or could include it in a.Transaction set with a low a subset with.A low. base fee and then this my the block.That contained my transaction would like.Compare unfavorably to a block that has.Like higher fees.For other transactions even though their.Max fees are lower.The way that so so that we actually.Almost never compare blocks it's true.That's true so and then the the.The spell spell that's actually already.Going to happen today so I don't want.That okay.I suppose there's not really much.Guarantee that any validator will.Include your trend like you can imagine.That david you know you like want to.Send justin a payment or something to.Like close out a payment channel or.Something.And you're willing to pay like a million.Xlm to do it yeah but like maybe me.And nico and tomer are the validators.And we're just like yeah.Maybe not and then we just like.Refused to include your transaction is.That that you know.If some.If some validator eventually if.There's some validator willing to do it.And that validator eventually wins.Consensus then it will your transaction.Will see the light of day yeah.Right you need consent you need.Some.Offline agreement basically to really.Censor transactions.And that's that doesn't change this cap.I don't think this CAP can change that.It changes it a little.Well no I guess not not really.Not any amount that matters I think.We have not heard from.Lee and.Not much from tumer where do you guys.Kind of stand on all of this.I I kind of want to understand.It sounds like david has a much like.More simplified approach I'm trying.To understand like from a mechanical.Perspective what this looks like.What is.What are the protocol changes required.If any for validators to start assigning.Random fees.Or not random fees to .To transactions.Yeah I'm.Yeah I think about this but I think like.David has a point if we're just like.Pretending with this . with this like group based.Approach.You know like we can implement that.Logic without that so.I mean like.So the group thing is more like yeah.Like I don't really care that's more.Like I said it's a sterilization format.Problem like I think we still have.Like the new thing I think the the new.Point that that david raised which is.Interesting is.Should we.Basically hard code.This split that is in the proposal right.Now as an optional thing.So that should like this split being.That.There's like a presumption there that .That non-decks. or yeah transactions .We're not going to need to do to.To split that further.You know .Oh.Sure.Or without going through consensus sure.I guess.Put another way do we feel that for.Certain kinds of transactions people.Should be guaranteed the dutch auction.And the.Validator shouldn't have discretion.That's the question I was wondering too.David and.I think nico thinks the answer to that.Is yes.I I am also inclined to think the answer.To that is probably.Yes .I'm not sure maybe I'm wrong that niko.Thinks that but I think he thinks that.Based on his reaction when we were.Talking about removing the dutch auction.I mean I like the.That system that you basically express. you know a maximum bid and then you.And then it's the job of adidas to try.To minimize this.For you.Okay so this.This does not currently guarantee that.Right CAP 42.The the the.Well there is no.I I guess like the.Yeah there's no guarantee.Either even with the current system.Right like I could basically decide as a.Validator or all the ideas could decide.They're going to.Group all expensive. transactions in one ledger I know you.Know that ledger is the stupid ledger.Right yeah.At least you know that is a valid dutch.Auction right you know at least you know.There's you know 999 other operations.That are willing to pay that that base.Fee or whatever.But I mean.Or you could say like fine you don't.Really have that guarantee because you.Know the validators could hold the.Expensive operations.But .It's the so I guess like maybe what.You're getting at is.We're effectively giving validators the.Ability to just set a different fee for.Every transaction then let's just do.That and not like wrap it up in some.Kind of auction thing.No but I can't so either yeah I mean.Like it's I agree but like the.Alternative to this would be to say.Okay like because your point about.Okay I'm going to have a transaction.Where I put a fee of million dollars.Right and.I mean as a.As a transaction submitter. I would feel very nervous about this.Because now if I have a.Leader that wants to play a joke on me.They can.And they would actually pay nothing i.Mean nobody's actually I mean only that.One person is going to pay one million.Right and that's what CAP 42 lets you do.So right now I have 42 lets you do that.I the.Original version that I wrote was.Actually .Requiring that those groups would be of.A minimum size.To actually avoid this type of situation.But I thought it was maybe not.So basically you require to do this.Those .This bidding system.At least some number of .Of transactions.But yeah I don't know.That would maybe mitigate this.And it kind of makes.It kind of makes both versions work in a.Way.Because now you can have arbitrary sets.Or arbitrary groups.Where you do this bidding thing.I mean i.Wonder if the right thing I'm just kind.Of breaking it down that this is.Not.Very nice.In terms of like how much of the.Ecosystem it impacts but I mean I almost.Wonder if you sort of you want to give.You want to give people submitting.Transactions a choice so if I had.Some flags on my transaction then i.Could say hey I'm willing to.I prefer the validators play with the.Priority of my transaction delayed or i.Prefer that validators play with the fee.That I'm paying or something right and.So then you'll either.You'll you'll depending on what you.Select you'll either pay a potentially.Very high fee if validators want you to.Or you'll get de-prioritized.If they don't like the fact that it's a.Path payment or that it's touching some.Asset that we think is a spam asset.Yeah I strongly oppose that idea i.Think that we have a problem right now.With with the dutch auction where .People don't understand it because it's.So different from other networks.And understanding.Like adding other dimensions to.To like prioritization besides just.Feet. is is just gonna.Confuse the hell out of people.Well what if there's just one bit which.Says I want to participate in the dutch.Auction or I want to pay this fee.And so then.Like like yeah why I mean I still.Understand why you would want people to.Like what the what the current contract.With the network is is that you put a.Fee bid and you may pay up to this.Number.That's good that's the contract it's.Fairly simple I think to understand. maybe you don't maybe it's harder to.Understand when my transaction is going.To be included.But at least you know.The contract is simple.Yeah I agree with niko I think that like.The current the current contract doesn't.Have to change even if the underlying.Mechanism changed like basically this is.The amount the maximum amount I'm.Willing to pay maybe if it's an.Opportunity I'm going to pay the whole.Thing maybe it's for something else.You're going to pay like the validators.Can change the logic without having to.Have like wallets start like exposing a.Weird interface that's true but but we.Are the validators are gonna have to.Make a decision right they're gonna say.Like either you're willing to pay a lot.And either I'm going to you know.Charge you a lot or I'm gonna charge you.The same as everybody else.Right so we're now giving the validators.That discretion.And you know if we think that the if we.Think that the dutch auction is a good.Thing and we think that certain.Transactions should be guaranteed the.Dutch auction I'm I'm not sure I believe.This right but it's it's plausible like.I'm I'm not taking it aside. then maybe make it explicit in the in.The transaction itself and .As opposed to ..I don't see how like that you can make.It really explicit I mean like you have.To have a market to afford this to.To work.That's why I was saying like maybe it's.More like.I.Ensuring that people are actually part.Of a market when they are doing this.Building they expect some bidding.Like you know I want to be competing.With at least.Five people or ten people I don't know.What the number is but like.Sometimes something like that.Can we go back a little bit to this .Like if we actually.Combine.Groups and apply order like make them.The same thing.I think this.May create.It depends if like how many groups we.Have but like i.Think .If we think that people are going to be.If we want people to add more groups of.Our time.Doesn't that leave too much.Does that give too much kind of power.To validators now that they can control.Apply order right now they don't really.Control that.Well I mean the the the rules for.Apply order could go through consensus.Potentially. or some some rules I mean so like i.Could definitely imagine a situation.Where like you know in the long term.There's like four groups you know.There's.There's speed x there's.Fast legacy operations there's slow.Legacy operations and then there's like.Smart contracts.Yeah exactly like so those groups I i.Understand those groups I don't.Understand how.Inside those groups.Fees would impact apply order.Okay two things to interject here one.There's actually already a CAP about.Arbitrary transaction orders so we.Should probably all review it at some.Point and incorporate that information.Into this conversation because we.Probably already argued about this like.Three years ago.And since we didn't do that for all the.Reasons so we should learn what we.Learned back then.It's 14.it was written by jeremy.I I don't remember what it says either i.Just remember it having it I just.Remembered having the word adversarial.Transaction ordering and I'm like ah yes.The I think the word adversarial made.This pretty unpopular.But the .The second thing I want to add is like.I think probably to make this grouping.Thing sane.The fees and the groups would have to be.On different like unorthogonal axes.Otherwise like this is gonna just be a.Nightmare I think nico.Probably.Okay what's that what's your.Sorry I missed your comment. like you were saying like how would.The fees.Impact the ordering within the groups.And like you know what about the number.Of groups and stuff like that I mean.Probably like fees and apply and like.Phases should be separate kind of.Grouping or tagging or whatever system i.Know that's that's what I'm saying like.I don't like the idea of mixing the two.Concepts yeah yeah I don't think they.Should be mixed I think that would be a.Mess.That'd be really really complicated.Right but like.Maybe the the things that maybe as part.Of those changes if we mess with the.Transaction set we should make it that.It's easy to add more. phases I guess.Even if we're not adding a phase with.With.This change because we don't have the.Need for that. right now.I think we I mean I can see given that.I'm adding this generalized transaction.Set thing like maybe. it should be easier to have phases to.Now I don't think it's that easy.Because it's using this index thing.And yeah maybe I should just ditch that.And then instead it's like you actually.Have actual.Vectors and yeah.I would like that more.So we are getting close to the hour and.I guess my question is you know it seems.Like there are.There's more to discuss than there's.More to think about.What's the best way to move the.Discussion forward.I mean I think there are like a few so.There are like a few interesting.Questions here there's the.Yeah the action system.Like what do we do with this.And then there's the actual structure of.The like.How can we do.What type of groups can exist or not.Exist outside of the protocol.So I think there's also work that.There's something that doesn't need to.Go through the transaction there I don't.Know how you guys have like what the.Current state of this is but I think.That there's going to be some.Configuration.Some way of configuring Stellar core to.Say like which transactions we think are.You know should be prioritized and so.That doesn't need to go through the.Consensus layer that's what's going to.Like you know basically.Implement the discretion that validators.Have but.Having.Some part of that kind of design.Sketched out I think would potentially.Inform.The debate over what the the consensus.Layer like transaction segregation.Mechanism should look like.There is a like a super duper ultra.Primitive version of that that already.Exists.Super super primitive. but I do think it'd be interesting to.Kind of think about like.What.Like what could we actually make.Expressible in a pretty simple way.Because like if there's nothing that's.Really useful that we can express.Then that really lends itself towards.Saying like okay like these things.Probably like too complicated to express.They're not configurable validators.Won't be able to do it etc whereas if we.Can think of lots of useful things that.You can express simply and it's like.Actually like we should feel free to.Give validators a lot of power to make.You know same decisions and they can.Configure it easily.I think that matters a lot I mean like.The yeah like the I guess they're like.Different things here there's like.Because my .What I thought here my intent here was.Not necessarily to make it.Something that you would necessarily.You know do.In as a config right it's not like a.Config file that people deploy I thought.It would be more of a.You make actual changes to Stellar call.And then those things get.You know I mean I think a config file.Would be better because I mean it would.The point is it's better but it's.It's it gets a lot more complicated.In terms of I mean I really changing.Stellar.Changing consensus of course is is.Easier right and we'd rather tell people.Hey you know because of this thing like.Please compile the you know this latest.Version of Stellar core which is still.The same protocol version but that's.Still pretty heavyweight so.It would be nice at least to rule out.That a config file isn't sufficient.How do you feel about a hook david like.What we do for history.Maybe yeah.Because then we could just like.Basically just like vomit out the set of.Transactions that we have in memory at.Your script.And say like hey man this is your.Problem you figure it out.Yeah or you know it could even be if we.Keep care about efficiency it could be.Like a plug-in or something right that. you know.But but like what does it.Look like maybe the plug-in just like.Assigns a small integer to each.Transaction which is it's sort of it's.Bucket number or something and then.There's a config file that assigns.Minimum fees or relations of fees.Between buckets I don't know like and.Right now I'm just making some up so but.To have at least one concrete design on.The table not an implementation just a.Design I think would.Would make the the would make it a lot.Easier to discuss CAP 42 and the various.Possible changes to CAP 42 in in in like.Its concrete context.I mean like the other thing that would.Happen that sounds like like.Like it's getting into let's see how.What type of complicated policy we would.Want to implement.And and is too expressive enough or is.It too complicated for the things that.We want to do well.Like I mean like like which policy like.I had a previous example of policy in.There that I thought was way too.Complicated in the context of this guy.Because for for me what I want the cap.To be is actually.What are the consensus changes.Like I like the things that are really.Part of the protocol.I don't in a way like I want to.To kind of set aside as much as possible.Yeah like those type of more complicated.Changes that actually we can.Do later on and this doesn't require a.Cap.No but I mean I just you know I want to.Know like you know like for example i.Don't know if this is true but maybe.What we want to do is we want to keep.Track of sort of for each asset the.Fraction of failed you know path.Payments that involves that asset and.You know and then for when it crosses a.Certain threshold we want to like you.De-prioritize or raise the cost of.Transactions involving that asset or you.Know just I but now I'm just making that.Up right but like let's have an actual.Concrete thing of like places where this.Would be useful and how it would work in.Stellar core.And once we have that I think it'd be.Easier to say like well do we really.Need CAP 42 or would it be simpler just.Like set the price for each transaction.Or to have like separate arrays that.Would then also facilitate the phase.Thing because it could be that the.Phases and the the fees for spam should.Be solved by two totally separate.Mechanisms or it could be that like we.Should have one mechanism and like cap.42 should basically like solve both.Problems at once and I actually don't.Right now with like so few use cases.Whether we should be doing this as like.Two separate mechanisms or a single one.The other thing I'm interested in here.Is just like.What's our goal.Is our goal to have less of these.Transactions to have them pay more to.Have a better distribution of.Transactions what is the thing we're.Actually trying to achieve.I feel like we'd have more ease.Agreeing on the mechanism if we all.Agreed on the thing that we wanted to.Happen.I don't think we all necessarily have.The same picture of what we want to.Happen I don't even know if someone I'm.Not sure if I even have a picture of.What I want to happen.I don't like what's the current.Situation.But what is the good situation i.Don't know and that's what I mean by the.Concrete thing like let's just say like.Here's what Stellar core could do here's.A couple of scenarios in which the.Network's not going to behave well and.Here's how it would be solved with this.Plus some CAP 42 like thing.And then we can.Even we want more examples like the like.The one right now in the CAP is the.We can do. groups based on. dex activity so you want more of that.And I want but I also want to.Maybe know like how this would be.Implemented in Stellar core like again.Like config file change to siebel's plus.Plug-in like you know because is it is.It realistic like how how often can we.Get people to like.Compile new versions of.Of we get a new version every month.Right so that's why I'm like.Do we need people to go and mess with.That more often than that I don't know.In a.Super uncoordinated way.I don't know I could do it very.Interesting. do you know people actually do.Upgrade every month or just for the new.Protocols.I mean like every yeah at most it's.Like people yeah like.Upgrade after like three months or.Something yeah so like if people are.Only upgrading like for the new version.Of the protocol then there's there's no.Benefit to removing this from the.Consensus layer or or or in order to.Remove it or there would be benefit only.If it could be like done by.Configuration file as opposed to like a.Recompilation right but if you're saying.Like with the protocol upgrades every.Six months and people upgrade every.Three months like okay then. maybe there's some benefit.So validators do upgrade .Like you keep their notes up to date I'm.I'm not talking in general yeah like.People.The the bulk of people takes like two.To three months to upgrade.There's pretty big variation some people.Upgrade insanely fast I mean the coin.Quest guys have occasionally updated.Before us I think .But not everybody is so .So excessively diligent.All right.Okay I think we're out of time for today.But I feel like there are some open.Questions and suggestions. for things to sort of work on next.And I feel like ideally we start to.Bring those to the mailing list and plan.To reconvene.With some new thoughts hopefully.The next meeting in two weeks so good.All right awesome thanks everybody.See you soon thank you thanks for.Watching out there.
