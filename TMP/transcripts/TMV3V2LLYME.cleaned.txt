Hi everyone we are now um live so I just want to say welcome to.
Live so I just want to say welcome to.
Stellar protocol meeting of 2021.
So in a minute we're going to do some.
Quick introductions but first.
I just want to take a second to give a.
Quick overview um what are we here for so the Stellar.
What are we here for so the Stellar.
Protocol is designed to evolve.
To meet the changing needs of the.
Growing ecosystem all the different.
Projects that are building on Stellar.
And actually the proposals that we'll.
Discuss today are kind of a perfect.
Example of how that works right they.
Make it easier to issue regulated assets.
So the purpose of this meeting is to.
Discuss and plan for those changes.
In case you're not aware protocol.
Changes which are implemented in Stellar.
they're submitted as core advancement.
Proposals or caps for short.
And they have a very specific like life.
They generally start with a discussion.
On the Stellar dev mailing list.
then they're like drafted and.
Further discussed on that list and kind.
Of when they baked a bit.
bring them to this meeting where we.
Raise issues and address key questions.
Really start to hammer out the details.
The draft of a cap goes through.
Several stages before it's.
Accepted and ultimately implemented into.
A new version of the protocol.
And validators have to actually vote to.
Accept that new version of the protocol.
In order to upgrade the network so.
There's a lot of steps I want to also.
Every step in that process is public so.
Interested in keeping up with or even.
Discussions about the future of the.
Stellar protocol I definitely urge you.
To check out the Stellar protocol repo.
And also to join the Stellar dev mailing.
List that's where discussions about.
These things originate there are links in the meeting.
There are links in the meeting.
Description so anyone listening you can.
Join right in case it wasn't clear from that.
In case it wasn't clear from that.
Overview what follows is going to be a.
uh specific and pretty technical.
Specific and pretty technical.
Discussion um we're mostly going to.
Focus on uh CAP 29 which would make some modifications to.
Which would make some modifications to.
The AllowTrust operation in order to.
Better support regulated assets.
And then we're going to talk about cap.
35 which is what the real.
Probably the bulk of this meeting will.
Be about um CAP 35 asset clawback which provides an issuer.
Asset clawback which provides an issuer.
With a means to claw back assets from a.
Holder in order to support regulatory.
The discussion threads of those.
in the show description and if you.
Really want to follow along you.
Should probably check those out.
It's again there's a lot there.
it will really help you if you're sort.
Of looking at the nitty-gritty details.
While we have this discussion so that's.
Kind of my overview but before we.
start let's do some just quick.
Introductions so when I call on you just.
Say your name your title and your.
I will start I am Justin rice head of.
Ecosystem at the Stellar development.
Tomer told me weller head of uh.
 Stellar development foundation Dan.
I'm Dan doney the ceo of Securrency.
We're a blockchain-based financial.
infrastructure company awesome Lee.
Hi I'm Lee principal software engineer.
the Stellar development foundation.
Jonathan hi I'm Jonathan jove I'm a.
Senior software engineer at the seller.
Nicola yeah Nico berry I'm.
Sq get up on the great Eric my name is Eric saunders.
Great Eric my name is Eric saunders.
I'm a Horizon engineering manager at.
Stuller development foundation.
Stuller development foundation Siddharth hi I'm Siddharth suresh I'm a.
Siddharth hi I'm Siddharth suresh I'm a.
Software engineer at the startup.
Can you try it one more time I think.
Your audios there's something up with.
Your audio but and we'll figure it out but uh and finally.
We'll figure it out but uh and finally.
I believe David hi I'm David maciers.
I'm chief scientist at Stellar.
Okay great um so let's get started uh in sort of a.
Let's get started uh in sort of a.
Last-minute decision we flipped.
The agenda and we decided to talk about.
CAP 29 first um it's a smaller discussion and.
It's a smaller discussion and.
There's less to work out in a way and.
Also it sort of logically makes sense.
CAP 29 has to do with the existing um.
Authorization flags on accounts so cap.
has the catchy title AllowTrust when.
Not auth required um basically a trustline authorization.
Basically a trustline authorization.
It's an important feature of the Stellar.
it allows issuers to handle various.
Currently there are two flags that you.
Can set on an account auth required.
And auth revocable however the way they.
AllowTrust operation works with those.
Probably needs a bit of tweaking so the.
Goal is to kind of clean it up.
Basically the idea is that issuers.
Should be able to authorize a trust line.
Even if their account doesn't currently.
Have an auth required flag set.
And they should also be able to revoke.
if they have the auth revocable flag set.
On their account even if they don't have the auth.
Even if they don't have the auth.
Required flag set so right now you have.
To have them both set um that would basically allow them to.
That would basically allow them to.
Deny list certain accounts.
Which again is valuable for issuing.
So this cap it introduces two changes to.
The allowed trust operation in order to achieve those.
Operation in order to achieve those.
Goals so that's the summary.
I think you know anyone can kick off the discussion I.
Anyone can kick off the discussion I.
This cap originated with Tomer so Tomer.
Do you have any thoughts.
Yeah just uh quickly discussing the use.
We have an issues with we have an.
Issue with right now uh one is that uh.
One is that uh what happens when an issuer changes.
What happens when an issuer changes.
uh flag so let's say that I issued uh.
Flag so let's say that I issued uh.
The Tomer asset with an uh auth required flag to begin.
With an uh auth required flag to begin.
With uh Justin created a trust line.
That trust line is by default.
Unauthorized until I allow off to.
But let's say that later on I changed.
My authorization flags I removed the.
Authorization the auth required.
And now I want to elevate Justin's.
Trust line to be authorized I can't do.
Off required flag is not set so.
It creates like a bit of a weirdness I.
Need to reset it in order.
To set Justin's proper authorization.
uh so this is uh one case that we want.
So this is uh one case that we want.
To fix the other case is what if an issuer wants to have.
Case is what if an issuer wants to have.
A blacklist asset that means that by.
the authorization state is true is.
but uh if the issue wants to disallow.
That they can de-authorize the state right now they.
De-authorize the state right now they.
Invoke the AllowTrust operation with.
If the auth required uh flag is there.
It just fixes the semantics to make.
Yeah that's it uh first kind of obvious question why did.
First kind of obvious question why did.
Are you talking about the case when.
When an issuer modifies their.
Their authorization flags I mean.
This stuff doesn't work this stuff doesn't work if the issuer.
Turned their flags off but I guess I'm.
Wondering why they did that.
Maybe the you know the authorization.
Requirements changed maybe they started.
You know when they did the first.
Distribution of tokens uh it needed to be uh regulated but for.
It needed to be uh regulated but for.
Some reason down the road.
It doesn't have to be so um you know.
The idea is that right now.
know like we don't want uh you.
Know as long as issuers don't set the authorization.
Issuers don't set the authorization.
Flags to immutable we want them to have the freedom to move.
We want them to have the freedom to move.
Between these things and this currently.
I feel like there also have been cases.
Where someone started with an auth.
Required asset and realized.
That it wasn't necessary and so they.
essentially made an error when they.
created set the flag on the account.
I mean I'm all in favor of consistency.
And this just seems to make our.
Our transactions semantics more.
so why have weird little rules that.
Disallow certain things in certain.
Corner cases in certain situations if.
We don't need to so it just seems like an obviously.
So it just seems like an obviously.
Yeah I'm with David on that and uh.
Following up on that it's like we're making the rules.
That it's like we're making the rules.
Simpler in a way that you know anybody.
Who is relying on these rules I mean there's no sensible.
These rules I mean there's no sensible.
Way in which you could have.
Been like oh my business is based on.
Rules being in effect uh you know my.
Application is designed to take these.
Things into account there's no.
Compatibility risk to changing this.
I don't see how you could have relied.
Is this the shortest cap discussion.
We've ever had I guess my question is why is it like.
I guess my question is why is it like.
This I mean presumably we had an idea.
Excellent question Eric I don't I wasn't.
Here for the origins of this but.
From studying the code I have some good.
Hypotheses about this uh and I think there were some other.
And I think there were some other.
Things in the code that we've already.
uh Siddharth did the work on it I.
Siddharth did the work on it I.
Think it was cap 28 maybe um but basically like.
28 maybe um but basically like.
This name auth required is very.
Like from my perspective the name should.
Be something like uh auth like off default or something like.
Auth like off default or something like.
That like do you default to true or default to.
Do you default to true or default to.
False um and that's what the flag.
Actually does inside of Stellar core.
But because of that this name auth.
Required there were lots of places in.
code where there were things that we.
doing that looked like we were.
Going to check this flag on the issuer's.
but we don't actually do that and so I.
Think that this behavior kind of originates from.
This behavior kind of originates from.
This very misleading name.
More than anything else I don't know.
like nikola might have a perspective on.
Why it was written like this originally.
A lot of things happened very quickly uh.
You know last year yeah no I don't remember.
Yeah no I don't remember.
So it seems like no one has an.
to this cap I mean is that correct does.
Anyone have an objection I'd say if so.
Now is the time uh what I object to is like.
What I object to is like.
Psychologically I think we all feel like.
There needs to be some minimum.
Discussion time for any proposal but if.
It's just an obviously good idea let's.
like get it over with it done.
Stuck to his word and this is 15 minutes.
Or less so that's impressive yeah it's eerie.
That's impressive yeah it's eerie.
Okay great I mean it's are there.
Are there any follow-up like questions that we need to address.
Like questions that we need to address.
Before we move on just in terms of.
Thinking about the implementation of.
This cap or we just move on to.
so one last point following on what john.
do we think we should take the.
Opportunity and rename these flags.
I discussed this with liabit and I.
discussed this with liabit and I pitched that same thing.
Pitched that same thing relevant this came up in the discussion.
Relevant this came up in the discussion.
cap35 as well and Lee kind of.
Convinced me that like from an ecosystem.
Perspective renaming this would be.
Nightmarish I'll let Lee chime in on.
That if he wants to but I was pretty convinced that it's not.
But I was pretty convinced that it's not.
Yeah so these names um they obviously.
Exist in the protocol they also exist in horizons api.
They also exist in horizons api.
And that consistency is elegant.
That you can look at the Horizon api and.
You can see a flag name you can read documentation that.
You can read documentation that.
Discusses the protocol and that's the same um so if we were to.
And that's the same um so if we were to.
Change it in one place it would be ideal to change it in other.
It would be ideal to change it in other.
Places to maintain that consistency but.
That would break horizons api.
Because the actual name auth.
Authors are revocable they show up in.
As field names I think the cost that weighs the benefit.
I think the cost that weighs the benefit.
Just take the victory let's okay we're.
Thank you that that's the right way to.
Do it David um okay then we're going to move on to cap.
Okay then we're going to move on to cap.
um so as I mentioned at the top of this.
So as I mentioned at the top of this.
Meeting CAP 35 defines a method for.
Allowing an issuer to claw back an asset.
it could be used for instance to recover.
Assets that have been fraudulently.
Fraudulently obtained um to respond to.
And to enable someone who can prove.
Their identity to recover an asset in.
The event of key loss or theft.
So this proposal which was updated very.
it currently introduces a new account.
a new trustline flag a new claimable.
And two new operations one to claw back.
An asset and one to claw back a.
Dan I think you understand the need.
For this change more than anyone.
Is there anything you'd like to add just.
A little background on this we are doing a series of.
On this we are doing a series of.
with a number of prominent regulators.
From around the world and we've we did a pretty significant.
And we've we did a pretty significant.
demonstrating the ability to enforce um.
Regulatory rule sets from different.
Using Stellar's decks and uh it was very.
Well received by regulators in that particular.
By regulators in that particular.
that is the ability to enforce policy in.
A decentralized setting using the sep 8 pattern.
Using the sep 8 pattern and out of that discussion came a second.
And out of that discussion came a second.
Discussion that the regulators are.
Particularly interested in.
Particularly interested in that has to do with custody and you see.
That has to do with custody and you see.
Assets in general falling into one of.
One which is a bearer instrument pattern.
Bearer instrument patterns.
Bearer instrument patterns have certain benefits in the marketplace.
Have certain benefits in the marketplace.
In terms of being censorship free.
But they also have certain downsides to.
And this is one that makes them much.
More difficult to regulate.
And from a regulator's perspective.
There's a particular record keeper.
Role which has certain responsibilities.
Into the marketplace known as a transfer agent the transfer.
Known as a transfer agent the transfer.
Agent if they fail to execute their.
Responsibilities can be sued.
But they keep the official record.
In the absence of the transfer agent.
Being able to correct the record.
You can't have records on blockchain for.
but it turns out it with a clawback.
Mechanism you can actually empower.
A transfer agent that is a licensed.
Entity with this responsibility.
To correct the record and why would it.
And the big thing that for example the.
Sec worries about is the case of the canadian exchange.
The case of the canadian exchange.
Disappears or dies and loses custody of.
A number of their clients assets.
And there's nothing that the marketplace.
Can do about that scenario.
The sec sees for trillions of dollars worth of securities.
Trillions of dollars worth of securities.
Writing in these ledgers that would mean that they.
Ledgers that would mean that they.
Have to be securities experts for.
Everyone who performs a broker role.
In the marketplace and that to them is.
Just frightening and no one would ever.
Get through would be just way too much.
Of a responsibility not trying to discount the sec's.
Not trying to discount the sec's.
Position on these things but they see.
The ability to correct the record.
As an essential component the central.
Piece of correcting the record.
Is executing a clawback if someone has.
Made a mistaken or illicit transaction if you can pull back.
Illicit transaction if you can pull back.
And put it to its rightful owner you.
Have the means to uh to correct the record so this is the.
Nature of this element came down to regulated assets as.
Element came down to regulated assets as.
We've interacted with regulators.
Globally virtually all of them require.
Some form of this which we'll easily fall into we believe.
Which we'll easily fall into we believe.
The structure of what's been produced.
hopefully that provides some background.
Provides some background.
Provides some background and I'd be happy to answer questions if.
And I'd be happy to answer questions if.
There's any um anything else on this we happen to be.
Anything else on this we happen to be.
Going in and showing the regulators this.
In the near future and that's why.
There's some pressure to.
To show that Stellar can be used in a.
Way that satisfies the world's regulators very prominent.
The world's regulators very prominent.
that Stellar suitable for securities.
You mean so currency correct.
Correct great cool um I mean.
There's already been a lot of back and.
Forth on the mailing list about this.
um and it seems like there is there are.
And it seems like there is there are.
Specific issues to discuss.
Came up is about the immutability of clawback capability.
The immutability of clawback capability.
how it relates to trust lines and.
Lee could you tell us a little bit.
More about what that means what the.
Yeah so it's important to be transparent.
With uh an investor or that is a token holder as to what.
Or that is a token holder as to what.
Rights they have and what rates can be removed so you.
And what rates can be removed so you.
Want it to be absolutely clear.
If they're holding one of these.
Regulated assets versus a bearer.
that this is an asset that can be.
Because ultimately that's an investor's.
Choice if you don't want to have assets.
That have this kind of regulatory.
Oversight that's your right so you need.
um as you look at the asset have the.
As you look at the asset have the.
Indicators that are going to tell you.
That either is or isn't in this.
and what follows from that is even if it.
In that this category it can't be placed.
In this category against their will.
So once you have designated an asset as.
regulated even if it or if you have.
Designated it as a bearer instrument there's no way.
As a bearer instrument there's no way.
That someone can backdoor you.
On this and so that was an important.
Part of the shape of the discussion around the cap.
Of the discussion around the cap.
Yeah so to experience immutable or.
You're saying this anyway.
So there's a couple of ways.
That we address um well what Dan is talking about.
Well what Dan is talking about.
So the verse is yeah author mutable.
author mutable exists so um and still.
Applies to this new flag on the issuer account so if.
Flag on the issuer account so if.
Somebody is using that they can't enable clawback enabled in.
They can't enable clawback enabled in.
The same way that they can't enable.
Auth required or auth revocable if.
They're not set the second way is of the proposal CAP 35.
The second way is of the proposal CAP 35.
Snapshots the state of the issuer.
Accounts clawback enabled.
Accounts clawback enabled onto the trustline when the trust line.
Onto the trustline when the trust line.
And the claimable balance snapshots the.
State of the trustlands clawback enabled flag onto itself as.
Clawback enabled flag onto itself as.
so it sort of inherits that state so.
it sort of inherits that state so.
an account um trusts an issuer.
Today if the issue enables clawback.
Tomorrow it doesn't apply to accounts.
That have already trusted that issuer.
They get that they get the state.
From when they trusted and then claimable balances are the same.
And then claimable balances are the same.
So a user or an account holder can have some confidence that.
Holder can have some confidence that.
If they create a claimable balance.
it will still not be clawed back.
Enabled and yeah I think this is.
We want to discuss is this.
should it be possible to change it.
Sorry go ahead yeah I know like the.
Thing I was going to play is like one of.
thing I wanted to and I think the.
Current version of the cap actually.
Reflects that one of the things I really.
Wanted to get in this cap was as a property that.
In this cap was as a property that.
If we do have assets on the network.
that do not rule this all that do not.
Expect this kind of capability to exist.
Basically not care uh and.
I think yeah like right now we are.
Actually achieving that yeah so what this actually would mean.
Yeah so what this actually would mean.
For all accounts or for all trust lines.
That already exist on the network.
All trust lines would start with this.
clawback disabled so this would have.
No impact on existing trust lines or.
Accounts holding those trust lines.
And therefore no impact on any.
Claimant balances they created from existing trust lines either.
Created from existing trust lines either.
But so one problem with the so I.
Agree with that idea in general but uh one problem I.
Idea in general but uh one problem I.
Have with the specific implementation is.
what if you do want to uh set or clear.
The flag on a truss line right so I.
Could think of like several.
Scenarios um where the current.
Not work so for example let's say that.
The issuer revokes authorization from a.
And offers to restore it in exchange.
For adding the clawback flag so this would be like a very.
Flag so this would be like a very.
Realistic thing to do in response to.
Some kind of regulatory change where.
You're like okay I'm freezing your assets because you.
I'm freezing your assets because you.
Kind of ignored my requests you either.
Have to like sell these assets back to.
Me right now or like you know comply with like the new.
Like you know comply with like the new.
um another example would be that you.
Another example would be that you.
Have different clawback policies for.
For institutional versus like individual.
And now there's no way to uh.
It's very hard to create these.
Institutional accounts you'd have to.
Create these sandwich transactions and.
Those sandwich transactions would not.
Work if you added um off immutable um right.
Off immutable um right uh I mean another thing you might want.
I mean another thing you might want.
To do is have clawback only for.
You know depending on like the limit of.
The trust line so like although I guess people can actually.
Although I guess people can actually.
Raise their limits after a trust line.
Has been authorized but you know.
It might be nice to say like you know.
What I don't care for people to store a.
Hundred dollars right uh but you know if anybody's gonna store.
But you know if anybody's gonna store.
millions of dollars like.
I need to be able to claw that back.
Because maybe they stole it or something.
Yeah David this is a piece where if.
You take the two capabilities in.
Combination I think you get the outcomes.
That you want without a change that is.
Except that there's no way to.
Tell me how to add the clawback enabled.
Flag or remove it from an account.
From a trustline that already exists.
That seems to be missing.
Either a description of it is missing.
It's a fair point the desire to.
Potentially freeze an account using a.
and then basically force the party to.
Either fall into the new regime.
Or maintain their account as frozen.
Let me separate that thought for.
And address the second point that you.
Hey there's there may be some difference.
Between a wallet that it's an.
an account that's a institutional party.
Versus a retail party or a range of different options we.
Or a range of different options we.
Handle that through the policy component.
Of a regulated asset so we're able to.
to addresses or wallets specific.
Characteristics and one might be.
A characteristic or an attribute of.
Being an institutional party.
And that then affects the rules on how.
That wallet transacts with this specific asset and so in this.
With this specific asset and so in this.
We're able to set limits like if it's.
Not more than a thousand then the.
Following things can happen or if this party has certain.
Happen or if this party has certain.
Rights they can transact with parties.
Other rights and we do that at the.
Movement of value using the sep 8 strategy and there the.
Policy's gonna know but hold on.
But back the problem is this is not a.
Step problem it's a cap problem right so.
Imagine a situation where you know uh I like uh you know.
Where you know uh I like uh you know.
There's some central bank issues much.
Digital currency somebody else you know.
Like I'm gonna buy like a billion.
Dollars worth of your asset.
But it can't be clawed back right so.
Everybody else has clawback you want.
That billion dollar investment.
Right so you're willing to do that to me.
So we could collaborate together and.
Sign a transaction but the current.
doesn't provide us any way of doing that.
Right if you want everybody else to uh to have the.
Everybody else to uh to have the.
On the clawback enabled flag on their.
Trust lines there's no way to sort of.
a particular special account that.
Doesn't have this flag particularly if you have auth immutable.
Particularly if you have auth immutable.
Here's how we handle that scenario but.
If you know if this were the challenge.
That was presented to me I would handle.
It this way I'd actually issue two different share.
I'd actually issue two different share.
With uh author revocable and one.
could not be uh clawed back okay so now.
I have two and so those exist and they that's not.
And so those exist and they that's not.
The same that's not what I'm asking for.
like you still I want to be able to.
Trade I'm going to buy a million dollars.
Worth of your asset I want to be able to trade that on the.
I want to be able to trade that on the.
Open market you want to be able to claw.
It back from people who steal the assets.
Know bespoke deal is that you're not.
Going to be able to claw this back for.
Me because I'm laying out a lot of money right so this is a.
Out a lot of money right so this is a.
Very realistic thing to do.
We you know if we could set the bits to.
The right values we would be able to do.
That there's no reason why.
issuer uh if both the issuer and the.
Owner of the trustline consent they.
Shouldn't be able to configure this.
But the mechanism uh proposed here does.
Not allow them to do that and I.
having a mechanism to do that when.
Everybody's on board with the fact that should happen.
With the fact that should happen.
Okay David so let me offer you two.
Well let me offer you one option but.
That addresses these two things like.
I think that going in the downgrade.
An asset that's clawbackable and making.
It non-club active that's completely.
uh I actually have already spoken with.
I actually have already spoken with.
Siddharth about how we would implement.
uh you know we're pretty clear on what.
You know we're pretty clear on what.
We would need to do it's not hard.
But the other direction is not cool you.
Something that's not call backable and.
Make it claw um well I think that the why shouldn't.
Well I think that the why shouldn't.
The owner of the trust line be able to.
Do it I think the issue of the asset should be able to.
The issue of the asset should be able to.
Remove the clawback flag.
And the owner of a trustline should be.
Allowed to add the clawback flag.
But the owner like if the owner is going.
To cooperate they can already do this.
How do you do it wow so all you have to.
Make a like a cosign transaction between.
The issuer and the asset and the holder.
The issuer the holder sends the money.
Back to the issuer deletes their trust line recreates their.
Deletes their trust line recreates their.
Trust line and the issuer sends the.
Money right back and now no okay so hold on.
And now no okay so hold on.
So first of all um one thing there's another I have a.
One thing there's another I have a.
Bunch of comments on this so one comment.
Is that I think that the cap should make some suggestions for.
The cap should make some suggestions for.
And the like Horizon should keep track.
Of how many times clawback has been used.
any given asset and like how much has.
Been called back because this is gonna.
Be information people are gonna want.
And it is one thing to uh to like you know allow someone to.
uh to like you know allow someone to.
Claw something back it's another thing.
Actually send them the payment because.
Then they could you know when this comes.
To court this is gonna be a mess right.
They're gonna be like you sent the money.
Back to us because of this other.
Agreement or whatever this is very uh it very much.
This is very uh it very much.
the uh the negotiating hand of.
The uh of the person of the person who owns the trust line if.
Of the person who owns the trust line if.
They have to like literally like.
Send all the money back and delete.
Their trust line what if they just think about.
What if they just think about.
Implementing this it's like.
It's much more of a mess right no I.
Think it's a mess if you actually allow.
To go from something that is.
Not that cannot grow back to can be.
Club bad because think about it basically breaks any kind.
Think about it basically breaks any kind.
Of assumption you can uh you know you can imagine in terms of.
You know you can imagine in terms of.
Like pre-signed transactions and all.
That stuff because at this point.
Like the issuer gets full control on any.
Kind of intermediate step.
Wait a second I can if I can send them.
If I can send the coins back to the.
uh why shouldn't I be allowed to add the.
Why shouldn't I be allowed to add the.
Clearly like less of a thing to do right I mean I guess I don't.
Thing to do right I mean I guess I don't.
Wait am I yeah okay I don't have any.
Material opposition to doing it it's.
Since I can give you a way to do it with.
changing the protocol like why should I.
Change the protocol but it's not the.
Right like it's not atomic it's no that.
Is atomic that's a single transaction.
Sorry yeah it's um it like.
You know requires me to like cancel all.
uh orders and stuff like uh I mean it's.
Orders and stuff like uh I mean it's.
It's just it's some total mess.
Right like look in one month because of this.
In one month because of this.
Regulatory change we're going to require.
All our customers to either add the.
Or uh or we're gonna like freeze it by.
the authorization on the trust line.
Right and so now the customers.
They have a month and at their leisure.
Shouldn't have to coordinate with us.
send the money back to us and like.
Trust us to send it back to them or like.
Do some complicated protocol where we.
Some transaction this sounds like um you know like.
This sounds like um you know like.
A far-fetched scenario to basically say.
Hey I have this asset I'm going to make it now.
Do a book go up like a far back or.
yeah because like I think like what then.
You're saying like I think the more.
uh way to do this would actually to.
Way to do this would actually to.
Issue a new asset and then ask people.
To just move over like it it's way.
like it's you know you don't have like.
it's you know you don't have like.
This mix mode I mean it's not like what I'm asking for.
I mean it's not like what I'm asking for.
What I'm asking for is not.
Complicated it's kind of more consistent.
We already have operations to like set.
Flags on our on truss lines right and.
But not on yourself that would be a new.
Thing I don't think you can control your.
Own flights today well in as an issue you can hold.
Well in as an issue you can hold.
let me look at change trust as an issue.
You can but like uh those are like authorization flags right.
Those are like authorization flags right.
They'll differ I guess for me David like the main thing that I.
For me David like the main thing that I.
Want to kind of bring up here is like.
don't have to do this now like we.
We could do it now there's nothing.
Stopping us like I agree it's a cleaner.
Way to implement this if it's something that people really.
If it's something that people really.
Actually want but I'm like hey not convinced it's.
I'm like hey not convinced it's.
Something that people would actually do.
Based on what Dan was saying.
And if it is something that people.
Really do want to do as we just agreed it's easy so like it's.
As we just agreed it's easy so like it's.
A change in semantics like we don't.
anything like this to say but there's.
Nothing stopping us from allowing it in.
It'd be an easy thing to do at any.
Time if the need for it actually comes.
we could just do it but I don't think we.
could just do it but I don't think we.
Need to I don't think we need to do it.
Okay but we do need to remove we need to.
Remove the flag yeah right I see a lot.
Of compelling reasons to have the remove.
uh the move is that seems right.
The move is that seems right.
Another thing to consider here.
Regarding john's uh previous suggestion of co-signing a.
Previous suggestion of co-signing a.
Transaction and doing with the issuer these issuers are.
With the issuer these issuers are.
um right now okay like they're.
Right now okay like they're.
Probably doing kappa 18 sandwich.
Co-signing every transaction so the.
Interactivity by the issuer.
Is not a big hurdle here uh it's already.
sending someone all your money like.
It just like who knows maybe are there.
Like tax implications for this.
are you because you've like.
Actually given someone the money I don't know I just it's just.
The money I don't know I just it's just.
A bit like there's clearly no.
Security issue like it it's it is a bit.
That something that's this.
Someone owns a trust line should be able.
To consent to so like why not.
Provide them a mechanism for that um.
And just to be clear you think that.
There might be a way to basically.
Load that mechanism into change trust.
Into the change trust no I guess we don't have uh we.
No I guess we don't have uh we.
It wouldn't work and change.
Trust so it needs to be a new one it would have to be in like.
A new one it would have to be in like.
AllowTrust with a different signer but.
That's a mess so yeah I guess it would.
Need another operation so um I'm sorry dude.
What we frequently issue assets.
That represent different rights um so.
This would be tranches or share classes.
So for example you have uh an instrument denoted xyz and that is.
An instrument denoted xyz and that is.
Absolutely not what I'm talking about.
Here right like so I'm talking about a situation where.
So I'm talking about a situation where.
You need to have the same asset as.
Everybody else because you need to be.
Like participating in the decks.
With this asset so it needs to you need.
To have fungibility so I'm only concerned about the case.
So I'm only concerned about the case.
Where you need fungibility but you have.
classes of asset holder just not.
Different classes of asset right yeah I.
Of asset right yeah I actually think those represent different.
Actually think those represent different.
Rights um in a way that's me is maybe subtle but.
In a way that's me is maybe subtle but.
and of course on the decks you can.
Always trade one set of rights for.
um so you can trade if both assets.
So you can trade if both assets.
one with clawback and one without.
Clawback there's a yeah again I think we're just going.
Again I think we're just going.
Down a rat hole it's not productive I do.
Not care about the case I understand that that's a valid case.
I understand that that's a valid case.
But that's already supported so we don't.
Need to discuss it right that's fair I you're.
Right that's fair I you're.
Talking about something different from.
From what I'm talking about um I'm.
Saying like you know I'm.
Like some I'm hiring someone to you.
Know like I have this bespoke deal where I'm going to give.
Bespoke deal where I'm going to give.
Someone a lot of something that a lot.
Of and because of that I'm willing to.
Give them more rights so uh so that so it seems like there's.
So uh so that so it seems like there's.
Agreement that we can at least support.
scenario and we'll have to wait for the.
Critiques so first of all I think that.
We have this mentality that we've like.
Made this mistake of putting the.
Extension switches at the end.
Of uh of structures like so many times.
Why not do it one more time but it's.
Still a mistake so I really think that.
We should put the union at the top of.
The structures the ext union at the top.
Of the structures and not at the end I.
I don't just because we made the mistake.
10 times like that doesn't mean we.
Should make it an 11th time there's just.
No justification for adding for like.
Tying our hands in terms of like future.
uh by not allowing us to union the whole.
By not allowing us to union the whole.
Data structure so you know sorry to sound like a broken.
You know sorry to sound like a broken.
Right structure are you talking about.
Well any of them like uh anytime there's.
Let's see let me actually have the.
Thing in front of me so if I pull up.
Just search for like ext um.
Because we have these are.
Operations right like you're talking.
Operations then because operations we.
Don't need that we already have the entry claimable.
Balance entry extension v1.
The switch is at the end.
Oh and you're saying to move that right.
Yeah okay that's fine I don't care.
Okay great is that what benefit to just.
Gives you many more options for.
Future upgradeability like you could.
Decide to version the whole data.
Structure instead of just keep.
Like appending like you know more and.
More nested things and so it makes.
Potentially makes source code.
Compatibility a lot easier like.
Because we didn't have this on.
Transaction we had to like jump through.
Some like pretty gross hoops when we.
Wanted to um uh extend the transaction format um.
Extend the transaction format um.
It sounds like there's no objection to.
That very specific idea is that true.
Fantastic because I feel very.
Strongly about it so if nobody else.
Cares please humor me and do that.
I do want to make sure also I know.
That there's some other stuff about the.
That this um that uh like how CAP 35 deals with claimable.
Like how CAP 35 deals with claimable.
Balances that I believe there's some.
Discussion that needs to happen is that.
Oh you mean classic sorry what was the.
Topic I was looking at the uh.
At the proposal while you were talking.
To me oh sorry uh clawbacks and.
Claimable balances I know that there is.
discussion around how they interact is.
Yeah there's a little bit of discussion.
And there's also some interesting topics.
About like uh about what flags we should be using or.
About what flags we should be using or.
Depending on how many more comments.
David has I think we can go I have two.
I'll make them I'll try to make them uh.
Quick well one is quick and the.
well maybe we can defer so the.
Quick one is please give the data.
Structure for an asset code.
A name because it appears also in the.
AllowTrust stop thing and this is a particularly a kind of.
Data structure that you want a special.
Case when you're like rendering it in.
Text and stuff and so to have it like a.
Single data structure called like.
Asset code or asset code name or.
you know there's a knowledge you mean.
Non-native assets right basically yeah.
Truck yeah I think Lee already.
making the change perfect yeah.
And then the other thing is just.
Kind of to plant the seed that there's.
An issue this issue comes up in a.
Lot of other contexts or people have.
Complained to me that they want to create a fixed number of an.
They want to create a fixed number of an.
And then continue to manage it with like.
An auth required and uh and it's a bummer because.
And uh and it's a bummer because.
What happens is you basically create.
This account you throw away the.
The signing with a kind of high signing.
Weight and you keep only low signing.
Weight so you can authorize trust lines.
But then you have no way to rotate the.
And so this situation is going to get.
Worse and that you'll also have.
No way to uh you know fiddle with like the stuff I.
You know fiddle with like the stuff I.
Was talking about before where you.
Change off immutable so we're not going.
To fix that for this but there's something we should.
For this but there's something we should.
Keep in mind when we do these proposals.
someday we should solve that.
Problem okay I'll shut up and let.
Other people you also now have no way of.
Fixing the supply uh so yeah that's exactly I was thinking.
So yeah that's exactly I was thinking.
we've got a lot of people that's right.
You oh that's right you also can't fix.
The supply exactly so it'd be cool if you could like.
So it'd be cool if you could like.
Delegate to some other account so it.
create the asset but it can revoke it.
And it can issue trust lines we'll add a.
Level of indirection that's not for this.
Cap that's just an idea to put in tool.
John I think you had some questions.
About clay mobile balances.
Is that correct no I think that we.
Should move and let Lee talk a little.
Bit about like the different types of flag options that.
The different types of flag options that.
We have available to us I think that.
Based on some discussions that we've had.
That's kind of one of the things that we if you look through.
The things that we if you look through.
That thread on the seller dev.
Mailing list we have cycled through that.
Topic like four separate times.
And it's uh it's pretty key to.
Actually getting an implementation ready.
So I think we should go there.
First yeah so what we're talking about.
is the proposal right now adds a new.
Flag to the account flags auth clawback enabled.
Account flags auth clawback enabled.
And what we want to talk about is should.
Make sense does that deliver um a lot of.
Value or should we reuse the auth revocable flag because.
Reuse the auth revocable flag because.
and revocal conceptually they're very.
Similar like one freezes.
And essentially you can't use it the.
Other one takes it away so you can't use.
I mean both cases the account is losing.
Control over the asset and in a lot of cases we think.
And in a lot of cases we think.
If you have clawback enabled you're.
Probably also going to have revocable.
Or vice versa um so in sort of inspired by CAP 29 in an attempt.
Sort of inspired by CAP 29 in an attempt.
To like clean up flags or to make flags simple and make it.
Or to make flags simple and make it.
Harder to shoot yourself on the foot.
With them uh does it make sense just.
To simplify this and attach it to the existing auth.
And attach it to the existing auth.
I'll say from our perspective we can't.
Imagine a scenario where those rights.
Distinct so we can easily see those.
Collapsing into the same right it.
From a regulatory perspective.
I think we I think it doesn't.
Hurt to uh to keep them separate.
And at the very least there's uh.
An uh benefit for appearances so uh so it.
Benefit for appearances so uh so it.
Goes back a while but there's definitely.
This things like this have been like.
touchy subjects in the past where people.
Have gotten like really upset at the idea that you know.
Upset at the idea that you know.
That you could like revoke things and.
I think it could be uh even if I sort of think that there.
Even if I sort of think that there.
There may be like a transition.
Argument anyway where like you.
Initially uh issue an asset and then.
Later decide that you actually want it.
And so I actually think there's value.
But I also think that uh we don't want.
uh we don't want people to feel in any.
We don't want people to feel in any.
Way that Stellar is trying to you know force people to like.
Trying to you know force people to like.
Consent to like have their.
Assets revoked and so by taking.
A piece of functionality that people.
Might already be using and saying okay.
Now you can only use this functionality.
If in addition you're willing to give up.
These extra rights I don't feel good about that and I don't feel good about that and I don't feel good about that and I don't think.
If it's a kind of a subtle uh.
Change and maybe even if you could argue.
That well you could sort of do other.
Things that would be bad to someone too.
That they've already consented to I.
Don't like the idea of kind of it feels.
Too much like a power grab.
To me that's fair look we don't have a.
Dog in the fight in the politics of this.
Only just for the sake of simplicity.
From our perspective and just as one of your many users um.
And just as one of your many users um.
The right to freeze assets is the only.
Distinction between the right to freeze.
And claw back is just the mess that you leave behind.
Is just the mess that you leave behind.
When you freeze and you don't claw back.
So from our perspective again from a.
If you can do one you really can do.
Effectively do the other.
The only difference is that but it sort.
Of it also depends like how you.
How you um wha what sort of real world interpretation.
What sort of real world interpretation.
To uh these values on the ledger so.
Maybe you have a company that's only.
Authorized to issue some number of.
Shares and so uh you could freeze shares that people.
You could freeze shares that people.
Have but that doesn't allow you to issue.
More shares without you know uh amending your bylaws or.
You know uh amending your bylaws or.
Whatever whereas you know you could.
Argue well if you call them back then.
You can just give them to someone else.
So even though like yes we could just kind of by convention.
Yes we could just kind of by convention.
Agree that these things are.
Are equivalent I think what it looks.
Like on the blockchain and how easy it is to map that to what.
And how easy it is to map that to what.
How you actually interpret that in the.
Real world I think it's just.
Cleaner and easier if you have two.
Separate options and again it doesn't.
It doesn't cost us much to have these.
Two separate flags it just seems less objectionable is.
It just seems less objectionable is.
There a downside to having two separate.
Flags and if so what is it.
Well one of the things that Lee and I.
Kept talking about was this uh.
This weird scenario where imagine that.
You are some kind of guy I don't know what to call you.
Guy I don't know what to call you.
Because as Dan pointed out like.
It's probably not reasonable to do this.
But you're some kind of entity that.
Wants to be able to clawback but not.
suppose uh and you were like okay well.
Like I look at the flags this is pretty.
Obvious all I have to do is set the.
Clawback flag and not set the auth.
The revoke flag problem solved right not.
because if you do this you are almost.
Surely in a situation where you're about.
To shoot yourself in the foot.
then create a bunch of offers you will.
Not be able to claw back the assets that.
Are tied up in the liabilities of those.
the reason for that is that in order the.
reason for that is that in order the.
Only way to cancel the offers for an account is to use.
The offers for an account is to use.
Where it's like it seems like really cut.
And dry and you know we could.
Paste the biggest reddest sign that you.
Can think of in our docs.
But I guarantee you somebody will shoot.
Themselves in the foot anyway.
Yeah you're right there's four.
Possibilities and three of them are.
are plausibly useful right and one of.
Them probably means you're doing.
Something you don't intend to do well.
That isn't it but that's it.
That isn't an argument to have two flags.
Or one flag though because you can just.
Disallow callback on this revocable is.
Also set right so I mean I get they're tied together.
So I mean I get they're tied together.
yeah I mean it increases the.
Implementation burden and the mental.
For users uh but like I agree there's.
There's nothing stopping us from doing.
That I mean it seems to be a trade-off between the.
It seems to be a trade-off between the.
Mental model or overhead of the issuer.
Versus the mental model and overhead of.
People that want to understand whether.
The thing about though about separating.
Clawback from authorization I think.
The one area where this makes a big.
Difference is in the balance entry actually because you know.
Balance entry actually because you know.
As you think about the ways those things work authorization.
Ways those things work authorization.
Completely async in balanced countries.
Like you have those two part payments.
Right you have the when you create the balance entry you.
When you create the balance entry you.
Need to be authorized and then later to claim it you have to.
And then later to claim it you have to.
But then what happens in between.
Is kind of this funny thing right like.
And having this as a separate flag.
Allows you to kind of deal with situations like you.
Kind of deal with situations like you.
Know about what we are talking about.
when like if you want to handle for.
Different downgraded accounts or.
that don't have that you cannot go back.
I mean basically you still need to.
Propagate this flag somehow.
And if you're going to propagate in.
You could say well I'm propagating.
Authorization that's kind of funny.
Because you know you're always.
What does that really mean uh.
Yeah one clarification about the.
Proposal is that we wouldn't be.
Propagating the auth flag would be.
like everywhere in the cap where the.
Auth claw back enabled or whatever the.
Name of that really that flag is you just sub in the word.
That flag is you just sub in the word.
So basically it's like you know the.
Would be set based on the auth revocable flag.
Based on the auth revocable flag.
Of the issuer at the time the trust sign.
Is created and similarly for the.
Claimable balance entry it then inherits.
The flag from the so I it's not so bad.
this like it doesn't really contact.
In this like it doesn't really contact that but that's strictly less powerful.
That but that's strictly less powerful.
Than what we are where right now where.
can actually don't like uh remove.
You can actually don't like uh remove that flag on.
That flag on one account and then you have this icon.
One account and then you have this icon.
That basically can do you know all sorts of things including.
You know all sorts of things including.
That are that cannot be called back.
Smart contracts or whatever where it's.
Very clear that basically that thing is.
Cannot be messed with by the issuer so.
You're talking about you're talking about the value of an.
Account where revoking is still sensible.
But clawing back is bad that that's what you're saying yeah.
That that's what you're saying yeah.
Yeah I can see that argument.
Yeah I think the big issue.
Oh sorry I think my audio just cut out.
No please go ahead I don't know I.
Was interrupting you john.
No I wasn't um you're good.
Yes I think the big negative.
So really the only big negative that.
I've heard people say about having two.
Is just that um that you can you cannot accidentally.
You can you cannot accidentally.
Misunderstand how to use them and you.
Can set one and then you can't actually claw back.
And then you can't actually claw back.
Because somebody has offers.
So is that an issue that we need.
To revisit like the fact that.
You can have club enabled but you can't.
Really call back because somebody has offers like is that.
I know we defined it to work that way.
Because from an implementation point of.
View it's simple or simpler for.
Or simpler for core and the protocol but do we need.
For core and the protocol but do we need.
To revisit that could we have two flags but just not.
Could we have two flags but just not.
Allow one of the four combinations.
To be set on an account I would prefer.
The thing that Lee was saying from.
An implementation perspective that's way.
Easier than moving how the offer.
Destruction gets done which is.
Would you be okay with that Lee I mean.
I'm okay with basically saying like.
Hey like we're not going to let you do.
The combination that's almost surely a.
um it doesn't bother me I think.
It doesn't bother me I think.
Be possible for us to say with cap35.
That they both have to be certain.
But if in the future we discover that.
Actually there is a really important use.
Case where we don't want them to be set.
That we had a proposal that then removed.
Or would it be are we if we sign up for.
Something that we need to be supporting.
no because we can just allow you to set.
The account flags that way right so this.
we're just saying that then you know.
Then I'm fine I think that's so you can.
the revocable flag or you can set.
Both flags you can't set the clawback flag but clear the.
Set the clawback flag but clear the.
This also means that for a.
Line that has revocable set and clawback set.
and clawback set at the time it was created that it won't.
At the time it was created that it won't.
Be possible to use AllowTrust to clear.
So fun wait we don't have we don't have.
A flag revocable on the trust line.
Two flags only allow three combos disallow the fourth.
Three combos disallow the fourth.
Combo that shoots you in the foot.
So we've got five minutes left um is.
There any other is there any other issue that anyone.
Is there any other issue that anyone.
Wants to bring up if not Lee is offering.
To give a quick summary which I think.
Okay so I think um I think we have five.
Takeaways relating to cap.
There's some discussion around xdrs and.
Moving extensions at the top.
Of any new structures that we're.
Creating which is an easy one.
We need some definition for non-native.
Asset code which is an easy one.
We agreed to not reuse auth revocable to.
Keep the separate flag to require that both author revocable.
To require that both author revocable.
And north claude accuse that.
At the same time if callback is enabled.
And then finally there was some.
Discussion earlier at the beginning.
a need for the issuer to be able to.
Remove clawback enabled for a trustline um is that.
And there's going to be a common data.
Structure between uh AllowTrust stop.
For like asset code or asset code name.
Oh yes yep that was yeah sorry the.
Non-native asset code we will introduce some non-native asset.
We will introduce some non-native asset.
That's common between them I think out.
Of all of it most of these.
Things that I just summarized are all.
ability for the issue to remove the.
Clawback flag because there is some.
Issues with us adding that to the.
Existing allowed trial stop.
Which we might need to think about.
Siddharth was actually the one who.
Originally brought that to my attention.
Lisa maybe starts can talk about that.
For a second and kind of talk about what.
Presented as an opera as an option for.
Yeah so the issue with the loud.
Trust right now is uh it requires you to know.
It requires you to know uh which flags are already set.
Which flags are already set.
Because it currently just sets.
The trustline flags to the parameter.
That's passed into our trust.
And this was fine when there was only.
One value but as you add more flags.
It becomes a burden on the user uh.
Ideally it would work the way set.
Options works where we specify which.
Bit which flags you want to set and.
Which flags you want to or which bits you want to set which bits.
Or which bits you want to set which bits.
You want to clear uh so the what we would like to do.
So the what we would like to do.
In the future is uh create another.
uh that works the way set options works.
That works the way set options works.
Where you can actually you know you.
Can enable cloudback if you want.
Or you can disable uh cloud without.
Without knowing what the other.
Uh with the other flags are.
I mean you could just turn authorized.
Into a union right there's only two.
That's not true there are already three possible values for.
Are already three possible values for.
um and with this there would now be six.
And with this there would now be six.
Well yeah I think six now.
That all makes sense right now we're not.
Saying you don't put the six instead you.
Have a union where the three existing.
Values are just uh void cases and there's a there's.
Void cases and there's a there's.
Another case which says set bits in.
And then has a like a 32-bit integer.
I mean whatever this is bike shedding.
whoever influenced this should make the.
Decision I'm just pointing out that.
lighter weight options than uh.
They're lighter weight options than uh creating a new operation although you.
Creating a new operation although you.
maybe they're gross enough that you want.
To create a new operation.
That's definitely an interesting.
Proposal though I hadn't even considered.
Sounds like you know there's more ways.
We go about this and we can explore that.
My question is does this need to be a.
Part of CAP 35 the ability to it should be if we're.
Going to do it should be yeah if it's uh.
Gonna like completely derail CAP 35.
Argue over the details of how to do.
Something that there's two ways to do.
Well I feel like that's like next camp.
Something yeah I think we're out of time.
For this meaning I feel like we did make.
Too um and so yeah I'm getting into.
Those super fun details I think.
Next time and I just want to thank.
Everyone for being here um yeah and welcome back protocol.
Yeah and welcome back protocol.
Meetings hello 2021 thanks everybody thanks bye.