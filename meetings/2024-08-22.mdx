---
title: "Updating Constructors, Wasmi VM, and BLS12-381"
authors: [dmytro-kozhevin, graydon-hoare, jay-geng]
tags:
  - developer
  - CAP-58
  - CAP-59
  - CAP-60
---

<iframe
  src="https://drive.google.com/file/d/1Eqi0znJ21aSfjXYJ10V7eByhr-sTzujY/preview"
  width="640"
  height="360"
  allow="autoplay"
></iframe>

### [Agenda Thread](https://discord.com/channels/897514728459468821/900374272751591424/1275577430043525204)

Core developers discussed the latest proposals to advance Stellar Core in this week's protocol meeting.

1. The proposal to add a constructor to the Rust Soroban variant was introduced in a previous protocol meeting ([prior meeting](./2024-07-25.mdx)), documented in [CAP-0058](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0058.md). A constructor is a function that only runs the first time a contract is created.
2. In this meeting, Dima discussed updates made since the last meeting:
   1. Default constructor: if a constructor is not explicitly defined, the contract is treated as if it has one.
   2. Return value semantics: if a transaction succeeds, it must return a valid value.
   3. Constructor interaction with custom accounts: custom accounts must be aware of the context they are authorizing.
3. Graydon discussed the Wasmi VM update, documented in [CAP-0060](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0060.md). Wasmi translates WebAssembly to an Internal Representation (IR) and then executes it. The update has two impacts:
   1. Translating from WebAssembly to IR takes more time, but executing the resulting IR is efficient.
   2. The update introduces lazy compilation. Of all the functions in a contract, only those called in a given transaction are translated, reducing latency and fees.
4. Jay discussed adding the BLS12-381 cryptographic curve, documented in [CAP-0059](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0059.md).
   1. Pairing-friendly curves enable zk applications. Eleven host functions were added to expose mapping, pairing, and arithmetic on the BLS12-381 curve.
   2. An example BLS signature verification consumed 26M instructions (running natively), which is promising given the per-transaction limit is 100M.
   3. There was general agreement that the interface is correct, and the discussion continues in Discord.
   4. Jay asked developers to build against the function and share feedback.
