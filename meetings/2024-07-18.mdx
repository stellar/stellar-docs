---
title: "Smart Wallet Proposal with WebAuthn"
description: "This overview summarizes a discussion on a proposed WebAuthn-based smart wallet for Stellar, focusing on custom authorization, passkeys, and ecosystem-driven use cases."
authors:
  - alejo-mendoza
  - dmytro-kozhevin
  - ishan-singh
  - kalepail
  - naman-kumar
  - robin-olthuis
  - timothy-baker
tags: [developer]
---

import DriveVideo from "@site/src/components/DriveVideo";

<DriveVideo ID="1lml1VxNkwsRKS9BbnIMFNRXX1Kn6ktvq" />

## [Public Discussion](https://discordapp.com/channels/897514728459468821/1262457130338881566)

This session centered on a proposal to introduce a smart wallet as a public good on Stellar, leveraging WebAuthn (passkeys) and Soroban’s custom authorization via `__check_auth`. The discussion highlighted how Stellar’s protocol already supports customizable auth logic, making smart wallet implementations relatively straightforward at the protocol level.

Developers shared practical use cases enabled by custom authorization, including automation, improved UX for onboarding, and application-managed accounts. The conversation emphasized passkeys (and protocol support for `secp256r1`) as a way to move beyond seed phrases while enabling richer authorization policies for different app needs.

:::note

The first part of the call was lost. The video posted above captures the second half of the call where ecosystem developers shared their use cases and requirements for a smart wallet on Stellar.

:::

### Key Topics

- Tyler put forward a proposal for a smart wallet as a public good. Given that the native auth can be overloaded by using `__check_auth`, a Stellar implementation of a smart wallet is fairly straightforward. The capability to customize auth is already built into the core protocol.
- The proposal only uses WebAuthN-based signers (passkeys). It does not use ed25519, which it arguably should, given that ~100% of Stellar accounts use that scheme. It also introduces the notion of temporary and admin signers to illustrate that an account can be managed by multiple signers, each with a different access policy.
- The biggest unlock with custom auth is the ability to execute custom logic. We heard from various ecosystem members about how they might use it.
  - A dev building a perpetual protocol suggested smart wallets could automatically manage DeFi positions, a major improvement over the status quo where users must constantly monitor assets to decide when to execute a trade.
  - Folks are excited about replacing seed phrases with passkeys, especially for onboarding net-new users to the blockchain.
  - Authorizing cross-chain messages from a different chain, particularly programmatic authorization, requires custom account implementations.
  - Some apps note that users prefer not to think about wallets at all and instead just experience the app (especially games). In these cases, the app may assign a temporary account and control access via `check_auth`.
- Ecosystem use cases discussed:
  - Automated DeFi position management for perpetual protocols
  - Passkeys as a replacement for seed phrases to improve onboarding
  - Programmatic authorization for cross-chain messaging
  - App-managed or temporary wallets for games and consumer apps
  - Microtransactions without requiring explicit user signatures
- Design Choices
  - Two-contract architecture: a factory for atomic deploy + init, and a wallet contract for signer logic, upgradeability, and WebAuthn verification
  - Signer storage model: admin signers persisted, session signers temporary, with admin count tracking to prevent removing the last admin
  - TTL management: aggressive instance and key TTL extension to reduce archiving and restore UX friction
  - Core wallet functions: admin-guarded `add`, `remove`, and `upgrade`, plus policy-enforcing `__check_auth`
  - Event indexing and recovery: signer add/remove events with public key echoing to enable indexers and session signer rehydration
  - Ecosystem and security considerations: cross-domain add-signer flows, mobile UX pitfalls, passkey origin binding risks, and mitigation via multiple or alternative signer types

### Resources

- [Smart wallet proposal (GitHub discussion)](https://github.com/stellar/stellar-protocol/discussions/1499)
- [WebAuthn smart wallet implementation](https://github.com/kalepail/passkey-kit/blob/main/contracts/webauthn-wallet/src/lib.rs)
