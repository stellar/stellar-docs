---
title: "Open Protocol Discussion"
authors: [justin-rice]
tags: [legacy]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="TMV3V2LLYME" />

- hi everyone we are now um live so i just want to say welcome to the first stellar stellar protocol meeting of 2021 um so in a minute we're going to do some quick introductions but first i just want to take a second to give a quick overview um what are we here for so the stellar protocol is designed to evolve to meet the changing needs of the growing ecosystem all the different projects that are building on stellar and actually the proposals that we'll discuss today are kind of a perfect example of how that works right they make it easier to issue regulated assets on stellar so the purpose of this meeting is to discuss and plan for those changes um in case you're not aware protocol changes which are implemented in stellar core they're submitted as core advancement proposals or caps for short and they have a very specific like life cycle um they generally start with a discussion on the stellar death mailing list and then they're like drafted and further discussed on that list and kind of when they baked a bit we bring them to this meeting where we raise issues and address key questions really start to hammer out the details um the draft of a cap goes through several stages before it's accepted and ultimately implemented into a new version of the protocol and validators have to actually vote to accept that new version of the protocol in order to upgrade the network so there's a lot of steps i want to also say that every step in that process is public so if you're interested in keeping up with or even participating in discussions about the future of the stellar protocol i definitely urge you to check out the stellar protocol repo on github and also to join the stellar dev mailing list that's where discussions about these things originate there are links in the meeting description so anyone listening you can join right in in case it wasn't clear from that overview what follows is going to be a pretty uh specific and pretty technical discussion um we're mostly going to focus on uh cap 29 which would make some modifications to the allow trust operation in order to better support regulated assets and then we're going to talk about cap 35 which is what the real probably the bulk of this meeting will be about about um cap 35 asset clawback which provides an issuer with a means to claw back assets from a holder in order to support regulatory requirements there are links to the proposals and to the discussion threads of those proposals in the show description and if you really want to follow follow along you should probably check those out it's again there's there's a lot there but it will really help you if you're sort of looking at the nitty-gritty details while we have this discussion so that's kind of my overview but before we actually start let's do some just quick introductions so when i call on you just say your name your title and your affiliation i will start i am justin rice head of ecosystem at the stellar development foundation tomer told me weller head of uh integration stella development foundation dan i'm dan doney the ceo of secureancy we're a blockchain-based financial service infrastructure company awesome lee hi i'm lee principal software engineer at the stella development foundation jonathan hi i'm jonathan jove i'm a senior software engineer at the seller development foundation uh nicola yeah nico berry i'm sq get up on the great eric my name is eric saunders uh i'm a horizon engineering manager at stuller development foundation siddharth hi i'm siddharth suresh i'm a software engineer at the startup development foundation great karen uh oh we didn't hear karen but can you try it one more time i think your audios there's something up with your audio but and we'll figure it out but uh and finally i believe david hi i'm david maciers i'm chief scientist at stellar development foundation okay great um so let's get started uh in sort of a last-minute decision we flipped the agenda and we decided to talk about cap 29 first um it's a it's a smaller discussion and there's less to work out in a way and also it sort of logically makes sense because cap 29 has to do with the existing um authorization flags on accounts so cap 29 has the catchy title allow trust when not auth required um basically a trustline authorization it's an important feature of the stellar protocol it allows issuers to handle various regulatory requirements currently there are two flags that you can set on an account auth required and auth revocable however the way they allow trust operation works with those two flags probably needs a bit of tweaking so the goal is to kind of clean it up um basically the idea is that issuers should be able to authorize a trust line even if their account doesn't currently have an auth required flag set and they should also be able to revoke trust if they have the auth revocable flag set on their account even if they don't have the auth required flag set so right now you have to have them both set um that would basically allow them to deny list certain accounts which again is is valuable for issuing regulated assets so this cap it introduces two changes to the allowed trust operation in order to achieve those goals so that's the summary um i think you know anyone can kick off the discussion i i think this this this cap originated with tomer so tomer do you have any thoughts yeah just uh quickly discussing the use cases that uh we have an issues with we have an issue with right now uh one is that uh what happens when an issuer changes authorization uh flag so let's say that i issued uh the tomer asset with an uh auth required flag to begin with uh justin created a trust line that trust line is by default unauthorized until i allow off to uh but let's say that later on i changed my authorization flags i removed the authorization the auth required and now i want to elevate justin's trust line to be authorized i can't do that because the uh off required flag is not set so it creates like a bit of a weirdness i need to reset it in order to set justin's proper authorization flags uh so this is uh one case that we want to fix the other case is what if an issuer wants to have a blacklist asset that means that by default the authorization state is true is authorized but uh if the issue wants to disallow that they can de-authorize the state right now they can only invoke the allow trust operation with authorized false if the auth required uh flag is there uh so this is a pretty unoffensive cap it just fixes the semantics to make sense um yeah that's it uh first kind of obvious question why did the issuer onset their flag why not just leave it uh are you talking about the case when when an issuer modifies their their their authorization flags i mean this stuff doesn't work this stuff doesn't work if the issuer turned their flags off but i guess i'm wondering why they did that um maybe the you know the authorization requirements changed maybe they started you know when they did the first distribution of tokens uh it needed to be uh regulated but for some reason down the road uh it doesn't have to be so um you know the idea is that right now um you know like we don't want uh you know as long as issuers don't set the authorization flags to immutable we want them to have the freedom to move between these things and this currently uh gets in the way i feel like there also have been cases where someone started with an auth required asset and realized that it wasn't necessary and and so they they essentially made an error when they initially created set the flag on the account i mean i'm all in favor of consistency and this just seems to make our our transactions semantics more consistent so why have weird little rules that disallow certain things in certain corner cases in certain situations if if we don't need to so it just seems like an obviously good idea yeah i'm with david on that and uh following up on that it's like we're making the rules simpler in a way that you know anybody who is relying on these rules i mean there's no sensible way in which you could have been like oh my business is based on these particular rules being in effect uh you know my application is designed to take these things into account there's no compatibility risk to changing this stuff i i don't see how you could have relied on this is this the shortest cap discussion we've ever had i guess my question is why is it like this i mean presumably we had an idea excellent question eric i don't i wasn't here for the origins of this but from studying the code i have some good hypotheses about this uh and i think there were some other things in the code that we've already changed uh siddharth did did the work on it i think it was cap 28 maybe um but basically like this name auth required is very misleading uh like from my perspective the name should be something like uh auth like off default or something like that like do you default to true or default to false um and that's what the flag actually does inside of stellar core but because of that this name auth required there were lots of places in the code where there were things that we were doing that looked like we were going to check this flag on the issuer's account but we don't actually do that and so i think that this this behavior kind of originates from this very very misleading name more than anything else i don't know people like nikola might have a perspective on why it was written like this originally if you can remember back that far a lot of things happened very quickly uh you know last year yeah no i don't remember so it seems like no one no one has an objection to this cap i mean is that correct does anyone have an objection i'd say if so now is the time uh what i object to is like psychologically i think we all feel like there needs to be some minimum discussion time for any proposal but if it's just an obviously good idea let's just like get it over with it done great then i stuck to his word and this is 15 minutes or less so that's that's impressive yeah it's it's eerie okay great i mean it's it's are there are there any follow-up like questions that we need to address before we move on just in terms of thinking about the implementation of this cap or we just we just move on to cap 35.
- so one last point following on what john said do we think we should take the opportunity and rename these flags i discussed this with liabit and i i pitched that same thing relevant this came up in the discussion of cap35 as well and lee kind of convinced me that like from an ecosystem perspective renaming this would be nightmarish i'll let lee chime in on that if he wants to but i was pretty convinced that it's not a good idea yeah so these names um they obviously exist in the protocol they also exist in horizons api and that consistency is elegant that you can look at the horizon api and you can see a flag name you can read documentation that discusses the protocol and that's the same um so if we were to change it in one place it would be ideal to change it in other places to maintain that consistency but that would break horizons api um because the actual name auth underscore required authors are revocable they show up in the api as field names i think the cost that weighs the benefit of changing the name personally just take the victory let's okay we're moving on thank you that that's the right way to do it david um okay then we're going to move on to cap 35.

The first protocol call of 2021 focused on the regulatory tooling that issuers need on Stellar. The group walked through CAP-0029 (AllowTrust when `auth_required` is unset) and CAP-0035 (asset clawback) to make sure token issuers can enforce blacklists, reverse fraudulent transfers, and recover accounts without surprising end users.

Key discussion threads:

- Why CAP-0029 lets issuers authorize or revoke trustlines even after they toggle their account flags, so migrating from restricted to unrestricted issuance (and vice versa) does not strand wallets.
- CAP-0035’s proposed flags and operations for clawing back balances—including claimable balances—and how those primitives satisfy transfer-agent obligations and global regulatory requirements.
- Regulatory context from partners working with the SEC and other agencies, emphasizing “opt-in” assets, transparent metadata, and the roles that transfer agents and record keepers would play when clawbacks are invoked.
