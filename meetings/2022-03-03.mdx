---
title: "SPEEDEX Lane Configuration and Monitoring"
description: "This discussion revisited CAP-42 and introduced CAP-44, focusing on lane-based fee mechanics and the on-chain configuration of SPEEDEX. The conversation centered on validator discretion, wallet behavior, governance tradeoffs, and the operational limits that shape how SPEEDEX asset sets can scale."
authors:
  - david-mazieres
  - geoff-ramseyer
  - jonathan-jove
  - justin-rice
  - leigh-mcculloch
  - nicolas-barry
  - siddharth-suresh
  - tomer-weller
tags: [legacy, CAP-42, CAP-44]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="uAkvN1WtQbY" />

This session continued the deep technical discussion around transaction fee lanes and the emerging SPEEDEX architecture. The first half focused on final refinements to CAP-42, clarifying how multi-part transaction sets change fee bidding strategies, what wallets should expect when lanes fill, and how validators can safely roll out lane-based behavior without breaking existing tooling.

The second half introduced and stress-tested CAP-44, which defines how SPEEDEX is configured on-chain. Much of the discussion explored governance and scalability tradeoffs: who decides which assets participate in SPEEDEX, how many assets can realistically be supported, and whether validators, asset issuers, or market forces should control inclusion as the system scales.

### Key Topics

- CAP-42 readiness and rollout considerations
  - Lane-based fee policies and revised transaction ordering
  - Wallet behavior changes: re-signing vs fee bumping
  - Validator-controlled activation and coordination timing
  - Communication needs for ecosystem readiness ahead of Protocol upgrades
- Motivation for CAP-44 (SPEEDEX configuration)
  - Enabling a fully on-chain, batch-based decentralized exchange
  - Removing the need to guess intermediary assets in path payments
  - Separating SPEEDEX into smaller CAPs to reduce risk and complexity
- Asset selection and governance debates
  - Validator-controlled configuration vs issuer-driven preferences
  - Concerns about liability, neutrality, and “picking winners”
  - Discussion of veto power, defaults, and issuer opt-in models
  - Risks of stake-weighted or heuristic-based asset selection
- Single vs multiple SPEEDEX instances
  - Tradeoffs between predictability and flexibility
  - Liquidity fragmentation versus scalability constraints
  - Possibility of multiple SPEEDEX pools as a safety valve
- Scalability and computational limits
  - Price discovery and linear programming constraints
  - Practical upper bounds on asset set size (hundreds, not thousands)
  - Need to balance performance with market completeness
- Observability and operator tooling
  - Validator telemetry and logging requirements
  - Horizon and SDK exposure of lane and SPEEDEX configuration
  - Monitoring unhealthy lanes and failed submissions post-rollout

### Outcomes

- CAP-42 was considered ready for an asynchronous CAP committee vote, targeting inclusion in Protocol 19.
- CAP-44 remained open for further iteration, with follow-up proposals and concrete alternatives requested before advancing.

### Resources

- [CAP-0042: Multi-part Transaction Sets](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0042.md)
- [CAP-0044: SPEEDEX – Configuration](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0044.md)

<details>
  <summary>Video Transcript</summary>

[00:00] All right, hello everyone and welcome once again to the Stellar Open Protocol Discussion. These meetings are for discussing Core Advancement Proposal or CAPs. They're technical specs that suggest changes to the Stellar protocol and they allow the protocol to advance, to evolve, to meet the needs of the ecosystem. They allow us to add new features to the protocol. These meetings are live streamed so that anyone who's interested can follow along. But again it's a technical discussion about these very technical CAPs. So if you're watching, you probably want to take a look at the CAPs that are linked to in the show descriptions along with the mailing list discussions about those CAPs. Today we're once again discussing the two CAPs we discussed last time: [CAP-42](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0042.md)- multi part transaction sets, which again has been revised since our last

[01:00] Discussion, and [CAP-44](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0044.md)- speed x configuration. There have been a lot of questions on the mailing list about that. So this meeting again is just part of the caf CAP life cycle and a lot of open discussion about the CAPs actually happens on that mailing list again link to in the show description. So if you're really interested in joining the discussion, please sign up for that mailing list and you can sort of see a lot of these questions come in and a lot of the answers are made there or they're sort of brought the questions are brought to this meeting, and so I'm going to sort of end it there, if you want to look up anyone who is in this meeting and find out who we are, You can see our names. I'll let you do that on your own. But in the interest of just keeping things moving along, let's actually just kick off the conversation. So first up, we're going to talk about [CAP-42](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0042.md), multi part transaction sets. This CAP would give validators control over which fee policy to use for individual transactions, including included in a ledger, and we actually discussed it previous meeting. It was revised again,

[02:00] Revised, it was revised again, and so I'm going to kick it over to nikola, who made some of those revisions, so that he can walk us through the changes real quick, Nico. Yeah, thanks, Justin. So yeah, like the actually there was, the changes I made were actually pretty minor, I mean expected, given where we are. So yeah, like the changes were basically reflecting the what we discussed at the last protocol meeting. So the actual functional change in the CAP is the use of the total on the sum of fibs as to sort transaction sets. And then the other change is related to questions that we had last time and that were also raised on the mailing list

[03:00] Around: what does it mean for clients in particular? We have documentation today that talks about using, like the fee stats or the like, bidding as much as you can as a strategy, and this needed to be tweaked a little bit. So I put a, possible approach to how to do this with the after this new captex takes effect. So like I don't know if people have time to review it, I think I imagine actually that maybe lee, that I think was not at the last protocol meeting maybe has some questions. Yeah, I did listen to the last protocol meeting and I think the conversation actually answered a lot of the questions that I had and I think you and it goes on the mailing list- I think the only comment that I had about the conversation, where you know the wallets will probably change

[04:00] The pattern that they use to use things like fee bumps. You know if they need to bump the up the fee they're paying- I think realistically for your average wallet- you know fee bumps will probably not even be necessary. It'll be more like: you know you try to submit a transaction, it fails and so you just modify the fee on your current transaction, so you've got a new transaction and then you sign that again and submit it. The pattern sounds pretty clear and I think the only remaining question I have is: do we need to discuss what the rollout will look like? Because, given that wallets, will you know, there is some change in expectations. You know, what sort of lead time do we basically need to give the ecosystem to adjust or learn about this new process,

[05:00] Right? So, like time, I mean, yeah, like as long as people like you said, like today, I imagine that most wallets actually deal with like failures, like timeouts of when they submit transactions. But I do agree that there is like some awareness here on this is about to change. You may actually run into, well, you probably want to maybe reduce the maximum bid for wallets that are where people actually set very high bids, which I think there are some. I mean not very high, but, like you know, like, let's say, one lumen, which is very high for in today's standard. So, yeah, so there's probably some communication that needs to go out there too, that people should actually not put like some very high number that they don't expect to pay and instead,

[06:00] I think, maybe aligned with what actually, a lot of wallets are- it seems to be doing a lot of what the common fee. We see, which is more in the 10 000 troops or something, or 40 000 troops, which is still some penny. Yeah, I think a lot go with a hundred thousand, which is I mean this is still fine. Yeah, I mean there are still. Even with this new thing, unless people are doing, I think the first wave of changes will probably be around, but we discussed earlier in the morning- is that was make it a bit more aggressive for, like this, those trading this kind of trading activity. There is more competition there. So if people are submitting at, yeah, like 100 000 troops, they may actually end up paying that with the with this update

[07:00] For trading, yeah, so, yeah, I don't know like. I think it's more like, yeah, like a communication strategy and documentation. I think that we need to work on just in terms of communication strategy and documentation. Are we imagining that it is possible that this CAP could be included in Protocol 19, or is this already something that might be for a subsequent protocol? Oh yeah, Protocol 19. I mean, like, ideally, I think we can put it in protocol knighting, which will, I think, at the current pace it looks like maybe it will be like in the at the earliest end of may, which is quite a bit of time for people to adjust their wallets or their settings in their wallets. Yeah, I also think the lead time on using the feature

[08:00] Doesn't have to be the same as the lead, time on implementing the feature. So if this went into Protocol 19 but we do some surveying and it looks like you know that's not a realistic time frame for wallets- like, maybe we could, maybe the ecosystem will hold off using the feature for some period of time, right, because validators would have to decide to use the feature, and so there could be some readiness check where, before any validator use of the feature happens, there's just like a sort of coordination. Okay, yeah, like, very like, yeah, exactly like those things will be enabled by flags on the validator. So, yeah, there will be a an actual role. I mean it means I mean it still means that if, like, after this change takes effect, you, if you have like, one of the validators that decides they want to ignore the flags or enable the features anyways, they can

[09:00] Like the audi trail that we have in the, in the archives on the on behavior of your validity. Are there any questions about where we are with [CAP-42](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0042.md)? But it sounds like we're in a pretty good spot. I think we left it at a good spot last time and this addressed the things that came up. So seems pretty much ready to me. I mean I have one nit, but it actually doesn't come up in this CAP. which is the way we indent our case statements, is not compatible with git diff. So, as a general point, maybe we should either like include both the diff and the actual data structures, or we should like reconsider how we indent XDR files. It

[10:00] Just so happens that we lucked out and then this diff- like there's enough context to read it properly, but sure, I think that's a formatting issue, right, which we can sort of talk about offline. Cool, I mean it sounds like with this CAP, it is probably ready to bring to a vote which I can do off, which I can. I guess we can maybe do at the beginning of the next meeting, since Jed happens to not be here today, in which case I think we can move on and talk about we could vote asynchronously. I don't think we need to wait for the next meet. I mean I'm ready to vote and to move this forward. So, okay, cool, I'll schedule a vote asynchronously and then we can share the results publicly and that way we don't have to wait and we can sort of push that forward. Cool, so, I think, then, in other words, [CAP-42](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0042.md) is ready to put to the CAP committee for vote, which is super cool, possibly for inclusion, Protocol 19. But now it is time to move on to the next discussion point, [CAP-44](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0044.md). So cap

[11:00] 44 again is the speed x configuration. CAP speed x is a new design for essentially a fully on chain DEX decentralized exchange that allows for scaling high trend to high transaction throughput. And we talked about speed x: a fair amount this year, it's part of the s. More importantly, get rid of path payments, so you no longer have to guess intermediary currencies to get the best price. Cool, yes, and but for speed x we actually decided to break up the implementation of speed x into several CAPs, and this first one, [CAP-44](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0044.md), is about how speed x is about who and how speed x can be configured. And there's been some pretty interesting discussion on the mailing list. But to sort of kick off, I'm going to pass it to John. Sure, thanks, Justin. So just to give like a quick overview of like what the discussion on the mailing list has kind of been about. The conversations have kind of gone in like

[12:00] A couple different directions. One question is about: can we practically derive the set of assets that we can use with speedx, rather than trying to configure it? I think the answer to that at this point is probably no, but we can talk about it more then. Another line of conversation has been around the, basically the lane of like: okay, let's say that we do the simplest thing and just you know do a do what's in the CAP now, just like a voting upgrade system, can we give some guidelines to the validators that are actionable and predictable, so that we don't have arguments in the community about like what should be included? And then a third line of conversation has kind of been about like the more general process types of things like: should we change the way that we do upgrades to make this easier and increase visibility and stuff like that. But none of this has resulted in

[13:00] Any changes to the actual proposal yet, because it's not remotely clear which direction we should go. So, with that kind of overview of where the conversation has gone, maybe we should just like open up the floor and see what people want to talk about. My two cents around the actual like ecosystem stuff around how to make decisions. I don't think this belongs in the CAP I as a starting point. I think we could just discuss- you know, validators can discuss over the values channel on key base of the validators channel on the Discord. There's no need to put too much structure around this- same way that we coordinate protocol upgrades these days. Obviously this is much more. You know there will be some arguments and it's good, but I don't think we need to like: let's see what this looks like before we start solving for a problem that we don't actually know what it's going to look like. I mean, I think the fact that we have,

[14:00] I mean, I think the fact that we have this debate in these questions, suggests to me that this isn't quite the right design. So I still think that there's multiple stakeholders here. Yes, validators are stakeholders, but so are the asset issuers and I don't think that I think that we should give more weight to the asset issuers than the validators. And to the extent that validators should be important, it's only because they're designated as kind of official repositories of information by the asset issuers. I agree with David, but I don't agree with the result. I think that asset issuers should strive to be validators. I think that's like proper SCP usage and then they will have a vote, but you know, just by virtue of having, like, an asset issued, I don't think that's enough to inform the validator network what to do. But I think, as an asset issuer, you are choosing to. I issue your asset.

[15:00] You are choosing to. I issue your asset on Stellar because you know, in large part because you want a liquid market between your asset and other assets, right, and so you have an opinion about which markets are important for your asset and that's just not reflected by having the validators make this decision. So what are the mechanics that you suggest for allowing acid issuers to do this, David? Well, I think that, instead of a protocol upgrade, this could be a new type of operation or a new type of ledger entry, which is, the other assets that, like you're interested in being in a speed x with and. Once you know, when there's like a kind of mutually satisfactory speed x's, then, like you could, potentially,

[16:00] Then you could like sort of create the speed x, but it should come, it should. We should somehow have a way for the assad issuers to express which or rank sort of which assets they're most interested in being in a speed x with and but. And we shouldn't necessarily have only one speed x right, because you know, maybe there's, you know multiple disjoint sets of assets and you know who are the validators to say like which one is reality right, like and how are the asset issuers expected to? You know, like this operation, what is it? I think one of the options that we were talking about was like staking lumens- right, are there other options? Or are we just like reverting back to kind of like stake weighted voting mechanisms, the same? No, it could just be It could just be a like a ledger, like you know an account entry or whatever that you say like which assets you

[17:00] Want to be, like you have trust lines. You could have sort of like you know speedx participations where you like specify almost like a quorum slice of assets that you want to have in your speedx, but every asset's gonna issue, or like lots of assets are gonna issue these and there's- you know, the protocol still needs some way of deciding- like which assets are sort of important. And then maybe there's like some kind of- I don't know max weight matching computation or something going on, but we still probably have to restrict it down to like a certain size or a certain like network objective, right. So there should be a configuration parameter which is kind of like maximum size of a speed x, right? But to me that seems like the only thing. The validators should really be deciding and then it should be the assets themselves that choose to make a market.

[18:00] What are you wait? Am I unmuted? Yeah, I am. What about the? case of contention: like, take the most liquid assets on Stellar which, like buy by like AMM liquidity, we could say would be like, I don't know, I think it's like USDC, XLM, AQUA, a couple other assets, what, like most assets would want to be able to trade with those, because that's where you get a lot of benefit from speed x being able to swap with the liquid ones. So let's just say that like for the sake of argument to say that USDC has like the most liquid markets on seller. I don't know if that's true, but let's pretend for the sake of argument. And then basically, there's like global contention on wanting to be in the same speedx as USDC. Who do we choose? Well, that gives USDC a lot of cloud. I think USDC should be then should be able to decide,

[19:00] You know, who gets to be in a speed x with them. Or maybe USDC can be in multiple speed x's. I mean that creates arbitrage opportunity. But maybe it's not ridiculous. Maybe we think that the price of uscc is so stable that if it's in multiple speed x's, who cares? It's the thing that will anchor the valuations of all the other assets. I think we're putting a bit too much responsibility and weight on the asset issuers in this case, like if you look at prior art and other networks, you know like that the issuer just issues their asset and then there's like a governing body for whatever decentralized exchange. Yeah, I understand, and so I would be into like reducing responsibility, but not reducing sort of like the privilege of like a powerful asset issuer. Right, because when it comes down to it.

[20:00] You know, if USDC still like the problem, is, we might have you, it might be the uscc issues their asset and they just don't care, they don't want to think about speed x if other people have a use for it, that's great, and so it'd be great if, kind of the default word that you could be like recruited into whatever speed x, but that if it comes down to it like you actually have a say in like which markets are more important for your asset. I mean, maybe the problem is I don't have a concrete proposal. So maybe what I need to do in the next week or something is like come up with like a concrete counter proposal for like what this would look like. Or maybe we could kind of a few of us could meet offline and like brainstorm about this. You know, at the very least, I would like to convince myself. Maybe what I'm asking for is impossible, right, but at the very least I'd like to convince myself that it's impossible. Well, and the other thing, like, and I think that's why where I started, when I discussed this on the main list, I was wondering like,

[21:00] I was wondering like, why does like, if you want to have issuers, for example, have some say in the composition of speedex, that should be part of how that SEP is written, right, for how that set is managed by the validator. I mean it's governance, so you know it's one component. I don't know if it's, if it needs to be kind of baked into the protocol in any way. Really, well, one thing I need to baked in is whether there's one speed x or sort of one or more speed x's, and I, I'm very much of the feeling that you know the whole kind of Stellar philosophy is, like you know, we're not here to tell anyone what the ground truth is. We'll just let you know like you can have some weird quorum slice, that you're some weird quorum, that's an entire, entirely civil attack, and then you can have the real world and like, if they diverge, like no big deal,

[22:00] Right, and so I would. Similarly, like to be able to have like, if there's assets that are happy being in a speed x, together and they're disjoint, then I don't want to be in a position to decide which are the real assets and which of the fake out. Like validators shouldn't be doing that, I guess, at the same time. Oh sorry, go ahead. No, go ahead, jeff. The validators are the one expending the compute to run it right, so they should have a say at least. I think well, there's fees being collected and I mean you know, yeah, but the there's like a non zero cost of just like running and maintaining speed x. That's more than just like you have the assets in your database. I mean, well, now there's a question of like, should we be compensating validators? Or is like, is it cheap enough to run a validator? That's not a big deal. Well, I'm just worried about like somebody spinning up like a thousand instances or there should be some kind of. We have to process it appropriately, right? I mean? Sure,

[23:00] I guess it's. I just I prefer to use like market based solutions, like. We think that this like consumes resources on the network. Therefore people should be paying for it. I prefer a marketplace solution to a like validators know best type solution, which is kind of what we're doing here. Let me offer you maybe such a like. It's not quite what you want, I think, but it fits kind of nicely into that space. It's something that I mentioned it both to jeff and Nico offline. So, like, the CAP currently written is basically: like validators control the speed x asset set, and there was a whole line of questioning like could we drive the speed x assets, which I kind of was like I have no idea how to do this. I don't know if it's actually even remotely possible, even feasible, and I presented some examples that are like kind of challenging. But when I was looking at that example, one of the things I realized is like there's probably a core set of assets that you'd kind of want in your speedx, no matter what, like you know the world's most liquid assets. You know, I think the

[24:00] Example I gave for, like the imf, what's their thing called the reserve basket thing. I can't think of the word off the top of my head right now. It's kind of like a good representation of that. Or in america it's like t bonds and you know s p 500, or whatever. You know you'd always want those, just have the liquidity from them. But there's a whole bunch of stuff you might want to trade. That's not those assets, and so a hybrid solution is okay, like dr's- yeah, sdrs, thank you, that's the word I could not think of. I appreciate it. And so one like world you could imagine is a world where, like you know, you have, let's say, we have space for 100 speed x assets. That's like the com, the compute power we have. So then we say like, okay, like the validators can configure 50 and they can configure it however they like, using some off-chain governance protocol, whatever cares. The other 50 are literally what's in the transaction set, determined by fees, just like any other way you get into the transaction set. So in that case the transaction set can still have 100 total speed x assets. 50

[25:00] Are fixed and advanced by the validators. The other 50 are just like, literally the ones that appear in that transaction set. If there's 51 in the transaction set, it's invalid. And that basically means, like, the validators don't have like the truth power, they just have the power to say like hey, like we think these are the things that everybody always wants, so we can try to give you consistently good prices. But why don't we, I mean, why- speculate that these are the things people always want? Why not have people actually say what they want, right, so I mean. So here's a like a dumb thing we could do. Okay, let's say there's only one speed x, but we could have? Is we could have everybody like, vote their lumens for, like which assets they most want to see in the speed x right. And then you know, we just take this set of assets that has the greatest vote, Why are we reverted? Reverting to stake weighted voting? This is like, because it's less Stellar philosophy.

[26:00] No, why is it a anti Stellar philosophy? Because, like, we shy away from the idea of: you know, more money equals more votes. Well, I mean, what we're trying to capture with SCP is like some abstract notion of cloud, right, and you know we want this idea of like. If people are interested in a particular, in a you know particular asset, then and that asset you know, say like, designates a validator, then like that validator is going to have more clout in the network. I mean, I agree, like this stigmatic voting isn't perfect, but it's at least a market based solution. The problem is like you can't have a market based solution to consensus if you don't already have consensus, or you can't. But

[27:00] I mean there's our proof of stake systems, but they have all these other drawbacks right which we don't have. But once we have consensus, then I'd rather have you know, market based solution. Just because we do trust the validators to maintain consensus doesn't mean we should give them lots of extra power too if we don't have to. I think, going back to my original appointment, I think this is a great opportunity to get stakeholders to actually run their own validators- which is what you know, like we've been talking about sap forever- as actual stakeholders running validators. This gives them a reason to do that. I guess that's true, but that it seems a little indirect. I mean, I actually agree with tomorrow's point here, like if you're issuing like an asset that's going to be used by everyone, then like you certainly at least should

[28:00] Like have a strong incentive to run a validator. Or if you're not, you're sort of free loading off of everyone else running validators. Well, I mean in an ideal world you wouldn't necessarily need to run a validator but you would need to like hire someone to run a validator. So I think, like a reasonable like state of the world in like the three years, is that there are various companies like block, demon or whatever, who run like sort of validator in a sorry anchor in a box type products where you know what you could do, is you could, you don't have to run a value, but you pay them to run the validator for you and they can provide insurance or like you sort of whatever else and it's there's no reason why someone just is like probably a lot of people like running their validators on amazon, right, and so we don't need, like everybody, to run a physical server. We just need everyone to say, hey, like, we trust amazon to like host our validator and like, and that's fine, but it's. But they're at least explicitly saying like, yes, this is the validator that you should trust. Sure, but

[29:00] There's that contractual relationship there and through that I can tell whoever is running my validator to vote for my asset to be in speed x in whatever way. Right, and you know I'm still funding them to run the validator. But the problem is that now let's say that you know, in three years, you know 40 of all the kind of assets that anybody cares about have like contracted with block demon to be their validator. Right now we still haven't, you know. So now, like, we haven't told block demon like how to wait, like various votes or whatever. So it's now, is now black demon gonna be actually the one deciding which assets are important? This is going to be some term of like you know, negotiation and these like confidential contracts they potentially have with their more important customers, or can we do it in an open, transparent, like you know, reasonable, non discriminatory way where it's just like public how this is happening and the decision is out in the open?

[30:00] You guys mind if we zoom in on a different aspect of what David was talking about a second ago for a few minutes? Can we zoom in on the one speed x versus multiple speed x question? I think like we have not given a lot of thought to this, did not come up on the like on the Stellar dev mailing list also. I just want to make sure we talk about it at least a little bit. I think it loops back into the other question as well. I can imagine. I think that if we come up, it's possible, if we come up with an answer to the, thing we're just talking about, that it would work more easily if there's a single speed x, but otherwise then you know all sql. We should have multiple speed x's. I would. Yeah. My vote is like I don't find the idea offensive. I'm just not sure that we need to be thinking about this right now. I think that if we do get to a point where it looks like the list of relevant

[31:00] Assets is growing to a point where this is like it's too much for a single speed x, then we can start, you know, contemplating the idea of adding another one, but it seems like getting started with more than one speed x, given the shape of the markets on Stellar. I think it's getting ahead of ourselves. I think that we should absolutely think it's like we literally have, like you know, an XDR diff in front of us, which is actually what we're debating at the end of the day. and so there's absolutely a question of like: should there be an array of maximum length, one such that, down the line, we can, like you know, increase the array size, or should it be sort of hard coded like this to have like only a single speed x. But again, I think it's like preliminary to make that decision right now until we figured out how we're going to choose what the assets are. But I think like an important kind of safety valve of like ensuring that, like we're

[32:00] Choosing assets in a kind of Stellar and like egalitarian way and market based way is to say that hey, like you know, if there's like complete disagreement in the world, then fine, like have two speed x's, like let's not decide which one is the civil attack and which one are the real assets, okay, let's go back to the other thing for one second. Then, since there's people don't seem to want to talk about this, but let me offer you a thing, a version of the world where issuers actually have some control. It's like a kind of slightly weird version of the world, but it's not one that we've spoken about yet. So in this version of configuration, the validators don't vote on any asset. Configuration doesn't apply at all. Every issuer can like produce a list of assets that they'd like to be in speed x with them. My guess is that most of those lists will be exactly the same,

[33:00] Or we could even have the validators configure the default list and you only get a different list if you actually put something in that way. If you're happy with the default, you don't have to do anything. My guess is still that they would all be very much the same, but it's possible they wouldn't. And then the way that we get the actual set of assets in speedx is we take every asset that appears in the transaction set. You bid for fees to get a transaction step, so that's very market based and then the way we fill out the rest of the asset set is we go over every asset issuer for each of the assets that appears in the transaction set and we grab the asks from their list. Now, like the reason you have to do that second part is like you definitely don't want to. So there's a different speed x, for every block would have a different set of assets potentially, but actually I almost prefer this. We can even say like you're just not allowed to when you're forming a block, it's like ill formed if your speed x involves more than whatever, the parameter number of assets is right, so any given block

[34:00] Can only have a certain number of assets being touched by the speedx operations, and that could change from block to block. But hold on, just I want to make before you go, jeff. I just want to make sure that I'm on the same page as you, David, do you want the pure anarchy approach where the validator, like the validator nominating the transaction set, chooses all the assets in the set? Or do you want the semi anarchy approach where they choose the asset, like they choose the off the operations, and then you go to the issuers to get to fill out the set. No, I think actually, the idea that, like each you know, you have one speed x per block and it just there's some maximum number of assets that can be mentioned in a given block for the speedx transactions, like, I think that this well so. One point like: why are we talking about filling out the asset set? My instinct

[35:00] Is that in almost every situation, we're going to be having to prune down to a certain size, not like fill out assets. And then point two, I think is there's a huge value in having predictability in what the assets that's going to be. Otherwise, like I like, I like otherwise that like, maybe you know, some validator says like I'm going to have this at some other validator says I'm going to have that asset and I'm like now I started playing games about like where I send my transactions and then like transactions get, you know, buffered, and then things get front run and then starts getting really messy. We'll have a deterministic set of rules like it'll be whoever like whatever collects the most transaction fees or something. But I can still gain that with the deterministic. I like I had a hard time coming up with like a deterministic rule. That wasn't gainable because I can always submit like transactions that are out of the money or whatever to get my assets in. Maybe I'm just being paranoid, I see. So you're saying like you can. You

[36:00] See, so you're saying like, you can create standing orders. Right, I can set an order with like a minimum price of like a million or something, and that'll never trade and manipulate this, manipulate the asset selection rules, which then manipulates the prices. I think I mean I'd like to brainstorm about this, maybe offline a little bit, because, like, if there's transactions that you know are not going to like I wonder if you can have a. You know how, like you can have a post limit order only, type order, so, like, maybe those could be free, and then, like, maybe we could have people post, however, and cancel limit orders, like for as many assets as we want, and then we actually choose speed x based on like the. I don't know the depth of the orderbook or the number of transactions or something, because, in a way, you really want speed x for the trend for to like you

[37:00] Want the ones with the highest number of transactions, because that's where you need the extra efficiency. I don't know if that's true at all. I mean, like you should just revert back to the mailing list where I gave like a whole bunch of examples every time anybody mentioned like a derivable set about how you could game them and I feel so confident that they're all gameable that I'd be willing to wager that for any heuristic that you came up with I could find a way to gain it. I feel pretty confident. Not that much, but I still feel pretty confident. So I don't know, David's come up with some pretty crazy stuff before. I feel like he could maybe come up with something that I couldn't figure out how to game, even though I still believe it would be game. So that's why I'm not willing to really make a big league. But my point is, like any kind of heuristic is probably extremely vulnerable and like the burden of proof to get me to want to vote for something like that, to want to support something like that would be convincing me that it's not gameable.

[38:00] And I think that's going to be really hard. Just like just being honest, I think driving the transaction set is just borderline, so but if there's multiple speed x's, it could make the gaming not a problem. Right, if the way I game, the system is by creating a second speed x, who cares? Right, but we still like to determine the competition. Yeah, it's not like you're creating an infinite number of speed x's either, so at some point you have to pick which one of those feed x's is well. It's not like you have an infinite number of transactions in a block either. So no, but that's, it goes back to it. It's all gameable. I think there's just generally value in having a system that sort of runs predictably here, I agree, but all right, I feel like that. I feel well. Look, this thing obviously is not ready to move, oh well, to be accepted today,

[39:00] Anyway, right. So I feel like now, and I feel like now I have a challenge to like, at least propose something, or try or figure out why I can't. You know, I think we should also think about or, sorry, go ahead. I did want to answer one question that you had actually before, jeff, which is like: why are you talking about filling out the transaction set? And it goes back to that. Like that example I posted, like it's like five or six or seven or eight emails back now on the mailing list, like it was like an example using like major world currencies and like it was a trade for like pounds, for yen, but basically, like the concern I have is like you end up in a world where, like, imagine that, like you know, imagine that the russian central bank just like happened to announce for some crazy reason that they were going to raise their interest rate from 9 5 to 20- not that this is realistic at all, but like, imagine that would happen. I imagine that there might be a ton of people who wanted to sell their rubles, maybe all for euros and usd,

[40:00] But like, if you only have those three assets, you're potentially missing out of a lot of like cross liquidity that you can get from area to bro markets, like you know where you use the other AMMs to pull more source and sync through so that you can trade more rubles at a good price. So now imagine that for some crazy reason, USDC doesn't want there to be a very liquid market between rubles and USDC and so they feel like if they're going to be in a speed x, They would prefer to be at a speed x without e, rubles or whatever. That is a good point. I think at least the asset issuer should have a veto on participation. On participation, well, either they should have veto or if they should at least not be in any way complicit like it should be, like everybody else wanted it and they were overruled or something. Yeah, I guess yeah, and also. We've been expressing like: asset issuers want good markets with certain assets and we should also let

[41:00] Them express the opposite opinion. I don't want to market with this asset. You know, listen, six years. Here's something we could do We could actually have like speed x's owned by account. So we could say like, look, we're actually going to. You know, instead of a validator, there's just like someone everybody thinks is important and we're going to let them choose the assets and they're going to create a speed x. And if you don't like that, then you can create your own speed x. And if people start trading on your speed x, great. If not, then you're irrelevant. This makes it harder with the liquidity pools and also, isn't this like more unaccountable than the validator? Well, it's both more and less like we know who it is right. There's now like someone who's running the speed x and if that person needs to comply with like russian sanctions, that person can remove the ruble. And if somebody else, you know, if somebody in russia says, hey, you

[42:00] Guys suck, I'm going to create a new speed x on Stellar. You know more power to them. They can do that, but if none of the other assets want to move over to the new speed x, then that new speed x with the ruble, it'll be the ruble trading against nothing, right? What if we did something with, like asset issuers issue preferences and then validators issue like weights to different assets and then we compute via some like global optimization like min- I don't know max matching, or something based on the express preferences, or something sounds complicated. At some point you're really starting to ask a lot of people to do a lot of complications. Okay, so well. So what I'm saying is simple. What's wrong with my thing? Like there's just a, there's just each speed x has a dictator, but there's multiple speed x's. So at the end of the day, if the dictator is bad, people will just go to a different speed x. And is there in your world an unlimited number of speed x's that can be created? Because that's our question: how do you stop an

[43:00] Evil dick or, just like some, someone who should not be creating a bunch of speed ups maybe they were there. You need some like reserve currency or you need some reserve balance to do it or something, or like: well, what we have, I think we're probably fine having like five speed x's. Right, you probably don't want like five million, but this has the nice benefit of giving a particular person accountability for like running the price computation. But it also we need to figure out how to bring the liquidity pools like what. If there's a you know competition between for like liquidity pool liquidity, I think we could just have arbitrage opportunities. I mean like we hope no, but like you can't run this price competition with like. If USDC and euros are both in two different speed x's, then there's like contention on the liquidity pull between the two assets and like maybe there's only maybe the only asset that can be more than one liquidity pool

[44:00] Is the lumen, because no one's there to like control the lumen, but otherwise the asset issuer has to say which liquidity pool they want to be in. Right. So then we're saying like asset issuers declare exactly which fedex they're in. Yeah, which is back to the first point that you decided you didn't like, or somebody decided they didn't like it. There's one additional point that I want to bring into the picture here, which is, you know, our acid issuers. They're active on several networks and a lot of the activity in the space is kind of like multi chain the. I think we really need to focus on our differentiators being like high value differentiators, because every time we add something to Stellar that makes it so much more different than any other network index out there, we just make it more challenging for these players to actually be idiomatic players in a Stellar ecosystem.

[45:00] So we really need to make sure that whenever we add something that's different, it's really worth it. Okay, and having asset issuers need to be involved in listing on decentralized exchanges is a big step away from what they're used to be used to doing right now, so I just want to be cognizant about that. So, yeah, I think your point is right, but it's not inc. So I think what we want to do is we want asset, we want to give asset assures the control. But we want to ensure that something good happens to an asset issuer who just doesn't care and hasn't configured it yet. Right, like maybe USDC, like they can't be bothered to learn about speedx, but everybody else is interested in that asset and so we need to make sure that makes it onto like a good speed x. You know, like going like a different direction in this conversation, do people actually care? Like right now, there's no way to really stop your asset from trading against another asset. Like

[46:00] It can happen on the DEX for, like basically any asset. Like as long as you, as long as somebody is authorized to hold your asset, like I mean they can trade it for anything they want. So like, why should we give that additional power in speed x? Like I know that there's some like interesting because of scalability, right, only if, yes, if we could have a million assets in a single speed x, I would say we shouldn't do any of this right. So it's only, I think, for the scalability problem. I guess my point is like there are two kinds of preferences we were talking about. One is the positive preference, like I'd like to have this liquidity available to me. That's pretty easy. Like my proposal, or rather, not to me but to my, to like people who want to trade my ass, I'd like to have this liquidity available. The reverse position, which is like I'd like to not have this liquidity available, is not something expressible really on Stellar today. I don't know why we should make that accessible. So basically, what you're

[47:00] Saying is like you shouldn't- you shouldn't- let an asset issuer prevent their asset from being traded with ruble anyway, if they really care. What they should do is they should, like you know, use reclaimable assets. They should sanction, you know, they should KYC their users and they should like to go to the appropriate authorities if they have evidence that someone is like evading sanctions. And you know they've KYC people. So, exactly, so, okay, I think that's fine because that's, and if they really care, they can use clawback or they can, you know, revoke the trust line to freeze it exactly. They can basically say, okay, like you're doing stuff that we don't approve of, like it's not in our terms of service. That's true and, in fact, so really, what we should be thinking of is the only reason we're talking about any of this is because we can't put every asset in the speed x. It's just for scalability, and so just real quick question about that is a functional limit that we can't change. Is that correct? Or is there a chance that we could,

[48:00] Through some sort of engine ingenuity or engineering research, breakthrough? Absolutely, but they're like, the limit is: just remind me, like, what is the reason for the limit? That's a great question and jeff is the best place to answer it. Right, so there's two things right. So there's the price computation itself and then the sort of follow up correction- linear programming- and basically the runtime of each loop of the price computation is linear in the number of asset pairs and also you might need more rounds based on more assets. This is especially like you need more rounds of the price computation, typically for assets that are more thinly traded. And then so there's that scalability problem and then there's also the follow up sort of linear programming step. If I just threw a standard linear programming solver at it, I would sort of

[49:00] Programming solver at it. I would sort of that seems to top out at like 50 to 100 assets. And then I was running experiments last night, which you know- caveat that code that you run right late at night is usually broken, but I was pulling in some other open source libraries that I hadn't played with before and that seemed to push it to like a few hundred, like three or four hundred assets, but after that, you know you're solving a, some variant of a linear program which has typically a quadratic or cubic or something, some kind of run time, which sort of no matter what. You're eventually going to have a prohibitive bottleneck there. There's some things you can play with it and possibly you know breakthroughs you can make. But we're doing some more research on that topic. It's something that, like me and jeff and a couple other people around SDF were talking about quite extensively yesterday and it looks like you know it's pretty clear- we can do better than jeff's original estimate of 100. But like getting significantly better than a thousand also probably looks kind of out of reach right now.

[50:00] Like, even if we can do better than you know what jeff hacked up in the middle of the night yesterday, I wouldn't be confident to say we could do a thousand. That already sounds really high. Maybe we'll find out we're wrong. But like 10 000 or you know 50, those are numbers that like are not even really in the conversation, like they don't even sound remotely plausible within like the limits we're working right now like to achieve those kinds of numbers, which would still be a fraction of the total number of assets on Stellar, we would be like we'd be, as David said, like doing novel, perhaps unprecedented research. So here's an idea. What if each speed x had its own orderbook? Sorry, what do you mean, in other words? So the problem, so one of the problems with having the, with the sort of the dictator, one dictator per speed x model that I think John brought up- is that you could have two dictators, each of

[51:00] Whom wants to include both USDC and eurt. Right, and so now what if, like you, so now they're sort of competing for the same set of orders, but they- the pearson, the person placing the order- could also name the speed x Or we could somehow divvy up the or the orderbook between speed x's. I mean, this seems fine to me. I think anytime you have multiple speed x's with the same assets, you're going to fragment liquidity. But or, actually, what if you just run them in different phases. I mean like you know, if we only have like five speed x's right, if we run the speed x's serially, then we just have some random order: you do the first speed x and then you just use whatever's left over the orderbook to do the second speed x and then the third speed x.

[52:00] My real concern is just like I just really feel like the returns of doing this are just like really marginal, like my intuition, and my intuition's been wrong many times before. So I'm not claiming that what I believe is necessarily right, but like my guess is all the really high quality liquid assets appear in the first speed x, whatever you want to label this, first spur speed x and some ordering. You know I'm not saying that the first px might be the one that executes second, right, I understand. But what I mean is like, basically, the first speed x is the place where you want to trade and it has all the value. Basically, right, the first in terms of the liquidity ordering, and then all the second tier assets trade with each other, but because they're all low liquidity assets, the aggregate liquidity is really low. There's no good asset in there, no super liquid acid in there to provide a lot of liquidity, and then anything that doesn't make it into that one has even worse liquidity globally. And so basically, it's like you know, you have like the vc thing where it's like the first thing has to do better than all the other things, the second thing has to be better than all

[53:00] The other things except the first, and like is there anything? So that's why I think there wouldn't be more than five speed. X's right, but I just it's a way to. I just don't want to put validators in a position of having to like justify, like particular assets. I imagine that like there's a really popular asset and it turns out to be a fraud and like you were operating a validator and you like voted to include that asset in the thing right. So now are you liable for that? Like you could have chosen a good asset and you chose to make it easier for people to buy this fraudulent asset. Like, what's your responsibility there? I'm not a legal expert but like, probably very little. Like I don't think that you know american stock exchanges get listed when you know, like sorry, american stock exchanges get sued over listing- well, nobody is, but that's a good example. The stock exchanges have like relatively stringent requirements for companies to get listed and when the companies don't

[54:00] Comply, they get de listed right. So we're now putting so. If we use that analogy, now validators are actually required to police these assets right and to, you know, potentially making sure that they're disclosing things and whatever, because otherwise they bear some responsibility. That is a good point. And it's also possible we would get validators just like not paying attention and voting no on everything so they don't have this liability, and then we wouldn't have any assets in speedx. So at this point we only have two minutes left and I think what I want to make sure that we do is it seems like there are some actions that need to happen between now and the next time that we need to move this long and principally, David, I think it falls to you because it sounds like you want to come up with some sort of concrete explanation of another way to determine, or at least try. Let's try. Yeah, is it so? That's sort of something that you're gonna work on. Is there anything else that needs to happen after this meeting in order to keep the conversation going forward, or is it

[55:00] Primarily we should move all the extension units to the top of the structure? I'm not never gonna vote to prove another proposal on which the ext fields aren't like the first one in the structure, but that's not a huge ask. I have right, do some housekeeping, we should do something. But for the speedx configuration proposal, like I believe from everything I've heard, it's time to see if David can come up with an alternative, concrete proposal. Right, and maybe we can meet offline or something. Maybe, John and jeff, we could like talk at some point, yeah, this afternoon or what. And likewise I'll, like I actually have, some like intrigue about the proposal I made quite a bit earlier about, like the, you know, take the stuff from the transaction set and then use the issuers list to fill out the set. I'll write something up on the mailing list about that too, to kind of give like a full overview of how that would work and why I think it's not a terrible idea. I think it fits somewhere in between some of these other proposals and David's proposals. So,

[56:00] All right, perfect. So we'll look forward to that stuff and obviously the sooner that you can get it done, ideally if there's something for people to read with enough time in advance for the meeting. So like there's just, you know the meeting is two weeks. Yeah, that's ideal. All right, cool, thanks everybody. Thanks everyone for watching. If you want to follow along, there's a link there for the Stellar dev mailing list. That's where these discussions happen asynchronously. So please join and watch the discussion unfold and contribute if you have good ideas. Everybody, thanks so much. Bye.

</details>
