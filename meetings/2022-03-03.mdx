---
title: "Open Protocol Discussion"
authors: [justin-rice]
tags: [legacy]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="uAkvN1WtQbY" />

- all right hello everyone and welcome once again to the stellar open protocol discussion um these meetings are for discussing core advancement proposals or caps they're technical specs that suggest changes to the stellar protocol and they allow the protocol to advance to evolve to meet the needs of the ecosystem they allow us to add new features to the protocol these meetings are live streamed so that anyone who's interested can follow along but again it's a technical discussion about these very technical caps so if you're watching you probably want to take a look at the caps that are linked to in the show descriptions along with the mailing list discussions about those caps today we're once again discussing the two caps we discussed last time cap 42 multi-part transaction sets which again has been revised since our last discussion um and cap 44 speed x configuration there have been a lot of questions on the mailing list about that um so this meeting again is just part of the caf cap life cycle um and a lot of open discussion about the caps actually happens on that mailing list again link to in the show description um so if you're really interested in joining the discussion please sign up for that mailing list and you can sort of see a lot of these questions come in and a lot of the answers are made there or they're sort of brought the questions are brought to this meeting um and so i'm going to sort of end it there if you want to look up anyone who is in this meeting and find out who we are you can see our names i'll let you do that on your own but in the interest of just keeping things moving along let's actually just kick off the conversation so first up we're going to talk about cap 42 multi-part transaction sets um this cap would give validators control over which fee policy to use for individual transactions including included in a ledger um and we actually discussed it previous meeting it was revised it was revised again and so i'm going to kick it over to nikola who made some of those revisions so that he can walk us through the changes real quick nico yeah thanks uh justin so yeah like the actually there was the changes i made were actually pretty minor um i mean expected given where we are um so yeah like the the changes were basically reflecting the uh what we discussed at the last protocol meeting so the the actual functional change in the cap is the um the use of the total uh on the sum of fibs as uh to to to sort um transaction sets um and then the other change is uh related to questions that um that we had uh last time and that were also raised on the on the mailing list around what does it mean for clients in particular we have documentation today that talks about using like um like the fee stats or the uh um like bidding as much as you can as a strategy and uh this uh needed to be tweaked a little bit so i i put a um possible approach to uh how to to do this uh with the after this new captex takes effect so like i don't know if people have time to review it i think i imagine actually that maybe lee that i think was not at the last protocol meeting maybe has uh some questions yeah i i did listen to the last protocol meeting and i think the conversation actually answered a lot of the questions that i had and i think you and it goes on the mailing list um i think the only comment that i had about the conversation where you know the wallets will probably change the pattern that they use to use things like fee bumps um you know if they need to bump the up the the fee they're paying i think realistically for your average wallet um you know fee bumps will probably not even be necessary it'll be more like you know you try to submit a transaction it fails and so you just modify the fee on your current transaction so you've got a new transaction and then you sign that again and submit it um the pattern sounds pretty clear um and i think uh the the only remaining question i have is do we need to discuss what the rollout will look like because given that um given that wallets will you know there is some change in expectations um you know what sort of lead time do we basically need to give the ecosystem to to adjust or learn about this new process right so like time i mean um yeah like as as long as people like you said like today i imagine that uh most wallets actually deal with like failures uh like timeouts of when they submit transactions uh but i i do agree that there is like some awareness here on this is about to change you may actually run into uh well you probably want to maybe reduce the the maximum bid for for wallets that are where people actually set very high bids which i think there are some i mean not very high but like you know like let's say one lumen which is very high for in today's standard um so yeah so there's probably some communication that needs to go out there too that people should actually not put like some very high number that they don't expect to to uh to pay and instead uh i think maybe aligned with what actually a lot of wallets are it seems to be doing a lot of what the common fee we see which is more in the 10 000 troops or something or 40 000 troops which is still some penny yeah i think i think a lot go with a hundred thousand which is i mean this is still fine yeah i mean there are still even with this new thing unless people are doing uh i think the the first wave of changes uh will probably be around but we discussed earlier in the morning is that was make it a bit more aggressive for uh like this those trading this kind of trading activity there is more competition there so if people are submitting uh at yeah like 100 000 troops they may actually uh end up paying that with the with this update for trading yeah um so yeah i don't know like i think it's more like yeah like a communication strategy and documentation i think that we need to work on just in terms of communication strategy and documentation are we imagining that it is possible that this cap could be included in protocol 19 or is this already something that might be for a subsequent protocol oh uh yeah protocol 19 i mean like ideally i think we we can put it in protocol knighting which will [Music] i think at the current pace uh it looks like maybe it will be like in the at the earliest end of may which is quite a bit of time for people to adjust their wallets or their settings in their wallets yeah i also think the the lead time on using the feature doesn't have to be the same as the lead time on implementing the feature so if this went into protocol 19 but we do some surveying and it looks like you know that's not a realistic time frame for wallets like maybe we could maybe the ecosystem will hold off using the feature for some period of time right because validators would have to decide to use the feature and so there could be some readiness check where before any validator use of the feature happens there's just like a sort of coordination okay yeah like very like yeah exactly like those things will be enabled by flags on the validator so uh yeah there will be a an actual role i mean it means i mean it still means that if uh like after this change takes effect you if you have like one of the validators that decides they want to ignore the flags or enable the features anyways they can um but that's part of the like uh the uh audi trail that we have in the uh in the um in the archives on the on on behavior of your validity are there any questions about where we are with cap 42 but it sounds like we're in a pretty good spot i think we left it at a good spot last time and this addressed the things that came up so seems pretty much ready to me i mean i have one nit but it actually doesn't come up in this um in this cap um which is the way we indent our case statements is not compatible with git diff so as a general point maybe we should either like include both the diff and the actual data structures or we should like reconsider how we indent uh xdr files it just so happens that we lucked out and then this diff like there's enough context to read it uh properly but sure i think that that's a formatting issue right which we can sort of talk about offline cool i mean it sounds like with this cap it is probably ready to bring to a vote which i can do off which i can i guess we can maybe do at the beginning of the next meeting since jed happens to not be here today in which case i think we can move on and talk about we could vote asynchronously i don't think we need to wait for the next meet i mean i'm ready to vote and to move this forward so okay cool i'll i'll um schedule a vote asynchronously um and then we can share the results publicly um and that way we don't have to wait and we can sort of push that forward cool so i think then in other words cat 42 is ready to put to the cap committee for vote which is super cool um possibly for inclusion protocol 19.
- um but now it is time to move on to the next discussion point cap 44 um so cap 44 again is the speed x configuration cap um speed x is a uh new design for essentially a fully on chain uh dex decentralized exchange um that allows for scaling high trend to high transaction throughput and um we talked about speed x a fair amount this year it's part of the s more importantly get rid of path payments so you no longer have to guess intermediary uh currencies to get the best price cool yes and uh but but for speed x we actually decided to break up the implementation of speed x into several caps and this first one cap 44 is about how speed x is about who and how speed x can be configured and there's been some pretty interesting discussion on the mailing list but to sort of kick off i'm going to pass it to john sure thanks justin so just to give like a quick overview of like what the discussion on the mailing list has uh kind of been about the conversations have kind of gone in like a couple different directions one question is about um can we practically derive the the set of assets that we can use with speedx rather than trying to configure it um i think the answer to that at this point is probably no but we can talk about it more then another line of conversation has been around the basically the lane of like okay let's say that we do the simplest thing and just you know do a do what's in the cap now just like a voting upgrade system can we um can we give some guidelines to the validators that are actionable and predictable so that we don't have arguments in the community about like what should be included and then a third line of conversation has kind of been about like the more general more general process types of things like should we change the way that we do upgrades to make this easier and increase visibility and stuff like that but none of this has resulted in any changes to the actual proposal yet because it's not remotely clear which direction we should go so um with that kind of overview of where the conversation has gone maybe we should just like open up the floor and see what people want to talk about um my my two cents around the the actual like ecosystem stuff around how to how to make decisions i don't think this belongs in the cap um i as a starting point i think we could just discuss you know validators can discuss over the values channel on key base of the validators channel on on the discord uh there's no need to put too much structure around this uh same way that we coordinate uh protocol upgrades these days obviously this is much more uh you know there will be some some arguments and it's good but i don't think we need to like let's see what this looks like before we start solving for a problem that we don't actually know what it's going to look like i mean i think the fact that we have this debate in these questions suggests to me that this isn't quite the right design um so i still think that um there's multiple stakeholders here yes validators are stakeholders but so are the asset issuers and i don't think that i think that we should give more weight to the asset issuers than uh the validators and to the extent that validators should be important it's only because they're designated as kind of official uh repositories of information by the asset issuers i agree with david but i don't agree with with the result i think that uh asset issuers should strive to be validators uh i think that's like proper scp usage and then they will have a vote um but you know just by virtue of having like an asset issued i don't think that's enough to inform the validator network what to do but i think as an asset issuer you are you are choosing to i issue your asset on stellar because you know in large part because you want a liquid market between your asset and and other assets right and so you have an opinion about which uh which markets are important for your asset and um and and that's just not reflected by by having the validators uh uh make this decision so what are the mechanics that you suggest for allowing acid issuers to do this david uh well i think that instead of a protocol upgrade this could be um a new type of operation um or a new type of uh of ledger entry which is the um the other assets that like you're interested in being in a speed x with and once uh you know when there's like a kind of mutually uh satisfactory um speed x's then uh like you could potentially uh then you could like sort of create the speed x but it should come it should we should somehow have a way for the assad issuers to express which or rank sort of which assets they're most interested in in being in a speed x with and but and we shouldn't necessarily have only one speed x right because uh you know maybe there's you know multiple disjoint sets of assets and you know who are the validators to say like which one is is reality right like and and how are the asset issuers expected to you know like this operation what is it i think one of the options that we were talking about was like staking lumens right are there are there other options or are we just like reverting back to kind of like stake weighted voting mechanisms the same no it could just be like it could just be um uh a um like a a ledger like um you know an account entry or whatever that you say like which which assets you want to be like you have trust lines you could have sort of like um you know speedx participations where you like specify almost like a quorum slice of of uh of assets that you want to have in your speedx but every asset's gonna um issue or like lots of assets are gonna issue these and there's um you know the the protocol still needs some way of deciding like which um which assets are sort of important and then maybe there's like some kind of i don't know max weight matching computation or something going on but um we still probably have to restrict it down um to like a certain size or a certain um like network objective right so there should be a configuration parameter which is kind of like maximum size of a speed x right but to me that seems like the only thing the validators should really be deciding and then it should be the assets themselves that um that choose to make uh a market what what are you wait am i unmuted yeah i am what about the uh what about the case of contention like take the most liquid assets on stellar which like buy uh by like amm liquidity we could say uh would be like um i don't know i think it's like ustc xln aqua a couple other assets um what um like most assets would want to be able to trade with those because that's where you get a lot of benefit from speed x being able to swap with the liquid ones so let's just say that like for the sake of argument to say that ustc has like the most liquid markets on seller i don't know if that's true but let's pretend for the sake of argument um and then basically there's like global contention on wanting to be in the same speedx as usdc who do we choose well that gives usdc a lot of cloud i think usdc should be then uh should be able to decide uh you know who gets to be in a speed x with them or maybe usdc can be in multiple speed x's i mean that that creates arbitrage opportunity but maybe it's not ridiculous maybe we think that the price of uscc is so stable that if it's in multiple speed x's who cares it's the thing that will anchor the valuations of all the other assets i think we're putting a bit too much responsibility and weight on the asset issuers uh in this case like if you look at prior art and other networks you know like that the issuer just issues their asset and then there's like a governing body for whatever decentralized exchange yeah i understand and so i would be into like uh reducing responsibility but not reducing sort of like the privilege of like a powerful asset issuer right because when it comes down to it uh you know you know if usdc still like the problem is we might have you it might be the uscc issues their asset and they just don't care they don't want to think about speed x if other people have a use for it that's great and so it'd be great if kind of the default word that you could be like recruited into whatever speed x uh but that uh if it comes down to it like you actually have a say in like which markets are are more important for your asset i mean maybe the problem is i don't have a concrete proposal so maybe what i need to do in the next week or something is like come up with like a concrete counter proposal for like what this would look like or maybe we could kind of a few of us could meet offline and like brainstorm about this um you know at the very least i would like to convince myself maybe what i'm asking for is impossible right but at the very least i'd like to convince myself that it's impossible um well and the other thing uh like and i think that's why where i started when i when i discussed this on the main list i was wondering like why does like if you want to have issuers for example um have some say in the composition of speedex that should be part of how that sep is written right for how that that set is is managed by the validator i mean it's governance so you know it's one component i don't know if it's if it needs to be kind of baked into the protocol in any way really well one thing i need to baked in is whether there's one speed x or sort of one or more speed x's and i i'm very much of the feeling that um you know the the the whole kind of stellar philosophy is like you know we're not here to tell anyone what the ground truth is we'll just let you know like you can have some weird quorum slice that you're some weird quorum that's an entire entirely civil attack and then you can have the real world and like if they diverge like no big deal right and so i would similarly like to be able to have like if there's assets that are happy being in a speed x together um and they're disjoint then i don't want to be in a position to decide which are the real assets and which of the fake out like validators shouldn't be doing that i guess at the same time oh sorry go ahead no go ahead jeff the validators are the one expending the compute to um to run it right um so they should have a say at least um i think well there's fees being collected and i mean you know um yeah but the there's like a non-zero cost of just like running and maintaining speed x that's more than just like you have the assets in your database i mean well now there's a question of like should we be compensating validators or is like is it cheap enough to run a validator that's not a big deal well i'm just worried about like somebody spinning up like a thousand instances um or there should be some kind of we have to process it appropriately right i mean sure um um i guess it's i just i prefer i prefer to use like market-based solutions like we think that this like consumes resources on the network therefore people should be paying for it uh i prefer a marketplace solution to a like validators know best type solution which is kind of what we're doing here let me let me offer you maybe such a like it's not quite what you want i think but it it fits kind of nicely into that space it's something that i mentioned it both to jeff and nico offline um so like the cap currently written is basically like validators control the speed x asset set and there was a whole line of questioning like could we drive the speed x assets which i kind of was like i have no idea how to do this i don't know if it's actually even remotely possible even feasible um and i presented some examples that are like kind of challenging but when i was looking at that example one of the things i realized is like there's probably a core set of assets that you'd kind of want in your speedx no matter what like you know the world's most liquid assets you know i think the example i gave for like the imf what's their thing called uh the reserve basket thing i can't think of the word off the top of my head right now um it's kind of like a good representation of that or in america it's like t-bonds and you know s p 500 or whatever um you know you'd always want those just have the liquidity from them but um there's a whole bunch of stuff you might want to trade that's not those assets and so a hybrid solution is okay like dr's yeah sdrs thank you that's the word i could not think of um i appreciate it um and so um one like world you could imagine is a world where like you know you have let's say we have space for 100 speed x assets that's like the com the compute power we have um so then we say like okay like the validators can configure 50 and they can configure it however they like using some off-chain governance protocol whatever cares the other 50 are literally what's in the transaction set determined by fees just like any other way you get into the transaction set so in that case the transaction set can still have 100 total speed x assets 50 are fixed and advanced by the validators the other 50 are just like literally the ones that appear in that transaction set if there's if there's 51 in the transaction set it's invalid um and that basically means like the validators don't have like the truth power they just have the power to say like hey like we think these are the things that everybody always wants so we can try to give you consistently good prices but why don't we i mean why why speculate that these are the things people always want why not um have people actually say what they want right so i mean so here's a like a dumb thing we could do okay let's say there's only one speed x but we could have is we could have everybody like vote their lumens for like which assets they most want to see in the speed x right and then uh you know we just take this set of assets that that has the the greatest vote why are we reverted reverting to stake weighted voting uh this is like like because it's less stellar philosophy no why is it a anti-stellar philosophy because because like we shy away from the idea of of of you know more money equals more votes well i mean what we're trying to what we're trying to capture with scp is like some abstract notion of cloud right and you know we want this idea of like if people are interested in a particular uh in a you know particular asset then and that asset you know say like designates a validator then like that validator is going to have more clout in the network um i mean i agree like this stigmatic voting isn't perfect but it's at least a market-based solution the problem is like you can't have a market-based solution to consensus if you don't already have consensus or you can't but i mean there's our proof-of-stake systems but they have all these other drawbacks right which we which we don't have um but once we have consensus um then i'd rather have you know market-based solution just because we do trust the validators to maintain consensus doesn't mean we should give them lots of extra power too if we don't have to i think going back to my original appointment i think this is a great opportunity to get stakeholders to actually run their own validators which is what you know like we've been talking about sap forever as actual stakeholders running validators this gives them a reason to do that um i guess that's true but that it seems a little indirect um i mean um i i actually agree with tomorrow's point here like if you're if you're issuing like an asset that's going to be um used by everyone then like you certainly at least should like have a strong incentive to run a validator or if you're not you're sort of free loading off of everyone else running validators well i i mean in an ideal world you wouldn't necessarily need to run a validator but you would need to like hire someone to run a validator so i think like a reasonable like uh state of the world in like the three years is that um there are various companies like block demon or whatever who run like sort of validator in a sorry uh anchor in a box type products where you uh you know what you could do is you could uh you don't have to run a value but you pay them to run the validator for you and they can provide insurance or like you sort of whatever else um and it's there's no reason why someone just just is like probably a lot of people like running their validators on amazon right and so we don't need like everybody to run a physical server we just need everyone to say hey like we trust amazon to like host our validator and like and and and that's fine but it's but they're at least explicitly saying like yes this is the validator that you should trust sure sure but but there's that contractual relationship there and through that i can tell um whoever is running my validator to vote for my asset to be in speed x in whatever way right um and uh you know i'm still funding them to run the validator but the problem is that now let's say let's say that you know in in three years um you know 40 of all the kind of assets that anybody cares about have like contracted with block demon to be their validator right now we still haven't uh you know so now like we haven't told block demon like how to wait like various votes or whatever so it's now is now black demon gonna be actually the one deciding which assets are important this is going to be some term of like you know negotiation and these like confidential contracts they potentially have with their more important customers or can we do it in an open transparent like uh you know reasonable non-discriminatory uh way where it's just like public how this is happening and the decision is is is out in the open you guys mind if we zoom in on a different aspect of what david was talking about a second ago for a few minutes can we zoom in on the one speed x versus multiple speed x question um [Music] i think like we have not given a lot of thought to this this did not come up on the like uh on the cellar dev mailing list also i just want to make sure we talk about it at least a little bit i think it loops back into the other question as well i can imagine i think that if we come up it's possible if we come up with an answer to the thing we're just talking about that it would work more easily if there's a single speed x but otherwise then you know all sql we should have multiple speed x's i would yeah my vote is is like i don't find the idea offensive i'm just not sure that we need to be thinking about this right now i think that if we do get to a point where it looks like the list of relevant assets is growing uh to a point where this is like it's too much for a single speed x then we can start uh you know contemplating the idea of adding another one but it seems like getting started with with more than one speed x given the uh the shape of of the markets on stellar i think it's it's getting ahead of ourselves i think that we should absolutely think it's like we literally have like you know an xdr diff in front of us which is actually what we're uh debating at the end of the day and so there's absolutely a question of like should there be an array of maximum length one such that down the line we can like you know increase the array size uh or should it be sort of hard-coded like this to have like only a single speed x but again i think it's like preliminary to make that decision right now until we figured out how we're going to choose what the assets are but i think like an important kind of safety valve of of like ensuring that like we're choosing assets in a in a kind of stellar and and like egalitarian way and and market-based way is to say that hey like you know if if there's like complete disagreement in the world then fine like have two speed x's like let's not decide which one is the civil attack and which one are the real assets okay let's go back to the other thing for one second then since there's people don't seem to want to talk about this but let me offer you a thing a version of the world where issuers actually have some control um it's like a kind of slightly weird version of the world but it's not one that we've spoken about yet so in this version of configuration the validators don't vote on any asset configuration doesn't apply at all every issuer can like produce a list of assets that they'd like to be in speed x with them my guess is that most of those lists will be exactly the same or we could even have the validators configure the default list and you only get a different list if you actually put something in that way if you're happy with the default you don't have to do anything my guess is still that they would all be very much the same but it's possible they wouldn't and then the way that we get the actual set of assets in speedx is we take every asset that appears in the transaction set you bid for fees to get a transaction step so that's very market-based and then the way we fill out the rest of the asset set is we go over every asset issuer for um for each of the assets that appears in the transaction set and we grab the asks from their list now like the reason you have to do that second part is like you definitely don't want to so there's a different speed x for every block every block would have a different set of assets potentially but actually i almost prefer this we can even say like you're just not allowed to when you're forming a block it's like ill-formed if your speed x involves more than whatever the parameter number of assets is right so any given block can only have a certain number of uh of assets being touched by the speedx operations and that could change from block to block but hold on just i want to make before you go jeff i just want to make sure that i'm on the same page as you david do you want the pure anarchy approach where the validator like the validator nominating the transaction set chooses all the assets in the set or do you want the semi-anarchy approach where they choose the asset like they choose the off the operations and then you go to the issuers to get to fill out the set no i think i think actually the idea that like um each each you know you have one speed x per block and it just there's some maximum number of assets that can be can be mentioned in a given block for the speedx transactions like i i think that this um well so so one point like why are we talking about filling out the asset set uh my instinct is that um in um almost every situation we're going to be having to prune um down to a certain size not like fill out assets um and then point two i think is um there's a huge value in having predictability in what the assets that's going to be um otherwise um like i like otherwise that like maybe you know some validator says like i'm going to have this at some other validator says i'm going to have that asset and i'm like now i started playing games about like where i send my transactions um and then like transactions get you know buffered and then things get front run and then um starts getting really messy we'll have a deterministic set of rules like it'll be whoever like whatever collects the most transaction fees or something um but i can still gain that um with the deterministic i like i i had a hard time coming up with like a deterministic rule that wasn't gainable because i can always submit um like transactions that are out of the money or whatever um to get my um assets in maybe maybe i'm just being paranoid i see so you're saying like you can you can create standing orders right i can set an order with like a minimum price of like a million or something and that'll never trade um and manipulate this manipulate the asset selection rules which then manipulates the prices um i think i mean i'd like to brainstorm about this maybe offline a little bit uh because like if there's if there's transactions that you know are not going to like i wonder if you can have a you know how like you can have a post limit order only um type order so like maybe those could be free um and then like maybe we could have people post however and cancel limit orders like for as many assets as we want and then we actually choose speed x based on like the i don't know the depth of the order book or the um the number of transactions or something um because in a way you really want speed x for the trend for to to like you you want the ones with the highest number of transactions because that's where you need the extra efficiency i i don't know if that's true at all i mean like you should just revert back to the mailing list where i gave like a whole bunch of examples every time anybody mentioned like a derivable set about how you could game them and i i feel i feel so confident that they're all gameable that i i'd be willing to wager that for any heuristic that you came up with i could find a way to gain it um i feel pretty confident not that much but i still feel pretty confident um so uh i don't know david's come up with some pretty crazy stuff before i feel like he could maybe come up with something that i couldn't figure out how to how to game even though i still believe it would be game so that's why i'm not willing to really make a big league but my point is like any kind of heuristic is probably extremely vulnerable and like the burden of proof to get me to want to vote for something like that to want to support something like that and to want to implement something like that would be convincing me that it's not gameable and i think that's going to be really really hard um just like just being honest i think driving the transaction set is just borderline so but but if there's multiple speed x's it could make the gaming not a problem right if the way i game the system is by creating a second speed x who cares right but we still like to determine the competition yeah it's not like you're creating an infinite number of speed x's either so at some point you have to pick which one of those feed x's is well it's not like you have an infinite number of of transactions in a block either so no but that's it goes back to it it's all gameable i think there's just generally value value in having a system that sort of runs predictably here um i agree i agree but um all right i feel like that i feel well look this thing obviously is not ready to to move oh well to be accepted today anyway right so i feel like now and i feel like now i have a challenge to like at least propose something um or try or figure out why i can't you know um i think we should also think about or sorry go ahead i did want to answer one question that you had actually before jeff which is like why are you talking about filling out the transaction set and it goes back to that like uh that example i posted like it's like five or six or seven or eight emails back now on the mailing list like it was like an example using like major world currencies and like it was a trade for like pounds for yen um but basically like the concern i have is like you end up in a in a world where like imagine that like you know imagine that the russian central bank just like happened to announce for some crazy reason that they were going to raise their interest rate from 9.5 to 20 um not that this is realistic at all but like imagine that would happen i imagine that there might be a ton of people who wanted to sell their rubles maybe all for euros and usd but like if you only have those three assets you're potentially missing out of a lot of like cross liquidity that you can get from area to bro markets like you know where you use the other amms to pull more source and sync through so that you can trade more rubles at a good price so now imagine that for some crazy reason usdc doesn't want there to be a very liquid market between rubles and usdc um and so they feel like if they're going to be in a speed x they would prefer to be at a speed x without e rubles or whatever that is a good point i think at least the asset issuer should have a veto on on participation well either they should have veto or if they should they should at least not be in any way complicit like it should be like uh it should be like everybody else wanted it and they were overruled or something uh yeah i guess yeah and also um we've been we've been expressing like asset issuers want good markets with certain assets and we should also let them express the opposite opinion i don't want to market with this asset uh you know listen six years here's something here's something we could do um we could uh actually have like speed x's owned by account so we could say like look we're actually going to you know instead of a validator there's just like someone everybody thinks is important and we're going to let them choose the assets and they're going to create a speed x and if you don't like that then you can create your own speed x and if people start trading on your speed x great if not then you're irrelevant um this makes it harder with the liquidity pools and also isn't this like more unaccountable than the validator well it's it's both more and less like we know who it is right there's now like someone who's running the speed x and if that person needs to comply with like russian sanctions that person can remove the ruble and if somebody else you know if uh if if somebody in russia says hey you guys suck i'm going to create a new speed x on stellar you know more power to them they can do that but if none of the other assets want to move over to the new speed x then uh then that new speed x with the ruble it'll be the ruble trading against nothing right what if we did something with like asset issuers issue preferences and then validators issue like weights to different assets and then we compute um via some like global optimization like min i don't know max matching or something um based on uh the express preferences or something sounds complicated at some point you're really starting to ask a lot of people to do a lot of complications okay so well so what i'm saying is simple what's wrong with my thing like there's just a there's just each speed x has a dictator but there's multiple speed x's so at the end of the day uh if the dictator is bad people will just go to a different speed x and is there in your world an unlimited number of speed x's that can be created because that's our question how do you stop an evil dick or just like some someone who should not be creating a bunch of speed x's from creating a bunch of speed-ups maybe they were there you need some like reserve currency or you need some reserve balance to do it or something or like well what we have i think we're probably fine having like five speed x's right you probably don't want like five million but um this has the um nice benefit of giving a particular person accountability for like running the price computation um but it also um we need to figure out how to um bring the liquidity pools um like what if there's a you know competition between for like liquidity pool liquidity i think we could just have arbitrage opportunities i mean like we hope no but but like you can't run this price competition with like if usdc and euros are um both in two different speed x's um then there's like contention on the liquidity pull between the two assets um and and like maybe there's only maybe the only asset that can be more than one liquidity pool is the lumen because no one's there to like control the lumen but otherwise the asset issuer has to uh has to say which liquidity pool they want to be in right so then we're saying like asset issuers declare exactly which fedex they're in yeah um which is back to the first point that you decided you didn't like or somebody decided they didn't like it there's one additional point that i want to bring into the picture here which is um you know our acid issuers they're active on on several networks and a lot of a lot of the activity in the in the space is kind of like multi-chain the i think we really need to focus on our differentiators being like high value differentiators because every time we add something to stellar that makes it so much more different than any other network network index out there we we just make it more challenging for these for these players to actually be idiomatic players in a stellar ecosystem so we really need to make sure that whenever we add something that's different it's really worth it okay and having asset issuers need to to be involved in listing on decentralized exchanges is a big step away from what they're used to be used to doing right now so i just want to be cognizant about that so yeah i think your your point is right but it's not inc so i think what we want to do is we want asset we want to give asset assures the control but we want to ensure that something good happens to an asset issuer who just doesn't care and hasn't configured it yet right like maybe usdc like they can't be bothered to learn about speedx but everybody else is interested in that asset and so we need to make sure that that makes it onto like a good speed x uh you know like going like a different direction in this conversation do people actually care like like right now there's no way to really stop your asset from trading against another asset like it can happen on the decks for like basically any asset like as long as you as long as somebody is authorized to hold your asset like i mean they can trade it for anything they want so like why should we give that additional power in speed x like i i know that there's some like interesting because of scalability right only if yes if we could have a million assets in a single speed x um i would say we shouldn't do any of this right so it's only i think for the scalability problem i guess my point is like there are two kinds of preferences we were talking about one is the positive preference like i'd like to have this liquidity available to me that's that's pretty easy like my proposal or rather not to me but to my to like people who want to trade my ass i'd like to have this liquidity available the reverse position which is like i'd like to not have this liquidity available is not not something expressible really on stellar today i don't know why we should make that accessible so basically what you're saying is like you shouldn't um you shouldn't uh you shouldn't let uh an asset issuer uh prevent their asset from being traded with ruble anyway if they really care what they should do is they should like you know use reclaimable assets they should sanction you know they should kyc their users and they should like to go to the appropriate authorities if they have evidence that someone is like evading sanctions and you know they've kyc people so exactly so okay i think that's fine because that's um and and if they really care they can use clawback or they can you know revoke the trust line to freeze it exactly they can basically say okay like you're doing stuff that we don't approve of like it's not in our terms of service that's true and in fact so really what we should be thinking of is the only reason we're talking about any of this is because we can't put every asset in the speed x it's just for scalability and so just real quick quick question about that that is a functional limit that we can't change is that correct or is there a chance that we could through some sort of engine ingenuity or engineering research breakthrough absolutely but but but but they're like the limit is just remind me like what is the reason for the limit that's a great question and jeff is the best place to answer it um right so there's two things right so there's um the price computation itself and then the sort of follow-up correction linear programming um and uh basically the the um the runtime of each loop of the price computation is linear in the number of asset pairs um and also you might need more rounds based on more assets this is especially um like you need more rounds of the price computation typically for assets that are more thinly traded um and then so so there's that scalability problem um and then there's also uh the the follow-up sort of linear programming step um uh if i just threw a standard linear programming solver at it i would sort of that that seems to top out at like 50 to 100 assets um and then i was running experiments last night which you know caveat that code that you run right late at night is usually broken but um i was um pulling in some other open source libraries that i hadn't played with before and that seemed to push it to like a few hundred like three or four hundred assets um but but after that um you know you're solving a um some variant of a linear program which has typically a quadratic or cubic or something some kind of run time um which which sort of no matter what you're eventually going to have a prohibitive bottleneck there there's some things you can play with it and and possibly you know breakthroughs you can make but we're doing some more research on that topic it's something that like me and jeff and a couple other people around sdf were talking about quite extensively yesterday um and it looks like you know it's pretty clear we can do better than jeff's original estimate of 100 but like getting significantly better than a thousand also probably looks kind of out of reach right now um like even if we can do better than you know what jeff hacked up in the middle of the night yesterday um i i wouldn't be confident to say we could do a thousand that already sounds really high uh maybe we'll find out we're wrong but like 10 000 or you know 50 those are numbers that like are not even really in the conversation like they don't even sound remotely plausible within like the limits we're working right now like to achieve those kinds of numbers which would still be a fraction of the total number of assets on stellar um we would be like we'd be as david said like doing novel perhaps unprecedented research so so here's an idea what if each what if each speed x had its own order book sorry what do you mean in other words so so the problem so one of the problems with having the with the sort of the dictator one dictator per speed x model that i think john brought up is that you could have um uh you could have two dictators each of whom wants to include both usdc and and eurt right and so now um what if like you so now they're sort of competing for the same set of orders but they the pearson the person placing the order could also name the the speed x or we could somehow divvy up the or the order book between speed x's i mean this seems fine to me i think anytime you have multiple speed x's with the same assets you're going to fragment liquidity but or actually what if you just run them in different phases i mean like you know if we if we only have like five speed x's right if we run the speed x's uh serially then we just have some random order you do the first speed x and then you just use whatever's left over the order book to do the second speed x and then the third speed x my real concern is just like i i just really feel like the returns of doing this are just like really marginal um like my intuition and my intuition's been wrong many times before so i'm not claiming that what i believe is necessarily right but like my guess is all the really high quality liquid assets appear in the first speed x uh whatever you want to label this first spur speed x and some ordering you know i'm not saying that the first px might be the one that executes second right i understand i understand but what i mean is like basically the first speed x is the place where you want to trade and it has all the value basically right the first in terms of the liquidity ordering and then all the second tier assets trade with each other but because they're all low liquidity assets the aggregate liquidity is really low there's no good asset in there no super liquid acid in there to provide a lot of liquidity and then anything that doesn't make it into that one has even worse liquidity globally and so basically it's like you know you have like the vc thing where it's like the first thing has to do better than all the other things the second thing has to be better than all the other things except the first um and like is there anything so that's why i think there wouldn't be more than five speed x's right but i just it's it's a way to uh i just i just don't want to put validators in a position of having to like justify like particular assets i imagine that like there's a really popular asset and it turns out to be a fraud and like you were operating a validator and you like voted to include that asset in the thing right so now are you liable for that like you could have chosen a good asset and you you chose to make it easier for people to buy this fraudulent asset like what's your responsibility there uh i'm not a legal expert but like probably very little like i i don't think that you know american stock exchanges get listed when you know like sorry american stock exchanges get sued over listing well nobody is but that's that's a good example the stock exchanges have like relatively stringent uh requirements for companies to get listed and when the companies don't comply they get de-listed right so we're now putting so if we if we use that analogy now validators are actually required to police these assets right and to you know potentially making sure that they're disclosing things and whatever because otherwise they bear some responsibility that is a good point and it's also possible we would get validators just like not paying attention and voting no on everything so they don't have this liability um and then we wouldn't have any assets in speedx so at this point we only have two minutes left and i think what i want to make sure that we do is it seems like there are some actions that need to happen between now and the next time that we need to move this long and principally david i think it falls to you because it sounds like you want to come up with some sort of concrete explanation of another way to determine or at least try let's try yeah um is it uh so so that's sort of something that you're gonna work on is there anything else um that needs to happen after this meeting in order to keep the conversation going forward or is it primarily we should move all the extension units to the top of the structure i'm not never gonna vote to prove another proposal on which the ext fields aren't like the first one in the structure but that's not a huge ask i have right do some housekeeping we should do something but for the speedx configuration proposal like i believe from everything i've heard it's it's time to see if david can come up with an alternative concrete proposal right and maybe we can meet offline or something maybe john and jeff we could like talk at some point yeah this afternoon or what and uh and likewise i'll like i actually have some like intrigue about the proposal i made quite a bit earlier about like the you know take the stuff from the transaction set and then use the issuers list to fill out the set um i'll write something up on the mailing list about that too to kind of give like a full overview of how that would work and why i think it's not a terrible idea i think it fits somewhere in between some of these other proposals and david's proposals so all right perfect so we'll look forward to that stuff and obviously the sooner that you can get it done ideally if there's something for people to read with enough time in advance for the meeting so like there's just you know the meeting is two weeks two weeks yeah yeah that's ideal all right cool thanks everybody thanks everyone for watching if you want to follow along there's a link there for the stellar dev mailing list that's where these discussions happen asynchronously so please join and watch the discussion unfold and contribute if you have good ideas everybody thanks so much bye

With CAP-0042 nearly ready for submission, the group walked through the last edits needed to land multi-part transaction sets. That meant clarifying how wallets should react when a lane fills, how fee bumps interplay with the new bidding model, and what validators must publish so ecosystem tooling can warn users before a submission is dropped.

The second half returned to CAP-0044 (SpeeDEX configuration). Engineers compared the theoretical parameters in the CAP to the real data that aggregators will feed into Stellar Core, and they cataloged the logging and analytics validators will need in order to tune those numbers after a rollout.

Key discussion threads:

- Updating wallet playbooks: when to re-sign versus fee-bump a transaction once lane-specific rejection reasons start surfacing.
- Telemetry and alerting that validators should expose so SDF and ecosystem operators can detect stuck or unhealthy fee lanes.
- How much of the SpeeDEX configuration must be surfaced through Horizon so market operators and SDKs can preflight orders before submission.
