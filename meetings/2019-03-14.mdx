---
title: "Trustline Usability and Authorization Changes"
description: "This overview highlights anchor services and network fees and resource limits."
authors: johnny-goodnow
tags:
  - legacy
  - CAP-13
  - CAP-15
  - CAP-17
  - CAP-18
  - CAP-19
  - SEP-13
  - SEP-16
  - SEP-17
  - SEP-6
---

## [Public Discussion](https://groups.google.com/g/stellar-dev/c/uxmo4LM5FWY/m/psazVteTBgAJ)

### Announcements

- Jon made additional changes to [CAP-0018](https://github.com/stellar/stellar-protocol/pull/263); with no further comments, it will move out of FCP next week.
- [CAP-0017](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0017.md) moved to **Approved**.

### Agenda

#### Trustline Usability

- Restated [requirements document](https://docs.google.com/document/d/1_3KcBTbF7Diu_wu-ArvajYhEcPoDp9SgK5-dNruOK3c/edit#heading=h.8j5x6v50ft4p) up for discussion. The doc captures the desired SEP-6/SEP-13 deposit and send flows: anchors should auto-complete deposits without additional user actions, deliver funds to the intended account even when it has no trustline or XLM, and allow sends to non-existent accounts by crediting the original account ID.
  - Deposits must finish once the anchor receives the external asset, never forcing the user to add trustlines or extra XLM, even when accounts are uncreated.
  - Sending should work regardless of the recipientâ€™s trustlines or account state, and funds should arrive at the original Stellar account without extra steps.
  - The document stresses usability: anchors/wallets should avoid complex workflows, so any solution must stay simple, fast, and easy to implement.
  - [SEP-0017](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0017.md): Deposit & transfer of assets using [CAP-0013](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0013.md)
  - [SEP-0016](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0016.md): Deposit & transfer of assets using deterministic accounts
  - It is not possible to satisfy all requirements in the protocol's current form.

#### Issues with [CAP-0013](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0013.md)

- If base reserve increases, malicious actors could add large numbers of trustlines to an account.
- Accounts can be DoS'd via the subentry limit.
- The proposal has very large scope, affecting most operations and assumptions in the protocol.

#### Alternatives Discussed

- Use deterministic accounts and merge them if the receiver already has an account.
- Introduce a **SentBalance** ledger entry claimable by the receiver.
- Introduce a **remove trustline** operation that returns assets to the sender.

#### Fee Mechanisms

- David proposed [CAP-0019](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0019.md):
  - Enables future-upgradability of `TransactionEnvelope`
  - Allows a simpler implementation of [CAP-0015](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0015.md)

### Follow-up Actions

- **David**: Write a short proposal on "embryonic accounts".
- **Jeremy**: Clarify SEP-0016 workflow with deterministic accounts.
- **Jon**: Provide analysis of attack surfaces and issues in [CAP-0013](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0013.md).
