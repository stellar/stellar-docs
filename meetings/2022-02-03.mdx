---
title: "Open Protocol Discussion"
authors:
  - david-mazieres
  - eric-saunders
  - karen-chang
  - leigh-mcculloch
  - nicolas-barry
  - jed-mccaleb
  - jonathan-jove
  - orbitlens
  - siddharth-suresh
  - tomer-weller
  - justin-rice
tags: [legacy]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="se056YzMe28" />

- hello and welcome to the stellar open protocol discussion um in these meetings uh we discussed uh core advancement proposals aka caps which are technical specs that suggest changes to the stellar protocol they're necessary to allow the protocol to continue to evolve to meet the needs of the ecosystem so we uh we live stream these meetings so that anyone who's interested can follow along although i do want to note it is a technical discussion so if you're watching you may want to take a look at the cap link to in the show description there's also a description in the description all the participants are listed um uh we do keep an eye on sort of the the dialogue that's happening in the chat box but the goal really is to talk through questions about the cap that we're discussing which is cat 42 so we will only really address questions if they're directly related to that goal but we will collect them and take a look at them later too today the cap we're discussing is cap 42 titled multi-part transaction sets um it suggests a mechanism that makes it possible to implement different fee structures based on transaction set composition so currently in transaction set composition it can sometimes be heavily biased towards undesirable behaviors including spikes of arbitrage trades that eventually fail this cap basically empowers validators to isolate subsets of transactions that can compete on fees without causing overall fees to increase and it also makes it possible to expand policies to other dimensions in the future so cap 42.
- um again it's linked to uh before this meeting cap 42 is drafted that's the link to it there um it was also discussed on the mailing list and there's a link to the thread to that to that discussion thread as well so our goal today is really just to see if there are any blockers that would prevent us from moving it forward to the next step of its life cycle and i will stop talking and i'm going to turn it over to nico who is the original author of this cap to see sort of what if he has any questions um that he wants addressed by this meeting nico take it away hi you can hear me all right so yeah i'm happy that i got to get gap 42 because you know it is the answer to everything of course and in particular uh the problem with fees and i've already networks in some ways that we're not necessarily happy with and when i say we here it's the community that has been also complaining quite a bit about uh the number of failed transactions or or like patterns that that are just not the type of patterns we want to see uh on the network so anyways uh like maybe a little additional background uh that is not in the cap itself uh is that uh it's actually on the dev mailing list but not in the cap is that uh as part of of uh of the uh of this uh we actually had to uh roll out some changes to overlay in uh back in december um that we're dropping um based on a heuristic um like uh but we think are likely to be arbitrage trades and um which mitigated to certain extent uh some of the things that we were seeing at the time but that has a lot of undesirable properties and i think as part of cap 42 uh my hope is that we can actually go and fix the some of those aspects that we introduced at the time um so in particular like the the type of uh aspect i'm looking uh forward that to to fix here is um and this is actually true in uh all networks uh like it's not actually a stellar specific type of problem there has been discussions in the past few months on ethereum and solana i'd like to name a couple on changing these structures when it comes to to this kind of spam uh and when i say spam here i mean it's kind of a funny thing but it's basically um uh like a natural thing that happens i guess when uh when you have uh an opportunity to for somebody to make money is um based on um the cost that you have to submit transactions uh if you can make let's say a thousand dollars uh on on a trade um well you you'd be okay actually to pay 900 dollars in fees uh because you make some money obviously this is uh like this is where like the the way you can end up with um and at the same time if uh if all the transactions on the network are kind of uh derived on the step of keys then it kind of kills off a whole category of uh of other use cases that that you want the network to have uh so for example payments or uh like simple um airdrops or whatever like people want to do that uh that are actually unrelated to those uh to this type of uh trading uh trading activity so anyways um that's for the background on why why this cap and um yeah so like the i don't know uh like uh people had uh time to to look over in more detail at the refreshed uh cap that i did it yesterday uh like it has actually two parts to it is one part that is extending the uh what is the what is attached to a transaction set basically so that we can uh add like new properties to the transaction set and um and the second part is uh actually the the actual reason for this gap which is uh changing how um uh how fees uh get calculated uh within a transaction set sorry is the latest version the one that's in uh that's in the master branch in the repo 22 hours ago okay yeah that's it yeah and i'm sure there are typos because i kind of updated it quickly yesterday to make sure that people had time to and to have access to it uh but it's a early trough summer did you raise a hand yes i did otherwise i tried to be polite but niko didn't see um so first of all i think this is this is pretty cool because uh it takes advantage of something that's unique to the ecosystem and uh like we can actually prioritize transactions not only based on fees this is very different in other ecosystems because uh you know validators are kind of like incentivized by transaction awards so so they don't have the motivation to actually push these kind of changes uh it's pretty cool nico i'd like to hear your take on we've been talking a lot about strategy for 2022 recently and things like speed x and things like smart contracts in the future these are like um you know more transaction engines or like transactors how will cap 42 interact with these uh or how do you think they'll like it'll interact with these features yeah that's a good question and i think the uh this is actually in line with uh when i wrote it i was i i thought that we we would actually over time kind of create more sea lanes or for lack of better words uh so an example of a three lane that i think would make complete sense is to have a separate lane for speed x trades uh given that they're a lot more efficient uh compared to existing uh dex uh operations and um yeah we basically say okay if you you have the choice between a speed x trade and a submitted a managed offer to the network you're going to go and have more space basically on that ledger and for smart contracts i mean it's uh i mean it gets i think a little more complicated when we talk about smart on tracks like a very primitive version of this would be well we are going to maybe create a lane just for smart contracts that would be like a simple first step obviously there might be more interesting interesting things that can be done uh on that front but at the minimum it would be you would create a different kind of free regime right for for smartphone tracks i mean i guess uh the thing is it seems like not really optimal for those use cases like in those use cases it would be much better to just partition the transactions because you could you know then you could just you might want to for example say that all the smart contracts get executed like after all the regular operations right so just kind of having these like uh intermingled like this index set just seems like it's gonna add a lot of overhead and and not be you know what you would want um so so so i kind of have two reservations about this right one is that it just seems like a little bit uh too complicated for what we really need especially if you want to start having you know uh you know blocks with like 100 000 transactions for example which would be like totally uh doable with with something like speedx if they were all speedx transactions right you're not going to want to also have a added overhead of like sanity checking these index checks and whatever you're just going to want to blast through your array of speed x trades uh and do like a parallel execution of those um and i guess the second thing that like bugs me a little bit about this um it just seems like very indirect right either we believe that dutch auctions are the right thing or we don't right and maybe dutch auctions aren't aren't the right thing um but what we're we're sort of trying to say like well we're sort of going to keep the dutch oxygen but we're sort of not because we're going to let validators really kind of pick and choose uh different sets of transactions that are going to going to pay different fees um and i think the reason is because we want to filter out spam so like that is a form of censorship maybe it's okay but like maybe we should just like be a little bit more direct and say like validators should you know we're gonna just have a way for like different validators to like filter out certain transactions that we we don't think are are productive um and to the extent that you might not want that you might want to say well what if my transaction is like really really important then i should be able to like pay a high fee and like get it in the problem is that this doesn't actually solve that problem right because i could i could put a maximum fee of you know uh two to the 32 lumens in my transaction but a validator who wants to censor me could like put me in my own group with a very low uh base fee and then put everybody else in a group with a higher base fee and it'll look like you know you know like the block with that transaction will like not compare favorably um potentially to to to other blocks so or i mean whatever you could just like filter out the transaction anyway so i just i don't see this doesn't seem like as much it seems like this is partly to solve a problem but also partly to i don't know like for to appear to be preserving the dutch auction when we're not and if we're going to have some extensible way for validators to filter out transactions why don't we just do that in a more straightforward way well so first of all like the when you say like we're not preserving the auction mechanism here what i'm saying is that uh validators when they nominate those transactions those transaction sets uh the expectation is that they would actually be doing this type of action in in any given group but if they can choose the groups they might as well not you might as well just let validators choose the fee for every transaction and just as well it's the same thing yeah yeah you can you can do that straightforward thing just annotate each transaction with the fee that would like you know a 32-bit number that's like or 60 on the right list actually was to just annotate every transaction with the fee yeah but that's uh like that's actually even less transparent in terms of what the intent is so that's why i didn't do that uh like it's a like uh that's effectively what you're doing yeah no i know i know i'm doing that like i'm basically allowing for this but i don't want people to be doing like arbitrary fee structure per transaction but that's what you're enabling right you're just making i mean i know it's being enabled but that's not what uh what we we don't expect for the data to do that and actually this is there's a discussion in the uh later in the document that that talks about um because like basically today validators can already censor quite a bit uh like what gets into a transaction set so the example of like following the fee structure today is already not exactly right like like if if validity doesn't want to do it they just don't do it um and um yeah like here what i'm trying to promote is more of a compact i guess like the yeah the uh those indexes thing i agree uh this could be done maybe in a slightly different way i was trying to preserve the transaction set itself like the existing transaction sets um but that's not good either if it turns out that we want to like actually change the order in which we execute transactions then like preserving the transaction set isn't actually that useful right we already so for speed x what we are what is in the current uh proposal is to just like we partition on type and it's actually not we actually keep the transaction set at it as it is like from a serialized version because we can always partition after the fact yeah but it just seems more useful to have to have it uh partitioned ahead of time if you have sort of like just totally different phases of block execution i see no intermingling transactions from the different phases that's true so i mean i guess what i'm saying is like this will get the job done but i can think of sort of much simpler ways of getting the job done and it seems like this cap is too concerned with sort of like appearances uh and those appearances you know effectively don't matter when what you're doing is equivalent to something where every whatever validator wins nomination can just like literally set the fee for every transaction so like we're giving value if we're going to give validators that power let's just be upfront about it i mean i thought it was pretty upfront i was optimizing again for uh like ease of audit and and uh and like maybe like more compact potentially uh format but that's true it could be more compact or it could be less compact depending on how many if you have an extension point per transaction you at least have an integer their transaction additional well you could just change the transaction set format and add like a four byte feed you know no but then less expensive like uh david can you can you articulate your alternative for a second so that we're all on the same page but the thing is that what we are discussing here is more like we're actually not discussing i think we are discussing more like the format of the like the transaction set we're actually not talking i don't think we are discussing uh and maybe we should start with that the the premise of allowing to control uh fees right because i think that's the important one i mean i guess i can see two um i can see uh i don't have a particular sort of alternative proposal because it seems like we're trying to do two different things and those might be uh better served by like two different mechanisms that are um you know each that some of which is like maybe less complicated or more efficient to implement than this right so the first thing that we want is we want kind of uh multi-phase block execution down the line so we'd like to lay the groundwork for things like speedx and smart contracts and stuff to coexist with the legacy stellar transaction format um and then the second thing that we want is we want to like weed out spam or you know transactions that are gonna gonna fail a lot and so um i just think you know these could be handled in two separate ways or if you wanna have multi-phase blocks let's just have multiple phases in the blocks and potentially have like fees per phase if we want to weed out spam then let's just you know have a way to weed out spam and you know regardless of fees we can just weed out the transactions without spam without uh doing it via fees is kind of what we're doing now and it's actually very hard to keep up with whatever people do like uh you know people are very clever right they will find better ways to get around it what power does this give us to weed out spam uh that that we don't have in the existing consensus layer in other words i agree that we want to be able to kind of unilaterally update uh like update stellar core without going through the transaction layer or like you know eventually have like a configurable algorithm to weed out spam potentially and maybe different validators have different uh different mechanisms but i don't see how this change to the consensus layer actually gives us more power to do that it may give us some sort of plausible deniability or something that works it actually gives quite a bit of new super powers to the network because uh like i was saying earlier like if i have an arbitrage trade where i can make a thousand dollars ideally i would want people to actually pay up to a thousand dollars in fees if they if they are really serious about that transaction right now they don't that's not what happens because they're actually competing with the entire pool of of transactions and they are filling up entire ledgers and then the the ledger fees go up to okay 20 bucks you know for a transaction but that's so that's not a thousand dollars but that's still ridiculously high and 20 bucks is not the number i think it was like what we saw was uh close to five dollars i think per transaction so your point is you you want the spam you just don't want it to be as profitable like if someone can do like this yeah that's what that's kind of the idea here is that uh like you know in the current proposal i'm say i'm saying well any decks any operation that may cross an offer is going to be put in a separate bin and then that bin uh we do this the action system on that so and then if you're not interacting with the dex then you're in the you know general uh group so it's you know that's like first step like you know we can probably do much better than this but you know so why don't we just throw in phases and say that you know like that's what i'm saying that's already what i'm saying sorry i'm saying instead of indexes let's just have straight up phases and let's just execute them in you know uh like it's just such that like the dex operation oh like you would want also execution order to change i mean like yeah that's fine we want to we want we want to like segregate is going to lay the groundwork for paralyzation right and so if we're going to do a change like this or segregating operations eventually we're going to want sort of the community of operations in one group and the non-community in another and so the legacy dex operations are exactly never going to be able to make uh community yeah like but like i think the issue here if we have groups in like impact somehow uh apply order like because we can have transactions with multiple operations i think you can basically take that use that to your advantage to maybe get executed in front of somebody else just because you happen to have the right operation no it's because you don't you'll be people will say that the like we'll flag certain operations like path payment and you know manage offer and whatever and say that these visa any you know there's a first phase uh which is might have a lower fee but the in order to get into the first phase there's certain operations that are off limit like the ones that we we can't necessarily make efficient and then in the second phase uh you can you know have arbitrary uh like my point is that this forces the to think about those um those those um feelings or whatever have to be somehow completely independent or something like uh like and i'm not sure it's uh you can always claim that not necessarily you could have like you know like i can see like for speed x like things like that yes you know that makes total sense for the existing transaction subsystem i don't know if uh well i think we're going to want to have like fast payments and faster payments than we can do order book operations so to uh just to you know if we're going to be making this this change like why not make it in a way that is is will kind of facilitate that that future where maybe you know payment processing could be parallelized even if order book processing can't be it's more like i think of this as it's it's it may be a multi-dimensional thing coffees and then how do you how do you turn that into a something that makes sense from a like a an ordering point of view right that's kind of i think i don't i think that's leave it as open-ended as the current draft you could just say that we're going to do that with our groups sorry i think if you say they are groups um if you're linking the groups to execution or yeah so you have to apply other groups yeah and so each group has it has a different apply order and a different fee structure and then we can kind of um you know have different rules for for different groups if you want to execute early and fast then you know uh you should you should have a transaction that goes in one group i think we could also i mean it might be worth considering uh if if we're changing the fee structure anyway to have a separate base fee for uh successful versus failed transactions right no that is wrong like that doesn't work like i don't see like doesn't work it makes things so complicated in the existing transaction subsystem that we've talked about that one a couple times before yeah that would be pretty tricky it's super complicated because you can merge accounts that's kind of one of the reason for example one of the things that can happen you have to refund people at the end yeah it is kind of crazy stuff and it doesn't and and this actually doesn't solve the it's it's it's not that we want to penalize transactions you're going to have buckets the the buckets could they could be morgan your granularity on the fee but that's fine i i believe you that that would be too hard for me the most interesting question was your first question david which was just like do we believe in the dutch auction still like let's just like start with that like do we think that even works like do we think that is a system that is a good system for blockchains because like we thought that what like in 2018 well maybe 2018 us was wrong right like i wouldn't deny that 2018 me was wrong about a whole bunch of stuff yeah but that way but the thing is that if you even if you go back to the regular fees it doesn't solve the problem that people are still going to be a stupid number and you take over the ledger agreed but like if we don't believe in the dutch auction thing like one of the things that i mentioned in like my email was like we could just like chart instead of like assigning a base fee to different groups we could just say like hey like if you're inserting groups you actually pay your bid so instead of being like a dutch auction now you become like a first price yeah i guess like a first price auction basically um and then like that that's really punitive basically to people who choose high bid high fee bids but then if you choose those high fee bids you are guaranteed to pay them basically so it avoids that situation where it's like oh there's a thousand dollar opportunity you build 900 dollars but you end up paying 20.

CAP-0042 dominated this meeting. The team dug into multi-part transaction sets as a way to carve the ledger into explicit fee lanes so validators can shield everyday payments from arbitrage spikes. They worked through examples showing how a SpeeDEX-specific lane or an arbitrage lane could pay its own equilibrium fee without contaminating baseline throughput.

From there the conversation moved to operations. Validators need clear guard rails for how much capacity each lane can occupy, what telemetry they should export, and how to keep wildly failing bots from hogging attention. The group outlined the docs Horizon and wallets will need so users understand which lane a submission will land in and what bidding rules apply.

Key discussion threads:

- Drafting example lane layouts (baseline payments, arbitrage clean-up, SpeeDEX) and deciding how validators advertise the mix they support.
- Techniques for spotting repeated failed arbitrage loops and deciding when validators may quarantine a fee source before it wastes an entire ledger.
- Operational tooling for operators-config knobs, logging, and documentation-so ecosystem wallets can aim at the right lane and predict the fees they should bid.

<details>
  <summary>Video Transcript</summary>

[00:00] Hello and welcome to the Stellar Open Protocol Discussion. In these meetings we discussed Core Advancement Proposal, aka CAPs, which are technical specs that suggest changes to the Stellar protocol. They're necessary to allow the protocol to continue to evolve to meet the needs of the ecosystem. So we live stream these meetings so that anyone who's interested can follow along. Although I do want to note it is a- technical discussion. So if you're watching, you may want to take a look at the CAP link to in the show description. There's also a description. In the description all the participants are listed. We do keep an eye on sort of the dialogue that's happening in the chat box, but the goal really is to talk through questions about the CAP that we're discussing, which is CAP 42. So we will only really address questions if they're directly related to that goal. But we will collect them and take a look at them later too. Today the CAP we're discussing is CAP 42, titled multi part transaction sets. It suggests a mechanism that makes it possible to implement different fee

[01:00] Structures based on transaction set composition. So currently, in transaction set composition, it can sometimes be heavily biased towards undesirable behaviors, including spikes of arbitrage trades that eventually fail. This CAP basically empowers validators to isolate subsets of transactions that can compete on fees without causing overall fees to increase, and it also makes it possible to expand policies to other dimensions in the future. So CAP 42. Again, it's linked to before this meeting, CAP 42 is drafted. That's the link to it there. It was also discussed on the mailing list and there's a link to the thread to that discussion thread as well. So our goal today is really just to see if there are any blockers that would prevent us from moving it forward to the next step of its life cycle. And I will stop talking and I'm going to turn it over to Nico, who is the original author of this CAP, to see sort of what. If he has any questions that he wants addressed by this meeting, Nico, take it away. Hi,

[02:00] You can hear me. All right. So, yeah, I'm happy that I got to get CAP 42 because you know it is the answer to everything, of course, and in particular the problem with fees and I've already networks in some ways that we're not necessarily happy with, and when I say we here, it's the community that has been also complaining quite a bit about the number of failed transactions or like patterns that are just not the type of patterns we want to see on the network. So, anyways, like maybe a little additional background that is not in the CAP itself, is that it's actually on the dev mailing list but not in the CAP. Is that, as part of the of this,

[03:00] We actually had to roll out some changes to overlay in back in December that we're dropping, based on a heuristic like- but we think are likely to be arbitrage trades and which mitigated to certain extent some of the things that we were seeing at the time. But that has a lot of undesirable properties and I think, as part of CAP 42, my hope is that we can actually go and fix the some of those aspects that we introduced at the time. So, in particular, like the type of aspect I'm looking forward, that to fix here is- and this is actually true in all networks- like it's not actually a Stellar specific type of problem. There has been discussions in the past

[04:00] Few months on Ethereum and solana- I'd like to name a couple- on changing these structures. When it comes to this kind of spam- and when I say spam here I mean it's kind of a funny thing, but it's basically like a natural thing that happens, I guess when you have an opportunity to. For somebody to make money is based on the cost that you have to submit transactions. If you can make, let's say, a thousand dollars on a trade, well you you'd be okay actually to pay 900 dollars in fees because you make some money. Obviously this is like. This is where,

[05:00] Like the way you can end up with and at the same time, if all, if all the transactions on the network are kind of derived on the step of keys, then it kind of kills off a whole category of other use cases that you want the network to have, so, for example, payments or like simple airdrops or whatever like people want to do, that are actually unrelated to those, to this type of trading activity. So, anyways, that's for the background on why this CAP, and yeah, so, like the I don't know like people had time to look over in more detail at the refreshed CAP that I did it yesterday.

[06:00] I did it yesterday, like it has actually two parts to. It is one part that is extending the what is attached to a transaction set, basically so that we can add, like new properties to the transaction set. And the second part is actually the actual reason for this gap, which is changing how fees get calculated within a transaction set. Sorry, is the latest version the one that's in the master branch in the repo 22 hours ago? Okay, yeah, that's it. Yeah, and I'm sure there are typos because I kind of updated it quickly yesterday to make sure that people had time to and to have access to it, but it's a early trough summer. Did you raise a hand? Yes, I did otherwise. I tried to be polite, but Niko didn't see. So, first of all, I think this is.

[07:00] First of all, I think this is pretty cool because it takes advantage of something that's unique to the ecosystem and, like, we can actually prioritize transactions not only based on fees. This is very different in other ecosystems because, you know, validators are kind of like incentivized by transaction awards, so they don't have the motivation to actually push these kind of changes. It's pretty cool. Nico, I'd like to hear your take on. We've been talking a lot about strategy for 2022 recently and things like speed x and things like smart contracts in the future. These are, like you know, more transaction engines or like transactors. How will CAP 42 interact with these or how do you think they'll, like it'll, interact with these features? Yeah, that's a good question and I think the this is actually in line with. When I wrote it, I was. I thought that we would actually, over time, kind of create more sea lanes or for lack of better words. So an example of

[08:00] A three lane that I think would make complete sense is to have a separate lane for speed x trades, given that they're a lot more efficient compared to existing DEX operations. And yeah, we basically say, okay, if you have the choice between a speed x trade and a submitted a managed offer to the network. You're going to go and have more space basically on that ledger. And for smart contracts, I mean it's, I mean it gets, I think, a little more complicated. When we talk about smart on tracks, like a very primitive version of this would be. Well, we are going to maybe create a lane just for smart contracts. That would be like a simple first step. Obviously there might be more interesting things that can be done

[09:00] On that front, but at the minimum it would be you would create a different kind of free regime right for smartphone tracks. I mean, I guess the thing is it seems like not really optimal for those use cases, like in those use cases it would be much better to just partition the transactions because you could, you know, then you could just you might want to, for example, say that all the smart contracts get executed like after all the regular operations, right, so just kind of having these like intermingled, like this index set, just seems like it's gonna add a lot of overhead and not be you know what you would want. So I kind of have two reservations about this right. One is that it just seems like a little bit too complicated for what we really need, especially if you want to start having you know blocks with, like 100 000 transactions, for example, which would be like totally doable with

[10:00] Something like speedx if they were all speedx transactions, right, you're not going to want to also have a added overhead of like sanity checking these index checks and whatever. You're just going to want to blast through your array of speed x trades and do like a parallel execution of those. And I guess the second thing that like bugs me a little bit about this: it just seems like very indirect, right, either we believe that dutch auctions are the right thing or we don't right and maybe dutch auctions aren't the right thing, but what we're sort of trying to say, like well, we're sort of going to keep the dutch oxygen, but we're sort of not, because we're going to let validators really kind of pick and choose different sets of transactions that are going to pay different fees, and I think the reason is because we want to filter out spam. So, like that is a form of censorship. Maybe it's okay, but like maybe we should just like be a little bit more direct and say, like validators, should you know, we're gonna just have a way for like different validators to like filter out certain

[11:00] Transactions that we don't think are productive and to the extent that you might not want that, you might want to say, well, what if my transaction is like really important, then I should be able to like pay a high fee and like get it in. The problem is that this doesn't actually solve that problem. Right, because I could put a maximum fee of you know two to the 32 lumens in my transaction. But a validator who wants to censor me could like put me in my own group with a very low base fee and then put everybody else in a group with a higher base fee and it'll look like: you know, like the block with that transaction will like not compare favorably, potentially to other blocks. So or I mean whatever you could just like filter out the transaction anyway. So I just I don't see, This doesn't seem like as much. It seems like this is partly to solve a problem, but also partly to I don't know like for to appear to be preserving the dutch auction when we're

[12:00] Not. And if we're going to have some extensible way for validators to filter out transactions, why don't we just do that in a more straightforward way? Well, so first of all like the when you say, like we're not preserving the auction mechanism here, what I'm saying is that validators, when they nominate those transactions, those transaction sets, the expectation is that they would actually be doing this type of action in any given group. But if they can choose the groups, they might as well, not, you might as well. Just let validators choose the fee for every transaction and just as well. It's the same thing. Yeah, you can do that straightforward thing: just annotate each transaction with the fee. That would, like you know a 32 bit number that's like or 60 on the right list actually was to just annotate every transaction with the fee. Yeah, but that's like. That's actually even less transparent in terms of what

[13:00] The intent is. So that's why I didn't do that. Like it's a like that's effectively what you're doing. Yeah, no, I know I'm doing that like I'm basically allowing for this, but I don't want, people to be doing like, arbitrary fee structure per transaction. But that's what you're enabling, right, you're just making, I mean, I know it's being enabled, but that's not what we don't expect for the data to do that. And actually this is there's a discussion in the later in the document that talks about- because, like, basically today, validators can already censor quite a bit, like what gets into a transaction set. So the example of like following the fee structure today is already not exactly right. Like, if validity doesn't want to do it, they just don't do it.

[14:00] And yeah, like here, what I'm trying to promote is more of a compact. I guess, like the yeah the. Those indexes thing, I agree this could be done, maybe in a slightly different way. I was trying to preserve the transaction set itself, like the existing transaction sets. But that's not good either. If it turns out that we want to like, actually change the order in which we execute transactions, then like, preserving the transaction set isn't actually that useful right? We already so for speed x. What we are. What is in the current proposal is to just like we partition on type and it's actually not. We actually keep the transaction set at it as it is like from a serialized version, because we can always partition after the fact. Yeah, but it just seems more useful to have it partitioned ahead of time. If you have sort of like just totally different phases of block execution, I see no

[15:00] Execution, I see no intermingling transactions from the different phases. That's true. So I mean I guess what I'm saying is like this will get the job done. But I can think of sort of much simpler ways of getting the job done. And it seems like this CAP is too concerned with sort of like appearances and those appearances you know effectively don't matter when what you're doing is equivalent to something where every whatever validator wins nomination can just like literally set the fee for every transaction. So like we're giving value. If we're going to give validators that power, let's just be upfront about it. I mean, I thought it was pretty upfront, I was optimizing again for like ease of audit and like maybe, like more compact potentially format. But that's true, it could be more compact or

[16:00] It could be less compact, depending on how many. If you have an extension point per transaction, you at least have an integer, their transaction additional. Well, you could just change the transaction set format and add like a four byte feed, you know no, but then less expensive, like David, can you articulate your alternative for a second, so that we're all on the same page? But the thing is that what we are discussing here is more like we're actually not discussing. I think we are discussing more like the format of the, like the transaction set. We're actually not talking. I don't think we are discussing- and maybe we should start with that- the premise of allowing to control fees. Right, because I think that's the important one. I mean, I guess I can see two, I can see I don't have a particular sort of alternative proposal, because it seems like we're trying to do two different things and those might be better

[17:00] Served by like two different mechanisms that are you know each that, some of which is like maybe less complicated or more efficient to implement than this right. So the first thing that we want is we want kind of multi phase block execution down the line, so we'd like to lay the groundwork for things like speedx and smart contracts and stuff to coexist with the legacy Stellar transaction format. And then the second thing that we want is: we want to like weed out spam, or you know transactions that are gonna fail a lot, and so I just think you know these could be handled in two separate ways. Or if you wanna have multi phase blocks, let's just have multiple phases in the blocks and potentially have like fees per phase. If we want to weed out spam, then let's just, you know, have a way to weed out spam and, you know, regardless of fees, we can just weed out the transactions

[18:00] Without spam, without doing it via fees is kind of what we're doing now and it's actually very hard to keep up with. Whatever people do- like you know, people are very clever right- they will find better ways to get around it. What power does this give us to weed out spam that we don't have in the existing consensus layer? In other words, I agree that we want to be able to kind of unilaterally update, like update Stellar core, without going through the transaction layer or, like you know, eventually have like a configurable algorithm to weed out spam potentially, and maybe different validators have different mechanisms, but I don't see how this change to the consensus layer actually gives us more power to do that. It may give us some sort of plausible deniability or something that works. It actually gives quite a bit of new super powers to the network because,

[19:00] Like I was saying, earlier, like if I have an arbitrage trade where I can make a thousand dollars, ideally, I would want people to actually pay up to a thousand dollars in fees. if they are really serious about they, transaction. Right now they don't. That's not what happens, because they're actually competing with the entire pool of transactions and they are filling up entire ledgers and then the ledger fees go up to, okay, 20 bucks, you know, for a transaction, but that's so. That's not a thousand dollars, but that's still ridiculously high. And 20 bucks is not the number I think. It was like what we saw was close to five dollars, I think, per transaction. So your point is you want the spam. You just don't want it to be as profitable like if someone can do like this. Yeah, that's what that's kind of. The idea here is that, like you know, in the current proposal, I'm say I'm saying, well,

[20:00] Any DEX, any operation that may cross an offer is going to be put in a separate bin, and then that bin, we do this, the action system on that, so, and then if you're not interacting with the DEX, then you're in the- you know general group, so it's. You know, that's like first step. Like you know, we can probably do much better than this, but you know so why don't we just throw in phases and say that, you know like, that's what I'm saying, that's already what I'm saying. Sorry, I'm saying, instead of indexes, let's just have straight up phases and let's just execute them in. You know, like, it's just such that like the DEX operation, oh, like you would want also execution order to change. I mean like, yeah, that's fine, we want to, like, we want to like. Segregate is going to lay the groundwork for paralyzation, right, and so if we're going to do a change like this or segregating

[21:00] Operations, eventually we're going to want sort of the community of operations in one group and the non community in another, and so the legacy DEX operations are exactly never going to be able to make community. Yeah, like, but like I think the issue here, if we have groups in like impact, somehow apply order, like, because we can have transactions with multiple operations. I think you can basically take that, use that to your advantage to maybe get executed in front of somebody else just because you happen to have the right operation. No, it's because you don't. You'll be. People will say that the like, we'll flag certain operations, like path, payment and you know, manage, offer and whatever, and say that these visa any. You know there's a first phase, which is, might have a lower fee but the. In order to get into the first phase, there's certain operations that are off limit, like the ones that we can't necessarily make efficient. And then in the second phase, you can, you know, have arbitrary like. My point is that

[22:00] This forces the to think about those feelings or whatever. have to be somehow completely independent or something like, and I'm not sure it's. You can always claim that. Not necessarily you could have like. You know, like I can see, like for speed x, like things like that. Yes, you know, that makes total sense for the existing transaction subsystem. I don't know if, well, I think, we're going to want to have, like, fast payments and faster payments than we can do orderbook operations. So to just to you know if we're going to be making this change, like, why not make it in a way that is will kind of facilitate that future where maybe, you know, payment processing could be parallelized, even if orderbook processing can't be.

[23:00] It's more like I think of this as it's. It may be a multi dimensional thing, coffees, and then how do you turn that into a, something that makes sense from a, like a, an ordering point of view. Right, that's kind of. I think I don't. I think that's leave it as open ended as the current draft. You could just say that we're going to do that with our groups. Sorry, I think if you say they are groups, if you're linking the groups to execution, or yeah, so you have to apply other groups, yeah, and so each group has it, has a different apply order and a different fee structure and then we can kind of, you know, have different rules for different groups. If you want to execute early and fast, then you know you should have a transaction that goes in one group. I think we could

[24:00] That goes in one group. I think we could also. I mean it might be worth considering, if we're changing the fee structure anyway, to have a separate base fee for successful versus failed transactions. Right, no, that is wrong. Like that doesn't work, like I don't see, like doesn't work. It makes things so complicated in the existing transaction subsystem that we've talked about that one a couple times before. Yeah, that would be pretty tricky. It's super complicated because you can merge accounts. That's kind of one of the reason. For example, one of the things that can happen, you have to refund people at the end. Yeah, it is kind of crazy stuff and it doesn't, and this actually doesn't solve the. It's not that we want to penalize transactions. You're going to have buckets. The buckets could. They could be morgan your granularity on the fee, but that's fine. I believe you, that would be too hard.

[25:00] For me. The most interesting question was your first question, David, which was just: like, do we believe in the dutch auction? Still, like, let's just like start with that. Like, do we think that is a even works? Like, do we think that is a good system for blockchains? Because, like, we thought that what like in 2018- well, maybe 2018 us was wrong. Right, like I wouldn't deny that 2018 me was wrong about a whole bunch of stuff. Yeah, but that way. But the thing is that if you, even if you go back to the regular fees, it doesn't solve the problem that people are still going to be a stupid number and you take over the ledger, agreed, but, like, if we don't believe in the dutch auction thing, like one of the things that I mentioned in, like my email, was like we could just like chart instead of like assigning a base fee to different groups, we could just say like, hey, like, if you're inserting groups, you actually pay your bid. So, instead of being like a dutch auction, now you become like a first price-

[26:00] Yeah, I guess like a first price auction. basically. And then, like that, that's really punitive, basically to people who choose high bid, high fee bids, but then if you choose those high fee bids, you are guaranteed to pay them, basically. So it avoids that situation where it's like: oh, there's a thousand dollar opportunity, you build 900 dollars, but you end up paying 20. It's like, no, I mean transactions, right. So this is one thing that's changed now. So one of the reasons why you might want to have bid a fairly high amount in 2018, is because you were like pre signing a transaction, right, and now we have a solution to that. It's not just that, but also like for, like, clients, like it really avoids having to keep track of market activity like the activity, like, and especially if you start to say, okay, the predicting fees is basically is becoming even harder. I think you have to have this kind of mechanism. Well, no, but I mean what this

[27:00] Mechanism? Well, no, but I mean what this current mechanism is. Basically, you say the maximum fee and then whichever validator wins nomination decides how much you actually pay, right? Like that's what this is going on. But it's sort of right, looks like a dutch auction kind of, because there's these groups- are you running the dutch auction? But like, if I can kind of pull people into different groups who are paying, who are gonna end up paying different amounts for the same good, then it's like I might as well just set the price. You know it. Just it seems like it's trying to look like it's still a dutch auction when it's not. So let's just be more directly what it is, which is validators setting fees per transaction. But it's like saying, oh yeah, like because, like, validators may decide to not do what we want people to do, then let's throw away the whole thing right and make plans as complicated as possible. No, I'm just saying, like, figure out what we want validators to do and just directly give them that power

[28:00] Instead of no, but like that, that's fine, like we already like. That's the point of this CAP is we give them that power but then saying we also get rid of the bidding aspect. Well, validators could decide to run a dutch auction, right? The point is, if we, if we're giving values the discretion to set fees, then one of the things they could do is run a dutch auction. But there's no reason to still have like to have CAP five somehow wired into the consensus layer. CAP five is now going to be true. Yeah, that's yeah, exactly. That's actually that's what the CAP 42 already says: it there's no more search prices. We're running these, dutch auctions per group, which just seems like an inefficient. We're adding this unnecessary level of indirection. Right, we're giving, validators the ability to set the fee of every transaction. And then we're doing it in this like weird, clumsy, bucketing way that you know is gonna require you to like check large sets of integers that they're not overlapping and all this other stuff, which is just

[29:00] Like you know why, just like set the fee per transaction. But how would you resolve contention if it came up like if everyone submitted the same kind of transaction all at once and there's contention for ledger space? In that situation it's just, you know, highest, it's basically the normal. You know, like I'm speaking at auction or a first price auction, but just not at the consensus layer. Like it would be the block, the nominator would be the one who's basically setting the fee rules for the block, as opposed to having happen at the consensus layer. And like you don't like, when I was saying that, like we don't necessarily want to do the dot auction, I wasn't saying we don't want to do it for any transactions. But what do you do? But there's no reason you can't implement a duns auction, like as you're nominating a block, right, but we might want to like for certain types of transactions that we think are very benign, we might actually want to mandate it, basically leave it, giving clients the opportunity to do very simple fee estimation,

[30:00] And then if you're trying to do something that's very, you know, profit generating, deliberately profit generating but not otherwise useful, then you have this more complicated fee situation to deal with and you pay higher fees, okay, but if you want to audit that, then it's going to be easier to segregate the transactions, right. I think I'm not opposed to that at all. We can say like I could definitely see a thing where we say like, at the consensus layer, you know, group zero is transaction envelope, group zero is going to be not going to allow orderbook things and it's gonna have to be a dutch auction, right. And then like number one, you know, group one is like discretionary. Sure, yeah, that I would be super comfortable with that. But like for me it just comes back to like: do we want to do stuff like that? Do like, if we want to keep the dutch auction aspect of it, I think we should probably mandate it in some parts. And if we don't want to keep it, then we should just be honest, like you were saying, and just like, not even have any pretense of doing it,

[31:00] And just say, okay, like validators, you choose whatever you want. And this is like CAP 42 supports this. Basically, my argument here would be: just like, remove the directions for what you're supposed to do and say like, do whatever you want. I mean like to mandated, you have to actually include. Whatever rule is used for partitioning has to be part of the protocol, then, exactly at least, which makes it into that one subset the rest of them, which means that for any change we want to make to this partitioning scheme is a protocol change only to that one partition. Well, like it could be a parameter too. It could be, like you know, a bitmap of the operation types that are allowed in. Like, actually, the first version of this CAP was not. It was not operation type. It was based on which markets you would, will you be, you know, doing so. It was much more granular,

[32:00] So that's not the type of thing you would want to. You can encode as a parameter it's, but those would be the things that aren't in. So basically, like when you do a path payment, you are not guaranteed to pay dutch auction to get the dutch auction treatment. If you do a simple payment, you're guaranteed to get the dutch auction treatment. That's exactly the kind of thing I'm talking about. And then, of course, whether or not you get the dutch auction or something close to it would depend on the particular validator, and that validator could decide. It depends on the particular assets that you're touching. Do we think that changing the fee structure for these kinds of operations- meaning like these non the non super benign, very efficiently implementable operations- would make a big difference? I think. I think that, David, you were already questioning that, like: is this enough control to discourage those kinds of things or

[33:00] Split things up appropriately? Is that right? Is the fees? The thing that matters is the segregation in terms of number of those operations that can enter the transaction. Set the right thing to control, like, what is the thing that matters? I mean, I, you know, I think that, oh yeah, of course we want to get you know, we want to. Some of this is going to be subjective, right. It's going to be like validators are gonna have an idea that there's some stuff that is, you know, more valuable to the network than other stuff, right, and then people creating transactions are gonna have some idea of how important their transactions are, which is going to be reflected in the fee or the max fee that they're willing to bid for that transaction.

[34:00] And so I think we kind of, we like the idea that you know if my, transaction's really important, I can like pay a lot of money and get it included. This CAP doesn't actually guarantee that right, because I could bid like a large amount for my transaction, but the validator could, you know, either not included or could include it in a transaction set with a low, a subset with a low base fee. And then this my, the block that contained my transaction, would like compare unfavorably to a block that has like higher fees for other transactions, even though their max fees are lower the way that, so that we actually almost never compare blocks. It's true, that's true. So, and then the spell. That's actually already going to happen today. So I don't want that. Okay, I suppose there's not really much guarantee that any validator will include your trend. Like you can imagine

[35:00] That, David, you know you like want to send Justin a payment or something, to like close out a payment channel or something, and you're willing to pay like a million XLM to do it, yeah, but like maybe me and Nico and Tomer are the validators and we're just like, yeah, maybe not, and then we just like refused to include your transaction. Is that, you know, if some validator eventually, if there's some validator willing to do it and that validator eventually wins consensus, then it will, your transaction will see the light of day. Yeah, right, you need consent, you need some offline agreement, basically to really censor transactions, and that's that doesn't change this CAP. I don't think this CAP can change that. It changes it a little. Well. No, I guess not really

[36:00] Well. No, I guess not really not any amount that matters. I think we have not heard from lee and not much from tumer. Where do you guys kind of stand on all of this? I kind of want to understand. It sounds like David has a much like more simplified approach. I'm trying to understand, like from a mechanical perspective, what this looks like. What is, what are the protocol changes required, if any, for validators to start assigning random fees or not, random fees to transactions, to transactions? Yeah, I'm yeah, I think about this, but I think, like David has a point, if we're just like pretending with this like group based approach, you know like we can implement that logic without that. So

[37:00] I mean like, so the group thing is more like yeah, like I don't really care, that's more like I said, it's a sterilization format problem. Like I think we still have like the new thing, I think the new point that David raised, which is interesting, is: should we basically hard code the, this split that is in the proposal right now as an optional thing, so that should like this split, being that there's like a presumption there that non DEX operations or, yeah, transactions, we're not going to need to do to

[38:00] Split that further, you know, oh, sure, or without going through consensus, sure, I guess? I guess, put another way, do we feel that for certain kinds of transactions, people should be guaranteed the dutch auction and the validator shouldn't have discretion? That's the question I was wondering too, David, and I think Nico thinks the answer to that is yes. I am also inclined to think the answer to that is probably yes. I'm not sure, maybe I'm wrong that Niko thinks that, but I think he thinks that, based on his reaction when we were talking about removing the dutch auction. I mean, I like the, that system that you basically express, you know, a maximum bid, and then you, and then it's the job of adidas to try to minimize this for you. Okay, so this does not currently guarantee that right, CAP 42.

[39:00] So the well, there is no. I guess, like the yeah, there's no guarantee either, even with the current system. Right, like I could basically decide as a validator, or all the ideas could decide that they're going to group all expensive transactions in one ledger. I know you know that ledger is the stupid ledger. Right, yeah, at least you know that is a valid dutch auction. Right, you know, at least you know there's, you know 999 other operations that are willing to pay that base fee or whatever. Right, but I mean, or you could say like fine, you don't really have that guarantee because you know the validators could hold the expensive operations. But it's the. So I guess, like maybe what you're getting at is we're effectively giving validators the

[40:00] Ability to just set a different fee for every transaction. Then let's just do that and not like wrap it up in some kind of auction thing. No, but I can't so either. Yeah, I mean, like it's, I agree, but like. The alternative to this would be to say, okay, like, because your point about okay, I'm going to have a transaction where I put a fee of million dollars, right, and I mean as a transaction submitter- I would feel very nervous about this because now, if I have a leader that wants to play a joke on me, they can and they would actually pay nothing. I mean nobody's actually. I mean only that one person is going to pay one million, right, and that's what CAP 42 lets you do. So, right now, I have 42, lets you do that. I, the I- the original version that I wrote was actually requiring that those groups would be of a minimum size to actually avoid this type of situation,

[41:00] But I thought it was maybe not, So basically you require to do this, those, this bidding system on at least some number of transactions, of transactions. But yeah, I don't know, that would maybe mitigate this and it kind of makes both versions work in a way because now you can have arbitrary sets or arbitrary groups where you do this bidding thing. I mean I wonder if the right thing- I'm just kind of breaking it down- that this is not very nice in terms of, like, how much of the ecosystem it impacts. But I mean I almost wonder if you sort of you want to give people submitting transactions a choice. So if I had some flags on my transaction, then I could say, hey, I'm willing to. I prefer the validators play with the.

[42:00] I prefer the validators play with the priority of my transaction delayed, or I prefer that validators play with the fee that I'm paying, or something right. And so then you'll, either you'll, depending on what you select. You'll either pay a potentially very high fee if validators want you to, or you'll get de prioritized if they don't like the fact that it's a path payment or that it's touching some asset that we think is a spam asset. Yeah, I strongly oppose that idea. I think that we have a problem right now with the dutch auction, where people don't understand it because it's so different from other networks, and understanding, like adding other dimensions, to like prioritization besides just feet, is just gonna confuse the hell out of people. Well, what if there's just one bit which says I want to participate in the dutch auction, or I want to pay this fee

[43:00] Auction, or I want to pay this fee, and so then like yeah, why? I mean I still understand why you would want people to like what the current contract with the network is that you put a fee bid and you may pay up to this number. That's good, that's the contract. It's fairly simple, I think, to understand. Maybe you don't, maybe it's harder to understand when my transaction is going to be included, but at least you know it's. The contract is simple. Yeah, I agree with Niko. I think that, like the current contract doesn't have to change, even if the underlying mechanism changed. Like, basically, this is the amount, the maximum amount I'm willing to pay. Maybe, if it's an opportunity, I'm going to pay the whole thing, maybe it's for something else you're going to pay. Like the validators can change the logic without having to have, like wallets start like exposing a weird interface. That's true, but we are the validators are gonna have to make a decision, right, they're gonna say,

[44:00] Like, either you're willing to pay a lot and either I'm going to- you know- charge you a lot, or I'm gonna charge you the same as everybody else, right? So we're now giving the validators that discretion and you know, if we think that the dutch auction is a good thing and we think that certain transactions should be guaranteed the dutch auction, I'm not sure I believe this right, but it's plausible. Like I'm not taking it aside- then maybe make it explicit in the transaction itself and as opposed to, I don't see how, like that, you can make it really explicit. I mean like you have to have a market to afford this to work. That's why I was saying like, maybe it's more like I ensuring that people are actually part

[45:00] Of a market. When they are doing this building, they expect some bidding. Like you know, I want to be competing with at least five people or ten people. I don't know what the number is, but like sometimes something like that. Can we go back a little bit to this, like if we actually combine the groups and apply order, like make them the same thing I think this may create. It depends if, like how many groups we have, but like I think, if we think that people are going to be, if we want people to add more groups of our time. Doesn't that leave too much? Does that give too much kind of power

[46:00] To validators now that they can control apply order? Right now, they don't really control that. Well, I mean the rules for apply order- could go through consensus potentially, or some rules, I mean so like I could definitely imagine a situation where, like you know, in the long term, there's like four groups. You know, there's speed x, there's fast legacy operations, and then there's like smart contracts. Yeah, exactly like so those groups. I understand those groups. I don't understand how, inside those groups, fees would impact apply order. Okay, two things to interject here. One: there's actually already a CAP about arbitrary transaction orders, so we should probably all review it at some point and incorporate that information into this conversation, because we probably already argued about this like

[47:00] Three years ago, and since we didn't do that for all the reasons, so we should learn what we learned back then. It's 14. It was written by jeremy. I don't remember what it says either, I just remember it having it. I just remembered having the word adversarial transaction ordering and I'm like, ah, yes, the. I think the word adversarial made this pretty unpopular. But the second thing I want to add is like I think, probably to make this grouping thing sane, the fees and the groups would have to be on different, like unorthogonal axes. Otherwise, like this is gonna just be a nightmare. I think Nico, probably, okay, what's that? What's your? Sorry, I missed your comment. Like you were saying, like how would the fees impact the ordering within the groups? And like you know what about the number of groups and stuff like that? I mean probably like fees and apply and like

[48:00] Phases should be separate, kind of grouping or tagging or whatever system. I know that's what I'm saying. Like I don't like the idea of mixing the two concepts, yeah, I don't think they should be mixed. I think that would be a mess, that'd be really complicated, right. But like maybe the things that maybe as part of those changes, if we mess with the transaction set, we should make it that it's easy to add more phases. I guess even if we're not adding a phase with this change, because we don't have the need for that right now, I think we- I mean I can see, given that I'm adding this generalized transaction set thing, like maybe it should be easier to have phases to it. Now, I don't think it's that easy actually, because it's using this index thing and yeah, maybe I should just ditch that. And then instead it's like you actually have actual

[49:00] Vectors and yeah, I would like that more. So we are getting close to the hour and I guess my question is: you know it seems like there are there's more to discuss than there's more to think about. What's the best way to move the discussion forward? I mean, I think there are like a few. So there are like a few interesting questions here. There's the- yeah, the action system, like what do we do with this? And then there's the actual structure of the like: how can we do, what type of groups can exist or not exist outside of the protocol? So I think there's also work that there's something that doesn't need to go through the transaction there. I don't know how you guys have, like what the current state of this is, but I think

[50:00] Current state of this is. But I think that there's going to be some configuration, some way of configuring Stellar core to say, like, which transactions we think are, you know, should be prioritized, and so that doesn't need to go through the consensus layer. That's what's going to like, you know, basically implement the discretion that validators have. But having some part of that kind of design sketched out, I think would potentially inform the debate over what the consensus layer, like transaction segregation mechanism, should look like. There is a like a super duper, ultra primitive version of that already exists- super primitive. But I do think it'd be interesting to kind of think about: like what could we actually make expressible in a pretty simple way because, like, if there's nothing that's really useful that we can express, then that really lends itself towards saying like, okay, like these things probably like too complicated to express, they're not configurable, validators

[51:00] Won't be able to do it, etc. Whereas if we can think of lots of useful things that you can express simply and it's like actually like we should feel free to give validators a lot of power to make you know same decisions and they can configure it easily. I think that matters a lot. I mean like the- yeah, like the. I guess they're like different things here. There's like, because my, what I thought here, my intent here was not necessarily to make it like something that you would necessarily, you know, do in as a config right. It's not like a config file that people deploy. I thought it would be more of a. You make actual changes to Stellar call and then those things get, you know, I mean I think, a config file would be better because I mean it would. The point is it's better, but it's it gets a lot more complicated in terms of I mean I really changing Stellar. Changing consensus, of course, is easier, right, and we'd rather tell people, hey, you know, because of this thing, like,

[52:00] Please compile the you know, this latest version of Stellar core, which is still the same protocol version, but that's still pretty heavyweight. So it would be nice at least to rule out that a config file isn't sufficient. How do you feel about a hook David like what we do for history? Maybe, yeah, because then we could just like, basically just like, vomit out the set of transactions that we have in memory at your script and say like, hey, man, this is your problem, you figure it out, yeah, or you know, it could even be, if we keep care about efficiency. It could be like a plug in or something, right, that you know, but like what does it look like? Maybe the plug in just like assigns a small integer to each transaction, which is it's sort of it's bucket number or something, and then there's a config file that assigns minimum fees or relations of fees between buckets I don't know like, and right now I'm just making some up so. But to have at least one concrete design on

[53:00] The table- not an implementation, just a design, I think would make the, would make it a lot easier to discuss CAP 42 and the various possible changes to CAP 42 in like its concrete context. I mean, like the other thing that would happen that sounds like it's getting into. Let's see how. What type of complicated policy we would want to implement and is too expressive enough, or is it too complicated for the things that we want to do? Well, like I mean. Like which policy. Like I had a previous example of policy in there that I thought was way too complicated in the context of this guy. Because for me what I want the CAP to be- is actually what are the consensus changes? Like I like the things that are really part of the protocol. I don't in a way like I want to.

[54:00] I don't in a way like I want to kind of set aside as much as possible, yeah, like those type of more complicated changes that actually we can do later on, and this doesn't require a CAP. No, but I mean I just you know I want to. No, but I mean I just you know, I want to know, like you know. Like, for example, I don't know if this is true, but maybe what we want to do is we want to keep track of, sort of, for each asset, the fraction of failed- you know, path payments that involves that asset and you know. And then, for when it crosses a certain threshold, we want to, like you know, de prioritize or raise the cost of transactions involving that asset, or you know just I, but now I'm just making that up, right, but like, let's have an actual concrete thing of like places where this would be useful and how it would work in Stellar core, and once we have that, I think it'd be easier to say like well, do we really need CAP 42 or would it be simpler, just like set the price for each transaction or to have like separate arrays. That would then also facilitate the phase thing, because it could be that the phases and the fees for spam should

[55:00] Be solved by two totally separate mechanisms. Or it could be that like we should have one mechanism and like CAP 42 should basically like solve both problems at once- and I actually don't know right now, with like so few use cases, whether we should be doing this as like two separate mechanisms or a single one. The other thing I'm interested in here is: just like what's our goal to have less of these transactions, to have them pay more, to have a better distribution of transactions. What is the thing we're actually trying to achieve? I feel like we'd have more ease agreeing on the mechanism, if we all agreed on the thing that we wanted to happen. I don't think we all necessarily have the same picture of what we want to happen. I don't even know if someone I'm not sure if I even have a picture of what I want to happen. I don't like what's the current situation, but what is the good situation? I don't know. And that's what I mean by the concrete thing, like let's just say, like

[56:00] Here's what Stellar core could do. Here's a couple of scenarios in which the network's not going to behave well and here's how it would be solved with this, plus some CAP 42 like thing. And then we can even. We want more examples like the one right now in the CAP. Is the we can do groups based on DEX activity. So you want more of that, yeah, and I want, but I also want to maybe know, like, how this would be implemented in Stellar core. Like again, like config file change to siebel's plus plug in like you know, because is it realistic, like, how often can we get people to like compile new versions of? We get a new version every month, right, so that's why I'm like, do we need people to go and mess with that more often than that? I don't know, in a super uncoordinated way, I don't know. I could do it very

[57:00] Interesting. Do you know people actually do upgrade every month? Or just for the new protocols? I mean like every? Yeah, at most it's like people, yeah, like upgrade after like three months or something, yeah, so like, if people are only upgrading, like for the new version of the protocol, then there's no benefit to removing this from the consensus layer or in order to remove it, or there would be benefit only if it could be like done by configuration file as opposed to like a recompilation, right. But if you're saying like with the protocol upgrades every six months and people upgrade every three months, like okay, then maybe there's some benefit. I mean like. so validators do upgrade, like you keep their notes up-to-date. I'm not talking in general. Yeah, like people, the bulk of people, takes like two to three months to upgrade. There's pretty big variation. Some people upgrade insanely fast. I mean the CoinQuest. Guys have occasionally updated before us, I think,

[58:00] Before us, I think, but not everybody is so excessively diligent. yeah, all right. All right, okay, I think we're out of time for today, but I feel like there are some open questions and suggestions for things to sort of work on next and I feel like, ideally, we start to bring those to the mailing list and plan to reconvene with some new thoughts. Hopefully the next meeting in two weeks. So good, all right, awesome, thanks, everybody. See you soon. Thank you thanks for watching out there.

</details>
