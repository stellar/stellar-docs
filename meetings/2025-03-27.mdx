---
title: "Soroban Contracts Library Demo and Protocol Updates on Fees and Events"
description: "A technical demo of OpenZeppelin’s Soroban contracts and Wizard workflow, followed by protocol updates to CAP-63 and CAP-67 covering fee refund timing, events parity, and resource/event structure changes."
authors:
  - carsten-jacobsen
  - dmytro-kozhevin
  - siddharth-suresh
tags: [developer, CAP-63, CAP-67]
---

import YouTube from "@site/src/components/YouTube";

## OpenZeppelin Soroban Contracts Demo and Developer Q&A {#part-1}

<YouTube ID="zqrE4mWNog0" />

This session is a technical follow-up with OpenZeppelin, featuring a live walkthrough of the Stellar Contract Wizard and a Q&A with engineers working on the Soroban contracts library. The discussion focuses on how developers can quickly generate audited contract templates, integrate them into a Stellar CLI project, and deploy to testnet.

The Q&A highlights what’s shipping next in the library, how extensions are being designed, and what parts of Soroban’s architecture feel notably different from EVM development—especially around authorization and upgradeability.

### Key Topics

- Status of the OpenZeppelin Soroban contracts library and audit cadence
- Wizard demo workflow:
  - Generate a token contract (name/symbol, premint) and enable extensions
  - Add the `stellar-contracts` dependency (pinned to an audited release)
  - Build and optimize WASM, deploy via Stellar CLI, and invoke functions to verify behavior
- Contract extensions shown/discussed:
  - Mintable, burnable, pausable patterns for token contracts
- NFT roadmap details:
  - Planned features such as enumerable/consecutive minting, burnable, and claim/controlled minting patterns
- Library roadmap and community input:
  - Future primitives/utilities and standards (including vault-style patterns) prioritized by ecosystem feedback
- Soroban vs other ecosystems:
  - Protocol-level auth patterns reducing boilerplate compared with EVM
  - Simpler, more uniform upgradeability approach than proxy-heavy patterns in Solidity

### Resources

- [OpenZeppelin Contract Wizard](https://wizard.openzeppelin.com/stellar)
- [OpenZeppelin Stellar Contracts](https://github.com/OpenZeppelin/stellar-contracts)
- [Dev Walkthrough](https://www.youtube.com/watch?v=iD7ZspsZLVo)

<details>
  <summary>Video Transcript</summary>

[00:00] Hello everyone and welcome to this week's Stellar Developer Meeting a little bit earlier than usual. But the reason is we have some really exciting episode here we have some of the guys from open sein we are doing this as a followup from the last session we did this time we're going to be a little bit more technical. So I would like to add the open sing guys from to our studio welcome guys please do a quick introduction of who you are what you're doing and yeah let's get started yeah I can start yeah thanks for hosting us Carston yeah really excited to be here my name is buan

[01:00] I am open source developer at open OpenZeppelin yeah building together with osun the Stellar contracts Library yeah my background yeah it's mostly related in the past to some EVM development Solidity also some R development. So yeah trying to bring the best from all the experiences I had great welcome thank you hello everyone it's oen my name may be hard to pronounce for some. So you can call me o. If that's easier for you. So I'm working with OP Zeppelin for about one and a half years and my background is more on the high

[02:00] performance Computing distributed systems and cryptography all of these included I started my blockchain journey in some startups for layer zero or layer one. If you will. And then transitioned more into po do ecosystem, and now I'm switched to Stell and quite happy with it great thank you and welcome to you too yeah we started this journey a. While ago and the reason is or the objective is to make it easier to for new developers to onboard Stellar and to build great Solutions. So where are we. Now how far have we come in implementing Stellar in open sppin can you just give a really quick overview of where we are and what's being worked on. If you want to go you can go yeah sure yeah. So yeah it's been couple

[03:00] couple months, that we kicked it off we are already on our like approaching our second audit meaning, that we are we accomplished our second milestone and the idea is, that we got our work audited on a regular basis. So the products the tools we are delivering to Stellar ecosystem are safe and secure and yeah. So so at the moment like we last month for E Denver we shipped our first release, that was about fible tokens and the PO

[04:00] utility. Now we are heading to delivering the non funable Implement non fible token tokens implementation packed with couple of extensions so, that suits different use cases. So and yeah next week we are kicking off the second audit, that will last for another week and. And then we are shipping the next yeah the next release okay great this is where we are great. So for those who may not have followed the openin initiative or have just curious what's what we're doing here can you maybe share the screen just show an example of what

[05:00] the what it looks like the maybe the wizard just really quick give an introduction to like what is it the developers are experiencing and what is it the developers can do right. Now yeah sure I can showcase the wizard The Open Zepp Wizard and how it makes super easy for developers to have like a base basic smart contract at some custom functionalities. If they're needed and deployed to testet yeah I would love to do, that yeah I think, that would be a great introduction to open sa for new develop yeah sure. So let me share my screen

[06:00] so can you look at my screen I think it's loading yeah okay. So here it is the Wizard. So it's `wizard.open.com` I believe it may be helpful to zoom in just one or two more bits to make it more readable okay this is this time I think good what do you think yeah it's I think we can read it. Now yeah it looks good okay. So yeah this is our wizard, which the idea of it is like to

[07:00] make life easier. If you need to like to build up something quickly. So some with some base some basic features you can use it yeah you can see we have for different languages and U chains. So here at, that's Stellar for the moment we have only fungible. But as we fin once we finish the non fungible module and get it audited it will be added here similar to. So you can see at for Solidity there are different modules for the moment here we have only F and thanks to this UI you can configure the Bas the basic properties of your Tok for example let's

[08:00] call it awesome token it's yeah really basic. So and here we can Define for example. If we want to do some Prem Min let's say we want to Mint 1,000 of bit of this token and here there are different Fe, that we can add on top of this basic implementation for example say we want it to be minable and you see how the UI gets updated. If you want to add a burnable functionality meaning to allow users to burn their tokens they wish. So we can click on, that and yeah this is how our contract looks like. Then let's deploy it to

[09:00] test net. So we are going to set up a project with the Stell CLI. So yeah for those who yeah we can check at Stellar documentation how to install the CLI and use it. But yeah here we're initializing the project. So here we have our awesome token contract yeah we need to add the dependency here the recommendation is to use to pin it to a specific version

[10:00] or tag. So as the this version 0. One is the most recently audited it's this version, that we are going to use. Then we are ready to like to delete this boiler plate, that was provided by the C and go back to the wizard UI here we are copying our contract going back to the file we are pasting it and yeah. So we have it we have everything set up. If we like. If we need to do some modifications we can we and we know of course what we are doing we can go and straight to the

[11:00] to the codent modified. Then we are going to build this contract. So it is done. Then the recommendations are to also not only build. But also to optimize it. So there is a special yeah there is a CLI command for it. So well it's not there yeah it's. So my target

[12:00] so here it is we gained like something like 1,000 and something bytes of our optimized version. So it is ready to be deployed. Now just for the record I have like I set it up wallet from the Stellar lab and funded it with some lumens test net lumens, and now we are going to deploy it. So it was called my awesome token right we are deploying it with the Alice key yeah here is U an address, that

[13:00] will be the owner and the recipient let's say it will be Alice again. So Alice will re receive the tokens so. If everything's fine we should have our contract. So yeah this is fine it gets it got deployed this at this address and Alice received the 1,000 1,000 tokens, that we yeah we preed basically, and now yeah you can interact with this contract either with the CLI or build

[14:00] a UI build a UI for it maybe just let you let demonstrate how we can invoke it. So just to. So this is the contract. So yeah it actually it is stored under token the token Alas and we going to check the balance of Alice yeah okay. So it's working we checked. So the balance is correct. Because it's yeah how

[15:00] the yeah basically we preed 1,000 with 18 decimals so, that's why we see. So big zero. So so many zeros and yeah I guess this is enough this is great it really I convince you it's really easy I mean of course you have to be familiar a bit with the Stellar CI. But I think it's a great very intuitive and user friendly. So yeah it's really easy to get up to speed with, that. So yeah I think this demo showed really how simple it is to work with and one thing, that I appreciate a lot too is the testing, that this goes through on your end so. If if you are implementing this yourself and maybe you are

[16:00] still pretty new to development on Stellar I think just knowing, that this has been tested thoroughly this is secure this is safe I think, that gives me a lot more confidence as a developer, that the products I'm building, that they are also safe for the users. So I think, that's, that's something, that you know the convenience of using open sein is obvious here it's super easy and simple. But I think for me the knowing, that this has actually gone through very serious testing, that, that's something, that I would like to at least put a little bit of Spotlight on I think maybe we can see. If there's anyone, that has any questions let me see I see Elliot actually one of my team members he has a question here he says in the NFT contracts are you implementing the same extensions as the

[17:00] F tokens or is a different set of extensions I believe I can take this one. So they are not completely the same since the standards We are following are getting differentiated as well. So for NFTs it would be enumerable consecutive minable burnable and also claimable. But some of these are not exactly extensions. But we want to give the name of them so, that. If a person from other ecosystems comes here and wants to search for these they will know how they are implemented or adopted into Stellar. So these five things, that I mentioned will be covered okay great we have another question from JS maxi it says said

[18:00] we are sentential developing an R ERC 4626 standard Vault Solution on Stell San and. If that could be integrated into open sain standard library for soran in the future I don't actually don't know. If that's something we can answer here I think, that's probably is about 46 36 yeah 46 26 yeah it is included in the road map down the yeah for the next Milestones I'm not sure. If in the Milestone 2 or Milestone three. But it is for sure included in the road map okay. But the question is they are asking for collaboration. So they are already trying to build it. So yes by the way yes we are the title of our jobs is open source. So of course any collaboration is more than welcome please be sure to check out

[19:00] our contributor guidelines, which is the usual stuff we have like mainstream things there and anybody who wants to contribute can contribute in fact we do have three external contributors right. Now so the more the merrier great and this is why it's great to have you guys on here. Because I was not able to answer, that question you guys are the experts on, that okay let's see we have one question more from Matias what design considerations were made for the library considering classic Soroban and How Stellar classic assets work yeah I can maybe partially give an answer and O you're going to add. If I miss anything yeah. So we are trying to navigate between like different

[20:00] let's say requirements concerns and yeah of course one of the requirements is to make things compatible with Stellar classic for the moment we have finished with the fungible token implementation, that is like in the, that was audited I demonstrated and actually it overlaps by with many of the features, that are available already from the Soroban sbone SDK itself. So on, that front we haven't done much. Because yeah most of the work was already done by the Stellar Development Foundation team. So

[21:00] yeah for the NFT, that we are for the NFT part modu, that we are working at right. Now yeah there are some discussions about how this compatibility can be brought on the table there are some ideas, that are circulating. But yeah trying to accommodate also for existing Stellar developers, that are like try to leverage Stellar classic assets. But also for some other use cases where people need some customizations, that can be brought only by smart contracts okay great let's see yeah and I was actually thinking about this mat was he was asking on what's on the road map what

[22:00] is coming next can you maybe talk a little bit about the road map there will be smart wallets many other token standards some utilities like fix Point arithmetic and Merle proofs stuff like, that. But they are all discussed and we may change the order Etc depending on the community feedback and our priorities okay great yeah actually yeah we are really looking for like feedback what is what are the utilities the The Primitives, that are most the mostly like Builders from Stellar are like eager to see. So yeah we are definitely looking for feedback so, that we can Shape Up together the our road

[23:00] map okay great. So we have a question also from L again any highlights or low lights you can share about the Stellar sorond architecture compared to other blockchains since you have work with other chains you want me to start buan. And then you can continue okay. So authorization is done in a great way I will let poan speak more on, that. But but I also admire the way authorization and authentication Works in San my biggest admiration comes from the developer experience it's great right. Now it's super simple yet super safe and we also want to and try to do our best to keep this safety and simplicity in our projects I will L it to buan

[24:00] yeah I'm also joining Al on this front and yeah just to add, that like yeah authorizations how they're handled like on a protocol level actually relieves a lot of pain points, that for example developers from coming from EVM chains are having like for dealing with authorizations actually many of the things, that are natively supported and Builders shouldn't care like at all in other ecosystems like it's additional overhead of like how to construct your contract. So they're not too big they're too complex and here like

[25:00] Builders can focus on what's the most important the business logic, that is regarding their specific application. So this is a huge benefit other thing, that comes to my mind is for example how the how we deal with upgradability in soron it's just a seamless like a wine liner compared to for example Ethereum where are like dozens of different OB gradability patterns with different tradeoffs security concerns Etc and here is just a no-brainer. So it's bit a big thumbs up about the work, that's done in the background. So yeah okay great

[26:00] well, that was all very positive. So happy to hear, that I think Matias was asking about the soulbound tokens. If if, that's possible is, that something, that's been cons being considered or thought about or is, that not something, that's been considered yet sorry it cut and I couldn't hear oh. So Matas was asking about Soul bound tokens. If that's soul to yeah actually it is not something, that is planned straight away. But but yeah I mean with the NFTs we are building the ground for, that and yeah maybe yeah we have to see how yeah how this is how

[27:00] this can fit in the future Milestone okay great by the way it is worth to note, that we are building this for community so. If Community wants, that we will for sure do it great have you identified the biggest pain points from a developer experience for building cross Chain Solutions this also a question from yes right. Now we haven't explored how we would do cross chain stuff for Stellar. So I for myself am not able to answer, that as of yet maybe in the upcoming months I will be. But maybe buan will have something to say I don't know yeah just to add, that there is the AEL team, that are doing some yeah great job on, that front so. If you are interested in Cross chain cross chain

[28:00] standards don't remember the exact number of it. But U yeah you can check their work yeah they have really good stuff there yeah okay great any other questions let's see I think we got H there's only one I skipped was what is the expected Cadence of releases for the library yeah I answered, that right. Now in chat. But let me say it from here as well we are we will try to have a monthly release schedule the keyword here is trying. But we will do our best okay great let's see any other questions I think we got quite a few questions, that were outstanding from our

[29:00] last session where we were not really provide able to provide good answers I think we got all of, that covered. So it was really great to have you both on this call and I think I'm super excited about what this means for the developer experience on Stellar and I can't wait to see what people are building using the open sein Library any final words from your guys yeah just yeah thanks a lot for having us it was a pleasure for us also to thanks for all the questions and yeah don't hesitate to Ping us on Discord and yeah chat there about whatever you think yeah it's important so, that we

[30:00] build a great tools for the whole web system. So yeah thank you and in addition to, that please feel free to open up any issues for the features you want to say or bugs you want to report or just questions you want to ask we are also pretty active on GitHub and it's a public repository. So feel free to interact with us from GitHub as well great thank you so much for joining and maybe we will do a follow-up session at a later time this was great love the demo love to pick your brains on these topics. So thank you again for joining and thank you for everyone who listened in here thank you and see you next week bye by right thank you

</details>

## Protocol Updates on Fees, Events, and Resource Limits {#part-2}

<YouTube ID="2q3NlmrtmQg" />

This short protocol follow-up reviews changes to CAP-67 and CAP-63, focusing on event parity improvements, restrictions to reduce ambiguity, and a refinement to how Soroban fee refunds are applied to support parallel transaction processing.

The group also discusses whether events should represent intra-ledger balance transitions in a fully ordered way, and leans toward keeping events simpler (with more detailed reconstruction left to transaction metadata when needed).

### Key Topics

- CAP-67 updates:
  - Emit `set_authorized` events for parity with the Stellar asset contract
  - Inflation operation emits a `mint` event per payout
  - Prohibit muxed source accounts and memos for Soroban transactions to avoid confusion and because they are not signed in auth payloads
  - Consolidate diagnostics into a single transaction-level vector (remove operation-specific diagnostics vector)
  - Add muxed account support discussed previously
  - No separate fee-refund event; refunds are reflected within the fee event
- CAP-63 update on refund application timing:
  - Apply fee refunds after all Soroban transactions are applied (rather than after each transaction)
  - Motivation: fee source is not in the footprint, so per-tx refunds can conflict with parallel application when the same account is modified elsewhere
  - Alternative considered: add fee source as an implicit read-write footprint member
- Events vs precise balance modeling:
  - Concern raised that combining fee and refund in one event can hide transient balance dips within a ledger
  - Consensus direction: keep events focused on end-of-ledger balance tracking; use transaction metadata for deeper audit-grade ordering details

### Resources

- [CAP-0063](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md)
- [CAP-0067](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md)

<details>
  <summary>Video Transcript</summary>

[00:00] All right. I'll get started. I welcome everyone to today's protocol meeting where we'll be discussing some recent changes to two Core Advancement Proposal [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) and 67. So first I'll start with some several [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) updates. The first one is, that we emit the set authorized event to give the unified events parody with the Stellar asset contract. There's also a change specified, that the inflation operation will emit a mint event for each payout. There's also a change to prohibit mox source accounts and memos for Soroban transactions and the this is. Because like. So the mox source is. Because like. So the mox source we're prohibiting the mox source to avoid any confusion on events and, that along with the memos are not signed in the o payload. So we're just prohibiting them altogether. There's also a change to have all diagnostics live in the single transaction level

[01:00] vector and remove the operation specific diagnostics vector, that [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) originally implemented. And we also added the emu account support, that we discussed at the last protocol meeting and all these changes can be in the [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) link can be seen in the [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) link, that I shared below. And the last change is, that it's not a change, it's more of a detail, that we will discuss in this meeting, which is, that there's no specific event for fee refunds. And this it's conflated to the fee event. And this is related to the [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) change, that I'll discuss in a moment. But before I move on, does anyone have any questions? All right. Then. Then I'll move on to the [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) change. One move on to the [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) change. One sec. Can can everyone hear

[02:00] me? Okay. Yeah. Then yeah, I'll move on to the [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) change. Which is the a change to apply the fee refunds after all Soroban transactions have been applied instead of after each transaction like it is today. So we this was done. Because the fee source is not part of the footprint and this is an issue. Because it's possible for, that same account to be used in a Soroban transaction. So. If you apply transactions in parallel you would need to make sure, that the fee source doesn't conflict the refund doesn't conflict with a different transaction, that modifies the ex the native excellent balance of an account. So we had two options here. You would either need to make the fee source an implicit number of the read-write footprint or we just changed how refunds are applied and apply them after all store run transactions have been applied and we decided, that applying the refunds later made more

[03:00] sense. That's what [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) [CAP-63](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0063.md) went with. And the relevant [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) topic to discuss here is, that the refund is conflated into the fee event. So this is fine. If the goal is to just track balances at the end of every ledger. But. If a user wants to infer anything related to balances in a ledger or in a transaction. Then this can be an issue. Because imagine, that you have a contract as a example Lee mentioned. You have a contract where it the contract does an action based off an account falling below a certain balance. Because the fee was charged to, that account. But. If we emit the fee as the fee plus refund. When you look at the events later on like for example. If you're doing an audit you will never see, that the account dropped below, that balance, that the account triggered on

[04:00] that the contract triggered on. So this is an edge case and I'm not sure. If this like something we can discuss is. If this use case actually matters. But the alternative would be to maybe emit a separate refund event. But we actually open up another can of worms here, which is, that. If you're the fees are applied before are charged before the operations are applied. So you would need to make convey the information about the ordering in, which the balances change in the events and currently the events are just a transaction level vector and an operation level vector. But we would need to make some changes where the structure, that's in TX meta, which is you have the you have everything, that happens during transaction application and everything, that happens post transaction application. We need to convey, that same information in the events and we should and. If we do need this

[05:00] granularity, that might be the path to take. So. So yeah. If does anyone have any questions about this or have input? What I wanted to tell is, that like we don't have many people today. And we also don't have Lee and we don't have Nico and others. So I mean you definitely could listen to what folks who are present think. But yeah sounds like I can afford just yeah exactly yeah I'm inclined myself to just not do anything and just clarify in the CAP, that events should not be used for modeling the exact balances during the ledger application time. Because fees are in general charged at different points in time.

[06:00] , okay. Here's Nicholas. Nicholas. yeah, it seems to me like, that's the thing to do here and. If someone has objections, you can discuss them async. Yeah. Because otherwise we would introduce a lot of structural complexity in meta for meta in events and we wanted events to be rather simple to consume and hopefully the consumers of events not worry about just reor operation. But yeah, that's my take on this Yeah. Yeah. I agree. I the use cases we've discussed with rel in relation to [CAP-67](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md) tend to be for just tracking balances

[07:00] which seems like you know tracking you updating your balance at the end of every ledger is what this was designed for. And. If you want to use this for. If you. When you do anything related to like audits or anything more granular, I feel like TX meta should be enough. And making this system more complicated to handle those use cases doesn't seem to be the right move here. So I agree with you. Yeah. Yeah. Exactly. And agree with you. Yeah. Exactly. And I guess the bottom line here is, that like even, though the effects are. When the ledger has been applied, you still get the correct value for transaction. It just applied at different points in time. But then. When you're looking at transaction events, you'll still get the correct key charge, that corresponds to what happened in reality. you just don't know the exact details. When exactly has been charged. So, hopefully for most intense purposes, please. So yeah, I

[08:00] intense purposes, please. So yeah, I guess we can write this up and update the CAP and yeah, we can update the CAP and respond in, that thread. Okay. Does anyone else have any input? We have a small group today. So unless anyone has any other questions, we can probably call it early. All right. Well, it was a quick one today. Thank you for joining and yeah, thanks Nemo for your input. All right. See you.

</details>
