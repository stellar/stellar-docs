---
title: "User-Friendly Key Management with SEP-30 Recoverysigner"
authors: [leigh-mcculloch]
tags: [community]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="W-n73Cuy7-0" />

- hi everyone welcome to the stellar development foundations engineering talk series my name is Lee McCulloch and I'm a software engineer at the foundation I'm one of the people working on improving the experience that individuals have using stellar and the businesses have building on still and today I'm talking about stellar ecosystem proposal 30 sep 30 is an approach to make still a key management user-friendly in products built on stellar so a user friendly team andr is maybe a bold statement to make because key management is rarely user friendly but that's what we're going to talk about today first I'm going to set some context and touch on what key management looks like on the stellar network how key management relates to Louis and then some common approaches that while it's take in the stellar ecosystem and in the blockchain space in general then we'll jump into the approach taken by a SEP 30 or through an example step by step of how Sept 30 works and then reflect on why this is valuable we'll also have a Q&amp;A at the end so if you have any questions during the talk please drop them into the YouTube chat box and we'll get to them at the end so what is key management and why do we care at the core of owning a stellar account or an account on many blockchains is being in possession of a key on the stellar network if you have an account you have a key for that account a key is made up of two parts a public key that you share with others and a secret key that you keep private this is an example of what the public key looks like and what a public key looks like on the stellar network it starts with the G the public key is your account address people send funds to this address and they'll show up in your account balance and this is what a secret key looks like it starts with an S on the stellar network we call the secret key that defines your account address accounts master key if you create a new account on the network and don't change its configuration your master key is what you use to assign transactions it's what you use to control your account so what do we mean by signed transactions stellar accounts have silenced a signer is a key that can authorize transactions for a stellar account and the master key it's the default signer of the account being a signer vostell account is sort of like being a signer on a bank account you can sign cheques for that bank account and banks will accept the check as valid if you get a new account on the network it's got one signer and that signer is the master key but accounts can also have more silence in addition to or instead of the master key as signer is a signing key just like a master key accounts can be configured to let signers authorize transactions individually or together in a group on stellar that configuration for what combinations of signers are required to authorize transactions is controlled by setting a threshold on the account and then weights for each signer an example of this could be an account that has a threshold of 20 with with signers that each have weights of 10 need two of these signers to sign a transaction for the transaction to be valid another example might be an account that has a threshold of one where any signer could sign the check by itself for the check to be valid much like a basic joint bank account you'll hear people use the term multisig to refer to accounts they use multiple silence but most accounts on the network only use the master key and so they only have one signer some have used an additional signer as to factor auth the control of the account still hinges on possession of that master key so key management is how we manage all of these keys and will it play a pivotal role in key management because of the core of a wallet is key management a wallets core job is to hold your salary calm and so its core job is to store your key protect your key help you use your key to sign transactions and then prevent you from losing your key so let's talk about some common approaches to key management that are being used so many wallets they only use that master key this means your account has one key one signer and that key is stored on the device in the wallet application those wallets can help you to not lose your key using a few different methods one approach is to give you Eve the key in some form to write down on a printout the key lives in two places it's in your wallet on your phone and it's on paper as a backup if you lose your phone this is great in terms of simplicity really straightforward to implement your key is backed up but it does present some challenges it puts a lot of responsibility on the user the user needs to write down the key exactly correct if they lose the paper it's written on they've lost their backup if someone else finds the paper their account is easily stolen and it can be a jarring experience to ask a new user to write down a lot of text immediately after dev installed a new application that they may not be committed to another approach is to store a copy of the key on the wallet server but this this has some different challenges the users gotta trust the wallet server completely because the server will have access to the key and therefore control of their account somewhere let's address this challenge by encrypting the key using a password that the user enters into the wall all it but has never shared with the server this means the wallet server is not able to use the key because it cannot decrypt but this only works for wallets and products that require the user to make a password that won't be shared with the server which is yet another password for the user to lose so all while its do key management but most focus on managing one key got master key and backing up that master King so let's talk about the approach that sub 30 takes sep 30 recovery signer is a stellar ecosystem proposal that means it's a proposal that contains a new standard or a change to existing standards that is build on top of the stellar network and for use in the stellar ecosystem sep 30 is an approach to key management that's focuses making key management and specifically the preventing loss part has user FM as user-friendly as any other consumer application its goal is to work without recovery phrases to have no server with a sole control of the account and to not require the user to remember a secure encryption password to encrypt their key sep 30 is currently being used in one wallet the vibram wallet which is a noncustodial u US dollar saving wallet the store's value on the stellar network the vibram wallet is currently in open beta and presents a user experience designed for the general public you login with your phone number you don't need a password a wallet like vibrant that is implementing sep 30 still does many of the same things that other wallets do it's a store a key they protect a key and they help you to use your key to sign transactions and they prevent loss but the loss that prevents is different it prevents you from losing your account and not your key a wallet implementing sep 30 weren't manage and backup a single master key instead the wild manage device keys and help the user to get new keys the user stellar account won't change its address will stay the same but the user signing keys will change so let's have a look at what Sept 30 is Sept 30 to 5 that provides two endpoints one to register accounts and another to sign transactions for that account a wallet uses that first endpoint to register an account with the server in the request the wallet tells the server what identities are allowed to request signatures for the account those identities can be things like a phone number or an email address the wallet authenticates using septum which is a stellar eco system proposal that's widely used already that defines a challenge and challenge response authentication flow that the wallet uses to prove to the server that it possesses keys that can sign for this teller account this way to the server noise of the client should be allowed to define who can sign transactions for their wallet in their response to while it gets back a signing address for the server and it makes that address a signer of the stellar account the second endpoint is transaction signing a wallet calls this hand point with a transaction it wants to serve it assign it'll do this when it has lost its key and it needs the server to sign transactions for it the wallet authenticates using an identity provided during registration if the phone or email matches an attendee stored with the account on the server the server will sign the transaction for the seller account and returned that signature to the wallet so let's have a look at an example and we'll walk through how well it can use these two endpoints to support account recovery for the example I will give the user who is using the wallet a name and we'll call her Alice when Alice creates an account with the wallet the app on her phone is going to generate a master key and then the wallet server is going to create the account associated with that master key the master key will be one of those big s secret keys that we looked at at the beginning and it's the red key in this diagram the red key never leaves Alice's device the app on her device doesn't give this key to anyone with sep 30 we can implement this wallet so that there is no need for the master key to be backed up anyway Alice's wallet also generates a second key what we'll call her d'lai scheme it's a key that is only for this device to use to sign transactions in the same way that the master key is not shared with anyone the device key is not shared with anyone either palace' Swallow submits a transaction to the network making that device key a signer of the account and removing the master key has a spoiler Alice's wallet then deletes the master key it's not useful anymore the wallet then goes through the process of registering the account with to recovery cells each server has their own key that they generate themselves each server is hosted and controlled independently by different entities the wallet proves to each so they independently that it has authority over the account by signing a sub 10 transaction and tells the to recovery servers that anyone who can prove possession of the user's phone number or email should be allowed to request transactions to be signed the wallet submits a transaction to the network adding both recovery signers as cylons on the account but limiting the weight of those signatures so that neither recovery server has independent control over the value in the account each each recovery server will be at assign a transaction at the request of the user but the transaction will only be authorized if signed by another independent honey the only individual with independent control of the account is Alice here's an example of what it looks like on the public block Explorer on the public Stellar Network this is Annie this is an account on the public network with its threshold set to 20 and there are four silence the master key at the bottom with a weight of zero meaning that it has no control over the account a device key with a weight of 20 so that the device has complete control of the account and then to recovery servers that each have those weights of 10 so let's imagine that Palace has lost her phone and she's purchased an earphone the greyed out phone in the top left is her lost phone that still has her device key on him and her new phone has no key for the account Alice's new phone goes through the same process that a previous phone did when it signed up with the wallet server it generates a device King and it signs into the wallet but that new device key is not a signer of her seller account so her device can erase transactions yet the wallet app talks to the first recovery server and ask the server to sign a transaction that makes her new device key a signer on the account Alice then continues recovery with the third party recovery server the third party is operating independently so Alice authenticates with them independently with an SMS codes and to her phone number or a link or a code sent to her email address once Alice has authenticated the server science the transaction and returns the signature to the wallet the transaction has now been authorized with a weight of 20 and can be submitted to the network the transaction removes the old signing key that was lost with Alice's previous phone and adds the new cyma key that lives on Alice's new phone Alice is now back in control of her account finally what's important to highlight is that while alice is in full control of her account this process can be built into the wallet into the wallet application and be behind the scenes for her what Alice experiences is the same user experience that we've grown accustomed to in consumer applications which leads us to y sub 30 is very broad right now great user experience drives adoption and supporting account recovery through phone and email brings a noncustodial wallets user experience closer to that of other consumer applications the registration user experience for Alice can be that she signs up like many consumer products logging in with her phone or email and the recovery user experience for hours is similar requiring only a second SMS or email with a third-party recovery provider these are patterns that are familiar to users of consumer applications this approach is also very flexible allowing a wallet to still offer a recovery phrase that can be written down by generating an additional key to be their recovery phrase or to allow for multiple devices where each device generates its own key that never leaves that device this approach also makes dealing with lost devices simpler a lost watch containing a wallet can be quickly revoked by removing its key as a signer without needing to get a new stellar account and when Alice decides to purchase a new watch it can be given a new key again without interrupting any of her existing devices but the court reason for why sub-30 really is valuable right now is user experience user experience that will drive adoption so if you'd like to learn more about sep 30 the proposal itself is about a 15 minute read and there's a thread on the stellar dev mailing lift without mailing lists where you can ask questions provide feedback or make suggestions contributions and discussion welcome and now we have some time for Q&amp;A see what questions we have okay well thank you listen to me talk about subsiding

Lee McCulloch framed Stellar’s key model (master key, signers, weights) and the UX pitfalls facing wallets that expect users to write down secret phrases or trust a server. SEP-30 “Recoverysigner” is his answer: a standard API that lets wallets register recovery identities (phone/email) with two independent services while keeping device keys local.

He walked through Alice’s lifecycle: generate a master key, derive a device key, register two recovery signers, delete the master key, and later regain account control on a new device by authenticating to both services. Because the recovery providers only co-sign transactions, Alice keeps full custody but gets a consumer-grade onboarding and recovery flow.

Key discussion threads:

- Recap of master keys vs. signers and how most wallets handle backups today (paper phrases, encrypted server storage).
- SEP-30 registration: wallet authenticates via SEP-10, sets identities, and adds two recovery signers with limited weights.
- Recovery flow: new device key, request co-signatures via phone/email, revoke the lost device—no new Stellar account needed.
- Benefits: familiar UX, multi-device support, optional recovery phrases, and no single server with unilateral control.

hi everyone welcome to the stellar development foundations engineering talk series my name is Lee McCulloch and I'm a software engineer at the foundation I'm one of the people working on improving the experience that individuals have using stellar and the businesses have building on still and today I'm talking about stellar ecosystem proposal 30 sep 30 is an approach to make still a key management user-friendly in products built on stellar so a user friendly team andr is maybe

<details>
  <summary>Video Transcript</summary>

[01:00] Hi everyone, welcome to the Stellar development foundations engineering talk series. My name is Lee McCulloch and I'm a software engineer at the foundation. I'm one of the people working on improving the experience that individuals have using Stellar and the businesses have building on still, and today I'm talking about Stellar ecosystem proposal 30. SEP 30 is an approach to make still a key management user friendly in products built on Stellar. So a user friendly team andr is maybe a bold statement to make, because key management is rarely user friendly. But that's what we're going to talk about today. First, I'm going to set some context and touch on what key management looks like on the Stellar network, how key management relates to Louis and then some common approaches that while it's take in the Stellar ecosystem and in the blockchain space in

[02:00] General. Then we'll jump into the approach taken by a SEP 30 or through an example, step by step, of how Sept 30 works and then reflect on why this is valuable. We'll also have a Q&A at the end. So if you have any questions during the talk, please drop them into the YouTube chat box and we'll get to them at the end. So what is key management and why do we care? At the core of owning a Stellar account or an account on many blockchains is being in possession of a key on the Stellar network. If you have an account, you have a key for that account. A key is made up of two parts: a public key that you share with others and a secret key that you keep private. This is an example of what the public key looks like on the Stellar network. It starts with the G. The public key is your account address. People send funds to this address and they'll show up in your account balance,

[03:00] And this is what a secret key looks like. It starts with an S. On the Stellar network, we call the secret key that defines your account address accounts master key. If you create a new account on the network and don't change its configuration, your master key is what you use to assign transactions. It's what you use to control your account. So what do we mean by signed transactions? Stellar accounts have silenced. A signer is a key that can authorize transactions for a Stellar account and the master key it's the default signer of the account. Being a signer vostell account is sort of like being a signer on a bank account. You can sign cheques for that bank account and banks will accept the check as valid. If you get a new account on the network, it's got one signer and that signer is the master key. But accounts can also have more silence. In addition to or instead of, the master

[04:00] Key as signer is a signing key, just like a master key. Accounts can be configured to let signers authorize transactions individually or together in a group. On Stellar. That configuration for what combinations of signers are required to authorize transactions, is controlled by setting a threshold on the account and then weights for each signer. An example of this could be an account that has a threshold of 20, with signers that each have weights of 10 need two of these signers to sign a transaction for the transaction to be valid. Another example might be an account that has a threshold of one where any signer could sign the check by itself for the check to be valid. Much like a basic joint bank account. You'll hear people use the term multisig to refer to accounts. They use

[05:00] Multiple silence, but most accounts on the network only use the master key and so they only have one signer. Some have used an additional signer as to factor auth. The control of the account still hinges on possession of that master key. So key management is how we manage all of these keys and will it play a pivotal role in key management. Because of the core of a wallet is key management. A wallets core job is to hold your salary calm, and so its core job is to store your key, protect your key, help you use your key to sign transactions and then prevent you from losing your key. So let's talk about some common approaches to key management that are being used. So many wallets they only use that master key. This means your account has one key, one signer, and that key is stored on the device in the wallet application. Those wallets can help you

[06:00] To not lose your key using a few different methods. One approach is to give you Eve the key in some form, to write down on a printout. The key lives in two places: it's in your wallet, on your phone and it's on paper as a backup if you lose your phone. This is great in terms of simplicity, really straightforward to implement. Your key is backed up. But it does present some challenges. It puts a lot of responsibility on the user needs to write down the key exactly correct. If they lose the paper, it's written on. They've lost their backup. If someone else finds the paper, their account is easily stolen and it can be a jarring experience to ask a new user to write down a lot of text immediately after dev installed a new application that they may not be committed to. Another approach is to store a copy of the key on the wallet server. But this has some different challenges. The

[07:00] Users gotta trust the wallet server completely because the server will have access to the key and therefore control of their account somewhere. Let's address this challenge by encrypting the key using a password that the user enters into the wall, all it but has never shared with the server. This means the wallet server is not able to use the key because it cannot decrypt. But this only works for wallets and products that require the user to make a password that won't be shared with the server, which is yet another password for the user to lose. So all while its do key management. But most focus on managing one key- got master key- and backing up that master King. So let's talk about the approach that sub 30 takes. SEP 30- recovery signer- is a Stellar ecosystem proposal. That means it's a proposal that contains a new standard or a change to

[08:00] Existing standards that is build on top of the Stellar network and for use in the Stellar ecosystem. SEP 30 is an approach to key management that's focuses making key management and specifically the preventing loss part has user FM as user friendly as any other consumer application. Its goal is to work without recovery phrases, to have no server with a sole control of the account and to not require the user to remember a secure encryption password to encrypt their key. SEP 30 is currently being used in one wallet, the vibram wallet, which is a noncustodial? U US dollar saving wallet- the store's value on the Stellar network. The vibram wallet is currently in open beta and presents a user experience designed for the general public. You login with your phone number.

[09:00] You don't need a password. A wallet like vibrant that is implementing SEP 30 still does many of the same things that other wallets do. It's a store a key. They protect a key and they help you to use your key to sign transactions and they prevent loss. But the loss that prevents is different. It prevents you from losing your account and not your key. A wallet implementing SEP 30 weren't manage and backup a single master key. Instead, the wild manage device keys and help the user to get new keys. The user Stellar account won't change. Its address will stay the same, but the user signing keys will change. So let's have a look at what. Sept 30 is Sept 30 to 5. That provides two endpoints: one to register accounts and another to sign transactions for that

[10:00] Account. A wallet uses that first endpoint to register an account with the server. In the request, the wallet tells the server what identities are allowed to request signatures for the account. Those identities can be things like a phone number or an email address. The wallet authenticates using septum, which is a Stellar eco system proposal that's widely used already. That defines a challenge and challenge response authentication flow that the wallet uses to prove to the server that it possesses keys that can sign for this Steller account. This way to the server, noise of the client should be allowed to define who can sign transactions for their wallet in their response to while. It gets back a signing address for the server and it makes that address a signer of the Stellar account. The second endpoint is transaction signing. A wallet

[11:00] Calls this hand point with a transaction it wants to serve, it assign. It'll do this when it has lost its key and it needs the server to sign transactions for it. The wallet authenticates using an identity provided during registration. If the phone or email matches an attendee stored with the account on the server will sign the transaction for the seller account and returned that signature to the wallet. So let's have a look at an example and we'll walk through how well it can use these two endpoints to support account recovery. For the example, I will give the user who is using the wallet a name and we'll call her Alice. When Alice creates an account with the wallet, the app on her phone is going to generate a master key and then the wallet server is going to create the account associated with that master key. The master key will be one of those big

[12:00] S secret keys that we looked at the beginning, and it's the red key in this diagram. The red key never leaves Alice's device. The app on her device doesn't give this key to anyone with SEP 30. We can implement this wallet so that there is no need for the master key to be backed up anyway. Alice's wallet also generates a second key, what we'll call her d'lai scheme. It's a key that is only for this device to use to sign transactions. In the same way that the master key is not shared with anyone either. Palace' Swallow submits a transaction to the network, making that device key a signer of the account and removing the master key has a spoiler. Alice's wallet then deletes the master key. It's not useful anymore. The wallet then goes through the process of

[13:00] Registering the account with to recovery cells. Each server has their own key that they generate themselves. Each server is hosted and controlled independently by different entities. The wallet proves to each so they independently- that it has authority over the account by signing a sub 10 transaction and tells the to recovery servers that anyone who can prove possession of the user's phone number or email should be allowed to request transactions to be signed. The wallet submits a transaction to the network adding both recovery signers as cylons on the account but limiting the weight of those signatures so that neither recovery server has independent control over the value in the account. Each recovery server will be at assign a transaction at the request of the user, but the transaction will only be authorized if signed by another independent honey. The only individual with

[14:00] Independent control of the account is Alice. Here's an example of what it looks like on the public block Explorer on the public Stellar network. This is Annie. This is an account on the public network with its threshold set to 20 and there are four: silence: the master key at the bottom, with a weight of zero, meaning that it has no control over the account. A device key with a weight of 20, so that the device has complete control of the account. And then to recovery servers that each have those weights of 10. So let's imagine that Palace has lost her phone and she's purchased an earphone. The greyed out phone in the top left is her lost phone that still has her device key on him and her new phone has no key for the account. Alice's new phone goes through the same process that a previous phone did when it signed up with the

[15:00] Wallet server. It generates a device King and it signs into the wallet, but that new device key is not a signer of her seller account, so her device can erase transactions. Yet the wallet app talks to the first recovery server and ask the server to sign a transaction that makes her new device key a signer on the account. Alice then continues recovery with the third party is operating independently, so Alice authenticates with them independently with an SMS codes and to her phone number or a link or a code sent to her email address. Once Alice has authenticated the server, science the transaction and returns the signature to the wallet. The transaction has now been authorized with a weight of 20 and can be submitted to the network. The transaction removes the old signing key that was lost with Alice's previous

[16:00] Phone and adds the new cyma key that lives on Alice's new phone. Alice is now back in control of her account. Finally, what's important to highlight is that while alice is in full control of her account, this process can be built into the wallet, application and be behind the scenes for her. What Alice experiences is the same user experience that we've grown accustomed to in consumer applications, which leads us to y sub 30 is very broad right now, great user experience drives adoption, and supporting account recovery through phone and email brings a noncustodial wallets user experience closer to that of other consumer applications. The registration user experience for Alice can be that she signs up like many consumer products,

[17:00] Logging in with her phone or email, and the recovery user experience for hours is similar, requiring only a second SMS or email with a third party recovery provider. These are patterns that are familiar to users of consumer applications. This approach is also very flexible, allowing a wallet to still offer a recovery phrase that can be written down by generating an additional key to be their recovery phrase, or to allow for multiple devices where each device generates its own key that never leaves that device. This approach also makes dealing with lost devices simpler. A lost watch containing a wallet can be quickly revoked by removing its key as a signer, without needing to get a new Stellar account, and when Alice decides to purchase a new watch, it can be given

[18:00] A new key again without interrupting any of her existing devices. But the court reason for why sub 30 really is valuable right now is user experience. That will drive adoption. So if you'd like to learn more about SEP 30, the proposal itself is about a 15 minute read and there's a thread on the Stellar dev mailing lift- without mailing lists- where you can ask questions, provide feedback or make suggestions, contributions and discussion welcome. And now we have some time for Q&A see what questions we have.

[19:00] Okay, well, thank you, listen to me talk about subsiding.

</details>
