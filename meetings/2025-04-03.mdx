---
title: "New features in Stellar Lab & Upgradeable Contracts SEP"
authors: [carsten-jacobsen]
tags: [developer]
---

import YouTube from "@site/src/components/YouTube";

<YouTube ID="ea2fTBiLvoM" />

First we take a look at look at Stellar Lab, a lot of features and improvements have been added since we did a Stellar Lab presentation last year. Stellar Lab is a powerful tool for everyone developing on Stellar.

We are looking for community feedback on the Upgradeable Contracts SEP, and will present the details of this proposal.

Links:

- [Stellar Lab](https://lab.stellar.org)

- [Upgradeable Contracts SEP](https://github.com/stellar/stellar-protocol/pull/1671)

<details>
  <summary>Video Transcript</summary>

[00:00] Lightning. Oh my gosh. Hello everyone and welcome to this week's Stellar Developer Meeting. Today we have two things on the program. We have first G. She will present the the latest updates to Stellar Lab, which I'm super excited about. It's a tool I use almost every day. And. Then later on Jane also from the DevX team will join and talk about upgradeable contract proposal. So let's get started. I think it was in December, early December we had the latest the last presentation of Stellar Labs. But a lot has happened since then. So I'm super excited about learning more about the new features and yeah take it away G. Yeah awesome. Thank you Kirsten. Oh my god I'm. So excited to see like Emir enlightenment in this chat. Hello my name is Gson. I'm on DevX team. We work on CLI, lab, quick start

[01:00] And more things. But I'm primarily working on the lab and I'm very excited to show you guys what we have built. So far for, smart contracts on Stellar. So I will share my screen and I'm going to share my entire screen. Because I want to do some CLI work as well. So, can everybody see me? Okay, great. I think Carson, did you share my notion doc? I am going to do, that right now. Please. So I'm going to walk you guys through what we're going to talk about today. First of all, we're going to go through overview of smart contract features on Stellar. So contract explorer. We're going to take a look at blend pool contract and kale contract by Tyler and sort of like kind of go through like the each feature, that we built. And the second of the presentation will be live demo, which I might break something. I actually did break something back in December. So who knows it might happen

[02:00] Again. I hope not. I practiced. But yeah I feel like in the world of AI actually breaking things is. Now like in I think. So okay let's go to the lab the our public lab. I should have removed this bar. But okay whatever. So to use smart contract features we have to make sure, that our RPC URL is ready and I do have, that which is provided by Overcat `mainnet.sorobanrpc.com`. So thank you Overcat for working on, that. So this is is the new feature, that we built. Our team member IA built this. So big shout out to Ietta. So I'm going to copy this contract and bring it here and this is going to give me all the information about blimppool contract and this is we getting API for this from

[03:00] Stellar the expert as you can see I have like power by StellarExpert here. So here we have it shows source code of blend, which is how we verify, that this build is you know verified. So on Stellar unlike other some smart contract platforms we don't store source code on Stellar. So what we do here is we are checking GitHub action and making sure, that the commit, that this GitHub action ran match the source code and, that's how we verify the contract here and we have about 10,000 entries here. So it's it might take some time to load this. But this will show you all the storage, that are available on this contract. Contract. Might take some time. But yeah it like shows up here and this will be really useful. When you have

[04:00] To extend TTL or restore footprint for contract storage. I will walk you through this later in the demo. But yeah we have a way to export this in CSV. So we go here it will show you all the XDR, that we have. And like I said, I'll walk you through what we can do with this later. I'm just going to close this for now. And source code is coming up. Contract spec is kind of like this is like our way of our version of Ethereum's AI. It shows you the data types, that this contract has. And later demo I'm going to show you what we can do with this contract spec to build some of the functionalities on the UI side and binding is coming up as well. So let's look at Kale. So Kale's going to be a little different. I

[05:00] Don't think it has verified yet. But it will show us how big their entry or their contract storage is. Is like almost like 3 million I think. So it might take some time to load. But I just wanted to show you guys. It shows us all the version history and I'm not going to Okay, I'll click contract storage. It has three million entries, which is wild. But yeah, it shows all the information, that we the users want to know about the contract on the lab, which is great. Yeah, failed to fetch. We'll show, that later. It worked earlier. It might be too big. Yeah. So, like here has all the functions and data types. We can also do XDR. If you want. You can copy. You can also download the WASM. So, let's say you're building a contract to also want to interact with other contracts. You can download the WASOM and deploy within your contract. And we

[06:00] Also have smart contract list, which shows us all the smart contracts, that are built. So at the moment everything is being rendered by front end. So what we are going to do to make make this load much faster we are going to work on implementing back end so, that it will be more efficient and faster. But yeah, give it some time or I can also refresh. Should I refresh? Let me refresh. Okay. Yes. So yeah, all the smart contracts are happening. I can just click on it. And then we can just load it right away and check out what's going on. So yeah, so, that that was the overview of smart contract

[07:00] Features on Stellar. So what I'm going to do next is kind of go through the live demo or like building the contract and see how a developer can really utilize the lab to make their workflow much better. So I'm going to build a contract on testnet net. Open zapland recently launched step 41 token standards here. So look at all this beautiful token. And I'm going to use James's tutorial to build like sample contract really fast. So James is actually using OpenZeppelin's mintable standard to get the contract working. So I already did let me duplicate it. So I already built cloned his repo and did the first five steps. So all I have to do is start

[08:00] Contract contract deploy. So let's go to my let me just go like this. So Stellar keys JSON JSON Stellar keys Stellar key ls there's address JSON I need to do my address okay. So I'm going to do is the source who is responsible for all the transaction and anything related to this contract is going to be me JSON and just to make this work easy. I'm I'm going to make the owner of this token contract my address and I'm gonna do I'm gonna limit my token at 10,000 and let's deploy this. I hope you work. Yes, it better work signing

[09:00] transaction. Okay, cool. So, that one is deployed. So this is our contract and I think what I want to show you you is our upcoming feature, which is invoke contract. So the way we invoke contract on the CLI is like this, which I kind of find it a little difficult or it's not very intuitive. I love our CLI. So don't get me wrong. And it would be sources JSON. And let me actually show you another feature of the lab, which is a creating key pairs, which is super useful. Because I'm going to account generate account and I'm going to fund this account with fbot. And you know. When you like develop

[10:00] On any contracts it can be really confusing with like all these public keys. So I'm going to save this key pair and it's going to be testnet open zepp zepp invoke account and going to save key pairs and I'm going to copy this go to my CLI and I'm going to mint th00and tokens to this account. Amazing. Yep. Successful. Great. So. If I go to this contract on StellarExpert, we'll see two data entries. Yep, GB. I just did, that. What I'm going to show you next is our upcoming feature, which is doing invoke contract on the lab. So, I've been working on this. It's been taking quite some time. But I am going to walk you

[11:00] Through. First of all, I need my my keys address Jason, which is this. I need this. I'm on testnet. Patch this. I think I will need my private to sign later. No. Was it styler case show? Okay. I need this later to sign it. So what I'm going to do is I'm going to invoke not payment invoke contract and our contract was this this one. Go to this and I am able to fetch all these methods from contract spec, that I showed you earlier. So I'm going to do mint and let me reuse the account, that I did here. I'm going to mint some more on, that account. I'm going to do prepare transaction, which gives me this XDR. And. If you go to XDR view, it's going to

[12:00] Tell me, that contract address is this. I'm calling function mint and this is the destination address and all the informations about what this TX is about to do. So good. I like this. It looks great. It also tells you the resource fee. All right. I'm just going to go ahead going to sign it and I'm going to sign it with this. Don't ever show your secret key. I'm just doing this. Because it's a demo and it's test net. So, I'm going to sign my transaction sign. I'm going to submit and transaction submitter. Submitter. And same thing, that we saw earlier. Looks good. Let's hope this works. And yes, it worked. Okay. So we have all these envelope XDR fee. I can go to view installer expert and it showed me, that this transaction did indeed work. And. If I go to this

[13:00] Contract, it shows, that mint did happen and this all happened from the Stellar lab. Lab. And. So yes, that worked. One last thing I want to show you is our, popular popular stay wait. So we have a way to restore and extend TTL for contract storage and I'm going to show you how to do, that. So let's go back to our contract, which was this. And what you can do is, that you can go to lab smart contract. This feature is live. I'm going to load this contract and in this contract storage we have this balance and let's say this balance is like expired. In, that case I can download this go to the my CSV file and it will show me, that there is a key instance is a contract entire contract instance and

[14:00] I need this is the contract storage key, that I want to extend or restore. Then I just copy this and let's check view XDR and see what, that contract storage key is about. If it's smart contract value and it tells me, that this is the balance and address this and let's say I want to extend footprint for, that one and I think I have to go to my account and going to get this and we can do extend this is live and contract get this and get the SC valve right here. I'm just going to do testing 200 sequence ledger and resource

[15:00] Fee and I have this button called fetch minimum resource fee for from RPC. This does all the simulating and everything for you. And you go sign in transaction and I think secret key is this one. And we can submit the transaction. And yep, we were able to extend our TTL for the contract storage. So yeah, GBTL extended logistic expression to sequence 200. So, that's the demo, that I have. You probably won't ever use extent. Because I think, that should take care of, that and kind of same thing with restore footprint once Protocol 23 comes. But. But you know the lab can support it. So. If you ever need it, just come to the lab. And, that's the demo for today. Thank you.

[16:00] Great. Thank you. It was super interesting to see all these new additions. And. Now I would like to invite Jane to the stage here who will give an update on one of the SCPs. All righty. Thanks for having me. So today I'd like to talk about upgradable sub, which is a sub, that defines how smart contracts can upgradeable up upgraded themselves and is contributed by OpenZeppelin. They've been doing a lot of great work for us shipping fungible token and also. Now NFT and upgradability and this is really a call for the community to look at this app and also look at the smart contract code, that they're shipping for us and add your comments. So as you know the contracts on Stellar are mutable by default and the mutability in Stellar ecosystem means a contract can modify the wasome by code thereby altering its

[17:00] Interface execution logic metadata. So there are also cases where you want the contract to be immutable. Because it guarantees the trustless execution and application of the contract logic. So. If you think about blend, that is a immutable contract. But typically in a more common case as you know defy protocols or. If you're building a game. If you think about over time you might want to add more features functionalities to what you're building you probably would want contract up upgradability. So in order to do, that we were working with OpenZeppelin and we published the sap and Carson could you share the set please? Yeah I just shared it. Thank you. So it creates a standard to define how smart contract should upgrade their was and by code and also talks about some of the caveats you

[18:00] Should think about. While you're upgrading such as a new contract shouldn't have a a constructor. Because that constructor is never getting invoked or. If your existing contract is upgradable. You should be careful not to upgrade to a contract, that no longer has upgradability. So you're stuck there. Sorry users and you should check for storage consistencies making sure, that the the new contract does not introduce any storage mismatch and also one more thing we actually describe in the step is to add a metadata, that describes the the current sim. So essentially a new key value pair called BIMver and the value follows a singver standard major minor patch and, that would describe to the world of your contract and its upgradeable path over time and there is a simple code in the sub, which you can

[19:00] See. If we go down to, that section and it will basically define a public function upgradeable and get the owner's address require o and bas. Then call the up the updated current contract wasome and put in the new wasome hash. So, that is basically the SE and then. If we go to the OpenZeppelin s source code at github. Com OpenZeppelin contract utils utils here you can see, that there is upgradable macros and this will make it so, that you can easily add this macros to your contract And eventually it's going to be integrated into the open 7 wizard. And you can decide. If you want your contract to be upgradable and

[20:00] Use these m macros. So this app is basically out there and we'd love to get your feedback. Please comment and provide us feedback and hopefully we'll get these audited and merged very soon. Great. Thank you for the introduction and and yeah everyone please go to the the the pull request and. If you have any comments any questions any concerns please please write a comment and yeah we'll address it. I think, that was it for today. I think this this was really interesting both getting an update on on Stellar Lab. But also getting an a view into one of the the SAPs, that are coming up and and really encouraging everyone to to to take a look at it and provide any feedback you have. That's it. That's all we had for today. Thank you everyone for joining. We'll be back again next Thursday. Thank you. Take care. Bye.

</details>
