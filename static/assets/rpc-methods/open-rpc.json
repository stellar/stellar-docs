{
  "openrpc": "1.0.0",
  "info": {
    "version": "1.0.0",
    "title": "Anchor Platform RPC Methods",
    "description": "This API lets you interact with Anchor Platform via RPC methods"
  },
  "methods": [
    {
      "name": "notify_interactive_flow_completed",
      "summary": "Interactive flow completed",
      "description": "Platform has collected the transaction amounts and fees from the business",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The id of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_in",
          "description": "The amount expected in the payment",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be received by the Anchor"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_out",
          "description": "The amount expected to be sent by anchor to user at end of transaction",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be sent by anchor to user at end of transaction"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "The amount of fee expected to be charged by anchor",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset in which fees are calculated in"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_expected",
          "description": "The amount expected in the payment",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Notify interactive flow completed example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Interactive flow completed successfully."
            },
            {
              "name": "amount_in",
              "value": {
                "amount": 1,
                "asset": "iso4217:USD" 
              }
            },
            {
              "name": "amount_out",
              "value": {
                "amount": 0.9,
                "asset": "stellar:USDC:G...5" 
              }
            },
            {
              "name": "amount_fee",
              "value": {
                "amount": 0.1,
                "asset": "iso4217:USD" 
              }
            }
            ,
            {
              "name": "amount_expected",
              "value": {
                "amount": 1
              }
            }
          ],
          "result": {
            "name": "Notify interactive flow completed result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "request_offchain_funds",
      "summary": "Request offchain funds",
      "description": "The user has to initiate transfer to the anchor",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_in",
          "description": "The amount expected in the payment",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be received by the Anchor"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_out",
          "description": "The amount expected to be sent by anchor to user at end of transaction",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be sent by anchor to user at end of transaction"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "The amount of fee expected to be charged by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset in which fees are calculated in"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_expected",
          "description": "The amount expected in the payment",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Request offchain funds example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Request offchain funds"
            },
            {
              "name": "amount_in",
              "value": {
                "amount": 1,
                "asset": "iso4217:USD" 
              }
            },
            {
              "name": "amount_out",
              "value": {
                "amount": 0.9,
                "asset": "stellar:USDC:GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5" 
              }
            },
            {
              "name": "amount_fee",
              "value": {
                "amount": 0.1,
                "asset": "iso4217:USD" 
              }
            }
            ,
            {
              "name": "amount_expected",
              "value": {
                "amount": 1 
              }
            }
          ],
          "result": {
            "name": "Request offchain funds result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "request_onchain_funds",
      "summary": "Request onchain funds",
      "description": "The user has to initiate transfer to the anchor",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_in",
          "description": "The amount expected in the payment",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be received by the Anchor"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_out",
          "description": "The amount expected to be sent by anchor to user at end of transaction",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset to be sent by anchor to user at end of transaction"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "The amount of fee expected to be charged by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              },
              "asset": {
                "type": "string",
                "description": "The asset in which fees are calculated in"
              }
            },
            "required": [
              "amount",
              "asset"
            ]
          }
        },
        {
          "name": "amount_expected",
          "description": "The amount expected in the payment",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "destination_account",
          "description": "Destination account",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "memo",
          "description": "Value of memo to attach to transaction",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "memo_type",
          "description": "Type of memo that anchor should attach to the transaction",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Request onchain funds example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Requesting onchain funds"
            },
            {
              "name": "amount_in",
              "value": {
                "amount": 1,
                "asset": "stellar:USDC:G...5" 
              }
            },
            {
              "name": "amount_out",
              "value": {
                "amount": 0.9,
                "asset": "iso4217:USD" 
              }
            },
            {
              "name": "amount_fee",
              "value": {
                "amount": 0.1,
                "asset": "stellar:USDC:G...5" 
              }
            }
            ,
            {
              "name": "amount_expected",
              "value": {
                "amount": 1 
              }
            }
          ],
          "result": {
            "name": "Request onchain funds result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_offchain_funds_received",
      "summary": "Offchain funds received",
      "description": "Payment is being processed internally by anchor",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "funds_received_at",
          "description": "The date and time of receiving funds",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "external_transaction_id",
          "description": "ID of transaction on external network that either started the deposit or completed the withdrawal",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_in",
          "description": "Amount received by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "amount_out",
          "description": "Amount expected to be sent by anchor to user",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "Amount of fee charged by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Offchain funds received example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Funds received successfully"
            },
            {
              "name": "funds_received_at",
              "value": "2023-07-04T12:34:56Z"
            },
            {
              "name": "external_transaction_id",
              "value": "7...9"
            },
            {
              "name": "amount_in",
              "value": {
                "amount": 1
              }
            },
            {
              "name": "amount_out",
              "value": {
                "amount": 0.9
              }
            },
            {
              "name": "amount_fee",
              "value": {
                "amount": 0.1
              }
            },
            {
              "name": "amount_expected",
              "value": {
                "amount": 1
              }
            }
          ],
          "result": {
            "name": "Offchain funds received result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_onchain_funds_received",
      "summary": "Onchain funds received",
      "description": "Payment is being processed internally by anchor for SEP-6 or SEP-24. Payment is being processed by the Receiving Anchor for SEP-31",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "stellar_transaction_id",
          "description": "Transaction id on Stellar network of the transfer",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_in",
          "description": "Amount received by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "amount_out",
          "description": "Amount expected to be sent by anchor to user",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "Amount of fee charged by anchor",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Onchain funds received example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Onchain funds received"
            },
            {
              "name": "stellar_transaction_id",
              "value": "7...9"
            },
            {
              "name": "amount_in",
              "value": {
                "amount": 1
              }
            }
          ],
          "result": {
            "name": "Onchain funds received result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_amounts_updated",
      "summary": "Update transaction amounts",
      "description": "Update amount_out and amount_fee values",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount_out",
          "description": "Amount sent by anchor to user",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        },
        {
          "name": "amount_fee",
          "description": "Amount of fee charged by anchor",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number",
                "description": "Amount of assets"
              }
            },
            "required": [
              "amount"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Amounts updated example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Amounts updated"
            },
            {
              "name": "amount_out",
              "value": {
                "amount": 1
              }
            },
            {
              "name": "amount_fee",
              "value": {
                "amount": 0.1
              }
            }
          ],
          "result": {
            "name": "Amounts updated result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_refund_pending",
      "summary": "Refund pending",
      "description": "Refund has been submitted, but is not yet confirmed",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "refund",
          "description": "An object describing refund associated with this transaction",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Transaction id on Stellar network of the transfer"
              },
              "amount": {
                "description": "Amount to be refunded",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "Amount of assets to refund"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of refund"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              },
              "amount_fee": {
                "description": "Amount of fee",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "The amount of fee"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of fee charged by anchor"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              }
            },
            "required": [
              "id",
              "amount",
              "amount_fee"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Refund pending example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Refund pending"
            },
            {
              "name": "refund",
              "value": {
                "id": "1c186184-09ee-486c-82a6-aa7a0ab1119c",
                "amount": {
                  "amount": 1,
                  "asset": "stellar:USDC:G...5" 
                },
                "amount_fee": {
                  "amount": 0.1,
                  "asset": "stellar:USDC:G...5" 
                }
              }
            }
          ],
          "result": {
            "name": "Refund pending result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_refund_sent",
      "summary": "Payment refunded",
      "description": "Refund payment completed",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "refund",
          "description": "An object describing refund associated with this transaction",
          "schema": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Transaction id on Stellar network of the transfer"
              },
              "amount": {
                "description": "Amount refunded",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "Amount of assets refunded"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of refund"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              },
              "amount_fee": {
                "description": "Amount of fee",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "The amount of fee"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of fee charged by anchor"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              }
            },
            "required": [
              "id",
              "amount",
              "amount_fee"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Refund sent example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Refund sent"
            },
            {
              "name": "refund",
              "value": {
                "id": "1c186184-09ee-486c-82a6-aa7a0ab1119c",
                "amount": {
                  "amount": 1,
                  "asset": "stellar:USDC:G...5" 
                },
                "amount_fee": {
                  "amount": 0.1,
                  "asset": "stellar:USDC:G...5" 
                }
              }
            }
          ],
          "result": {
            "name": "Refund sent result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "do_stellar_payment",
      "summary": "Stellar payment",
      "description": "Submits a payment to stellar network by a custody service",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Do Stellar payment example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Do Stellar payment"
            }
          ],
          "result": {
            "name": "Do Stellar payment result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "do_stellar_refund",
      "summary": "Stellar refund",
      "description": "Submits a refund payment to stellar network by a custody service",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "refund",
          "description": "An object describing refund associated with this transaction",
          "schema": {
            "type": "object",
            "properties": {
              "amount": {
                "description": "Amount to be refunded",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "Amount of assets to refund"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of refund"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              },
              "amount_fee": {
                "description": "Amount of fee",
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "The amount of fee"
                  },
                  "asset": {
                    "type": "string",
                     "description": "The asset of fee charged by anchor"
                  }
                },
                "required": [
                  "amount",
                  "asset"
                ]
              }
            },
            "required": [
              "amount",
              "amount_fee"
            ]
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Do Stellar refund example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Do Stellar refund"
            },
            {
              "name": "refund",
              "value": {
                "amount": {
                  "amount": 1,
                  "asset": "stellar:USDC:G...5" 
                },
                "amount_fee": {
                  "amount": 0.1,
                  "asset": "stellar:USDC:G...5" 
                }
              }
            }
          ],
          "result": {
            "name": "Do Stellar refund result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_onchain_funds_sent",
      "summary": "Onchain funds sent",
      "description": "Transaction flow is fully completed for SEP-6 or SEP-24 deposit",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "stellar_transaction_id",
          "description": "Transaction id on Stellar network of the transfer",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Onchain funds sent example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Onchain funds sent"
            },
            {
              "name": "stellar_transaction_id",
              "value": "f...1"
            }
          ],
          "result": {
            "name": "Onchain funds sent result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_offchain_funds_sent",
      "summary": "Offchain funds sent",
      "description": "Transaction flow is fully completed for the SEP-6 and SEP-24 withdrawal flow or SEP-31 receive flow. Payment has been submitted to external network, but is not yet confirmed for SEP-24 deposit flow",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "funds_sent_at",
          "description": "The date and time of sending funds",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "external_transaction_id",
          "description": "ID of transaction on external network",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Offchain funds sent example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Offchain funds sent"
            },
            {
              "name": "external_transaction_id",
              "value": "f...1"
            }
          ],
          "result": {
            "name": "Offchain funds sent result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_offchain_funds_available",
      "summary": "Offchain funds are available",
      "description": "Funds are ready for the user / recipient to pick up",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "external_transaction_id",
          "description": "ID of transaction on external network",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Offchain funds available example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Offchain funds available"
            },
            {
              "name": "external_transaction_id",
              "value": "f...1"
            }
          ],
          "result": {
            "name": "Offchain funds available result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_offchain_funds_pending",
      "summary": "Offchain funds pending",
      "description": "Payment has been submitted to external network, but is not yet confirmed",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "external_transaction_id",
          "description": "ID of transaction on external network",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Offchain funds pending example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Offchain funds pending"
            },
            {
              "name": "external_transaction_id",
              "value": "f...1"
            }
          ],
          "result": {
            "name": "Offchain funds pending result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "request_trust",
      "summary": "A trustline to the asset isn't set",
      "description": "The user must add a trustline for the asset to complete",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Request trust example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Request trust"
            }
          ],
          "result": {
            "name": "Request trust result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_trust_set",
      "summary": "Asset trustline set",
      "description": "The user has added a trustline for the asset",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "success",
          "description": "Flag which indicates if trustline was configured by user",
          "schema": {
            "type": "boolean"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Trustline set example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Trustline set"
            }
          ],
          "result": {
            "name": "Trustline set result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "request_customer_info_update",
      "summary": "Customer info needed",
      "description": "Additional customer information is required",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Customer info needed example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Customer info requested"
            }
          ],
          "result": {
            "name": "Customer info needed result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_customer_info_updated",
      "summary": "Customer info updated",
      "description": "Additional customer information was received and updated",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Customer info updated example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Customer info updated"
            }
          ],
          "result": {
            "name": "Customer info updated result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_transaction_error",
      "summary": "Transaction processing error",
      "description": "There was an error processing transaction",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Description of the error",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Transaction error example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Transaction error"
            }
          ],
          "result": {
            "name": "Transaction error result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_transaction_expired",
      "summary": "Transaction has expired",
      "description": "Funds were never received by the anchor and the transaction is considered abandoned by the user",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Transaction expired example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Transaction expired"
            }
          ],
          "result": {
            "name": "Transaction expired result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_transaction_on_hold",
      "summary": "Transaction transaction is on hold",
      "description": "Notify transaction is currently on hold by the anchor (e.g. compliance hold). Anchor should update message to guide user through the steps.",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "user_action_required_by",
          "description": "Time and date by which user action is required",
          "required": false,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Transaction on hold example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Transaction is on hold, please contact user service to lift the hold."
            }
          ],
          "result": {
            "name": "Transaction on hold result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    },
    {
      "name": "notify_transaction_recovery ",
      "summary": "Transaction recovery",
      "description": "Transaction status is changed from error / expired to pending_anchor(SEP-6 or SEP-24) or pending_receiver(SEP-31)",
      "paramStructure": "by-name",
      "tags": [
        {
          "name": "SEP - 6"
        },
        {
          "name": "SEP - 24"
        },
        {
          "name": "SEP - 31"
        }
      ],
      "params": [
        {
          "name": "transaction_id",
          "description": "The ID of the transaction",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "message",
          "description": "Human readable explanation of transaction status",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "Response",
        "schema": {
          "$ref": "#/components/schemas/Response"
        }
      },
      "examples": [
        {
          "name": "Transaction recovery example",
          "params": [
            {
              "name": "transaction_id",
              "value": "1c186184-09ee-486c-82a7-aa7a0ab1119d"
            },
            {
              "name": "message",
              "value": "Transaction recovered"
            }
          ],
          "result": {
            "name": "Transaction recovery result",
            "value": {
              "$ref": "#/components/schemas/ResponseExample"
            }
          }
        }
      ]
    }
  ],"components": {
    "contentDescriptors": {
    },
    "schemas": {
      "Response": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the transaction"
            },
            "sep": {
              "type": "integer",
              "description": "Protocol of the transaction",
              "enum": [
                "6",
                "24",
                "31"
              ]
            },
            "kind": {
              "type": "string",
              "description": "The kind of transaction that is desired",
              "enum": [
                "undefined",
                "receive",
                "deposit",
                "deposit-exchange",
                "withdrawal",
                "withdrawal-exchange"
              ]
            },
            "status": {
              "type": "string",
              "description": "Processing status of the transaction",
              "enum": [
                "pending_anchor",
                "pending_trust",
                "pending_user",
                "pending_user_transfer_start",
                "pending_user_transfer_complete",
                "incomplete",
                "no_market",
                "too_small",
                "too_large",
                "pending_sender",
                "pending_receiver",
                "pending_transaction_info_update",
                "pending_customer_info_update",
                "completed",
                "refunded",
                "expired",
                "error",
                "pending_external",
                "pending_stellar"
              ]
            },
            "amount_expected": {
              "description": "The amount expected in the payment",
              "type": "object",
              "properties": {
                "asset": {
                  "type": "string"
                },
                "amount": {
                  "type": "string"
                }
              }
            },
            "amount_in": {
              "type": "object",
              "description": "Amount expected/received by anchor",
              "properties": {
                "asset": {
                  "type": "string"
                },
                "amount": {
                  "type": "string"
                }
              }
            },
            "amount_out": {
              "type": "object",
              "description": "The amount expected to be sent by anchor to user at end of transaction",
              "properties": {
                "asset": {
                  "type": "string"
                },
                "amount": {
                  "type": "string"
                }
              }
            },
            "amount_fee": {
              "type": "object",
              "description": "The amount of fee expected to be charged by anchor",
              "properties": {
                "asset": {
                  "type": "string"
                },
                "amount": {
                  "type": "string"
                }
              }
            },
            "quote_id": {
              "type": "string",
              "description": "The id returned from a SEP-38 POST /quote response"
            },
            "started_at": {
              "type": "string",
              "description": "Start date and time of transaction"
            },
            "updated_at": {
              "type": "string",
              "description": "The date and time of transaction reaching the current status"
            },
            "completed_at": {
              "type": "string",
              "description": "The date and time of transaction reaching completed or refunded status"
            },
            "transfer_received_at": {
              "type": "string",
              "description": "The date and time of receiving transfer"
            },
            "message": {
              "type": "string",
              "description": "Human readable explanation of transaction status"
            },
            "refunds": {
              "type": "object",
              "description": "An object describing any on or offchain refund associated with this transaction",
              "properties": {
                "amount_refunded": {
                  "type": "object",
                  "description": "The total amount refunded in units of amount_in_asset",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "asset": {
                      "type": "string"
                    }
                  }
                },
                "amount_fee": {
                  "type": "object",
                  "description": "The total amount charged in fees for processing all refund payments, in units of amount_in_asset",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "asset": {
                      "type": "string"
                    }
                  }
                },
                "payments": {
                  "type": "array",
                  "description": "A list of objects containing information on the individual payments made back as refunds",
                  "items": {
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "The Stellar transaction hash of the transaction that included the refund payment"
                      },
                      "id_type": {
                        "type": "string"
                      },
                      "amount": {
                        "type": "object",
                        "description": "The amount sent back for the payment identified by id, in units of amount_in_asset",
                        "properties": {
                          "amount": {
                            "type": "number"
                          },
                          "asset": {
                            "type": "string"
                          }
                        }
                      },
                      "fee": {
                        "type": "object",
                        "description": "The amount charged as a fee for processing the refund, in units of amount_in_asset",
                        "properties": {
                          "amount": {
                            "type": "number"
                          },
                          "asset": {
                            "type": "string"
                          }
                        }
                      },
                      "requested_at": {
                        "type": "string",
                        "description": "The date and time of requesting refund"
                      },
                      "refunded_at": {
                        "type": "string",
                        "description": "The date and time of making refund"
                      }
                    }
                  }
                }
              }
            }
          }
        },
      "ResponseExample": {
          "id": "1c186184-09ee-486c-82a7-aa7a0ab1119d",
            "sep": "24 / 31",
            "kind": "deposit/withdrawal/receive",
            "status": "...",
            "amount_expected": {
                "amount": "1",
                "asset": "stellar:USDC:G...5"
            },
            "amount_in": {
                "amount": "1",
                "asset": "stellar:USDC:G...5"
            },
            "amount_out": {
                "amount": "0.9",
                "asset": "iso4217:USD"
            },
            "amount_fee": {
                "amount": "0.1",
                "asset": "stellar:USDC:G...5"
            },
            "started_at": "2023-08-04T10:04:06.280923Z",
            "updated_at": "2023-08-04T10:04:15.716233Z",
            "message": "Transaction status message",
            "source_account": "G...W",
            "destination_account": "G...S"
        }
    }
  }
}