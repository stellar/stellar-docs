---
id: get-rates
title: "Retrieve Rates"
description: "Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must"
sidebar_label: "Retrieve Rates"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "get api-method"
info_path: platforms/anchor-platform/api-reference/callbacks/callbacks-server
custom_edit_url: null
hide_send_button: true
---

import { SepBadge } from "@site/src/components/SepBadge";

<SepBadge tags={'SEP-31,SEP-38'} />

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Retrieve Rates"}
>
</Heading>

<MethodEndpoint
  method={"get"}
  path={"/rate"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must
use exchange rates that are communicated to the client application requesting the transaction. When clients make
requests to the Platform for these exchange rates, the Platform sends this request to the anchor to fetch it.

Rates can be [indicative](https://www.investopedia.com/terms/i/indicativequote.asp) or
[firm](https://www.investopedia.com/terms/f/firmquote.asp). The anchor must provide an ID and expiration if the
client requests a firm rate.

Anchors can provide discounted rates specific client applications. The Platform includes the `client_id` parameter
for this reason.

Either `sell_amount` or `buy_amount` will be included in requests as parameters, but never both. In the same way,
either `sell_delivery_method` and `buy_delivery_method` may be included in requests, but never both, since either
`sell_asset` or `buy_asset` is a Stellar asset.


Upon receiving the response, the Anchor Platform will validate the amount and price of the response.

If the validation fails, the Platform will respond to the client application's request with a HTTP status
code of `502 Bad Gateway`.

The `sell_amount`, `buy_amount`, `price`, and `fee` are validated as follows:

- if `rate.fee` exists,
  - `rate.fee.asset` must have a positive value of `significant_decimals` defined in the asset configuration.
  - `rate.fee.total` must equal to the sum of `rate.fee.details.amount`.
  - if the `rate.fee.asset == rate.sell_asset`, `sell_amount ~= price * buy_amount + fee` must hold true.
  - if the `rate.fee.asset == rate.buy_asset`,  `sell_amount ~= price * (buy_amount + fee)` must hold true.
- if `rate.fee` does not exist, `sell_amount ~= price * buy_amount` must hold true.

The `~=` is defined as equality within rounding error.
    The rounding error is defined as `10^(-significant_decimals)`


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"query","name":"type","description":"The type of rate requested. If `firm`, the response must include `rate.id` and `rate.expires_at`.","schema":{"type":"string","enum":["indicative","firm"]},"required":true},{"in":"query","name":"client_id","description":"An identifier for the client application making the request. This ID can be used to offer different fees to different clients.\n\nClient IDs will be the Stellar public key the public key used to authenticate via SEP-10. Anchors must ensure\nthat the public key specified in the request matches a public key known to belong to the sending anchor.\n\nThis parameter will only be specified if the client is authenticated via SEP-10. Anchors can define whether or not\nauthentication is required for fetching indicative rates. Firm rates always require authentication.\n","schema":{"type":"string"}},{"in":"query","name":"sell_asset","description":"The asset the client application will send to the anchor in exchange for `buy_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true},{"in":"query","name":"buy_asset","description":"The asset the that the anchor will send in exchange for `sell_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true},{"in":"query","name":"sell_amount","description":"The amount of `sell_asset` the client application will send in exchange for `buy_asset`. Will not be used in\nconjunction with `buy_amount`.\n","schema":{"type":"string"}},{"in":"query","name":"buy_amount","description":"The amount of `buy_asset` the anchor will send in exchange for `sell_asset`. Will not be used in conjunction\nwith `sell_amount`.\n","schema":{"type":"string"}},{"in":"query","name":"country_code","description":"The [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) code of the user's current address.\nAnchors should expect this parameter to be provided if one of the assets of the buy/sell pair is fiat and it\nis available in two or more countries.\n","schema":{"type":"string"}},{"in":"query","name":"expire_after","description":"The client's desired `expires_at` date and time for the quote that can be used if this is a firm quote. This should\nbe a [UTC ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) string. Anchors should return `400 Bad\nRequest` if an expiration date on or after the requested value cannot be provided.\n","schema":{"type":"string"}},{"in":"query","name":"sell_delivery_method","description":"The method the client or user will use to deliver `sell_asset` to the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjunction with `buy_delivery_method`.\n","schema":{"type":"string"}},{"in":"query","name":"buy_delivery_method","description":"The method the client or user wants used to receive `buy_asset` from the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjunction with `sell_delivery_method`.\n","schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"application/json":{"schema":{"type":"object","properties":{"rate":{"type":"object","properties":{"id":{"type":"string","description":"ID of the firm quote. NOT USED when `type=indicative`."},"expires_at":{"type":"string","format":"date-time","description":"Expiration for the quote. NOT USED when `type=indicative`."},"price":{"type":"string","description":"The conversion price offered by the anchor for one unit of `buy_asset` in terms of `sell_asset`, without including fees. In traditional finance, `buy_asset` would be referred to as the base asset and `sell_asset` as the counter asset. The formula `sell_amount - fee = price * buy_amount` must hold true ([ref](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#price-formulas))."},"sell_amount":{"type":"string","description":"The amount of `sell_asset` the anchor will exchange for `buy_asset`. It could be different from the `sell_amount` provided in the request, depending on how fees are applied by the Anchor."},"buy_amount":{"type":"string","description":"The amount of `buy_asset` the anchor will provide with `sell_asset`. It could be different from the `buy_amount` provided in the request, depending on how fees are applied by the Anchor."},"fee":{"type":"object","description":"An object describing the fees added on top of the rate provided via the `price` attribute.","properties":{"total":{"type":"string","description":"The total fee to be applied."},"asset":{"type":"string","description":"The asset the fee will be charged in. Must be represented in [Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format)."},"details":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"The name of the fee, for example `ACH fee`, `Brazilian conciliation fee`, `Service fee`, etc."},"description":{"type":"string","description":"A text describing the fee."},"amount":{"type":"string","description":"The amount of asset applied. If `fee.details` is provided, `sum(fee.details.amount)` should be equals `fee.total`."}},"required":["name","amount"],"title":"RateFeeDetailResponse"}}},"required":["total","asset"],"title":"RateFeeResponse"}},"required":["price","sell_amount","buy_amount"]}},"title":"RateResponse"}}}},"422":{"description":"Unprocessable Entity. This status should be returned when the anchor understood the request but cannot\nreturn a success response.\nIn these cases, the Platform will respond to the client application's request with a `400 Bad Request`\nand include the error message provided by the anchor in the response body.\n","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"id":{"type":"string"}},"required":["error"],"title":"Error"}}}},"500":{"description":"Error. The Platform will respond to the client application with the same response code and body.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"id":{"type":"string"}},"required":["error"],"title":"Error"}}}}}}
>
  
</StatusCodes>


