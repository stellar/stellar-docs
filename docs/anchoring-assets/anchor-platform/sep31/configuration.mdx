---
title: "Configuration"
sidebar_position: 20
---

import { CodeExample } from "@site/src/components/CodeExample";

## Modify a Stellar Info File

Next, let's modify `stellar.toml` file created [earlier][sep1-ap]. Wallets need to know that SEP-31 functionality is supported by your business, and they also need to know all currencies you support.

<CodeExample>

```toml
# dev.stellar.toml
ACCOUNTS = ["add your public keys for your distribution accounts here"]
SIGNING_KEY = "add your signing key here"
NETWORK_PASSPHRASE = "Test SDF Network ; September 2015"

DIRECT_PAYMENT_SERVER = "http://localhost:8080/sep31"
WEB_AUTH_ENDPOINT = "http://localhost:8080/auth"

[[CURRENCIES]]
code = "USDC"
issuer = "GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5"
status = "test"
is_asset_anchored = false
desc = "USD Coin issued by Circle"

[DOCUMENTATION]
ORG_NAME = "Your organization"
ORG_URL = "Your website"
ORG_DESCRIPTION = "A description of your organization"
```

</CodeExample>

Note that you'll need to create another file for your production deployment that uses the public network's passphrase, your production service URLs, your Mainnet distribution accounts and signing key, as well as the Mainnet issuing accounts of the assets your service utilizes.

## Enable Cross Border Payments

Now you're ready to enable cross-border payments the SEP-31 API. Specify the following in your `dev.assets.yaml` file, and change the values depending on your preferences.

<CodeExample>

```yaml
# dev.assets.yaml
assets:
  - schema: stellar
    code: USDC
    issuer: GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5
    distribution_account: GBLSAHONJRODSFTLOV225NZR4LHICH63RIFQTQN37L5CRTR2IMQ5UEK7
    significant_decimals: 2
    sep31_enabled: true
    sep31: {}
    send: {}
```

</CodeExample>

The information provided in the `sep31` and `send` objects closely map to the information that will be exposed to the wallet application using the [`GET /info`][sep31-get-info] SEP-31 endpoint. The Anchor Platform also uses this information to validate requests made to your service. We'll populate this information as we go.

Add the following variable to your environment file.

<CodeExample>

```bash
# dev.env
SEP31_ENABLED=true
```

</CodeExample>

Senders should now be able to discover, authenticate, and initiate transactions with your service! Your project and source files should now look something like this.

<CodeExample>

```
├── dev.env
├── docker-compose.yaml
├── config
│   ├── dev.assets.yaml
│   ├── dev.stellar.toml
```

</CodeExample>

Your environment should now look like the following.

<CodeExample>

```bash
# dev.env
HOST_URL=http://localhost:8080

ASSETS_TYPE=file
ASSETS_VALUE=/home/dev.assets.yaml

SEP1_ENABLED=true
SEP1_TYPE=file
SEP1_VALUE=/home/dev.stellar.toml

SEP10_ENABLED=true
SEP10_HOME_DOMAIN=localhost:8080
SECRET_SEP10_SIGNING_SEED="a Stellar private key"
SECRET_SEP10_JWT_SECRET="a secret encryption key"

SEP31_ENABLED=true
```

</CodeExample>

Run the following command to start the Anchor Platform.

<CodeExample>

```bash
docker compose up
```

</CodeExample>

Check that your API is live.

<CodeExample>

```bash
curl http://localhost:8080/sep31/info | jq
```

</CodeExample>

You should get the following.

<CodeExample>

```json
{
  "receive": {
    "USDC": {
      "enabled": true,
      "quotes_supported": false,
      "quotes_required": false
    }
  }
}
```

</CodeExample>

## Enable the Customer KYC API

Businesses need to collect and validate KYC information on the customers they're facilitating transactions for. Clients determine what KYC information needs to be collected and send that information via a SEP-12 KYC API hosted by the Anchor Platform, but the Anchor Platform never stores personally-identifiable information (PII). Instead, it forwards requests from clients to the business server, and returns the business' responses back to the client, acting as a proxy server.

See the *Anchor Platform KYC API specification* for details on the endpoints that must be implemented on your business' server.

To make this API available to clients, lets add the service URL to our Stellar Info File.

<CodeExample>

```toml
# dev.stellar.toml
DIRECT_PAYMENT_SERVER = "http://localhost:8080/sep31"
WEB_AUTH_ENDPOINT = "http://localhost:8080/auth"
KYC_SERVER = "http://localhost8080/kyc"
```

</CodeExample>

Lets enable it in our environment too.

<CodeExample>

```bash
# dev.enva
SEP12_ENABLED=true
```

</CodeExample>

Finally, we have to define your business' customer types. Each type of customer requires different a set of KYC information. For example, you can offer your cross-border payments service in two distinct regulatory jurisdictions, so customers in different jurisdictions have different KYC requirements and would be represented using different types.

:::info

Currently, customer types must be mutually exclusive, meaning a customer cannot be more than one type. For example, business' cannot model a tiered KYC model with "basic" and "pro" customer types. 

This limitation is in place because the Anchor Platform cannot validate whether a customer is approved for a specific type of transaction, such as one sending a large amount. It can only validate that a customer is approved for one of the customer types defined. This limitation will be removed in a future release.

::

In this guide, we'll only have two types, a sending customer type and a receiving customer type. Currently, our customer types are defined in our assets configuration, but this will change in a future release.

<CodeExample>

```yaml
# dev.assets.yaml
sep31:
  sep12:
    sender:
      types:
        sep31-sender:
          description: customers sending to recipients
    receiver:
      types:
        sep31-receiver:
          description: customers receiving from senders
```

</CodeExample>

Lets ping the info endpoint again to verify. After `docker compose up`, run the following command:

<CodeExample>

```bash
curl http://localhost:8080/sep31/info | jq
```

</CodeExample>

You should get the following:

<CodeExample>

```json
{
  "receive": {
    "USDC": {
      "enabled": true,
      "quotes_supported": false,
      "quotes_required": false,
      "sep12": {
        "sender": {
          "types": {
            "sep31-sender": {
              "description": "customers sending to recipients"
            }
          }
        },
        "receiver": {
          "types": {
            "sep31-receiver": {
              "description": "customers receiving from senders"
            }
          }
        }
      }
    }
  }
}
```

</CodeExample>

[sep31-get-info]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0031.md#get-info
[sep1-ap]: /docs/category/stellar-info-file
