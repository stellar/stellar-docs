---
title: Fuzz Tests
hide_table_of_contents: true
description: Fuzzing and property testing to find unexpected behavior.
sidebar_position: 5
---

Fuzzing is the process of providing random data to programs to identify unexpected behavior, such as crashes and panics.

Fuzz tests can also be written as property tests that instead of seeking to identify panics and crashes, assert on some property remaining true. Fuzzing as demonstrated here and elsewhere in these docs will use principles from both property testing and fuzzing, but will only use the term fuzzing to refer to both.

### How to Write Fuzz Tests

1. Install `cargo-fuzz`.

   ```console
   $ cargo install --locked cargo-fuzz
   ```

2. Initialize a fuzz project by running the following command inside your contract directory.

   ```console
   $ cargo fuzz init
   ```

3. Open the generated `fuzz/src/fuzz_target_1.rs` file. It will look like the below.

   ```rust
   #![no_main]
   use libfuzzer_sys::fuzz_target;

   fuzz_target!(|data: &[u8]| {
       // fuzzed code goes here
   });
   ```

4. Fill out the `fuzz_target!` call with test setup and assertions.

   ```rust
   #![no_main]
   use libfuzzer_sys::fuzz_target;

   fuzz_target!(|data: &[u8]| {
       // fuzzed code goes here
   });
   ```

5. Execute the fuzz target.

   ```
   cargo +nightly fuzz run
   ```

This test uses the same patterns used in [unit tests] and [integration tests]:
1. Create an environment, the `Env`.
3. Register the contract to be tested.
4. Invoke functions using a client.
5. Assert expectations.

:::tip

For a full detailed example, see the [fuzzing example].

:::

[Getting Started]: ../../smart-contracts/getting-started
[increment example]: https://github.com/stellar/soroban-examples/blob/main/increment/src/lib.rs
[Differential Testing with Test Snapshots]: ./differential-testing-with-test-snapshots
[stellar contract fetch]: ../../tools/developer-tools/cli/stellar-cli#stellar-contract-fetch
[integration tests]: ./integration-tests
[unit tests]: ./unit-tests
[stellar/rs-soroban-sdk#1360]: https://github.com/stellar/rs-soroban-sdk/issues/1360
[fuzzing example]: ../../example-contracts/fuzzing
