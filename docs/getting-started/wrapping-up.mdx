---
sidebar_position: 6
title: 5. Wrapping up
description: Make a frontend web app that interacts with your smart contracts.
---

## Streamlining the dev process

There are several other scripts in package.json to make this project easier to work with. Let's take a look at those scripts now.

First, let's look at the `clean` script which removes the `.soroban` directory to make it easier to go back to how collaborators will experience this repository when they first clone it. It will also remove the `node_modules/.vite` directory, which is where Astro caches its build artifacts ([Vite](https://vitejs.dev/) is a build tool [used by Astro](https://docs.astro.build/en/reference/configuration-reference/#vite)).

```json title="package.json"
"scripts": {
  "clean": "rm -rf .soroban node_modules/.vite",
  ...
}
```

Next, let's look at the `setup` script which builds your contracts, then checks if the `.soroban` folder is present. If `.soroban` is not present, it creates and funds the `alice` identity and deploys your contracts. This is a lot for a single NPM script, so we've broken it into a few to make it a little more legible.

```json title="package.json"
  "scripts": {
    ...
   "create_deployer": "soroban config identity generate alice && soroban config identity fund alice --network testnet",
   "deploy:hello": "soroban contract deploy --wasm target/wasm32-unknown-unknown/release/hello_soroban.wasm --source alice --network testnet > .soroban/hello-id",
   "deploy": "npm run deploy:hello",
   "setup": "soroban contract build && if [ ! -d .soroban ]; then npm run create_deployer && npm run deploy; fi",
    ...
  }
```

Let's make sure to add scripts for deploying the incrementor contract, and generating its JavaScript contract client.

Create a `deploy:incrementor` script, and call it from the `deploy` script:

```diff title=package.json
    "deploy:hello": "soroban contract deploy --wasm target/wasm32-unknown-unknown/release/hello_soroban.wasm --source alice --network testnet > .soroban/hello-id",
+   "deploy:incrementor": "soroban contract deploy --wasm target/wasm32-unknown-unknown/release/incrementor.wasm --source alice --network testnet > .soroban/incrementor-id;",
-   "deploy": "npm run deploy:hello",
+   "deploy": "npm run deploy:hello && npm run deploy:incrementor",
```

Let's also add a `binding:incrementor` script, and call it in `postinstall`:

```diff
    "bindings:hello": "soroban contract bindings typescript --network testnet --contract-id $(cat .soroban/hello-id) --output-dir node_modules/hello-soroban-client",
+   "bindings:incrementor": "soroban contract bindings typescript --network testnet --contract-id $(cat .soroban/incrementor-id) --output-dir node_modules/incrementor-client",
-   "postinstall": "if [ ! -d .soroban ]; then npm run setup; fi && npm run bindings:hello"
+   "postinstall": "if [ ! -d .soroban ]; then npm run setup; fi && npm run bindings:hello && npm run bindings:incrementor"
```

Finally, there is a `reset` script that calls both `clean` and `setup` in order:

```json title="package.json"
"scripts": {
    ...
    "reset": "npm run clean && npm run setup",
    ...
}
```

Now anytime you make changes to your contracts, you can run `npm run reset` to build the new contracts, deploy them, and install dependencies. And, of course, installing dependencies will run `postinstall`, which will also regenerate the contract client libraries directly to the `node_modules` folder.

The `postinstall` script also checks for the existence of `.soroban` and automatically runs `npm run setup` if it's not found:

```json title="package.json"
  "postinstall": "if [ ! -d .soroban ]; then npm run setup; fi && npm run bindings:hello && npm run bindings:incrementor",
```

## Take it further

There's obviously some functionality missing in this app. For example, that `???` is a bummer. But our `incrementor` contract doesn't give us a way to query the current value without also updating it.

If you want to take it a bit further and make sure you understand all the pieces here, try the following:

- Make a `src/contracts.ts` file and move the `new Contract({ ... })` logic into those files.
- Add a `get_value` method to the `incrementor` contract, and use it to display the current value in the `Counter` component. (Remember to run `npm run reset` after you make changes to the contract!)
- Add a "Decrement" button to the `Counter` component. This will again require a change to the `incrementor` contract, and another `npm run reset`.
- [Deploy](https://docs.astro.build/en/guides/deploy/) your frontend. You can do this quickly and for free [with GitHub](https://docs.astro.build/en/guides/deploy/github/). If you get stuck installing soroban-cli and deploying contracts on GitHub, check out [how we did this](https://github.com/AhaLabs/soroban-tutorial-project/commit/c1f4cfde1bbaf059507100767ee6b43d29b42914).
- Rather than using NPM scripts for everything, try using a more elegant script runner such as [just](https://github.com/casey/just). The existing npm `scripts` can then call `just`, such as `"setup": "just setup"`.
- Update the README to explain what this project is and how to use it to potential collaborators and employers ðŸ˜‰

## Troubleshooting

Sometimes things go wrong. As a first step when troubleshooting, you may want to [clone our tutorial repository](https://github.com/AhaLabs/soroban-tutorial-project) and see if the problem happens there, too. If it happens there, too, then it may be a temporary problem with the Soroban network.

Here are some common issues and how to fix them.

### Issues with the generated contract clients

If you see any issues with the generated contract client code, there is a chance that the version of the `soroban-cli` you're using is incompatible with this tutorial. We have also noticed that in some releases, the binary that is uploaded to the github release was not updated, which affects the binary that is downloaded with `cargo install`.

In this case, it is best to try to build the binary locally from the release branch of `soroban-tools`:

- clone the [soroban-tools](https://github.com/stellar/soroban-tools) repo if you haven't already
- checkout the most recent release: `git checkout release/$(git tag --sort=creatordate | tail -1)`
- build the binary: `cargo build`
- in your `astro-soroban-tutorial` project's `package.json` file, update all of the uses of the `soroban` command to the locally binary that you just built:

```diff title="package.json"
-    "create_deployer": "soroban config identity generate alice && soroban config identity fund alice --network testnet",
-    "deploy:hello": "soroban contract deploy --wasm target/wasm32-unknown-unknown/release/hello_soroban.wasm --source alice --network testnet > .soroban/hello-id",
-    "setup": "soroban contract build && if [ ! -d .soroban ]; then npm run create_deployer && npm run deploy:hello; fi",
+    "create_deployer": "<path to your soroban-tools directory>/target/debug/soroban config identity generate alice && ../../soroban-tools/target/debug/soroban config identity fund alice --network testnet",
+    "deploy:hello": "<path to your soroban-tools directory>/target/debug/soroban contract deploy --wasm target/wasm32-unknown-unknown/release/hello_soroban.wasm --source alice --network testnet > .soroban/hello-id",
+    "setup": "<path to your soroban-tools directory>/target/debug/soroban contract build && if [ ! -d .soroban ]; then npm run create_deployer && npm run deploy:hello; fi",
     "clean": "rm -rf .soroban node_modules/.vite",
     "reset": "npm run clean && npm run setup",
-    "bindings:hello": "soroban contract bindings typescript --network testnet --contract-id $(cat .soroban/hello-id) --output-dir node_modules/hello-soroban-client",
+    "bindings:hello": "<path to your soroban-tools directory>/target/debug/soroban contract bindings typescript --network testnet --contract-id $(cat .soroban/hello-id) --output-dir node_modules/hello-soroban-client",
     "postinstall": "if [ ! -d .soroban ]; then npm run setup; fi && npm run bindings:hello"
```

- run `npm i` to re-generate the contract client libraries using your local `soroban-cli` version

### Contract client libraries are removed when adding new dependencies

When adding new dependencies to your project via `npm`, you may run into a issue where `npm install [new dependency]` doesn't run the `postinstall` hook the way that `npm install` does. But it does run the cleanup logic, which will remove "incorrect" folders. It considers our contract client libraries (e.g. `node_modules/hello-soroban-client`) "incorrect", since they're not in the dependencies in `package.json`. So you either need to run `npm i` (a shortcut for `npm install`), or `postinstall` directly to make sure that they are re-built:

```bash
npm run postinstall
```

### Call to `hello` fails

Sometimes the call to `hello` can start failing. You can obviously stub out the call and define `greeting` some other way to troubleshoot.

One of the common problems here is that the contract [expires](../fundamentals-and-concepts/state-expiration.mdx). To check if this is the problem, you can re-run `npm run reset`.

If you're still having problems, join our Discord (link above) or [open an issue in GitHub](https://github.com/stellar/soroban-docs/issues/new/choose).

### All contract calls start throwing `403` errors

This means that Testnet is down, and you probably just need to wait a while and try again.

## Wrapping up

We did a lot in this tutorial, so let's take a moment to summarize.

- We learned how to use the `soroban-cli` tool to deploy and interact with Soroban contracts
- We created an Astro project capable of deploying Soroban contracts and interacting with them in a web app
- We added Astro components and learned how their `script` and `style` tags work
- We saw how easy it is to interact with Soroban contracts from JavaScript by generating client libraries using `soroban contract bindings typescript`
- We learned about wallets and Freighter

At this point, you've seen a full end-to-end example of building on Soroban! What's next? You choose! You can:

- See more complex example contracts in the [Basic Tutorials](/docs/category/basic-tutorials) and [Advanced Tutorials](/docs/category/advanced-tutorials) sections.
- Learn more about the [fundamentals and concepts](/docs/category/fundamentals-and-concepts) of Soroban.
- Check out a more full-featured [example app](https://github.com/stellar/soroban-example-dapp), which uses React rather than vanilla JavaScript and Next.js rather than Astro. This app also has a more complex setup & initialization process, with the option of using a [locally-hosted RPC node](../reference/rpc.mdx).
