---
title: Getting Started
sidebar_position: 20
---

import { CodeExample } from "@site/src/components/CodeExample";

In this guide we will use wallet SDK to integrate with the Stellar blockchain and connect to anchors.

## Installation

First, you need to add the SDK dependency to your project.

<CodeExample>

```kotlin
// gradle.kts
implementation("org.stellar:wallet-sdk:[version]")
```

</CodeExample>

You can get the latest available version on the [project GitHub page](https://github.com/stellar/kotlin-wallet-sdk)

## Working With The SDK

Let's start with the main class that provides all SDK functionality. It's advised to have a singleton wallet object shared across the app. Creating wallet with default configuration connected to testnet is simple:

<CodeExample>

```kotlin
val wallet = Wallet(StellarConfiguration.Testnet)
```

</CodeExample>

The wallet instance can be further configured. For example, to connect to public main network:

<CodeExample>

```kotlin
val walletMainnet = Wallet(StellarConfiguration(Network.PUBLIC, "https://horizon.stellar.org"))
```

</CodeExample>

There is one more available configuration for wallet that allows to configure internal logic of the SDK. For example, to test with local servers on http protocol, http can be manually enabled.

<CodeExample>

```kotlin
val walletCustom = Wallet(
  StellarConfiguration.Testnet,
  ApplicationConfiguration { defaultRequest { url { protocol = URLProtocol.HTTP } } }
)
```

</CodeExample>

### Configuring client

The Wallet SDK uses the [ktor client](https://ktor.io/docs/getting-started-ktor-client.html) for all network requests (excluding Horizon, where the Stellar SDK's http client is used). Currently, the okhttp engine is configured to be used with the client. You can read more about how to configure the ktor client [here](https://ktor.io/docs/create-client.html#configure-client). For example, the client can be globally configured:

<CodeExample>

```kotlin
val walletCustomClient =
  Wallet(
    StellarConfiguration.Testnet,
    ApplicationConfiguration(
      defaultClientConfig = {
        engine { this.config { this.connectTimeout(Duration.ofSeconds(10)) } }
        install(HttpRequestRetry) {
          retryOnServerErrors(maxRetries = 5)
          exponentialDelay()
        }
      }
    )
  )
```

</CodeExample>

This code will set the connect timeout to 10 seconds via the [okhttp configuration](https://ktor.io/docs/http-client-engines.html#okhttp) and also installs the [retry plugin](https://ktor.io/docs/client-retry.html). You can also specify client configuration for specific Wallet SDK classes. For example, to change connect timeout when connecting to some anchor server:

<CodeExample>

```kotlin
val anchorCustomClient =
  walletCustomClient.anchor("example.com") {
    engine { this.config { this.connectTimeout(Duration.ofSeconds(30)) } }
  }
```

</CodeExample>

### Closing resources

After the wallet class is no longer used, it's necessary to close all clients used by it. While in some applications it may not be required (e.g. the wallet lives for the whole lifetime of the app), in other cases it can be required. If your wallet class is short-lived, it's recommended to close client resources using close function:

<CodeExample>

```kotlin
fun closeWallet() {
  wallet.close()
}
```

</CodeExample>

## Stellar Basics

Wallet SDK provides some extra functionality on top of existing [Horizon SDK]. For interaction with the Stellar network, SDK covers only basics, used in a typical wallet flow. For more advanced use cases underlying [Horizon SDK] should be used instead.

To interact with Horizon instance configured in previous steps, simply do:

<CodeExample>

```kotlin
val stellar = wallet.stellar()
```

</CodeExample>

This example will create a Stellar class, that manages connection to Horizon service.

:::note

Default configuration connects to public Stellar Horizon instance. You can change this behavior as described [above](#working-with-the-sdk)

:::

You can read more about working with Stellar network in the [respective section](./stellar.mdx).

## Anchor Basics

Primarily use of the SDK is to provide an easy way to connect to Anchors via sets of protocols known as SEPs. Let's look into connecting to the Stellar test anchor:

<CodeExample>

```kotlin
val anchor = wallet.anchor("https://testanchor.stellar.org")
```

</CodeExample>

And the most basic interaction of fetching [SEP-1] info file:

<CodeExample>

```kotlin
suspend fun anchorToml(): TomlInfo {
  return anchor.getInfo()
}
```

</CodeExample>

Anchor class also supports [stellar authentication] ([SEP-10]) and [hosted deposit and withdrawal] ([SEP-24]) features.

[sep-1]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0001.md
[sep-10]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0010.md
[sep-12]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0012.md
[sep-24]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0024.md
[stellar authentication]: ./sep10.mdx
[hosted deposit and withdrawal]: ./sep24.mdx
[horizon sdk]: /docs/tools-and-sdks#sdk-library
