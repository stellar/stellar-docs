Usar el observador de pago te permite delegar este paso en la plataforma de fondo. Para habilitar el observador de pago, use la bandera `--stellar-observer` en la sección de comandos del \[archivo componer (../../getting-started.mdx#configuration).

El observador de pagos rastreará todas las transacciones enviadas a la cuenta de distribución. Cuando se detecta la transacción con el memo esperado en la red, el estado cambiará automáticamente a `pending_anchor` y el evento será emitido (si Kafka es usado).

Para actualizar los estados de la transacción, el observador hace las correspondientes peticiones JSON-RPC a la plataforma. Debería usar la siguiente URL.

<CodeExample>

```bash
# dev.env
PLATFORM_API_BASE_URL=http://platform-server:8085
```

</CodeExample>

:::caution

El observador de pago no validará las cantidades. Es tu responsabilidad verificar que la cantidad enviada por el usuario es correcta.

:::

:::info

Si ya tiene un sistema que monitoriza los pagos, asegúrese de que la lógica del sistema coincide con la siguiente descripción:

Primero, espere a que la transacción se incluya en el libro de contabilidad (usando un SDK). Esta transacción debe tener el memo esperado y la dirección de destino (cuenta de distribución). Una vez que esta transacción ha sido detectada y verificada, notifique al usuario que los fondos han sido recibidos usando la solicitud [notify_onchain_funds_received](#funds-received-1) JSON-RPC.

:::

:::tip

El servicio de custodia Fireblocks rastreará automáticamente las transacciones y notificará al usuario que los fondos han sido recibidos. Vea la [documentación de servicio de custodia de Fireblocks][fireblocks] para más detalles.

:::

[cortafuegos]: ../../custody-services/fireblocks/README.mdx
