---
id: configurando-sdp
title: Configurando el SDP
description: Desplegar las opciones de configuraci贸n disponibles para la Plataforma de Desembolso Estelar (SDP)
keywords:
  - SDP
  - configuraci贸n
sidebar_position: 45
---

Los servicios Stellar Disbursement Platform pueden configurarse usando un conjunto de opciones de configuraci贸n que se pasan a la l铆nea de comandos o se establecen como variables de entorno.
Dependiendo de c贸mo est茅 usando y desplegando el SDP, estas configuraciones pueden establecerse en un ConfigMap en Kubernetes, como variables de entorno en un contenedor Docker, pasado como argumentos de l铆nea de comandos, etc.

En esta secci贸n discutiremos las diferentes opciones de configuraci贸n disponibles para el SDP.

**Notas:**

- Las configuraciones que est谩n etiquetadas con  son sensibles y deben ser guardadas de forma segura.
- Estas configuraciones son v谩lidas para la versi贸n 2.x del SDP.
- Todas las configuraciones se pueden pasar como variables de entorno o par谩metros CLI. Por ejemplo, el env var `BASE_URL` podr铆a ser pasado a trav茅s de la bandera `--base-url`. Las banderas CLI tienen prioridad sobre las variables env aunque las variables env son m谩s convenientes.

## Servicio N煤cleo SDP

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en [stellar-disbursement-platform-backend git repository](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform serve --help
```

</CodeExample>

### Configuraci贸n operacional

La configuraci贸n operacional permite controlar m茅tricas, registro y otros aspectos operativos del SDP Core Service.

- `PORT` - El puerto en el que el SDP Core Service escuchar谩 las peticiones HTTP entrantes. Predeterminado: 8000.
- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `METRICS_PORT` - El puerto en el que el SDP Core Service expondr谩 sus m茅tricas. Predeterminado: 8002.
- `METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El rastreador de errores tipo a usar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave del cliente) del proyecto Sentry. Si no se proporciona, no se usar谩 el Centro.
- `ENVIRONMENT` - El entorno donde la aplicaci贸n se est谩 ejecutando. Ejemplo: "desarrollo", "staging", "producci贸n". Predeterminado: "development".
- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
  > el comportamiento de `base_url` y `sdp_ui_base_url` cambiar谩n despu茅s de que https://stellarorg.atlassian.net/browse/SDP-1148 haya terminado.
- `BASE_URL` - La URL base del servidor SDP del servidor. Default: "http://localhost:8000".
- `SDP_UI_BASE_URL` - La URL base de la interfaz de SDP usada para enviar el enlace de invitaci贸n cuando un nuevo usuario es creado.

### Configuraci贸n de mensajer铆a

Configuraci贸n de Mensajes permite configurar el servicio de mensajer铆a utilizado para enviar mensajes a destinatarios y usuarios del panel de control de sdp. La configuraci贸n por defecto se establece en "DRY_RUN", lo que significa que no se enviar谩n mensajes y los mensajes se registrar谩n en la consola. Esto se recomienda s贸lo para prop贸sitos de prueba.

- `EMAIL_SENDER_TYPE`: El tipo de mensajer铆a utilizado para enviar invitaciones a nuevos usuarios del tablero. Opciones: "DRY_RUN", "AWS_EMAIL". Por defecto: "DRY_RUN".
- `SMS_SENDER_TYPE`: El tipo de mensajer铆a utilizado para enviar mensajes SMS a los destinatarios. Opciones: "DRY_RUN", "TWILIO_SMS", "AWS_SMS". Por defecto: "DRY_RUN".

#### Configuraci贸n AWS

Las siguientes configuraciones son necesarias cuando se utiliza AWS SES o SNS para enviar correos electr贸nicos o mensajes SMS.

- `AWS_ACCESS_KEY_ID` -  The AWS access key ID.
- `AWS_REGION` - La regi贸n de AWS donde est谩 disponible el servicio SES.
- `AWS_SECRET_ACCESS_KEY` -  La clave de acceso secreta AWS.
- `AWS_SES_SENDER_ID` - El correo electr贸nico que AWS SES utilizar谩 como remitente al enviar correos electr贸nicos. Requerido cuando `EMAIL_SENDER_TYPE` est谩 establecido en "AWS_EMAIL".
- `AWS_SNS_SENDER_ID` - El ID del remitente a usar al enviar mensajes SMS usando AWS SNS. Se requiere cuando `SMS_SENDER_TYPE` se establece en "AWS_SMS".

#### Configuraci贸n de Twilio

Las siguientes configuraciones son requeridas cuando `SMS_SENDER_TYPE` se establece en "TWILIO_SMS".

- `TWILIO_ACCOUNT_SID` -  La cuenta de Twilio SID.
- `TWILIO_AUTH_TOKEN` -  The Twilio auth token.
- `TWILIO_SERVICE_SID` - El servicio Twilio SID.

Configuraci贸n general de mensajer铆a:

- `MAX_INVITATION_SMS_RESEND_ATTEMPTS` - El n煤mero m谩ximo de intentos de reenviar la invitaci贸n SMS a las carteras receptoras. Predeterminado: 3.

### Configuraci贸n estelar

La configuraci贸n estelar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La contrase帽a de red estelar. Por defecto "Probar red SDF ; septiembre 2015".
- `HORIZON_URL` - La URL del servidor Horizon a usar para enviar transacciones. Por defecto "https://Texton-testnet.stellar.org/".
- `SEP10_SIGNING_PUBLIC_KEY` - La clave p煤blica de la cuenta estelar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `SEP10_SIGNING_PRIVATE_KEY` -  La clave privada de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n estelar. Predeterminado: 10000.

Las configuraciones restantes relacionadas con las cuentas de distribuci贸n se detallan en la secci贸n `Configuraci贸n de cuentas Stellar` de [Gu铆a de Migraci贸n 1.x a 2.x](single-tenant-to-multi-tenant-migration#environment-variables).

### Configuraci贸n de seguridad

Configuraci贸n de seguridad permite configurar los aspectos de seguridad del Servicio Principal SDP.

- `CORS_ALLOWED_ORIGINS` - Especifica los dominios permitidos para hacer peticiones de origen cruzado. "_" significa que todos los dominios est谩n permitidos. Los dominios pueden contener comodines, por ejemplo, "https://_.example.com".
- `SEP24_JWT_SECRET` -  El secreto usado para firmar el token JWT para transacciones SEP-24. Este secreto se utiliza durante el flujo de registro del monedero del receptor.

#### Configuraci贸n de autenticaci贸n del panel de control

Las siguientes configuraciones est谩n relacionadas con la autenticaci贸n y autorizaci贸n del usuario del tablero de control.

- `RESET_TOKEN_EXPIRATION_HOURS` - El tiempo de caducidad en horas del token de Reset Password. Predeterminado: 24 (horas).
- `EC256_PUBLIC_KEY` - La clave p煤blica EC256 utilizada para validar la firma del token. Esta clave de la CE debe ser al menos tan fuerte como prime256v1 (P-256).
- `EC256_PRIVATE_KEY` -  La clave privada EC256 utilizada para firmar el token de autenticaci贸n. Esta clave de la CE debe ser al menos tan fuerte como prime256v1 (P-256).
- `DISABLE_MFA` - Desactiva la autenticaci贸n de m煤ltiples factores (MFA) para los usuarios del panel de control SDP.
- `DISABLE_RECAPTCHA` - Desactiva Google reCAPTCHA v2 para los usuarios del tablero SDP. Esta bandera no afecta al reCAPTCHA utilizado durante el flujo SEP-24.

#### Configuraci贸n de Recaptcha

Las siguientes configuraciones son necesarias cuando se utiliza Google reCAPTCHA v2 para proteger el SDP Core Service de los bots. ReCaptcha se utiliza tanto para usuarios de tablero como para receptores de fondos durante el flujo SEP-24.

- `RECAPTCHA_SITE_KEY` - El reCAPTCHA de Google v2 - no soy una clave del sitio robot.
- `RECAPTCHA_SITE_SECRET_KEY` -  La clave secreta del sitio reCAPTCHA utilizada para validar las respuestas de reCAPTCHA.

### Configuraci贸n de Plataforma de Anclaje

La configuraci贸n de la plataforma de anclaje permite configurar la plataforma de anclaje usada por el servicio de n煤cleo SDP.

- `ANCHOR_PLATFORM_BASE_PLATFORM_URL` - La URL base de la plataforma de anclas.
- `ANCHOR_PLATFORM_BASE_SEP_URL` - La URL base de la implementaci贸n SEP-24 de la plataforma anchor.
- `ANCHOR_PLATFORM_OUTGOING_JWT_SECRET` -  The JWT secret used to create a JWT token used to send requests to the anchor platform.

### Evento Broker y Configuraci贸n de Trabajos Programados

Para un proceso as铆ncrono, el servicio de n煤cleo SDP le da al usuario la opci贸n de utilizar ya sea el agente de eventos o los trabajos programados.

Las configuraciones de esta secci贸n se detallan en la `Configuraci贸n y Broker de eventos` de la [Gu铆a de Migraci贸n 1.x a 2.x](single-tenant-to-multi-tenant-migration#environment-variables).

### Configuraci贸n de Multi-Tenencia

Las configuraciones de esta secci贸n se detallan en `General Environment Variables` de la [Gu铆a de Migraci贸n 1.x a 2.x](single-tenant-to-multi-tenant-migration#environment-variables).

## Servicio de env铆o de transacciones (TSS)

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en [stellar-disbursement-platform-backend git repository](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-plataforma-tss --help
```

</CodeExample>

### Configuraci贸n general

- `QUEUE_POLLING_INTERVAL` - Intervalo de sondeo (segundos) para consultar la base de datos de transacciones pendientes para procesar. Predeterminado: 6.

### Configuraci贸n operacional

La configuraci贸n operacional permite controlar m茅tricas, registro y otros aspectos operativos del Servicio de Env铆o de Transacciones (TSS)

- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `TSS_METRICS_PORT` - El puerto en el que el TSS expondr谩 sus m茅tricas. Predeterminado: 9002.
- `TSS_METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El rastreador de errores tipo a usar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave del cliente) del proyecto Sentry. Si no se proporciona, no se usar谩 el Centro.
- `ENVIRONMENT` - El entorno donde la aplicaci贸n se est谩 ejecutando. Ejemplo: "desarrollo", "staging", "producci贸n". Predeterminado: "development".
- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
  > el comportamiento de `base_url` cambiar谩 despu茅s de que https://stellarorg.atlassian.net/browse/SDP-1148 haya terminado.
- `BASE_URL` - La URL base del servidor SDP del servidor. Default: "http://localhost:8000".

### Configuraci贸n estelar

La configuraci贸n estelar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La contrase帽a de red estelar. Por defecto "Probar red SDF ; septiembre 2015".
- `HORIZON_URL` - La URL del servidor Horizon a usar para enviar transacciones. Por defecto "https://Texton-testnet.stellar.org/".
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n estelar. Predeterminado: 10000.

#### Configuraci贸n de cuentas del canal

Las siguientes configuraciones son necesarias para usar cuentas de canal para enviar transacciones a la red Stellar.

- `NUM_CHANNEL_ACCOUNTS` - N煤mero de cuentas de canal a utilizar para enviar transacciones. Predeterminado: 2.
- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  A Stellar-compliance ed25519 private key used to encrypt/decrypt the channel accounts private keys. Cuando no se establece, ser谩 el valor por defecto de la opci贸n 'DISTRIBUTION_SEED'.

#### Configuraci贸n de cuentas de distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n utilizadas para enviar fondos a los destinatarios. Esta configuraci贸n deber铆a coincidir con la configuraci贸n en el SDP Core Service.
Para m谩s detalles, consulte la secci贸n `Configuraci贸n de cuentas Stellar` de [Gu铆a de Migraci贸n 1.x a 2.x](single-tenant-to-multi-tenant-migration#environment-variables).

- `DISTRIBUTION_SIGNER_TYPE` - El tipo de firmante utilizado para firmar transacciones Stellar para las cuentas de distribuci贸n de los inquilinos. Opciones: "DISTRIBUTION_ACCOUNT_ENV", "DISTRIBUTION_ACCOUNT_DB". Por defecto: "DISTRIBUTION_ACCOUNT_DB".
- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  A Stellar-compatible con la clave privada ed25519 usada para cifrar/descifrar las claves privadas de las cuentas de distribuci贸n en memoria. Es obligatorio cuando la distribuci贸n-signer-type se establece en "DISTRIBUTION_ACCOUNT_DB".
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta de distribuci贸n Stellar del HOST, utilizada para crear cuentas de canales.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta de distribuci贸n Stellar del HOST, utilizada para crear cuentas de canales.

### Configuraci贸n del Broker de Eventos

Si un Evento-Broker es usado para un proceso as铆ncrono, el TSS necesitar谩 ser configurado para usarlo.
Para obtener m谩s detalles, consulte la `Configuraci贸n y Broker de eventos` de la [Gu铆a de Migraci贸n de 1.x a 2.x](single-tenant-to-multi-tenant-migration#environment-variables).

- `EVENT_BROKER_TYPE` - El tipo de broker de eventos a utilizar. Opciones: "KAFKA", "NINGUNO". Default: "KAFKA".
- `BROKER_URLS` - Lista de las URLs del Broker de Mensajes separadas por comas.
- `CONSUMER_GROUP_ID` - Mensaje Broker Grupo de Consumidores ID.
- `KAFKA_SASL_USERNAME` -  Kafka SASL Username.
- `KAFKA_SASL_PASSWORD` -  Kafka SASL Password.
- `KAFKA_SECURITY_PROTOCOL` - Protocolo de Seguridad de Kafka. Opciones: PLAINTEXT, SASL_PLAINTEXT, SASL_SSL, SSL.
- `KAFKA_SSL_ACCESS_CERTIFICATE` -  Kafka SSL Access Certificate in PEM format that match with the Kafka Access Key.
- `KAFKA_SSL_ACCESS_KEY` -  The Kafka Access Key (keystore) en formato PEM.

## Tablero

El panel de control SDP es una aplicaci贸n web que permite a los usuarios administrar sus cuentas, ver historial de transacciones y m谩s. Las variables de entorno pueden establecerse ya sea en un objeto global `window._env_` o como variables `process.env`. Todas las variables de entorno utilizadas en este repositorio est谩n en el archivo `src/constants/envVariables.ts`, incluyendo tipos. La ubicaci贸n predeterminada del objeto `window._env_` es `public/settings/env-config.js`.

### Configuraci贸n general

- `API_URL` - La URL base del SDP Core Service. Default: "http://localhost:8000".
- `STELAR_EXPERT_URL` - La URL base del explorador de Stellar Expert. Por defecto: "https://stellar.expert/explorer/testnet".
- `HORIZON_URL` - La URL base del servidor Horizon. Por defecto: "https://Texton-testnet.stellar.org".
- `RECAPTCHA_SITE_KEY` - El reCAPTCHA de Google v2 - no soy una clave del sitio robot. Esta clave necesita coincidir con la clave utilizada en el Servicio Principal SDP.
