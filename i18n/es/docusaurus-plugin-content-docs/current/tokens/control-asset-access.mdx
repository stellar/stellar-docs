---
title: Consideraciones de diseño de activos
sidebar_position: 40
---

import { CodeExample } from "@site/src/components/CodeExample";
import { Alert } from "@site/src/components/Alert";

## Cuentas de emisión y distribución

Es una buena práctica en la red Stellar crear dos cuentas al emitir un activo: 1) la cuenta emisora y 2) la cuenta de distribución.

La **cuenta emisora** crea (o mints) el activo de la red mediante la ejecución de una operación de pago. La cuenta emisora estará siempre vinculada a la identidad del activo. Cualquier cuenta que desee mantener el activo debe establecer primero una línea de confianza con la cuenta de emisión. Lee acerca de trustlines en nuestra [sección Trustlines](../learn/fundamentals/stellar-data-structures/accounts.mdx#trustlines).

La **cuenta de distribución** es el primer destinatario del activo emitido y gestiona todas las demás transacciones.

Tenga en cuenta que también puede emitir un activo mediante la creación de una oferta o depósito de liquidez con la cuenta de emisión.

Es una buena práctica emitir un activo enviándolo desde la cuenta emisora a una cuenta de distribución por dos razones principales: seguridad y auditoría.

### Seguridad

La cuenta de distribución será una cuenta caliente, lo que significa que algún servicio web de ahí fuera tiene acceso directo para firmar sus transacciones.

Por ejemplo, si la cuenta desde la que está distribuyendo es también la cuenta emisora y está comprometida por un actor malicioso, el actor ahora puede emitir tanto del activo como quieran. Si el actor malicioso canjea los tokens recién emitidos con un servicio de anclaje, el ancla puede no tener la liquidez para apoyar los retiros del cliente. Las apuestas son más bajas si utiliza una cuenta de distribución- si la cuenta de distribución está en peligro, puede congelar el saldo de activos de la cuenta y comenzar con una nueva cuenta de distribución sin cambiar la cuenta de emisión.

### Conociendo

Usar una cuenta de distribución es mejor para auditar porque una cuenta emisora no puede mantener un saldo de su propio activo. Enviar un activo de vuelta a su cuenta emisora quema (elimina) el activo. Si tiene un inventario permanente del activo emitido en una cuenta separada, es más fácil rastrear y puede ayudar con la contabilidad.

## Nombrar un recurso

Una cosa que debes decidir al emitir un activo es cómo llamarlo. Un código de activo es el código de identificación del activo. Existen tres formatos posibles: Alfanumérico 4, Alfanumérico 12, y las acciones de la piscina de liquidez.

Aprenda sobre las acciones de la piscina de liquidez en la [Entrada de liquidez Pool Enciclopedia](../learn/encyclopedia/sdex/liquidity-on-stellar-sdex-liquidity-pools.mdx).

- Máximo alfanumérico de 4 caracteres: Cualquier carácter del conjunto a-z, A-Z, 0-9 está permitido. El código puede tener menos de 4 caracteres, pero los caracteres finales deben estar vacíos.
- Máximo de 12 caracteres alfanuméricos: Todos los caracteres del conjunto a-z, A-Z, 0-9 están permitidos. El código puede ser cualquier número de caracteres de 5 a 12, pero los caracteres finales deben estar vacíos.
- El activo de la acción de la piscina es definido por el identificador de la piscina de liquidez (PoolID), que a su vez es definido por los dos activos de sus reservas están compuestos.

Siempre que caiga en uno de estos cubos, puede elegir cualquier código de activo que desee. Dicho esto, si estás emitiendo una moneda, deberías usar el código ISO 4217 apropiado, y si usted emite un stock o un bono, el número ISIN apropiado. Hacerlo hace más fácil que las interfaces Stellar muestren y ordenen correctamente el token en sus listados y permitan a los potenciales poseedores de tokens entender lo que representa su token.

## Controlar el acceso a un recurso con banderas

Cuando emite un recurso en Stellar, cualquiera puede guardarlo por defecto. En general, es algo bueno: un acceso fácil significa un mejor alcance y una mayor liquidez. Sin embargo, si necesita controlar el acceso a un activo para cumplir con las regulaciones (o por cualquier otra razón), puede hacerlo fácilmente habilitando banderas en su cuenta de emisión.

Las banderas se crean en el nivel de la cuenta usando una operación `set_options`. Pueden establecerse en cualquier momento en el ciclo de vida de un activo, no sólo cuando lo emitimos.

### Tipos de banderas

El (0xn) junto a cada tipo de bandera indica la configuración del bit para cada bandera.

#### Autorización requerida (0x1)

Cuando `AUTH_REQUIRED_FLAG` está habilitado, un emisor debe aprobar una cuenta antes de que esa cuenta pueda mantener su activo. Esta configuración permite a los emisores examinar potenciales titulares de tokens y aprobar líneas de confianza.

Para permitir el acceso, el usuario crea una línea de confianza, y el emisor la aprueba cambiando la bandera `AUTHORIZE` con la operación `Set_Trust_Line_Flag`.

Hay dos niveles de autorización que un emisor de activos puede conceder usando la operación `Set_Trust_Line_Flag`:

- `AUTHORIZED_FLAG`: significa autorización completa que permite a una cuenta transaccionar libremente con el activo para hacer y recibir pagos y realizar pedidos.
- `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`: denota una autorización limitada que permite a una cuenta mantener órdenes corrientes pero no transaccionar de otra forma con el activo.

#### Autorización revocable (0x2)

Cuando `AUTH_REVOCABLE_FLAG` está habilitado, un emisor puede revocar la autorización de una línea de confianza existente, congelando así el activo en posesión de una cuenta. Esto evita que esa cuenta transfiera o opere el activo y cancele las órdenes abiertas de la cuenta del activo.

`AUTH_REVOCABLE_FLAG` también permite a un emisor reducir la autorización de completa a limitada, que evita que la cuenta transfiera o opere el activo pero no cancela las órdenes abiertas de la cuenta del activo. Esta configuración es útil para los emisores de activos regulados que necesitan autorizar transacciones caso por caso para asegurar que cada uno cumpla ciertos requisitos.

Todos los cambios a la autorización de activos se realizan con la operación Set Trustline Flags .

Hay tres niveles de autorización que un emisor de activos puede eliminar usando la operación `Set_Trust_Line_Flag`:

- `AUTHORIZED_FLAG`: significa autorización completa que permite a una cuenta transaccionar libremente con el activo para hacer y recibir pagos y realizar pedidos.
- `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`: denota una autorización limitada que permite a una cuenta mantener órdenes corrientes pero no transaccionar de otra forma con el activo.
- `CLAWBACK_ENABLED`: permite a la cuenta emisora recuperar (quemar) todo el activo. Consulta nuestra [sección sobre Clawbacks](../learn/encyclopedia/transactions-specialized/clawbacks.mdx) para más información.

#### Clawback habilitado (0x8)

Con la bandera `AUTH_CLAWBACK_ENABLED_FLAG` activada, cualquier línea de confianza\_\_ establecida con esta cuenta tendrá habilitadas las devoluciones. Puedes leer más sobre los garros (y controlarlos selectivamente en un basis) [here](../learn/encyclopedia/transactions-specialized/clawbacks.mdx).

Tenga en cuenta que este parámetro requiere que revocable también está activado.

#### Autorización inmutable (0x4)

Con esta configuración, ninguna de las otras banderas de autorización (`AUTH_REQUIRED_FLAG`, `AUTH_REVOCABLE_FLAG`) pueden establecerse y la cuenta de emisión no puede ser fusionada. Establece esta bandera para que indique a los potenciales tenedores de fichas que su cuenta emisora y sus activos persistirán en el libro de valores en un estado abierto y accesible.

### Establecer operación de bandera de línea de confianza

La cuenta emisora puede configurar varias banderas de autorización y de confianza para líneas de confianza individuales a un activo. El parámetro de activos es del tipo TrustLineAsset. Si está modificando una línea de confianza a un activo regular (es decir, uno en un formato Code:Emisor), esto es equivalente al tipo de activo. Si está modificando una línea de confianza para una cuota de billar, este es el único ID de la batería de liquidez.

### Flujo de ejemplo

Veamos cómo un emisor de un activo regulado puede usar la bandera `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`.

Si el emisor quiere aprobar transacciones caso por caso mientras permite a las cuentas mantener ofertas, pueden dejar una cuenta en el estado `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`. Esa cuenta puede poseer ofertas, pero no puede hacer nada más con el activo.

Para iniciar una nueva operación, la cuenta de tenencia solicita que el emisor apruebe y firme una transacción. Una vez que el emisor inspecciona la operación y decide aprobarla, la enrollan entre un conjunto de operaciones, primero concediendo autorización, luego reduciéndola.

Aquí hay un pago de A a B sandwiched entre las operaciones `set_trust_line_flags`:

- Operación 1: El emisor utiliza `SetTrustLineFlags` para autorizar completamente la cuenta A, activo X
- Operación 2: El emisor utiliza `SetTrustLineFlags` para autorizar completamente la cuenta B, activo X
- Operación 3: Pago de A a B
- Operación 4: El emisor usa `SetTrustLineFlags` para establecer la cuenta B, activo X a `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`
- Operación 5: Emisor utiliza `SetTrustLineFlags` para establecer la cuenta A, activo X al estado `AUTHORIZED_TO_MAINTAIN_LIABILITIES_FLAG`

El sandwich de autorización permite al emisor inspeccionar el pago específico y conceder autorización para él y sólo para él. Dado que las operaciones incluidas en una transacción son simultáneas, A y B sólo están autorizadas para la operación de pago específica y previamente aprobada. La autorización completa no se extiende más allá de la transacción específica.

### Código de ejemplo

En las siguientes muestras de código, se omite la comprobación correcta de errores. Sin embargo, siempre debe validar sus resultados, ya que hay muchas maneras en que las solicitudes pueden fallar. Consulte la página [Manejo de errores](/data/horizon/api-reference/errors/error-handling.mdx) para obtener consejos sobre las estrategias de gestión de errores.

El siguiente ejemplo establece autorización para ser requerida y revocable:

<CodeExample>

```js
var StellarSdk = require("stellar-sdk");
var server = new StellarSdk.Horizon.Server(
  "https://parallon-testnet. tellar.org",
);

// Claves para emitir cuenta
var issuingKeys = StellarSdk.Keypair. romtformat@@1 (
  "SCZANGBA5YHTNYVVV4C3U252E2B6P6F5T3U6MM63WBSBZATAQI3EBTQ4",
);

server
  . oadAccount(issuingKeys.publicKey())
  .then(function (issuer) {
    var transaction = new StellarSdk. ransactionBuilder(issuer, {
      fee: 100,
      networkPassphrase: StellarSdk.Networks.TESTNET,
    })
      .addOperation(
        StellarSdk.Operation. etOptions({
          setFlags: StellarSdk.AuthRevocableFlag | StellarSdk.AuthRequiredFlag,
        }),
      )
      // setTimeout es necesario para una transacción
      . etTimeout(100)
      . uild();
    transaction.sign(issuingKeys);
    return server.submitTransaction(transaction);
  })
  . hen(console.log)
  .catch(function (error) {
    console.error("Error!", error);
});
```

```java
import org.stellar.sdk.*;
import org.stellar.sdk.Network;
import org.stellar.sdk.responses.AccountResponse;

Server = new Server("https://Budgeton-testnet.stellar. rg");

// Claves para emitir la cuenta
KeyPair issuingKeys = KeyPair
  .from)[video] Seed("SCZANGBA5YHTNYVVV4C3U252E2B6P6F5T3U6MM63WBSBZATAQI3EBTQ4");
AccountResponse sourceAccount = server.accounts().account(issuingKeys. etAccountId());

setAuthorization de transacción = new Transaction.Builder(sourceAccount, Network.TESTNET)
  . ddOperación(nueva SetOptionsOperation.Builder()
    .setSetFlags(
      AccountFlag. UTH_REQUIRED_FLAG.getValue() |
      AccountFlag.AUTH_REVOCABLE_FLAG.getValue())
    .build())
  .build();
setAuthorization.sign(issuingKeys);
server.submitTransaction(setAuthorization);
```

```python
from stellar_sdk import Keypair, Network, Server, TransactionBuilder, AuthorizationFlag
from stellar_sdk. xceptions import BaseHorizonError

# Configurar SDK Stellar para hablar con la instancia de horizonte alojada por Stellar. rg
# Para usar la red en vivo, establezca el nombre de host a horizon_url para el servidor mainnet
= Server(horizon_url="https://mediumon-testnet. tellar.org")
# Utilice la red de pruebas, si desea utilizar la red en vivo, por favor configure la red en `Network. UBLIC_NETWORK_PASSPHRASE`
network_passphrase = Network.TESTNET_NETWORK_PASSPHRASE

# Claves para cuentas a emitir y recibir el nuevo activo
issuing_keypair = Keypair. rom_secret(
    "SCZANGBA5YHTNYVVV4C3U252E2B6P6F5T3U6MM63WBSBZATAQI3EBTQ4"
)
issuing_public = issuing_keypair. ublic_key

# Las transacciones requieren un número de secuencia válido específico de esta cuenta.
# Podemos obtener el número de secuencia actual para la cuenta origen de Horizon.
issuing_account = server. oad_account(issuing_public)

transacción = (
    TransactionBuilder(
        source_account=issuing_account,
        passphrase=network_passphrase,
        base_fee=100,
    )
    . ppend_set_options_op(
        set_flags=AuthorizationFlag. UTH_REVOCABLE_FLAG | AuthorizationFlag.AUTHORIZATION_REQUIRED
    )
    . uild()
)
transaction.sign(issuing_keypair)
try:
    transaction_resp = server. ubmit_transaction(transacción)
    print(f"Transaction Resp:\n{transaction_resp}")
excepto BaseHorizonError como:
    print(f"Error: {e}")
```

</CodeExample>

## Limitando el suministro de un activo

**¡Advertencia!** Esta sección detalla cómo bloquear tu cuenta con el propósito de limitar el suministro de tu activo emitido. Sin embargo, bloquear tu cuenta significa que nunca más podrás hacer nada con ella, ya sea ajustando los signadores, cambiando el dominio principal, reclamando cualquier XLM sostenido, o cualquier otra operación. Tu cuenta será completamente congelada.

Con esta advertencia en mente:

Es posible bloquear la cuenta emisora de un activo para que la oferta del activo no pueda aumentar. Para ello, primero establezca el peso principal de la cuenta emisora en 0 usando la operación Configurar opciones. Esto evita que la cuenta emisora pueda firmar transacciones y, por lo tanto, que el emisor no pueda emitir más activos. Asegúrese de hacer esto sólo después de haber emitido todos los activos deseados a la cuenta de distribución. Si el activo tiene un contrato de activos estelares, también asegúrese de que el administrador del contrato no ha sido actualizado desde el predeterminado (que es el emisor) usando la llamada al contrato `set_admin`. Si el administrador no fuera el emisor, entonces el administrador podría acuñar el activo incluso con la cuenta de emisión bloqueada.

Aprenda más sobre los pesos de la firma en la [Enciclopedia de la Enciclopedia de la Firma y Multisig](../learn/encyclopedia/security/signnatures-multisig.mdx).

Mira cómo hacer esto en el paso cinco de la [Emisión de un Tutorial de Activos](./how-to-issue-an-asset.mdx).
