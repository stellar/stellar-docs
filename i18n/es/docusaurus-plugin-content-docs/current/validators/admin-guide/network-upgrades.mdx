---
title: Actualizando la red
sidebar_position: 100
---

La red en sí misma tiene configuraciones de red que pueden ser actualizadas.

Esto es realizado por los validadores votando a favor y aceptando nuevos valores de la misma manera que se alcanza el consenso para conjuntos de transacciones, etc.

Un nodo puede ser configurado para votar por actualizaciones usando el punto final de `mejoras` . Vea [Commands](./commands.mdx) para más información.

Los ajustes de red son:

- la versión del protocolo utilizado para procesar las transacciones;
- el número máximo de transacciones que pueden ser incluidas en un contable cerca;
- el costo (tasa) asociado con las operaciones de proceso;
- la reserva base utilizada para calcular el saldo de lumen necesario para almacenar datos no sorobanes en el contador; y
- configuración generalizada de red Soroban almacenada en `ConfigSettingsEntries`.

Cuando la hora de red es posterior al `upgradetime` especificado en el comando `upgrades`, el validador votará para actualizar la red al valor especificado en ese comando `actualizar`. Si el tiempo de red es pasado el `upgradetime` por más de 12 horas, la actualización será ignorada.

Cuando un validador está armado para cambiar los valores de red, la salida de `info` contendrá información sobre el voto.

Para que se adopte un nuevo valor, es necesario alcanzar el mismo nivel de consenso entre nodos que para los conjuntos de transacciones.

## Notas importantes en la configuración de la red

Los cambios a la configuración de ancho de red tienen que ser orquestrados correctamente entre validadores, así como nodos no validantes. Los validadores generales del proceso se han usado para proponer y votar en la configuración de red es la siguiente:

1. Un cambio es verificado entre operadores (los cambios pueden ser empaquetados).
2. Se escoge una fecha efectiva en el futuro para que el cambio surta efecto (controlado por el parámetro `upgradetime` del comando `upgrades`).
3. Si es aplicable, la comunicación se envía a todos los usuarios de la red.

Esta cuidadosa orquestación desempeña un papel importante en el funcionamiento de la red estelar. Este proceso de planificación se lleva a cabo para evitar que los nodos funcionen mal, socializar nuevas características incluidas en una actualización de protocolo para que el ecosistema sea consciente y pueda aprovecharlas y también da al ecosistema tiempo de prepararse para romper cambios que pueden tener un efecto (ya sea directa o indirectamente) en sus integraciones estelares. Un plan inadecuado puede causar problemas como:

- nodos que faltan consenso (alias "atascar"), y tener que usar el historial para unirse
- la reconfiguración de la red teniendo efecto a un tiempo no determinista (causando que las comisiones cambien antes de programar, por ejemplo)

Para más información, echa un vistazo a cómo la versión toma en cuenta las actualizaciones de red en [el documento `versioning.md`](https://github.com/stellar/stellar-core/blob/master/docs/versioning.md) en el repositorio de GitHub.

## Actualizando configuración de Soroban

El mecanismo para actualizar la configuración de Soroban es más complejo que actualizar algo como la `reserva base`. El punto final de `mejoras` en stellar-core requerirá que los validadores voten en una `ConfigUpgradeSetKey` serializada, que contiene un contractID y el hash SHA-256 del `ConfigUpgradeSet` que se aplicará a los ajustes existentes. El `ConfigUpgradeSet` serializado debe existir en el ledger como `Temporary` `ContractData` bajo el contractID especificado anteriormente y con la clave `SCVal` `Bytes` que contiene el hash SHA-256 del `ConfigUpgradeSet`.

Esto significa que alguien que desee proponer una actualización de configuración necesitará crear un contrato inteligente que escriba los bytes de `ConfigUpgradeSet` en `ContractData` (recuerda, una entrada `Temporory` es requerida), invítala para escribir la actualización de xdr, y luego comparte la serialización `ConfigUpgradeSetKey` para votar.

Tenemos muchos más detalles en la [siguiente página](./soroban-settings.mdx) sobre _how_ para crear una propuesta de actualización para estos ajustes. Asegúrese de leer y entenderlo.

## Comando de mejora de ejemplo

A modo de ejemplo, aquí está el comando `upgrades` utilizado para actualizar la versión de protocolo a la versión 9 de Enero-31-2018.

```bash
# armar el nodo para votar por la actualización
stellar-core http-command 'upgrades?mode=set&upgradetime=2018-01-31T20:00:00Z&protocolversion=9'
# ver el estado del nodo
stellar-core http-command info
```

En este punto `info` te dirá que el nodo está configurado para votar por esta actualización:

```json
"status" : [
  "Armed with network upgradetime=2018-01-31T20:00:00Z, protocolversion=9"
]
```
