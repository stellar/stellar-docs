---
title: Configurando
sidebar_position: 40
---

import { Alert } from "@site/src/components/Alert";

<Alert>

Antes de intentar configurar stellar-core, es altamente recomendable primero intentar ejecutar una red privada o unirse a la red de pruebas.

</Alert>

## Configuración básica

Después de tener [installed](./instalación. dx) Núcleo Estelar, su siguiente paso es completar un archivo de configuración que especifique cosas cruciales sobre su nodo — como si se conecta a la red de Testnet o a la red pública de Mainnet. en que base de datos escribe y qué otros nodos están en su [conjunto de quórum](#choosing-your-quorum-set).

Toda la configuración para stellar-core se realiza con un archivo [TOML](https://github.com/toml-lang/toml). Por defecto, Stellar Core carga ese archivo de `./stellar-core.cfg`, pero puede especificar un archivo diferente a cargar en la línea de comandos:

```bash
stellar-core --conf betterfile.cfg <COMMAND>
```

Los ejemplos en estos documentos no especifican `--conf betterfile.cfg` en aras de la brevedad.

Esta página le guiará a través de los campos clave que necesitará incluir en su archivo de configuración para obtener su nodo y runninig.

<Alert>

Esta página intenta (como estrictamente es posible) centrarse en los campos y valores específicos que puede necesitar modificar en su archivo de configuración de Stellar Core. Para mantener esta página concisa, intentamos evitar el contexto conceptual y la información de fondo. Es probable que encuentres alguna de esa información relacionada en las páginas [prerequisites](./prerequisites.mdx) o [preparación](./environment-preparation.mdx), si quieres.

</Alert>

### Ejemplo de configuraciones

Mientras miramos algunos de los conceptos básicos de configuración de esta página, hemos escrito este contenido para funcionar mejor junto con ejemplos de configuración concretos, para leer a través de ella, tal vez quiera revisar lo siguiente:

- La [configuración de ejemplo completa] no es una configuración real, sino que documenta exhaustivamente todos los elementos de configuración posibles, así como sus valores por defecto. Tiene todos los nudos que se pueden girar y cada ajuste que se puede modificar junto con explicaciones detalladas de cómo girarlos y modificarlos. No necesita poner todo desde la configuración de ejemplo completa en su archivo de configuración. Los campos que omite asumirán la configuración por defecto, y la configuración por defecto generalmente le servirá bien. Sin embargo, hay algunos campos requeridos y esta página explicará lo que son.

- Si desea conectarse a la red de Testnet, consulte la [configuración de Testnet ejemplo]. Como puede ver, la mayoría de los campos de la [completa configuración de ejemplo] se omiten ya que los valores por defecto funcionan bien. Puede adaptar fácilmente esta configuración para satisfacer sus necesidades de Testnet.

- Si desea conectarse a la red Mainnet, revise esta [configuración Mainnet] para un validador completo. Incluye un conjunto de quórum correctamente elaborado con todos los [validadores de nivel 1](../tier-1-orgs.mdx), que es un buen lugar para comenzar para la mayoría de las configuraciones. Este nodo está configurado tanto para [validate](#validating-node) como para escribir el historial en un [archivo público](./environment-preparation. dx#configurando para publicar-data-a-an-archive), pero puede desactivar cualquiera de las características ajustando esta configuración para que sea un poco más ligero.

La vigilancia de la red P2P está habilitada por defecto, vea la sección [topología de superpos](./monitoring.mdx#overlay-topology-survey) para más detalles si quieres desactivarla

### Contraseña de red

Use el campo `NETWORK_PASSPHRASE` para especificar si su nodo se conecta a la red de pruebas o a la red principal [network](../../learn/fundamentals/networks.mdx).

- `NETWORK_PASSPHRASE="Probar red SDF ; Septiembre 2015"`
- `NETWORK_PASSPHRASE="Red Estelar Global Pública ; septiembre de 2015"`

Para más información sobre la contraseña de red y cómo funciona, consulta la [entrada enciclopedia](../../learn/encyclopedia/network-configuration/network-passphrases.mdx).

### Base de datos

Especifica la base de datos de tu nodo usando el campo correctamente llamado `DATABASE` de tu archivo de configuración, que puedes leer más en la [configuración de ejemplo completa][complete-example-database]. Por defecto para una base de datos en memoria, pero puede especificar una ruta según el ejemplo.

### Cubos

Los archivos XDR planos de Stellar Core (la copia duplicada del ledger) se colocan en un directorio especificado en el archivo de configuración como `BUCKET_DIR_PATH`, que por defecto es `buckets`.

## Validando Nodo

:::note

Si no tienes la intención de que tu nodo participe en votaciones de consenso, puedes saltarte para configurar tu [conjunto de quórum](#choosing-your-quorum-set)

:::

Si desea validar, debe generar una clave pública/privada para su nodo. Los nodos no deberían compartir claves. Debe \_asegurar cuidadosamente su clave privada. Si está comprometido, alguien puede enviar mensajes falsos a la red y esos mensajes parecerán que vinieron de usted.

Genera un par de claves para tu nodo de validación así:

```bash
stellar-core gen-seed
```

Su salida debería verse algo como:

```text
Semilla secreta: SBAAOHEU4WSWX6GBZ3VOXEGQGWRBJ72ZN3B3MFAJZWXRYGDIWHQO37SY
Público: GDMTUTQRCP6L3JQKX3OOKYIGZC6LG2O6K2BSUCI6WNGLL4XCIB3OK2P
```

Añade esta semilla secreta a tu archivo de configuración y marca el nodo como "validator":

```toml
NODE_SEED="SBAAOHEU4WSWX6GBZ3VOXEGQGWRBJ72ZN3B3MFAJZWXRYGDIWHQO37SY mynode"
NODE_IS_VALIDATOR=true

NODE_HOME_DOMAIN=<your domain name here - i.e., stellar.org>

[[HOME_DOMAINS]]
HOME_DOMAIN=<your domain name here, same as NODE_HOME_DOMAIN>
QUALITY="MEDIUM"
```

Si no incluye un `NODE_SEED` o establece `NODE_IS_VALIDATOR=true`, su nodo seguirá observando SCP y verá todos los datos de la red, pero no enviará mensajes de validación.

Si ejecuta múltiples validadores, asegúrese de establecer un `HOME_DOMAIN` común para ellos estableciendo la propiedad `NODE_HOME_DOMAIN` al mismo valor. Esto asegurará que tus nodos se agrupen correctamente durante la [generación de conjuntos de quórum](#home-domains-array). También necesitas incluir tus otros nodos en el [array VALIDATORS\` de tu archivo de configuración](#validators-array).

Si desea que otros validadores añadan su nodo a sus conjuntos de quórum, también debería compartir su clave pública (`GDMTUTQ. .`) publicando un archivo `stellar.toml` en tu dominio principal siguiendo las especificaciones establecidas por [SEP-20].

## Elegir tu Set de Quórum

Para crear tu conjunto de quórum, el Núcleo Estelar depende de dos arreglos de tablas: `[[HOME_DOMAINS]]` y `[[VALIDATORS]]`. Echa un vistazo a la configuración de ejemplo del array [`HOME_DOMAINS`] y [`VALIDATORS`] para verlos en acción.

<Alert>

Es beneficioso tomar un breve desvío aquí y explorar alguna información de fondo de quórum validador y consensos de red. Si quieres, puedes saltarte adelante y empezar a crear tu [array](#home-domains-array) ahora. De lo contrario, ¡lea, amigo!

</Alert>

No importa qué tipo de nodo ejecute — Validador básico o completo — necesita seleccionar un conjunto de quórum, que consiste en validadores (agrupados por organización) con los que su nodo comprueba para determinar si aplicar o no una transacción a un notario. Si desea saber más sobre cómo funcionan los juegos de quórum, consulte este artículo sobre [cómo Stellar se acerca a los quórumes]. Si desea ver cómo se ve un conjunto de quorum que consiste en todos los validadores de nivel 1 — una configuración probada y verdadera — revise la [configuración pública de red para un Validador Total].

Un buen juego de quórum:

- con las prioridades de su organización,
- tiene suficiente redundancia para manejar fallos de nodos arbitrarios, y
- mantiene buena intersección de quórum.

Puesto que fabricar un buen conjunto de quórum es algo difícil de hacer, stellar core _automatically_ genera un conjunto de quórum basado en la información estructurada que proporciona en su archivo de configuración. Usted elige los validadores en los que desea confiar; estelar los configura en un conjunto óptimo de quórum.

Para generar un conjunto de quórum, núcleo estelar:

- Validadores de grupos dirigidos por la misma organización en un subquorum
- Establece el umbral para cada uno de esos subquórum
- Da influencias a esos subquórum en función de la calidad

Si bien esto no le exime de toda responsabilidad — todavía necesita elegir validadores confiables y vigilarlos para asegurarse de que son consistentes y fiables — hace que su vida sea más fácil y reduce las posibilidades de error humano.

### Validator Discovery

Cuando agrega un nodo de validación a su conjunto de quórum, es generalmente porque confía en que _organization_ ejecute el nodo: usted confía en SDF, no en alguna clave pública estelar anónima.

Para crear un enlace autoverificado entre un nodo y la organización que lo ejecuta, un validador declara un dominio de origen en cadena usando una [operación `set_options`](. /../learn/fundamentals/transactions/list-of-operations.mdx#set-options), y publica información organizacional en un archivo `stellar.toml` alojado en ese dominio. Para saber cómo funciona eso, eche un vistazo a [SEP-20].

Como resultado de ese enlace, puede buscar un nodo por su clave pública Stellar y comprobar el `stellar. oml` archivo para averiguar quién lo ejecuta. Es posible hacerlo manualmente, pero también puedes consultar la lista de nodos en [Stellarbeat.io](https://stellarbeat.io/nodes). Si decide confiar en una organización, puede utilizar esa lista para recolectar la información necesaria para agregar sus nodos a su configuración.

Cuando mires esa lista, descubrirás que las organizaciones más fiables en realidad tienen más de un validador, y añadir todos los nodos de una organización a su conjunto de quórum crea la redundancia necesaria para sostener la falla de nodo arbitrario. Cuando una organización con un trío de nodos toma uno por mantenimiento, por ejemplo, los dos nodos restantes votan en nombre de la organización, y persiste la presencia de la red de la organización.

### Matriz de Dominios de Inicio

`[[HOME_DOMAINS]]` define un superconjunto de validadores: cuando añade nodos alojados por la misma organización a su configuración, comparten un dominio principal, y la información en la tabla `[[HOME_DOMAINS]]`, específicamente la clasificación de calidad, se aplicará automáticamente a cada uno de esos validadores.

Para cada organización que desea añadir, cree una tabla `[[HOME_DOMAINS]]` separada y complete los siguientes campos requeridos:

| Campo   | Requisitos | Descripción                                                               |
| ------- | ---------- | ------------------------------------------------------------------------- |
| DOMIN   | cadena     | URL del dominio doméstico enlazado a un grupo de validadores              |
| CALIDAD | cadena     | Valoración para los nodos de esta organización: `HIGH`, `MEDIUM`, o `LOW` |

Aquí hay un ejemplo `[[HOME_DOMAINS]]` array, que crea dos tablas `[[HOME_DOMAINS]]`:

```toml
[[HOME_DOMAINS]]
HOME_DOMAIN="testnet.stellar.org"
QUALITY="ALTA"

[[HOME_DOMAINS]]
HOME_DOMAIN="some-other-domain"
QUALITY="LOW"
```

### Matriz de Validadores

Para cada nodo que desee añadir a su conjunto de quórum, complete una tabla `[[VALIDATORS]]` con los siguientes campos:

| Campo        | Requisitos | Descripción                                                                                                                           |
| ------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| NOMBRE       | cadena     | Un alias único para el nodo                                                                                                           |
| CALIDAD      | cadena     | Valoración para el nodo (obligatorio a menos que se especifique en `[[HOME_DOMAINS]]`): `HIGH`, `MEDIUM`, o `LOW`. |
| DOMIN        | cadena     | URL del dominio de inicio enlazado al validador                                                                                       |
| Tecla PUBLIC | cadena     | Clave pública estelar asociada al validador                                                                                           |
| AÑADIR       | cadena     | Peer:puerto asociado con validador (opcional)                                                                      |
| ALTORIA      | cadena     | comando GET asociado con validador (opcional)                                                                      |

Si el nodo `HOME_DOMAIN` aleaba con una organización definida en el array `[[HOME_DOMAINS]]`, la calificación de calidad especificada allí se aplicará al nodo. Si está añadiendo un nodo individual que _no_ está cubierto en esa matriz, necesitará especificar la `CALIDAD` aquí.

Aquí hay un ejemplo, que crea tres tablas `[[VALIDATORS]]`:

```toml
[[VALIDATORS]]
NAME="sdftest1"
HOME_DOMAIN="testnet.stellar.org"
PUBLIC_KEY="GDKXE2OZMJIPOSLNA6N6F2BVCI3O777I2OOC4BV7VOYUEHYX7RTRYA7Y"
ADDRESS="core-testnet1.stellar. rg"
HISTORY="curl -sf http://history.stellar.org/prd/core-testnet/core_testnet_001/{0} -o {1}"

[[VALIDATORS]]
NAME="sdftest2"
HOME_DOMAIN="testnet.stellar. rg"
PUBLIC_KEY="GCUCJTIYXSOXKBSNFGNFW5MUQ54HKRPGJUTQFJ5RQXZXNOLNXYDHRAP"
ADDRESS="core-testnet2.stellar.org"
HISTORY="curl -sf http://history.stellar. rg/prd/core-testnet/core_testnet_002/{0} -o {1}"

[[VALIDATORS]]
NAME="rando-node"
QUALITY="LOW"
HOME_DOMAIN="rando.com"
PUBLIC_KEY="GC2V2EFSXN6SQTWVYA5EPJPBWWIMSD2XQNKUOHGEKB535AQE2I6IXV2Z"
ADDRESS="core.rando.com"
```

### Calidad del validador

`QUALITY` es un campo obligatorio para cada nodo que añadas a su conjunto de quórum. Si lo especifica para un conjunto de nodos en una tabla `[[HOME_DOMAINS]]` o para un solo nodo en una tabla `[[VALIDATORS]]` significa lo mismo, y tienes las mismas tres opciones de valoración: `HIGH`, `MEDIUM`, o `LOW`.

#### Calidad ALTA

Los validadores de calidad **HIGH** tienen el mayor peso en la configuración automática del juego de quórum. Antes de asignar una calificación de alta calidad a un nodo, asegúrese de que tiene baja latencia y buen tiempo de activación, y que la organización que ejecuta el nodo es fiable y fiable.

Un validador de alta calidad:

- publica un archivo, y
- pertenece a un conjunto de nodos que proporcionan redundancia.

Elegir nodos redundantes es una buena práctica. El requisito de archivo se aplica programáticamente.

#### Calidad MEDIUM

Los validadores de calidad **MEDIUM** están anidados por debajo de validadores de alta calidad, y su peso combinado es equivalente a una _única entidad de alta calidad_. Si un nodo no publica un archivo, pero lo considera fiable, o tenga un interés organizativo en incluirlo en su conjunto de quórum, otorgarle una calificación de calidad media.

#### Calidad BOW

Los validadores de calidad **LOW** están anidados por debajo de validadores de calidad media, y su peso combinado es equivalente a una _entidad de calidad media única_. Si son fiables con el tiempo, puede actualizar su calificación a media para darle un papel más importante en la configuración de su conjunto de quórum.

### Generación automática de conjuntos de quórum

:::info Nota Importante

Es ideal para configurar al menos 4 entidades en su quórum si usará la generación automática de conjuntos de quórum. El intercambio aquí trata de la tolerancia de fallos: un quórum con menos de 4 entidades tolerará las fallas de los nodos **cero**. Tome este momento para asegurarse de que su quórum configurado cumple con la tolerancia de fallos requerida.

:::

Una vez que añade validadores a su configuración, el núcleo estelar genera automáticamente un conjunto de quórum usando las siguientes reglas:

- Los validadores con el mismo dominio doméstico se agrupan automáticamente y tienen un umbral que requiere una mayoría simple (`2f+1`)
- Grupos heterogéneos de validadores reciben un umbral asumiendo una falla bizantina (`3f+1`)
- Las entidades están agrupadas por `QUALITY` y anidadas de `HIGH` a `LOW`
- Las entidades de calidad `HIGH` están en la parte superior, y se les da prioridad a la toma de decisiones
- El peso combinado de las entidades de calidad `MEDIUM` es igual a una única entidad de calidad `HIGH`
- El peso combinado de las entidades de calidad `LOW` equivale a una única entidad de calidad `MEDIUM`

![Generación de Set de Quórum Automático](/assets/validator_complete.png)

_Diagrama: Depicción de los niveles de calidad anidados y cómo interactúan._

### Red de quórum y superposición

Puede ser beneficioso dar información a su validador sobre otros validadores en los que usted confía. Esto se consigue configurando los campos opcionales `KNOWN_PEERS` y `PREFERRED_PEERS` con las direcciones de los nodos de los que usted depende. Muy a menudo, es razonable depender del descubrimiento de pares por defecto de tu nodo. Estos ajustes, sin embargo, pueden ser muy útiles para solucionar problemas.

Adicionalmente, configurar `PREFERRED_PEER_KEYS` con las claves de tu conjunto de quórum puede ser una buena idea dar prioridad a los nodos que te permiten llegar a consenso.

Sin estos ajustes, su validador depende de otros nodos de la red para reenviarle los mensajes correctos, que normalmente se hace como un mejor esfuerzo.

[completo ejemplo de configuración]: https://github.com/stellar/stellar-core/blob/master/docs/stellar-core_example.cfg
[ejemplo de configuración testnet]: https://github.com/stellar/quickstart/blob/master/testnet/core.U/stellar-core.cfg
[ejemplo de configuración del mainnet]: https://github.com/stellar/packages/blob/master/docs/examples/pubnet-validator-full/stellar-core.cfg
[completar-ejemplo-base de datos]: https://github.com/stellar/stellar-core/blob/master/docs/stellar-core_example.cfg#L48
[array `HOME_DOMAINS`]: https://github.com/stellar/stellar-core/blob/master/docs/stellar-core_example.cfg#L671
[matriz `VALIDATORES`]: https://github.com/stellar/stellar-core/blob/master/docs/stellar-core_example.cfg#L688
[SEP]: https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0020.md
[cómo se acerca el quórum estelar]: https://www.stellar.org/developopers-blog/why-quorums-matter-and-how-stellar-approaches-them
[configuración de red pública para un validador completo]: https://github.com/stellar/packages/blob/master/docs/examples/pubnet-validator-full/stellar-core.cfg
