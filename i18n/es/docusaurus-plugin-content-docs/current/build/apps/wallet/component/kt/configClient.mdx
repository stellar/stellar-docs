import { CodeExample } from "@site/src/components/CodeExample";

### Configurando el cliente

El SDK de la cartera Kotlin utiliza el [cliente ktor](https://ktor.io/docs/getting-started-ktor-client.html) para todas las peticiones de red (excluyendo Horizon, donde se utiliza el cliente HTTP del SDK Stellar). Actualmente, el motor okhttp está configurado para ser utilizado con el cliente. Puede leer más sobre cómo configurar el cliente ktor [here](https://ktor.io/docs/create-client.html#configure-client).

Por ejemplo, el cliente puede configurarse globalmente:

<CodeExample>

```kotlin
val walletCustomClient =
  Wallet(
    StellarConfiguration. estnet,
    ApplicationConfiguration(
      defaultClientConfig = {
        engine { esto. onfig { this.connectTimeout(Duración. fSegundo(10)) } }
        install(HttpRequestRetry) {
          retryOnServerErrors(maxRetries = 5)
          exponentialDelay()
        }
      }
    )
)
```

</CodeExample>

Este código de Kotlin establecerá el tiempo de espera de conexión a diez segundos a través de la [configuración okhttp](https://ktor.io/docs/http-client-engines.html#okhttp) y también instala el [plugin de reintento](https://ktor.io/docs/client-retry.html). También puede especificar la configuración del cliente para clases SDK de cartera específicas.

Por ejemplo, para cambiar el tiempo de espera de conexión cuando se conecta a algún servidor de fondo:

<CodeExample>

```kotlin
val anchorCustomClient =
  walletCustomClient.anchor("example.com") {
    engine { this.config { this.connectTimeout(Duration.ofSeconds(30)) } } }
}
```

</CodeExample>

### Cerrando recursos

Después de que la clase de cartera ya no se utilice, es necesario cerrar todos los clientes que la utiliza. Mientras que en algunas aplicaciones puede no ser necesario (p. ej. la cartera vive durante toda la vida de la aplicación), en otros casos puede ser requerida. Si su clase de cartera es de corta duración, se recomienda cerrar los recursos del cliente usando una función de cierre:

<CodeExample>

```kotlin
fun closeWallet() {
  wallet.close()
}
```

</CodeExample>
