### Configurar el cliente

El SDK de billetera de Kotlin utiliza el [client ktor](https://ktor.io/docs/getting-started-ktor-client.html) para todas las solicitudes de red (excluyendo Horizon, donde se utiliza el cliente HTTP del SDK de Stellar). Actualmente, el motor okhttp está configurado para utilizarse con el cliente. Puedes leer más sobre cómo configurar el client ktor [aquí](https://ktor.io/docs/create-client.html#configure-client).

Por ejemplo, el cliente puede ser configurado globalmente:

```kotlin
val walletCustomClient =
  Wallet(
    StellarConfiguration.Testnet,
    ApplicationConfiguration(
      defaultClientConfig = {
        engine { this.config { this.connectTimeout(Duration.ofSeconds(10)) } }
        install(HttpRequestRetry) {
          retryOnServerErrors(maxRetries = 5)
          exponentialDelay()
        }
      }
    )
  )
```

Este código de Kotlin establecerá el tiempo de espera de conexión en diez segundos a través de la [configuración de okhttp](https://ktor.io/docs/http-client-engines.html#okhttp) y también instala el [plugin de reintento](https://ktor.io/docs/client-retry.html). También puedes especificar la configuración del cliente para clases específicas del SDK de billetera.

Por ejemplo, para cambiar el tiempo de espera de conexión al conectarse a algún servidor anchor:

```kotlin
val anchorCustomClient =
  walletCustomClient.anchor("example.com") {
    engine { this.config { this.connectTimeout(Duration.ofSeconds(30)) } }
  }
```

### Cerrar recursos

Después de que la clase de billetera ya no se utilice, es necesario cerrar todos los clientes que se utilizaron con ella. Mientras que en algunas aplicaciones puede no ser necesario (por ejemplo, la billetera vive durante toda la vida de la aplicación), en otros casos puede ser necesario. Si tu clase de billetera es de corta duración, se recomienda cerrar los recursos del cliente utilizando una función de cierre:

```kotlin
fun closeWallet() {
  wallet.close()
}
```
