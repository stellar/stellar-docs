---
title: Integrar contratos de activos estelares
description: Prueba y usa activos estelares en un contrato inteligente de Soroban
---

Al interactuar con activos en un contrato inteligente, el Contrato de Activos Estelares no es diferente de cualquier otro token que implemente la Interfaz de Token Stellar [SEP-41].

## Código del Contrato

El SDK de Rust contiene un cliente pregenerado para cualquier contrato que implemente la interfaz de tokens:

```rust
use soroban_sdk::{contract, contractimpl}
use soroban_sdk::token;

#[contract]
pub struct MyContract;

#[contractimpl]
impl MyContract {
    pub fn token_fn(e: Env, id: Address) {
        // Crear una instancia de cliente para el identificador de token proporcionado. Si el valor id
        // corresponde a un contrato SAC, entonces se utiliza la implementación SAC.
        let client = token::TokenClient::new(&env, &id);
        // Llamar funciones de token parte de la interfaz de tokens Stellar SEP-41
        cliente. ransfer(...);
    }
}
```

El parámetro `asset` no es la dirección del emisor de un activo, corresponde a la dirección del contrato desplegado para este activo.

```bash
stellar contract id asset \
    --source G... \
    --network testnet \
    --asset [asset:issuer]
```

Ejemplo. para USDC, sería `--asset USDC:G...` Para el activo nativo, XLM, `--asset native`. Vea la guía de [deploy SAC] para más detalles.

[desplegar SAC]: ../cli/deploy-stellar-asset-contract.mdx

:::info[Clients]

Un cliente creado por [`token::TokenClient`] implementa las funciones definidas por cualquier contrato que implemente la [SEP-41 Token Interface]. Pero con [CAP-46-6 smart contract standardized asset], el Stellar Asset Contract expone funciones adicionales como `mint`. Para acceder a las funciones adicionales, otro cliente necesita ser usado: [`token::StellarAssetClient`]. Este cliente sólo implementa las funciones de CAP-46-6, las cuales no forman parte de la interfaz SEP-41.

```rust
let cliente = token::StellarAssetClient::new(&env, &id);
// Llamar funciones de tokens que no son parte de la interfaz de tokens SEP-41
// sino parte del cliente CAP-46-6 Smart Contract Standardized Asset
. int(...);
```

:::

## Pruebas

Soroban Rust SDK proporciona una forma fácil de instanciar un token de Contrato de Activos Estelares usando `register_stellar_asset_contract`. Esta función puede ser vista como el despliegue de un token genérico. En el siguiente ejemplo, estamos siguiendo las mejores prácticas descritas en la [Sección de Cuentas de Emisión y Distribución](../../../tokens/control-asset-access.mdx#issuing-and-distribution-accounts):

```rust
#![cfg(test)]

use soroban_sdk::testutils::Address as _;
use soroban_sdk::{token, Address, Env};
token de uso::{StellarAssetClient, TokenClient}

#[test]
fn test() {
    let e = Env::default();
    e. ock_all_auths();

    let issuer = Address::generate(&e);
    let distributor = Address::generate(&e);

    let token_address = e. egister_stellar_asset_contract(emisor. lone());

    // cliente para las funciones SEP-41
    let token = TokenClient::new(&e, &token_address);
    // cliente para las funciones del Contrato de Activos Estelares
    let token_sac = StellarAssetClient::new(&e, &token_address);

    // note que necesita tener en cuenta la diferencia entre la unidad mínima
    // y la unidad misma cuando trabaje con cantidades.
    // E.g. para acuñar 1 TOKEN, necesitamos usar 1*1e7 en la función de la menta.
    let genesis_amount: i128 = 1_000_000_000 * 10_000_000;

    token_sac. int(&distributor, &genesis_amount);

    assert_eq!(token.balance(&distributor), genesis_amount);
}
```

## Ejemplos

Ver los ejemplos completos que utilizan el contrato de token de varias maneras para más detalles:

- [Timelock](../../smart-contracts/example-contracts/timelock.mdx) y [una oferta](../../smart-contracts/example-contracts/single-offer-sale.mdx) mueven el token vía `transfer` hacia y desde el contrato
- [Atomic swap](../../smart-contracts/example-contracts/atomic-swap.mdx) utiliza `transfer` para transferir token en nombre del usuario

[interfaz sep-41 token]: ../../../tokens/token-interface.mdx
[cap-46-6 contrato inteligente de activo estandarizado]: https://github.com/stellar/stellar-protocol/blob/master/core/cap-0046-06.md
[`token::tokenclient`]: https://docs.rs/soroban-sdk/latest/soroban_sdk/token/struct.TokenClient.html
[`token::stellarassetclient`]: https://docs.rs/soroban-sdk/latest/soroban_sdk/token/struct.StellarAssetClient.html
