---
title: Inicializar un dapp usando scripts
description: Configure la inicialización correctamente para asegurar una configuración perfecta para su dapp.
---

Al configurar un ejemplo Soroban Dapp, la inicialización correcta es crucial. Este proceso implica varios pasos, incluyendo la implementación de Docker, la clonación y el despliegue de contratos inteligentes, y la invocación de funciones para configurarlos. En esta guía exhaustiva, usted lo guiará a través de los pasos necesarios para construir e implementar con éxito estos contratos inteligentes, asegurando una configuración perfecta para su Soroban Dapp.

## Construir y desplegar el Contrato Inteligente del Token Soroban

En dapps como el [Ejemplo de pago Dapp](https://github.com/stellar/soroban-react-payment/), los [contratos inteligentes Soroban Token](https://github.com/stellar/soroban-examples/tree/main/token) se utilizan para representar el activo tokenizado que los usuarios pueden enviar y recibir. He aquí un ejemplo de cómo construir y desplegar los contratos inteligentes del Token de Soroban:

Comience por clonar el repositorio de ejemplos de Soroban:

```shell
git clone https://github.com/stellar/soroban-examples.git
```

Luego, navega al directorio `token`:

```shell
cd soroban-ejemplos/token
```

En este punto puede construir el contrato inteligente:

```shell
hacer
```

Esta acción compilará los contratos inteligentes y los colocará en el directorio `token/target/wasm32-unknown-unknown/release`.

Después de construir, estás listo para desplegar los contratos inteligentes en Futurenet. Para hacer esto, abre un terminal en el directorio `soroban-examples/token` y ejecuta lo siguiente:

```shell
despliegue de contrato estelar \
 --wasm target/wasm32-unknown-unknown/release/soroban_token_contract.wasm \
 --source <ADMIN_ACCOUNT_SECRET_KEY> \
 --rpc-url https://rpc-futurenet.stellar.org:443 \
 --network-passphrase 'Test SDF Future Network ; octubre 2022'
```

Este comando despliegue los contratos inteligentes a Futurenet usando la función `stellar contract deploy`.

## Inicializar un contrato de token

Con los contratos desplegados, es hora de inicializar el contrato token:

```shell
contrato estelar invoca \
 --id <TOKEN_CONTRACT_ID> \
 --source-account <ADMIN_ACCOUNT_SECRET_KEY> \
 --rpc-url https://rpc-futurenet.stellar. rg:443 \
 --network-passphrase 'Test SDF Future Network ; Octubre 2022' \
 -- inicializar \
 --admin <ADMIN_PUBLIC_KEY> \
 --decimal 7 \
 --name '44656d6f20546f6b656e' \
 --symbol '"4454"'
```

Este comando requiere ciertas entradas:

- Cuenta de Administrador: Esta es la clave pública de la cuenta de administrador. El administrador tiene control y autoridad sobre el contrato de token, permitiendo la gestión de varias funcionalidades del contrato. Obtenga más información sobre el papel del administrador en la interfaz de Token de Soroban.

- Precisión decimal: El valor decimal de 7 especifica que el token puede soportar transacciones de hasta 7 decimales. Este nivel de precisión permite flexibilidad cuando se transfieren cantidades de token.

- Nombre de la ficha: El nombre del fichero, representado como una cadena codificada por hex. En este caso, '44656d6f20546f6b656e' corresponde a "Demo Token".

- Símbolo Token: Este es el símbolo del token, también representado como una cadena hexadecimal. '4454' se traduce al símbolo "DT".

## Fichas de Montura

Por último, tienes que acuñar algunas fichas a la cuenta del remitente:

```shell
contrato estelar invoca \
 --id <TOKEN_CONTRACT_ID> \
 --source-account <ADMIN_ACCOUNT_SECRET_KEY> \
 --rpc-url https://rpc-futurenet.stellar. rg:443 \
 --network-passphrase 'Test SDF Future Network ; Octubre 2022' \
 -- menta \
 --a <USER_PUBLIC_KEY> \
 --amount 1000000000
```

Este comando acuñará 100 tokens a la cuenta del usuario designado.

Al seguir estos pasos, usted se asegura de que los contratos inteligentes del token Soroban estén correctamente desplegados e inicializados, establecer el escenario para que Dapp interactúe efectivamente con el token.

Para una inmersión más profunda en los comandos de Stellar CLI, revisa el [repositorio Stellar CLI](https://github.com/stellar/stellar-cli/blob/main/FULL_HELP_DOCS.md).

## Automatizar la Inicialización con Scripts

Para agilizar el proceso de inicialización, puede utilizar un script. Este script debería automatizar varias tareas tales como configurar la red, envolviendo activos Stellar, generando identidades token-admin financiando la cuenta de administrador del token, construyendo y desplegando los contratos, e inicializándolos con los parámetros necesarios.

Aquí hay un script de inicializador de ejemplo:

```bash title="initialize.sh"
#!/bin/bash

set -e

NETWORK="$1"

# If stellar-cli is called inside the soroban-preview docker container,
# it can call the stellar standalone container just using its name "stellar"
if [[ "$IS_USING_DOCKER" == "true" ]]; then
  SOROBAN_RPC_HOST="http://stellar:8000"
else
  SOROBAN_RPC_HOST="http://localhost:8000"
fi

case "$1" in
standalone)
  echo "Using standalone network"
  SOROBAN_NETWORK_PASSPHRASE="Standalone Network ; February 2017"
  FRIENDBOT_URL="$SOROBAN_RPC_HOST/friendbot"
  SOROBAN_RPC_URL="$SOROBAN_RPC_HOST/soroban/rpc"
  ;;
futurenet)
  echo "Using Futurenet network"
  SOROBAN_NETWORK_PASSPHRASE="Test SDF Future Network ; October 2022"
  FRIENDBOT_URL="https://friendbot-futurenet.stellar.org/"
  SOROBAN_RPC_URL="https://rpc-futurenet.stellar.org"
  ;;
testnet)
  echo "Using Testnet network"
  SOROBAN_NETWORK_PASSPHRASE="Test SDF Network ; September 2015"
  FRIENDBOT_URL="https://friendbot.stellar.org/"
  SOROBAN_RPC_URL="https://soroban-testnet.stellar.org"
  ;;
*)
  echo "Usage: $0 standalone|futurenet|testnet"
  exit 1
  ;;
esac


echo Add the $NETWORK network to cli client
stellar network add \
  --rpc-url "$SOROBAN_RPC_URL" \
  --network-passphrase "$SOROBAN_NETWORK_PASSPHRASE" "$NETWORK"

if !(stellar keys ls | grep token-admin 2>&1 >/dev/null); then
  echo Create the token-admin identity
  stellar keys generate token-admin
fi
TOKEN_ADMIN_SECRET="$(stellar keys show token-admin)"
TOKEN_ADMIN_ADDRESS="$(stellar keys address token-admin)"

# TODO: Remove this once we can use `stellar keys` from webpack.
mkdir -p .soroban-example-dapp
echo "$TOKEN_ADMIN_SECRET" > .soroban-example-dapp/token_admin_secret
echo "$TOKEN_ADMIN_ADDRESS" > .soroban-example-dapp/token_admin_address

# This will fail if the account already exists, but it'll still be fine.
echo Fund token-admin account from friendbot
curl --silent -X POST "$FRIENDBOT_URL?addr=$TOKEN_ADMIN_ADDRESS" >/dev/null

ARGS="--network $NETWORK --source token-admin"

echo Deploy the Stellar asset contract
TOKEN_ID=$(stellar contract asset deploy $ARGS --asset "EXT:$TOKEN_ADMIN_ADDRESS")
echo "Token deployed successfully with TOKEN_ID: $TOKEN_ID"

# TODO - remove this workaround when
# https://github.com/stellar/soroban-tools/issues/661 is resolved.
TOKEN_ADDRESS="$(node ./address_workaround.js $TOKEN_ID)"
echo "Token Address converted to StrKey contract address format:" $TOKEN_ADDRESS

echo -n "$TOKEN_ID" > .soroban-example-dapp/token_id

echo Build the crowdfund contract
make build

echo Deploy the crowdfund contract
CROWDFUND_ID="$(
  stellar contract deploy $ARGS \
    --wasm target/wasm32-unknown-unknown/release/soroban_crowdfund_contract.wasm
)"
echo "Contract deployed successfully with ID: $CROWDFUND_ID"
echo "$CROWDFUND_ID" > .soroban-example-dapp/crowdfund_id

echo "Initialize the crowdfund contract"
deadline="$(($(date +"%s") + 86400))"
stellar contract invoke \
  $ARGS \
  --id "$CROWDFUND_ID" \
  -- \
  initialize \
  --recipient "$TOKEN_ADMIN_ADDRESS" \
  --deadline "$deadline" \
  --target_amount "1000000000" \
  --token "$TOKEN_ADDRESS"

echo "Done"
```

Aquí hay un resumen de lo que hace el script `initialize.sh`:

- Identifica la red (independiente o futurenet) basada en la entrada del usuario
- Determina la URL del host RPC Soroban dependiendo de su entorno de ejecución (ya sea dentro del contenedor soroban-preview Docker o localmente)
- Establece la URL RPC Soroban basada en la URL de host previamente determinada
- Establece la contraseña de la red Soroban y la URL de Friendbot dependiendo de la red elegida
- Añade la configuración de red usando `stellar network add`
- Genera una identidad de admin de token-usando `stellar keys generate`
- Obtiene TOKEN_ADMIN_SECRET y TOKEN_ADMIN_ADDRESS de la identidad generada recientemente
- Guarda TOKEN_ADMIN_SECRET y TOKEN_ADMIN_ADDRESS en el directorio .soroban
- Fondos de la cuenta de token de admin usando Friendbot
- Despliega el contrato de activos Stellar con 'stellar contract asset deploy' y almacena el TOKEN_ID resultante
- Construye el contrato de crowdfund con `make build` y lo implementa usando `stellar contract deploy`, almacenando el CROWDFUND_ID devuelto
- Initializa el contrato de fondos de recambio invocando la función de inicialización con los parámetros necesarios
- Imprime "Hecho" para significar el final del proceso de inicialización

Aprovechando la inicialización automatizada, usted puede estirar el proceso de configuración de su Soroban Dapp, asegurándose de que esté correctamente desplegado e inicializado.
