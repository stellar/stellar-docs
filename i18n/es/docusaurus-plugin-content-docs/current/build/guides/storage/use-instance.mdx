---
title: Usar almacenamiento de instancia en un contrato
hide_table_of_contents: true
description: El almacenamiento de instancias tiene un archivo TTL que está vinculado a la instancia del contrato en sí.
---

Bajo el capó, el almacenamiento de la instancia es exactamente como el almacenamiento persistente. La única diferencia es que cualquier cosa almacenada en el almacenamiento de instancias tiene un archivo TTL que está vinculado a la instancia del contrato en sí. Por lo tanto, si un contrato está vivo y disponible, el almacenamiento de la instancia también está garantizado.

El almacenamiento de instancias es realmente útil para los datos del contrato global que se comparten entre todos los usuarios del contrato (administrador de tokens, por ejemplo). Desde el [contrato de ejemplo de tokens](../../smart-contracts/example-contracts/tokens.mdx), las funciones de ayuda para establecer y recuperar la dirección del administrador son básicamente sólo envolturas alrededor de una entrada de Admin ledger .

:::caution

Debe tenerse en cuenta que _cada_ pieza de datos almacenados en el almacenamiento `instance()` es recuperada del libro de valores _cada_ cuando el contrato es invocado. Incluso si la función invocada no interactúa con ningún dato del libro de notas. Esto puede llevar a invocaciones de funciones más caras (computacional y financieramente) si los datos almacenados crecen con el tiempo. Elegir juiciosamente qué partes de datos pertenecen realmente al almacenamiento de la instancia y que deben mantenerse en el almacenamiento persistente.

:::

```rust
pub fn has_administrator(e: &Env) -> bool {
    let key = DataKey::Admin;
    e.storage().instance(). as(&key)
}

pub fn read_administrator(e: &Env) -> Dirección {
    let key = DataKey::Admin;
    e. torage().instance().get(&key). nwrap()
}

pub fn write_administrator(e: &Env, id: &Address) {
    let key = DataKey::Admin;
    e. torage().instance().set(&key, id);
}
```
