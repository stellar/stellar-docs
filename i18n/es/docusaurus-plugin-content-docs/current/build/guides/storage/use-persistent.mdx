---
title: Usar almacenamiento persistente en un contrato
hide_table_of_contents: true
description: El almacenamiento persistente puede ser útil para las entradas del libro de contabilidad que no son comunes a todos los usuarios de la instancia del contrato.
---

Almacenamiento persistente puede ser muy útil para entradas de contador que no son comunes en todos los usuarios de la instancia del contrato, pero que no son aptos para ser temporales (saldos de usuario, por ejemplo). En esta guía, asumiremos que queremos almacenar un número aleatorio para un usuario, y almacenarlo en el almacenamiento persistente del contrato como si fuera su número favorito.

```rust
#[contracttype]
pub enum DataKey {
    Favorite(Address),
}

#[contract]
pub struct FavoriteContract;

#[contractimpl]
impl FavoriteContract {
    // This function generates, stores, and returns a random number for the user
    pub fn generate_fave(env: Env, user: Address) -> u64 {
        let key = DataKey::Favorite(user);
        let fave: u64 = env.prng().gen();
        env.storage().persistent().set(&key, &fave);
        fave
    }

    // This function retrieves and returns the random number for the user
    pub fn get_fave(env: Env, user: Address) -> u64 {
        let key = DataKey::Favorite(user);
        if let Some(fave) = env.storage().persistent().get(&key) {
            fave
        } else {
            0
        }
    }
}
```
