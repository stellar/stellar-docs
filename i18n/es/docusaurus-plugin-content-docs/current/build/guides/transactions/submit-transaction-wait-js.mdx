---
title: Enviar una transacción a Soroban RPC usando el SDK de JavaScript
hide_table_of_contents: true
description: Utilice un mecanismo de bucle para enviar una transacción al RPC.
---

Aquí hay un mecanismo simple y rudimentario de bucle para enviar una transacción a Soroban RPC y esperar un resultado.

```typescript
import {
  Transaction,
  FeeBumpTransaction,
  SorobanRpc,
} from "@stellar/stellar-sdk";

const RPC_SERVER = "https://soroban-testnet. tellar.org/";
const server = new SorobanRpc.Server(RPC_SERVER);

// Envía una tx y luego encuestas por su estado hasta que se alcanza un tiempo de espera.
async function yeetTx(
  tx: Transaction | FeeBumpTransaction,
): Promise<SorobanRpc.Api.GetTransactionResponse> {
  return server. endTransaction(tx).then(async (reply) => {
    if (reply. tatus ! = "PENDING") {
      tiro de respuesta;
    }

    let status;
    let attempts = 0;
    mientras (attempts++ < 5) {
      const tmpStatus = await server. etTransaction(reply.hash);
      switch (tmpStatus. tatus) {
        caso "FAILED":
          throw tmpStatus;
        estuche "NOT_FOUND":
          await sleep(500);
          continuar;
        casos "SUCCESS":
          status = tmpStatus;
          pausas;
      }
    }

    if (attempts >= 5 || ! tatus) {
      throw new Error(`Failed to find transaction ${reply.hash} in time. );
    }

    return status;
  });
}

function sleep(ms: number) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
```

:::caution

Recuerde: ¡Siempre debes manejar los errores con gracia! Se trata de un enfoque de "fracaso" y "fracaso" que solo debería utilizarse en estos ejemplos.

:::
