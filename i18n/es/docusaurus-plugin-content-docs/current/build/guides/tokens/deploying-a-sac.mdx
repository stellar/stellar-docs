---
title: Desplegar un contrato de activo Stellar (SAC) desde dentro de un contrato
hide_table_of_contents: true
description: Desplegar un SAC desde otro contrato inteligente utilizando el SDK de Rust
---

<head>
  <title>
    {`Desplegando un contrato de activo Stellar (SAC) desde dentro de un contrato`}
  </title>
  <meta charSet="utf-8" />
  <meta
    property="og:title"
    content="Desplegando un contrato de activo Stellar (SAC) desde dentro de un contrato"
  />
  <meta
    property="og:description"
    content="Esta es una guía paso a paso para ayudarte a desplegar un SAC desde dentro de un contrato inteligente en Stellar."
  />
</head>

## Resumen

En esta guía, aprenderás a desplegar un [contrato de activo Stellar (SAC)](../../../tokens/stellar-asset-contract.mdx) desde dentro de otro contrato inteligente utilizando el SDK de Rust de Soroban. El SDK de Rust de Soroban proporciona herramientas y utilidades para trabajar con contratos inteligentes de Stellar, permitiéndote desplegar e interactuar con los SAC directamente desde la lógica de tu contrato. El SDK de Rust de Soroban proporciona herramientas y utilidades para trabajar con contratos inteligentes Stellar, permitiéndote desplegar e interactuar con los SAC directamente desde la lógica de tu contrato.

## Requisitos previos:

Antes de comenzar, asegúrate de tener lo siguiente:

- Conocimiento básico del [lenguaje de programación Rust](https://www.rust-lang.org/). Para refrescar tus conocimientos sobre Rust, consulta [Rustlings](https://github.com/rust-lang/rustlings) o [El libro de Rust](https://doc.rust-lang.org/book/).
- [Soroban Rust SDK](../../../tools/sdks/contract-sdks.mdx#soroban-rust-sdk) instalado y configurado en tu entorno de desarrollo.
- Conocimiento básico del SDK de Rust de Soroban y familiaridad con los conceptos fundamentales de Soroban y la programación en Rust.

## 1. Definir el contrato SacDeployer

El contrato SacDeployer será responsable de desplegar el contrato de activo Stellar. Aquí está el código para el contrato SacDeployer:

```rust title="lib.rs"
use soroban_sdk::{contract, contractimpl, Env, Address, Bytes};

#[contract]
pub struct SacDeployer;

#[contractimpl]
impl SacDeployer {
    pub fn deploy_sac(env: Env, serialized_asset: Bytes) -> Address {
        // Create the Deployer with Asset
        let deployer = env.deployer().with_stellar_asset(serialized_asset);
        let _ = deployer.deployed_address();
        // Deploy the Stellar Asset Contract
        let sac_address = deployer.deploy();

        sac_address
    }
}
```

### Explicación

- `SacDeployer` contrato: este contrato define la función `deploy_sac` para manejar el despliegue del SAC.
- Función `deploy_sac`:
  - `env.deployer().with_stellar_asset(serialized_asset)`: crea un desplegador configurado para desplegar un contrato de activo Stellar utilizando el activo serializado proporcionado.
  - `deployer.deploy()`: Despliega el SAC y devuelve la dirección del contrato desplegado.

## 2. Probar el despliegue

Necesitas probar el despliegue para asegurarte de que todo funcione como se espera. El siguiente código demuestra cómo probar el contrato SacDeployer utilizando las utilidades de prueba del SDK de Rust de Soroban.

```rust
#[cfg(feature = "testutils")]
fn main() {
    let env = TestEnv::default();
    let serialized_asset = Bytes::from("actual serialized asset"); // Replace with actual serialized asset info
    let sac_deployer = SacDeployer::default();
    let sac_address = sac_deployer.deploy_sac(env.clone(), serialized_asset);
    println!("SAC Address: {}", sac_address.to_string());
}
```

### Explicación

- `TestEnv::default()`: crea un entorno de prueba predeterminado para el despliegue.
- `SacDeployer::default()`: inicializa el contrato SacDeployer.
- `deploy_sac(env.clone(), serialized_asset)`: llama a la función `deploy_sac` para desplegar el SAC y recupera la dirección.
- `println!("Dirección SAC: {}", sac_address.to_string())`: imprime la dirección del SAC desplegado.
- `assert!(sac_address.to_string().len() > 0, "La dirección SAC debería ser no vacía")`: afirma que la dirección del SAC no está vacía, asegurando un despliegue exitoso.
- `serialized_asset` es el `Asset` XDR de Stellar serializado en bytes. Consulta `[soroban_sdk::xdr::Asset]` [XDR](https://docs.rs/stellar-xdr/latest/stellar_xdr/curr/enum.Asset.html)

### Conclusión

Siguiendo esta guía, has desplegado con éxito un contrato de activo Stellar desde dentro de otro contrato utilizando el SDK de Rust de Soroban. Este enfoque permite que los contratos inteligentes manejen los despliegues de SAC de manera dinámica, proporcionando flexibilidad para varios casos de uso en el ecosistema Stellar.

Para más detalles, consulta la documentación del SDK de Soroban y explora características y configuraciones más avanzadas.
