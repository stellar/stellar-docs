---
sidebar_position: 20
title: Desplegar y depurar contratos inteligentes en Testnet e interactuar con otros contratos
sidebar_label: 2. Desplegar en Testnet
description: Desplegar contratos inteligentes Stellar en Testnet utilizando la CLI, interactuar con otros contratos, probar la funcionalidad, depurar incidencias y prepararse para el despliegue en Mainnet.
---

# 2. Desplegar en Testnet

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { getPlatform } from "@site/src/helpers/getPlatform";

Para recapitular lo que hemos hecho hasta ahora, en [Configuración](setup.mdx):

- configuramos nuestro entorno local para escribir contratos inteligentes en Rust
- instalamos el stellar-cli
- configuramos el stellar-cli para comunicarse con el Stellar Testnet a través de RPC
- y configuramos una identidad para firmar transacciones

En [Hola Mundo](./hello-world.mdx) creamos un proyecto `hello-world`, y aprendimos cómo probar y construir el contrato `HelloWorld`. Ahora estamos listos para desplegar ese contrato en Testnet, e interactuar con él.

## Desplegar

Para desplegar tu contrato HelloWorld, ejecuta el siguiente comando:

<Tabs groupId="platform" defaultValue={getPlatform()}>

<TabItem value="unix" label="macOS/Linux">

```sh
stellar contract deploy \
  --wasm target/wasm32v1-none/release/hello_world.wasm \
  --source-account alice \
  --network testnet \
  --alias hello_world
```

</TabItem>

<TabItem value="windows" label="Windows (PowerShell)">

```powershell
stellar contract deploy `
  --wasm target/wasm32v1-none/release/hello_world.wasm `
  --source-account alice `
  --network testnet `
  --alias hello_world
```

</TabItem>

</Tabs>

Esto devuelve el id del contrato, comenzando con una `C`. En este ejemplo, vamos a usar `CACDYF3CYMJEJTIVFESQYZTN67GO2R5D5IUABTCUG3HXQSRXCSOROBAN`, así que reemplázalo con tu id de contrato real.

:::tip

Usamos el flag `--alias` en este comando de despliegue que creará un archivo `.stellar/contract-ids/hello_world.json` que mapea el alias `hello_world` con el id del contrato y la red. Esto nos permite referirnos a este contrato por su alias en lugar del id del contrato.

:::

## Interactuar

Usando el código que escribimos en [Escribir un Contrato](./hello-world.mdx#contract-source-code) y el archivo `.wasm` resultante que construimos en [Construir](hello-world.mdx#build-the-contract), ejecuta el siguiente comando para invocar la función `hello`.

:::info

En el fondo, el CLI está haciendo llamadas RPC. Para obtener información sobre eso, consulta la página de referencia [RPC](../../../data/apis/rpc/admin-guide/README.mdx).

:::

<Tabs groupId="platform" defaultValue={getPlatform()}>

<TabItem value="unix" label="macOS/Linux">

```sh
stellar contract invoke \
  --id CACDYF3CYMJEJTIVFESQYZTN67GO2R5D5IUABTCUG3HXQSRXCSOROBAN \
  --source-account alice \
  --network testnet \
  -- \
  hello \
  --to RPC
```

</TabItem>

<TabItem value="windows" label="Windows (PowerShell)">

```powershell
stellar contract invoke `
  --id CACDYF3CYMJEJTIVFESQYZTN67GO2R5D5IUABTCUG3HXQSRXCSOROBAN `
  --source-account alice `
  --network testnet `
  -- `
  hello `
  --to RPC
```

</TabItem>

</Tabs>

La siguiente salida debería aparecer.

```json
["Hello", "RPC"]
```

:::info

¡El doble guion `--` es obligatorio!

Este es un patrón general de [CLI](https://unix.stackexchange.com/questions/11376/what-does-double-dash-mean) usado por otros comandos como [cargo run](https://doc.rust-lang.org/cargo/commands/cargo-run.html). Todo lo que aparece después del `--`, a veces llamado [slop](https://github.com/clap-rs/clap/issues/971), se pasa a un proceso hijo. En este caso, `stellar contract invoke` construye un _CLI implícito_ sobre la marcha para el método `hello` en tu contrato. Puede hacer esto porque el Soroban SDK incrusta los tipos de esquema / interfaz de tu contrato directamente en el archivo `.wasm` que se despliega en on-chain. También puedes probar:

```sh
stellar contract invoke ... -- --help
```

y

```sh
stellar contract invoke ... -- hello --help
```

:::

## Resumen

En esta lección, aprendimos a:

- desplegar un contrato en Testnet
- interactuar con un contrato desplegado

A continuación, añadiremos un nuevo contrato a este proyecto, y veremos cómo nuestro espacio de trabajo puede acomodar un proyecto de múltiples contratos. El nuevo contrato mostrará un poco de las capacidades de almacenamiento de Soroban.
