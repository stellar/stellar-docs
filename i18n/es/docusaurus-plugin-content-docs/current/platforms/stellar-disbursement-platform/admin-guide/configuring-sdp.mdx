---
title: Configuraci贸n
description: Comprende las opciones de configuraci贸n disponibles para la Plataforma de Desembolso Stellar (SDP)
keywords:
  - SDP
  - configuration
sidebar_position: 40
---

Los servicios de la Plataforma de Desembolso Stellar pueden configurarse mediante un conjunto de opciones que se pasan por la l铆nea de comandos o se establecen como variables de entorno. Dependiendo de c贸mo est茅s usando y desplegando la SDP, estas configuraciones pueden establecerse en un ConfigMap en Kubernetes, como variables de entorno en un contenedor Docker, pasarse como argumentos de l铆nea de comandos, etc.

En esta secci贸n discutiremos las diferentes opciones de configuraci贸n disponibles para la SDP.

:::tip[Notes]

- Las configuraciones marcadas con  son sensibles y deben almacenarse de forma segura.
- Todas las configuraciones pueden pasarse como variables de entorno o flags de CLI. Por ejemplo, la variable de entorno `BASE_URL` podr铆a pasarse mediante el flag `--base-url`. Los flags de CLI tienen prioridad sobre las variables de entorno, aunque estas 煤ltimas son m谩s convenientes.

:::

## Servicio principal de SDP

Para obtener la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git del backend de stellar-disbursement-platform](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform serve --help
```

</CodeExample>

### Configuraci贸n operativa

La configuraci贸n operativa permite controlar m茅tricas, registro y otros aspectos operativos del Servicio principal de SDP.

- `PORT` - El puerto en el que el Servicio principal de SDP escuchar谩 las solicitudes HTTP entrantes. Por defecto: 8000.
- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `METRICS_PORT` - El puerto en el que el Servicio principal de SDP expondr谩 sus m茅tricas. Por defecto: 8002.
- `METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a usar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  El DSN (clave de cliente) del proyecto Sentry. Si no se proporciona, no se usar谩 Sentry.
- `ENVIRONMENT` - El entorno donde la aplicaci贸n est谩 ejecut谩ndose. Ejemplo: "development", "staging", "production". Por defecto: "development".
- `BASE_URL` - La URL base del servidor backend de SDP. Por defecto: "http://localhost:8000". Las URLs espec铆ficas para cada tenant se configurar谩n durante el [proceso de provisi贸n de tenants](./advanced-configration#provisioning-tenants).
- `SDP_UI_BASE_URL` - La URL base de la interfaz de usuario/dashboard de SDP usada para enviar el enlace de invitaci贸n cuando se crea un usuario nuevo. Las URLs espec铆ficas para cada tenant se configurar谩n durante el [proceso de provisi贸n de tenants](./advanced-configration#provisioning-tenants).

### Configuraci贸n de base de datos

Las siguientes configuraciones est谩n relacionadas con la base de datos PostgreSQL usada por el Servicio principal de SDP.

- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://usuario:contrase帽a@host:puerto/base_de_datos?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
- `DB_MAX_OPEN_CONNS` - M谩ximo n煤mero de conexiones abiertas por pool a la base de datos. Por defecto: 20.
- `DB_MAX_IDLE_CONNS` - M谩ximo n煤mero de conexiones inactivas mantenidas en el pool. Por defecto: 2.
- `DB_CONN_MAX_IDLE_TIME_SECONDS` - Cierra conexiones inactivas despu茅s de N segundos. Por defecto: 10.
- `DB_CONN_MAX_LIFETIME_SECONDS` - Recicla conexiones despu茅s de N segundos. Por defecto: 300.

### Configuraci贸n de mensajer铆a

La configuraci贸n de mensajer铆a permite configurar el servicio de mensajer铆a usado para enviar mensajes a los destinatarios y a los usuarios del dashboard de SDP. La configuraci贸n predeterminada est谩 establecida en "DRY_RUN", lo que significa que no se enviar谩n mensajes y estos se registrar谩n en la consola. Esto se recomienda solamente para prop贸sitos de prueba.

- `EMAIL_SENDER_TYPE`: El tipo de mensajero usado para enviar invitaciones a nuevos usuarios del dashboard. Opciones: "DRY_RUN", "TWILIO_EMAIL", "AWS_EMAIL". Por defecto: "DRY_RUN".
- `SMS_SENDER_TYPE`: El tipo de mensajero usado para enviar mensajes SMS a los destinatarios. Opciones: "DRY_RUN", "TWILIO_SMS", "TWILIO_WHATSAPP", "AWS_SMS". Por defecto: "DRY_RUN".

#### Configuraci贸n AWS

Las siguientes configuraciones son necesarias cuando se usa AWS SES o SNS para enviar emails o mensajes SMS.

- `AWS_ACCESS_KEY_ID` -  La ID de la clave de acceso de AWS.
- `AWS_REGION` - La regi贸n AWS donde el servicio SES est谩 disponible.
- `AWS_SECRET_ACCESS_KEY` -  La clave secreta de acceso de AWS.
- `AWS_SES_SENDER_ID` - El email que AWS SES usar谩 como remitente al enviar correos electr贸nicos. Requerido cuando `EMAIL_SENDER_TYPE` est谩 configurado a "AWS_EMAIL".
- `AWS_SNS_SENDER_ID` - El ID del remitente para usar al enviar SMS usando AWS SNS. Requerido cuando `SMS_SENDER_TYPE` est谩 configurado a "AWS_SMS".

#### Configuraci贸n Twilio

Las siguientes configuraciones son necesarias cuando `SMS_SENDER_TYPE=TWILIO_SMS`.

- `TWILIO_ACCOUNT_SID` -  El SID de la cuenta Twilio.
- `TWILIO_AUTH_TOKEN` -  El token de autenticaci贸n Twilio.
- `TWILIO_SERVICE_SID` - El SID del servicio Twilio.

Las siguientes configuraciones son necesarias cuando `SMS_SENDER_TYPE=TWILIO_WHATSAPP`.

- `TWILIO_ACCOUNT_SID` -  El SID de la cuenta Twilio.
- `TWILIO_AUTH_TOKEN` -  El token de autenticaci贸n Twilio.
- `TWILIO_SERVICE_SID` - El SID del servicio Twilio.
- `TWILIO_WHATSAPP_FROM_NUMBER` - El n煤mero de empresa WhatsApp usado para enviar mensajes (con prefijo whatsapp:).
- `TWILIO_WHATSAPP_RECEIVER_INVITATION_TEMPLATE_SID` - El SID de contenido Twilio para la plantilla de invitaci贸n WhatsApp del receptor (comienza con HX).
- `TWILIO_WHATSAPP_RECEIVER_OTP_TEMPLATE_SID` - El SID de contenido Twilio para la plantilla OTP WhatsApp del receptor (comienza con HX).

Las siguientes configuraciones son necesarias cuando `EMAIL_SENDER_TYPE=TWILIO_EMAIL`.

- `TWILIO_SENDGRID_API_KEY` -  La clave API para el servicio Twilio SendGrid (correo electr贸nico).
- `TWILIO_SENDGRID_SENDER_ADDRESS` - La direcci贸n de correo electr贸nico usada para enviar emails v铆a Twilio SendGrid.

#### Configuraci贸n general de mensajer铆a

- `MAX_INVITATION_RESEND_ATTEMPTS` - El n煤mero m谩ximo de intentos para reenviar (autom谩ticamente) la invitaci贸n a las Carteras Receptoras. Por defecto: 3.

### Configuraci贸n Stellar

La configuraci贸n Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase contrase帽a de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon para usar al enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `SEP10_SIGNING_PUBLIC_KEY` - La clave p煤blica de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se usa para firmar URLs.
- `SEP10_SIGNING_PRIVATE_KEY` -  La clave privada de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se usa para firmar URLs.
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.
- `SEP10_CLIENT_ATTRIBUTION_REQUIRED` - Determina si se requiere la atribuci贸n del cliente SEP-10. Por defecto: true.

#### Configuraci贸n de cuentas de canal

La siguiente configuraci贸n es necesaria para usar la [CLI de cuentas de canal](./cli-manual#channel-accounts-command) para gestionar cuentas de canal.

- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que empieza con `S`) usada para cifrar/descifrar las claves privadas de las cuentas de canal. Si no se establece, tomar谩 por defecto el valor de `DISTRIBUTION_SEED`.

#### Configuraci贸n de cuentas de distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n usadas para enviar fondos a destinatarios. Esta configuraci贸n debe coincidir con la configuraci贸n en el Servicio principal de SDP.

- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para cifrar/descifrar las claves privadas en memoria de las cuentas de distribuci贸n.
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta anfitri贸n de distribuci贸n Stellar. Usada para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de tenants.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta anfitri贸n de distribuci贸n Stellar. Usada para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de tenants.

### Configuraci贸n de seguridad

La configuraci贸n de seguridad permite configurar los aspectos de seguridad del Servicio principal de SDP.

- `CORS_ALLOWED_ORIGINS` - Especifica los dominios permitidos para hacer solicitudes cross-origin. "_" significa que todos los dominios est谩n permitidos. Los dominios pueden contener comodines, por ejemplo, "https://_.example.com".
- `SEP24_JWT_SECRET` -  El secreto usado para firmar el token JWT para transacciones SEP-24. Este secreto se usa durante el flujo de registro de la cartera receptora.

#### Configuraci贸n de autenticaci贸n del dashboard

Las siguientes configuraciones est谩n relacionadas con la autenticaci贸n y autorizaci贸n de usuarios del dashboard.

- `RESET_TOKEN_EXPIRATION_HOURS` - El tiempo de expiraci贸n en horas del token para restablecer la contrase帽a. Por defecto: 24 (horas).
- `EC256_PUBLIC_KEY` - La clave p煤blica EC256 usada para validar la firma del token. Esta clave EC debe ser al menos tan fuerte como prime256v1 (P-256).
- `EC256_PRIVATE_KEY` -  La clave privada EC256 usada para firmar el token de autenticaci贸n. Esta clave EC debe ser al menos tan fuerte como prime256v1 (P-256).
- `DISABLE_MFA` - Deshabilita la autenticaci贸n multifactor (MFA) para los usuarios del dashboard de SDP.
- `DISABLE_RECAPTCHA` - Deshabilita Google reCAPTCHA v2 para los usuarios del dashboard de SDP. Este flag no afecta el reCAPTCHA usado en el flujo SEP-24.

#### Configuraci贸n Recaptcha

Las siguientes configuraciones son necesarias cuando se usa Google reCAPTCHA v2 para proteger el Servicio principal de SDP contra bots. ReCaptcha se usa tanto para los usuarios del dashboard como para los receptores de fondos durante el flujo SEP-24.

- `RECAPTCHA_SITE_KEY` - La clave del sitio Google reCAPTCHA v2 - No soy un robot.
- `RECAPTCHA_SITE_SECRET_KEY` -  La clave secreta del sitio reCAPTCHA usada para validar las respuestas del reCAPTCHA.

### Configuraci贸n de trabajos en segundo plano

- `SCHEDULER_PAYMENT_JOB_SECONDS`: Intervalo en segundos para el trabajo que sincroniza pagos entre SDP y TSS. El m铆nimo es 5 s.
- `SCHEDULER_RECEIVER_INVITATION_JOB_SECONDS`: Intervalo en segundos para el trabajo que env铆a invitaciones a receptores. El m铆nimo es 5 s.

### Configuraci贸n multi-inquilino

- `ADMIN_ACCOUNT`: El nombre de usuario de la cuenta de administrador usada para autenticar las solicitudes HTTP al servidor Admin. Las solicitudes dirigidas a Admin deben a帽adir el encabezado "Authorization", formateado como Base64 codificado `"ADMIN_ACCOUNT:ADMIN_API_KEY"`.
- `ADMIN_API_KEY`: La clave API de la cuenta de administrador usada para autenticar las solicitudes HTTP al servidor Admin. Las solicitudes dirigidas a Admin deben a帽adir el encabezado "Authorization", formateado como Base64 codificado `"ADMIN_ACCOUNT:ADMIN_API_KEY"`.
- `ADMIN_PORT`: el puerto del servidor Admin usado para crear y gestionar tenants. Por defecto es 8003.
- `INSTANCE_NAME`: el nombre de la instancia SDP que se mostrar谩 en el archivo `stellar.toml`. Ejemplo: "SDP Testnet".
- `SINGLE_TENANT_MODE`: Cuando se establece a `"true"`, activa el modo de un solo inquilino, 煤til para desarrollo local o configuraciones de inquilino 煤nico. Adem谩s de establecerlo en true, necesitar谩s configurar el tenant predeterminado llamando a la solicitud [`POST /tenants/default-tenant`](../api-reference/default-tenant.api.mdx).
- `TENANT_XLM_BOOTSTRAP_AMOUNT`: La cantidad de XLM que la cuenta Stella anfitriona depositar谩 a la cuenta de distribuci贸n del tenant para su inicializaci贸n.

### Configuraci贸n de integraci贸n del bridge

Las siguientes configuraciones son necesarias cuando se usa la integraci贸n del Bridge.

- `ENABLE_BRIDGE_INTEGRATION` - Determina si la integraci贸n del bridge est谩 habilitada.
- `BRIDGE_BASE_URL` - La URL base de la API del bridge. Por defecto: `"https://api.bridge.xyz"`.
- `BRIDGE_API_KEY` -  La clave API para la integraci贸n del bridge. Requerido si `ENABLE_BRIDGE_INTEGRATION` est谩 establecido como true.

## Servicio de env铆o de transacciones (TSS)

Para obtener la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git del backend de stellar-disbursement-platform](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform tss --help
```

</CodeExample>

### Configuraci贸n general

- `QUEUE_POLLING_INTERVAL` - Intervalo de sondeo (segundos) para consultar la base de datos sobre transacciones pendientes para procesar. Por defecto: 6.

### Configuraci贸n operativa

La configuraci贸n operativa permite controlar m茅tricas, registro y otros aspectos operativos del Servicio de env铆o de transacciones (TSS).

- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `TSS_METRICS_PORT` - El puerto en el que el TSS expondr谩 sus m茅tricas. Por defecto: 9002.
- `TSS_METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a usar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  El DSN (clave de cliente) del proyecto Sentry. Si no se proporciona, no se usar谩 Sentry.
- `ENVIRONMENT` - El entorno donde la aplicaci贸n est谩 ejecut谩ndose. Ejemplo: "development", "staging", "production". Por defecto: "development".

### Configuraci贸n de base de datos

Las siguientes configuraciones est谩n relacionadas con la base de datos PostgreSQL usada por el Servicio principal de SDP.

- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://usuario:contrase帽a@host:puerto/base_de_datos?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
- `DB_MAX_OPEN_CONNS` - M谩ximo n煤mero de conexiones abiertas por pool a la base de datos. Por defecto: 20.
- `DB_MAX_IDLE_CONNS` - M谩ximo n煤mero de conexiones inactivas mantenidas en el pool. Por defecto: 2.
- `DB_CONN_MAX_IDLE_TIME_SECONDS` - Cierra conexiones inactivas despu茅s de N segundos. Por defecto: 10.
- `DB_CONN_MAX_LIFETIME_SECONDS` - Recicla conexiones despu茅s de N segundos. Por defecto: 300.

### Configuraci贸n Stellar

La configuraci贸n Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase contrase帽a de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon para usar al enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.

#### Configuraci贸n de cuentas de canal

Las siguientes configuraciones son necesarias para usar cuentas de canal para enviar transacciones a la red Stellar.

- `NUM_CHANNEL_ACCOUNTS` - N煤mero de cuentas de canal a utilizar para el env铆o de transacciones. Por defecto: 2.
- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para cifrar/descifrar las claves privadas de las cuentas de canal. Si no se establece, tomar谩 por defecto el valor de la opci贸n 'DISTRIBUTION_SEED'.

#### Configuraci贸n de cuentas de distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n usadas para enviar fondos a destinatarios. Esta configuraci贸n debe coincidir con la configuraci贸n en el Servicio principal de SDP.

- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para cifrar/descifrar las claves privadas en memoria de las cuentas de distribuci贸n.
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta anfitri贸n de distribuci贸n Stellar. Usada para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de tenants.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta anfitri贸n de distribuci贸n Stellar. Usada para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de tenants.

## Dashboard

El dashboard SDP es una aplicaci贸n web que permite a los usuarios gestionar sus cuentas, ver el historial de transacciones y m谩s. Las variables de entorno pueden establecerse en un objeto global `window._env_` o como variables `process.env`. Todas las variables de entorno usadas en este repositorio est谩n en el archivo `src/constants/envVariables.ts`, incluyendo sus tipos. La ubicaci贸n predeterminada del objeto `window._env_` es `public/settings/env-config.js`.

### Configuraci贸n general

- `API_URL` - La URL base del Servicio principal de SDP. Por defecto: "http://localhost:8000".
- `STELLAR_EXPERT_URL` - La URL base del explorador Stellar Expert. Por defecto: "https://stellar.expert/explorer/testnet".
- `HORIZON_URL` - La URL base del servidor Horizon. Por defecto: "https://horizon-testnet.stellar.org".
- `RECAPTCHA_SITE_KEY` - La clave del sitio Google reCAPTCHA v2 - No soy un robot. Esta clave debe coincidir con la utilizada en el Servicio principal de SDP.
- `SINGLE_TENANT_MODE` - Cuando se establece a `"true"`, activa el modo de un solo inquilino, 煤til para desarrollo local o configuraciones de inquilino 煤nico. Adem谩s de establecerlo en true, necesitar谩s configurar el tenant predeterminado llamando a la solicitud [`POST /tenants/default-tenant`](../api-reference/default-tenant.api.mdx). Por defecto: "false".
