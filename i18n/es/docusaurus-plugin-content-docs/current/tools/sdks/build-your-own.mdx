---
title: Construye tu propio SDK
sidebar_position: 20
---

:::note

Esto es para construir un SDK para escribir contratos inteligentes.

:::

Soroban tiene actualmente un SDK mantenido por SDF para la escritura de contratos en Rust, que se puede encontrar [here][soroban-sdk]. Un SDK mantenido por la comunidad está disponible para la redacción de contratos en AssemblyScript, que se pueden encontrar [here][as-soroban-sdk].

Para construir SDKs para otros idiomas es necesario incluir algunas cosas en el SDK para proporcionar contratos con la base que necesitan para aceptar entradas, decodificarlos, almacenar datos, llamar a otros contratos, etc.

A continuación se muestra una lista de funcionalidades que un Soroban SDK necesita para apoyar estas cosas, así como algunos detalles sobre lo que un SDK puede proporcionar en lo que respecta a las capacidades de prueba.

## Funcionalidad

### Conversiones de valor

- [Val] codificar/decodificar
- [Object] codificar/decodificar
- [Symbol] codificar/decodificar
- [Error] codificar/decodificar

### Funciones de host

Las funciones de host definidas en [env.json] son funciones llamables desde dentro del entorno Wasm Guest . Estos deben estar a disposición de los contratos para llamar, de alguna forma, envueltos idealmente para que los contratos tengan una interfaz más agradable.

Las funciones de host tienen nombres amigables en el archivo anterior, como `get_ledger_version`, Sin embargo, en el Wasm sólo son importables a través de nombres cortos, como `x.4`. La letra que continúa el punto es el módulo, y el valor después del punto es el nombre de la función. Los mapeos están disponibles en env.rs.

### Tipos SDK

Todos los tipos en [soroban-sdk](https://docs.rs/soroban-sdk) deben ser compatibles. Notablemente:

- [Map]
- [Vec]
- [Bytes]

### Tipos definidos por usuario

Los contratos deben ser capaces de crear tipos definidos por el usuario, tales como estructuras, uniones, o enums, y que sean transmitidos al anfitrión para almacenar y transmitir de vuelta para su carga.

Los SDKs hacen esto convirtiendo objetos hacia y desde un `Val`. En la [soroban-sdk] esto se denomina [Val].

#### Estructuras

Las estructuras con campos nombrados deben traducirse a un `Map` con claves como `Symbol`s y los valores como el valor del campo, por ejemplo, `Mapa<Symbol, V>`.

Las estructuras con campos sin nombre deben traducirse a un `Vec` con los valores como los elementos. i.e. `Vec<V>`.

#### Sindicatos

Las uniones (o enums en algunos idiomas) con nombres de variantes y valores de unidad o tuple deben traducirse a un 'Vec' con el primer elemento como 'Symbol' del nombre de la variante, y cero o más elementos adicionales que representan un valor almacenado con la variante.

#### Núm.

Los números con valores enteros deben traducirse a un `u32`.

### Error definido por el usuario

Los errores son valores `u32` que se traducen a un [Error].

### Meta generación de entorno

Los contratos deben contener una sección personalizada de Wasm con el nombre `contractenvmetav0` y conteniendo un [`SCEnvMetaEntry`]. La versión de la interfaz almacenada debe coincidir con la versión de las funciones soportadas.

### Generación de Spec de Contrato

Los contratos deben contener una sección personalizada de Wasm con el nombre `contractspecv0` y que contenga una secuencia serializada de [`SCSpecEntry`]. Debe haber un `SCSpecEntry` para cada función, estructura y unión exportada por el contrato.

### Contrato Meta Generación

Los contratos pueden contener opcionalmente una sección personalizada de Wasm con el nombre `contractmetav0` y conteniendo un [`SCMetaEntry`]. Los contratos pueden almacenar cualquier metadata en las entradas que puedan ser utilizadas por las aplicaciones y herramientas fuera de la red.

## Pruebas

Cualquier SDK Soroban ofrece un entorno de prueba para la ejecución de funciones de contrato en el contexto de un entorno de ejecución Soroban. La [soroban-sdk] lo hace incrustando la biblioteca de Polvo del entorno Soroban, [soroban-env-host].

El entorno de prueba debe incluir:

- Invocando funciones de contrato.
- Pruebas de integración a través de múltiples contratos.

[soroban-sdk]: https://docs.rs/soroban-sdk
[as-soroban-sdk]: https://github.com/Soneso/as-soroban-sdk
[soroban-env-host]: https://github.com/stellar/rs-soroban-env
[val]: https://github.com/stellar/rs-soroban-env/blob/main/soroban-env-common/src/val.rs
[error]: https://github.com/stellar/rs-soroban-env/blob/main/soroban-env-common/src/error.rs
[objeto]: https://github.com/stellar/rs-soroban-env/blob/main/soroban-env-common/src/object.rs
[símbolo]: https://github.com/stellar/rs-soroban-env/blob/main/soroban-env-common/src/symbol.rs
[env.json]: https://github.com/stellar/rs-soroban-env/blob/main/soroban-env-common/env.json
[mapa]: https://github.com/stellar/rs-soroban-sdk/blob/main/soroban-sdk/src/map.rs
[vec]: https://github.com/stellar/rs-soroban-sdk/blob/main/soroban-sdk/src/vec.rs
[bytes]: https://github.com/stellar/rs-soroban-sdk/blob/main/soroban-sdk/src/bytes.rs
[`scenvmetaentry`]: https://github.com/stellar/stellar-xdr/blob/next/Stellar-contract-env-meta.x
[`scspecentry`]: https://github.com/stellar/stellar-xdr/blob/next/Stellar-contract-spec.x
[`scmetaentry`]: https://github.com/stellar/stellar-xdr/blob/next/Stellar-contract-meta.x
