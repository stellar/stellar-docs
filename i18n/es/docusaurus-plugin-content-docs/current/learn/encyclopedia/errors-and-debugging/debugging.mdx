---
sidebar_position: 20
title: Modos de depuración
description: Depurar contratos inteligentes nativamente y como WASM.
---

<head>
  <title>Debug smart contracts nativamente and as WASM.</title>
  <meta charSet="utf-8" />
  <meta
    property="og:title"
    content="Debug smart contracts native and as WASM."
  />
  <meta
    property="og:description"
    content="Compila nativamente contratos inteligentes para pruebas locales o en WASM para despliegue con el fin de depurar."
  />
</head>

Los contratos soroban son los programas regulares de Rust y pueden ser depurados usando las mismas herramientas que usualmente utilizaría.

Las instalaciones de depuración disponibles difieren significativamente dependiendo de si un contrato es compilado nativamente para pruebas locales, o compilado en Wasm para su implementación.

Decidir entre estos dos modos y hacer el máximo de ellos mientras se depura, requiere una **comprensión cuidadosa** de qué código está compilado para implementar contratos y qué código está disponible sólo para pruebas locales.

## Modo de prueba local

Es posible (y alentado durante el desarrollo) compilar los contratos de Soroban **nativamente** (por ejemplo. como código x86-64 o AArch64) y enlaza con el entorno host **directamente**, para que el contrato no sea un huésped ejecutándose en una máquina virtual de Wasm en absoluto: es simplemente una biblioteca nativa que llama a otra -- su host -- y tanto el host como el contrato están vinculados como un único programa, junto con un arnés de prueba.

Esta configuración se conoce como **"modo de prueba local"** y puesto que elimina la máquina virtual Wasm de la experiencia de depuración, tiene muchas ventajas:

- Las pruebas se ejecutan mucho más rápido ya que no hay máquinas virtuales que las interpreten, y se ejecutarán en paralelo por defecto en varios hilos.
- Las pruebas pueden utilizar numerosas técnicas estándar de pruebas y depuración:
  - [El `#[test]`harness](https://doc.rust-lang.org/reference/attributes/testing.html), incluyendo soporte IDE para ejecutar y volver a ejecutar pruebas simples.
  - [Debuggers compatibles con el IDE](https://code.visualstudio.com/docs/languages/rust#_debugging), incluyendo soporte para IDE para establecer puntos de interrupción e inspeccionar valores tanto en el contrato como en el host.
  - Depuración ligera mediante [registro estándar](https://docs.rs/log/latest/log/) o [tracing](https://docs.rs/tracing/latest/tracing/).
  - Pruebas sistemáticas como [fuzzing](https://crates.io/crates/cargo-fuzz), [property-testing](https://crates.io/crates/proptest), o incluso [comprobación de modelos](https://crates.io/crates/kani-verifier) o [verificación formal](https://github.com/xldenis/creusot).
  - El más simple de todos los enfoques de depuración, [imprimir al error estándar](https://doc.rust-lang.org/std/macro.eprintln.html).

El modo de prueba local es la configuración **por defecto** al compilar código dirigido a la CPU y el sistema operativo de tu computadora local que es lo que hará la carga si configuras un nuevo proyecto de Rust y no especificas un objetivo.

## Modo desperdicio

Si por otra parte desea compilar para su despliegue, debe decirle a la carga que construya para el objetivo Wasm.

Building for Wasm will _disable_ many of the debugging facilities described above, typically by one of three motivs:

- La VM Wasm simplemente no puede (o la VM que hemos elegido no) proporcionarlos.
- La máquina virtual Wasm _podría_ proporcionarla, pero hacerlo violaría las restricciones del [contrato Rust dialect](../contract-development/rust-dialect.mdx).
- La máquina virtual Wasm _podría_ proporcionarla, pero hacerlo haría que el código Wasm resultante fuera de gran tamaño.

Mientras animamos a que la mayoría de las pruebas sucedan en modo de prueba local, Obviamente, sólo surgirán algunos problemas en el despliegue y algunas instalaciones de depuración siguen estando disponibles incluso allí:

- Un host "sandbox" con un mock-ledger que puede leer y escribir entradas de ledger `CONTRACT_DATA` en el sistema de ficheros local.
- Un sistema general de registro que permite a los contratos registrar valores del [tipo host/guest "value"](../contract-development/environment-concepts.mdx), incluso en producción.
- Código `Status` extensible por el usuario que puede ser devuelto desde cualquier llamada de contrato para indicar problemas.
