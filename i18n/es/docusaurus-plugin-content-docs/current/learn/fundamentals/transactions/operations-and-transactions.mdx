---
title: Operaciones y transacciones
sidebar_position: 10
---

## Operaciones y transacciones: cómo funcionan

Para realizar acciones con una cuenta en la red Stellar, compone operaciones, empaquetarlos en una transacción, y luego firmar y enviar la transacción a la red. Las transacciones de contrato inteligentes (aquellas con `InvokeHostFunctionOp`, `ExtendFootprintTTLOp`, o las operaciones `RestoreFootprintOp`) solo pueden tener una operación por transacción.

### Operaciones

Las operaciones son comandos individuales que modifican el contador. Las operaciones se utilizan para enviar pagos, invocar una función de contrato inteligente, introducir órdenes en el intercambio descentralizado, cambiar la configuración de las cuentas y autorizar a las cuentas a mantener activos.

Todas las operaciones caen en una de las tres categorías de umbrales: baja, mediana, o alta, y cada categoría de umbral tiene un peso entre 0 y 255 (que puede determinarse usando set_options). Los umbrales determinan qué peso de la firma es necesario para que la operación sea aceptada. Por ejemplo, digamos que una cuenta establece el peso umbral medio a 5. Si la cuenta quiere establecer una línea de confianza con la operación `changeTrust`, el peso de la(s) firma(s) debe ser mayor o igual a 5.

Para obtener más información sobre el peso de la firma, vea la [Enciclopedia de la Enciclopedia Multifirma](../../encyclopedia/security/signnatures-multisig.mdx).

Ver una lista completa de las operaciones estelares y sus umbrales en la [sección Lista de Operaciones](./list-of-operations.mdx).

### Transacciones

La red estelar codifica las transacciones usando un protocolo estandarizado llamado Representación de Datos Externos (XDR). Puedes leer más sobre esto en nuestra [Enciclopedia XDR](../../encyclopedia/data-format/xdr.mdx).

Las cuentas sólo pueden realizar una transacción a la vez.

Las transacciones comprenden un paquete de entre 1-100 operaciones (excepto transacciones de contratos inteligentes, que sólo puede tener una operación por transacción) y se firman y envían al libro principal por las cuentas. Las transacciones siempre necesitan ser autorizadas por la clave pública de la cuenta fuente para ser válidas, que implica firmar el objeto de transacción con la clave secreta asociada a la clave pública. Una transacción más la(s) firma(s) se llama un sobre de transacción.

Una transacción puede necesitar más de una firma - esto sucede si tiene operaciones que afectan a más de una cuenta o si tiene un peso umbral alto. Echa un vistazo a la [Enciclopedia de Enciclopedia de Firma y Multifirma](../../encyclopedia/security/signnatures-multisig.mdx) para más información.

Las transacciones son atómicas. Si una operación en una transacción falla, todas las operaciones fallan, y toda la transacción no se aplica al contador.

Las operaciones se ejecutan para la cuenta de origen de la transacción a menos que se defina una sobreescritura de la operación.

Las transacciones por contrato inteligentes también pasan por un proceso de simulación donde los desarrolladores pueden probar cómo la transacción se ejecutaría en la red usando el endpoint RPC `simulateTransaction`. Lea más en la [documentación de Soroban](/docs/learn/encyclopedia/contract-development/contract-interactions/transaction-simulation.mdx).

#### Atributos de la transacción

- [Fee](../fees-resource-limits-metering.mdx)
- [Lista de operaciones](./list-of-operations.mdx)
- [Lista de firmas](../../encyclopedia/security/signnatures-multisig.mdx)
- [Cuenta muda](../../encyclopedia/transactions-specialized/pooled-accounts-muxed-accounts-memos.mdx)
- [Número de secuencia](../../glossary.mdx#sequence-number)
- [Cuenta fuente](../../glossary.mdx#source-account)
- [Condiciones previas (opcional)](#preconditions)

## Validez de la transacción y la operación

Antes de ser enviado con éxito a la red Stellar, las transacciones pasan por varias comprobaciones de validez. Estos cheques se agrupan en tres categorías:

### Condiciones previas (opcionales) {#preconditions}

Las condiciones previas se comprueban primero.

Todas las condiciones previas son opcionales. Se fomentan los límites temporales, pero las otras condiciones previas se utilizan en circunstancias más especializadas. Puede establecer varias condiciones previas siempre y cuando la combinación sea lógicamente sólida.

#### Límites de tiempo

Válido si está dentro de los límites de tiempo establecidos de la transacción

Los límites de tiempo son una marca de tiempo UNIX opcional (en segundos), determinada por el tiempo del notario, de un límite inferior y superior de cuando una transacción será válida. Si una transacción se envía demasiado pronto o demasiado tarde, fallará al introducirla en el conjunto de transacciones.

La fijación de límites de tiempo en las transacciones es altamente alentada y muchos SDK las aplican.

Si `maxTime` es 0, los límites de tiempo superior no se establecen. En este caso, si una transacción no lo hace a la transacción establecida, se mantiene en memoria y continuamente intenta hacerlo al siguiente conjunto de transacciones. Por esto, aconsejamos que todas las transacciones se creen con límites de tiempo para invalidar las transacciones después de una cierta cantidad de tiempo especialmente si planea volver a enviar su transacción en un momento posterior.

#### Límites del Libro

Válido si está dentro de los límites establecidos de la transacción

Los límites del libro se aplican a los números del libro de notas. Con estas definidas, una transacción sólo será válida para los números de contabilidad que estén dentro del rango determinado.

El límite inferior es inclusivo (menor o igual) mientras que el límite superior no es (sólo mayor que).

Si el límite superior está fijado en 0, esto indica que no hay límite superior.

#### Número mínimo de secuencia

Si se establece un número mínimo de secuencia, la transacción sólo será válida cuando el número de secuencia de su cuenta de origen (llamándolo S) sea lo suficientemente grande. Específicamente, es válido cuando S satisface `minSeqNum <= S < tx.seqNum`.

Si se omite esta precondición, el comportamiento predeterminado se aplica: el número de secuencia de la transacción debe ser exactamente uno mayor que el número de secuencia de la cuenta.

Tenga en cuenta que después de ejecutar una transacción, la cuenta siempre establecerá su número de secuencia al número de secuencia de la transacción.

#### Edad mínima de la secuencia

La transacción es válida después de una duración particular (expresada en segundos) transcurre desde la edad del número de secuencia de la cuenta.

La edad mínima de la secuencia es una condición previa relacionada con el tiempo, pero a diferencia de los límites de tiempo, que expresan tiempos absolutos, la edad mínima de la secuencia es relativa a cuando se tocó el número de secuencia de la cuenta de origen de la transacción.

#### Espacio mínimo del contador de la secuencia

Válido si se envía en una reunión de contabilidad o excede la edad del número de secuencia de la cuenta fuente

Esto es similar a la edad mínima de la secuencia, excepto que se expresa como una serie de contadores en lugar de una duración del tiempo.

#### Firmadores adicionales

Valido si se envía con firmas que cumplen con cada uno de los firmantes adicionales

Una transacción puede especificar hasta dos firmas extra como condición previa, lo que significa que debe tener firmas que correspondan a esos firmas adicionales, incluso si esas firmas no serían requeridas para autorizar la transacción (i. ., por sus fuentes de cuenta u operaciones).

Los firmantes adicionales pueden ser de cualquier tipo además del firmante de transacción preautorizada ya que pre-autoriza una transacción, necesita conocer su hash, pero ser hash debe incluir los signatarios adicionales. Esta relación Catch-22 significa que incluir este tipo de firma extra devolverá un error.

### Validez de la operación

Cuando una transacción se envía a un nodo, el nodo comprueba la validez de cada operación en la transacción antes de intentar incluirla en una transacción candidata. Estas comprobaciones de validez de la operación inicial están destinadas a ser rápidas y sencillas, con controles más intensivos después de que se hayan consumido las tasas. Para que una operación supere esta comprobación de validez, tiene que cumplir las siguientes condiciones:

#### Las firmas en la transacción deben ser válidas para la operación

Las firmas son de firmas válidas para la cuenta de origen de la operación. El peso combinado de todas las firmas para la cuenta de origen de la operación alcanza el umbral para la operación.

#### La operación debe estar bien formada

Normalmente, esto significa comprobar los parámetros de la operación para ver si están en un formato válido. Por ejemplo, sólo se pueden establecer valores positivos para la cantidad de una operación de pago.

#### La operación debe ser válida en la versión actual del protocolo de la red

Las operaciones obsoletas, como la inflación, no son válidas por diseño.

### Validez de la transacción

Por último, se llevan a cabo las siguientes comprobaciones de transacción:

#### Cuenta origen

La cuenta de origen debe existir en el contador.

#### Cuota

La tarifa debe ser mayor o igual a la tarifa mínima de la red por el número de operaciones enviadas como parte de la transacción. Esto no garantiza que la transacción será aplicada, sólo que es válida. Además, la cuenta de origen debe ser capaz de pagar la cuota especificada. Si se presentan múltiples transacciones pero sólo se puede pagar un subconjunto de ellas, se comprueba la validez en orden de número de secuencia.

#### Cargos (si corresponde)

Ver Validez de una [sección de transacciones de bombeo](../../encyclopedia/transactions-specialized/fee-bump-transactions.mdx#validity-of-a-fee-bump-transaction)

#### Número de secuencia

El número de secuencia debe ser uno mayor que el número de secuencia almacenado en la entrada de la cuenta de origen cuando la transacción se aplica a menos que se establezcan las condiciones previas del número de secuencia. Al comprobar la validez de múltiples transacciones con la misma cuenta de origen en un conjunto de transacciones candidatas, todas deben ser transacciones válidas y sus números de secuencia deben ser compensados por uno. Luego son ordenados y aplicados según su número de secuencia.

#### Lista de operaciones

Cada operación debe pasar todas las comprobaciones de validez de una operación, descritas en la sección de Validez de Operación.

#### Lista de firmas

- Cumplir los requisitos de firma para cada operación en la transacción
- La contraseña de red de aprobación es parte del hash de transacción firmado por cada firmante
- El peso combinado de las firmas para la cuenta de origen de la transacción alcanza el umbral bajo para la cuenta de origen.

#### Memo (si aplica)

El tipo de memo debe ser un tipo válido, y el memo mismo debe adherirse al formato del tipo de memo.
