---
title: Ciclo de vida de la transacción
sidebar_position: 30
---

:::note

Este es el ciclo de vida de la transacción para una transacción estelar clásica. Añadir componentes de contrato inteligente a esta sección es actualmente un trabajo en curso.

:::

### 1. Creación (Creador de Transacciones)

Un usuario crea una transacción estableciendo la cuenta de origen, número de secuencia, lista de operaciones y sus respectivos parámetros, honorarios o honorarios, y opcionalmente un memo y/o condiciones previas.

### 2. Firmar (Firmadores de transacciones)

Una vez que la transacción está completa, se convierte en un sobre de transacción que contiene la transacción en sí misma y una lista de firmantes. Todas las firmas requeridas deben ser recogidas y añadidas a la lista de firmantes de la transacción. Comúnmente, es sólo la firma de la cuenta que realiza la transacción, pero las configuraciones más complicadas pueden requerir la recogida de firmas de varias partes.

### 3. Envío (Envío de Transacción)

Después de firmar, la transacción ahora puede ser enviada a la red Stellar. Si la transacción no es válida, será rechazada inmediatamente por Stellar Core, el número de secuencia de la cuenta no se incrementará, y no se consumirá ningún cargo de la cuenta de origen. Múltiples transacciones para la misma cuenta pueden ser enviadas, siempre y cuando cada número de secuencia esté apagado por uno (a menos que se establezcan las condiciones previas del número mínimo de secuencia). Si todas son válidas, Stellar Core creará una transacción establecida con cada una de las transacciones aplicadas en orden de números de secuencia. Las transacciones se envían normalmente usando Horizon, pero también puedes enviar la transacción directamente a una instancia de Stellar Core.

### 4. Propagando (Validador)

Una vez que Stellar Core haya determinado que una transacción es válida, se propagará la transacción a todos los demás servidores a los que está conectado. De esta manera, una transacción válida se inunda a toda la red Stellar.

### 5. Creando una transacción candidata establecida (Validador)

Cuando sea el momento de cerrar el contador, cada validador de Stellar Core toma todas las transacciones válidas de las que es consciente desde el último cierre del libro y las recoge en un conjunto de transacciones candidatas. Si ahora oye hablar de cualquier transacción entrante, los deja a un lado para el próximo libro de notas. Si el número de operaciones en la transacción candidata establecida es mayor que el número máximo de operaciones por mayor, las transacciones serán priorizadas por su cuota de inclusión en el conjunto.

### 6. Nombrando un conjunto de transacciones (Validador)

Una vez que cada validador ha creado un conjunto de transacciones candidatas, el conjunto es nominado a la red.

### 7. El Protocolo de Consenso Estelar (SCP) determina el conjunto final de transacciones (Validator Network)

SCP resuelve cualquier diferencia entre los conjuntos de transacciones candidatas y finalmente determina un único conjunto de transacciones a aplicar, el tiempo de cierre del contador, y cualquier actualización del protocolo que necesite ser aplicada en toda la red en el momento de aplicación.

Si una transacción no lo hace en el conjunto de la transacción se mantiene en la memoria para ser añadido a la siguiente transacción establecida sobre una base de esfuerzo.

Si una transacción se mantiene en la memoria después de que un cierto número de contadores se cierre, será baneado por varios contadores adicionales. Esto significa que durante este tiempo no se intentará incluirlo en una transacción candidata.

### 8. El pedido de aplicación de la transacción se determina (Red de Validadores)

Una vez que SCP está de acuerdo en un conjunto de transacciones en particular, el orden de aplicación se calcula para el conjunto de transacciones. Esto baraja el orden del conjunto para crear incertidumbre para transacciones competitivas y mantiene el orden de números de secuencia para múltiples transacciones por cuenta.

### 9. Se cobran cuotas (Validador)

Las cuotas se cobran para todas las transacciones simultáneamente.

### 10. Aplicación (Validador)

Cada transacción se aplica en el orden previamente determinado. Para cada transacción, el número de secuencia de la cuenta se consume (incrementado en 1), la validez de la transacción se vuelve a comprobar, y cada operación se aplica en el orden que se produce en la transacción. Las operaciones pueden fallar en esta fase debido a errores que pueden ocurrir fuera de las comprobaciones de validez de la transacción y la operación. Por ejemplo, un saldo insuficiente para un pago no se verifica a la hora de presentarlo y fracasaría en este momento. Toda la transacción fallará si cualquier operación falla, y todas las operaciones anteriores se cancelarán.

### 11. Actualizaciones de protocolos (Validador)

Por último, las actualizaciones se ejecutan si tuvo lugar una actualización. Esto puede incluir lógica arbitraria para actualizar el estado del ledger para actualizaciones de protocolo, junto con modificaciones de cabecera del ledger, incluyendo la versión de protocolo, tarifa base, número máximo de operaciones por mayor, etc. Una vez que esto se haya completado, el ciclo de vida comienza de nuevo.
