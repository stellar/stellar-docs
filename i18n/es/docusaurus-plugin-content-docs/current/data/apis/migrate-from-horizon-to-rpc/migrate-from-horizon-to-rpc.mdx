---
title: Migrar de Horizon a RPC
sidebar_position: 100
---

Las aplicaciones que utilizan la [API REST-like de Horizon] necesitarán ser actualizadas para usar la [API JSON-RPC de RPC] al migrar de [Horizon] a [RPC]. Esta guía proporciona una visión general de las principales diferencias entre las dos APIs y cómo migrar tu aplicación.

## Formato de Solicitud / Respuesta

La API REST-like de Horizon utiliza métodos HTTP y códigos de estado para comunicarse con los clientes. Las respuestas son JSON en el formato HAL. Consulta el [Formato de Respuesta de Horizon].

La API JSON-RPC de RPC utiliza JSON-RPC 2.0 para comunicarse con los clientes. Las solicitudes a la API son objetos JSON que contienen una o más invocaciones de métodos. Las respuestas también son objetos JSON que contienen un resultado para cada invocación en la solicitud. Consulta [JSON-RPC].

Ambos formatos utilizan JSON para la estructura general, que es relativamente simple y no requiere ningún código especial del cliente, aunque hay [SDKs] de cliente disponibles. Algunos valores contenidos dentro están codificados en XDR y se pueden decodificar utilizando [SDKs] de Stellar.

## Mapeo de Puntos Finales

Las aplicaciones que utilizan los siguientes puntos finales de Horizon pueden típicamente migrar directamente a RPC usando los métodos referenciados.

Los puntos finales sin mapeos no tienen un reemplazo directo en la API de RPC. Para crear una funcionalidad similar en una aplicación, echa un vistazo a otros productos de [Data].

| Punto Final de Horizon                        | Método RPC                                                          |
| --------------------------------------------- | ------------------------------------------------------------------- |
| [`GET /`]                                     | [`getLatestLedger`] [`getVersionInfo`] [`getHealth`] [`getNetwork`] |
| [`GET /ledgers`]                              | [`getLedgers`]                                                      |
| [`GET /ledgers/{seq}`]                        | [`getLedgers`]                                                      |
| [`GET /ledgers/{seq}/transactions`]           | [`getTransactions`]                                                 |
| [`GET /ledgers/{seq}/operations`]             | [`getTransactions`]                                                 |
| [`GET /ledgers/{seq}/payments`]               | [`getEvents`] [`getTransactions`] ⚠️                                |
| [`GET /ledgers/{seq}/effects`]                | [`getEvents`] [`getTransactions`] ⚠️                                |
| [`POST /transactions`]                        | [`sendTransaction`]                                                 |
| [`POST /transactions_async`]                  | [`sendTransaction`]                                                 |
| [`GET /transactions`]                         | [`getTransactions`]                                                 |
| [`GET /transactions/{hash}`]                  | [`getTransaction`]                                                  |
| [`GET /transactions/{hash}/operations`]       | [`getTransaction`]                                                  |
| [`GET /transactions/{hash}/payments`]         | -                                                                   |
| [`GET /transactions/{hash}/effects`]          | -                                                                   |
| [`GET /operations`]                           | [`getTransactions`]                                                 |
| [`GET /operations/{id}`]                      | -                                                                   |
| [`GET /operations/{id}/effects`]              | -                                                                   |
| [`GET /fee_stats`]                            | [`getFeeStats`] [`simulateTransaction`]                             |
| [`GET /accounts`]                             | -                                                                   |
| [`GET /accounts/{address}`]                   | [`getLedgerEntries`]                                                |
| [`GET /claimable_balances`]                   | -                                                                   |
| [`GET /claimable_balances/{id}`]              | [`getLedgerEntries`]                                                |
| [`GET /claimable_balances/{id}/transactions`] | -                                                                   |
| [`GET /claimable_balances/{id}/operations`]   | -                                                                   |
| [`GET /liquidity_pools`]                      | -                                                                   |
| [`GET /liquidity_pools/{id}`]                 | [`getLedgerEntries`]                                                |
| [`GET /liquidity_pools/{id}/transactions`]    | -                                                                   |
| [`GET /liquidity_pools/{id}/operations`]      | -                                                                   |
| [`GET /liquidity_pools/{id}/effects`]         | -                                                                   |
| [`GET /liquidity_pools/{id}/trades`]          | -                                                                   |
| [`GET /offers`]                               | -                                                                   |
| [`GET /offers/{id}`]                          | [`getLedgerEntries`]                                                |
| [`GET /offers/{id}/trades`]                   | -                                                                   |
| [`GET /payments`]                             | [`getEvents`] [`getTransactions`] ⚠️                                |
| [`GET /effects`]                              | [`getEvents`] [`getTransactions`] ⚠️                                |
| [`GET /trades`]                               | [`getEvents`] [`getTransactions`] ⚠️                                |

:::tip

El método [`getTransactions`] puede utilizarse para recuperar eventos agrupados por transacción. Los eventos están contenidos en el meta XDR de la transacción (campo `resultMetaXdr`).

:::

:::warning

El método [`getEvents`] no es un reemplazo directo para los puntos finales de Horizon.

El método devuelve un flujo de eventos que en el protocolo actual solo incluye eventos de contratos. En un futuro cercano como resultado de [CAP-67], este método se ampliará para incluir eventos de operaciones no contractuales.

Mientras tanto, el método [`getTransactions`] puede utilizarse para recuperar el meta XDR de las transacciones que contienen operaciones no contractuales para determinar qué movimientos de valor han ocurrido. El meta XDR también contiene eventos de contratos.

:::

[CAP-67]: https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md
[Horizon]: ./horizon
[RPC]: ./rpc
[API REST-like de Horizon]: ./horizon/api-reference
[Formato de Respuesta de Horizon]: ./horizon/api-reference/structure/response-format
[API JSON-RPC de RPC]: ./rpc/api-reference
[JSON-RPC]: ./rpc/api-reference/structure/json-rpc
[Data]: ../analytics
[SDKs]: ../../tools/sdks
[`GET /`]: ./horizon/api-reference
[`GET /ledgers`]: ./horizon/api-reference/list-all-ledgers
[`GET /ledgers/{seq}`]: ./horizon/api-reference/retrieve-a-ledger
[`GET /ledgers/{seq}/transactions`]: ./horizon/api-reference/retrieve-a-ledgers-transactions
[`GET /ledgers/{seq}/operations`]: ./horizon/api-reference/retrieve-a-ledgers-operations
[`GET /ledgers/{seq}/payments`]: ./horizon/api-reference/retrieve-a-ledgers-payments
[`GET /ledgers/{seq}/effects`]: ./horizon/api-reference/retrieve-a-ledgers-effects
[`POST /transactions`]: ./horizon/api-reference/submit-a-transaction
[`POST /transactions_async`]: ./horizon/api-reference/submit-async-transaction
[`GET /transactions`]: ./horizon/api-reference/list-all-transactions
[`GET /transactions/{hash}`]: ./horizon/api-reference/retrieve-a-transaction
[`GET /transactions/{hash}/operations`]: ./horizon/api-reference/retrieve-a-transactions-operations
[`GET /transactions/{hash}/payments`]: ./horizon/api-reference/retrieve-a-transactions-payments
[`GET /transactions/{hash}/effects`]: ./horizon/api-reference/retrieve-a-transactions-effects
[`GET /operations`]: ./horizon/api-reference/list-all-operations
[`GET /operations/{id}`]: ./horizon/api-reference/retrieve-an-operation
[`GET /operations/{id}/effects`]: ./horizon/api-reference/retrieve-an-operations-effects
[`GET /fee_stats`]: ./horizon/api-reference
[`GET /accounts`]: ./horizon/api-reference/list-all-accounts
[`GET /accounts/{address}`]: ./horizon/api-reference/retrieve-an-account
[`GET /claimable_balances`]: ./horizon/api-reference/list-all-claimable-balances
[`GET /claimable_balances/{id}`]: ./horizon/api-reference/retrieve-a-claimable-balance
[`GET /claimable_balances/{id}/transactions`]: ./horizon/api-reference/cb-retrieve-related-transactions
[`GET /claimable_balances/{id}/operations`]: ./horizon/api-reference/cb-retrieve-related-operations
[`GET /liquidity_pools`]: ./horizon/api-reference/list-liquidity-pools
[`GET /liquidity_pools/{id}`]: ./horizon/api-reference/retrieve-a-liquidity-pool
[`GET /liquidity_pools/{id}/transactions`]: ./horizon/api-reference/lp-retrieve-related-transactions
[`GET /liquidity_pools/{id}/operations`]: ./horizon/api-reference/lp-retrieve-related-operations
[`GET /liquidity_pools/{id}/effects`]: ./horizon/api-reference/retrieve-related-effects
[`GET /liquidity_pools/{id}/trades`]: ./horizon/api-reference/retrieve-related-trades
[`GET /offers`]: ./horizon/api-reference/get-all-offers
[`GET /offers/{id}`]: ./horizon/api-reference/get-offer-by-offer-id
[`GET /offers/{id}/trades`]: ./horizon/api-reference/get-trades-by-offer-id
[`GET /payments`]: ./horizon/api-reference/list-all-payments
[`GET /effects`]: ./horizon/api-reference/list-all-effects
[`GET /trades`]: ./horizon/api-reference/get-all-trades
[`getLatestLedger`]: ./rpc/api-reference/methods/getLatestLedger
[`getVersionInfo`]: ./rpc/api-reference/methods/getVersionInfo
[`getHealth`]: ./rpc/api-reference/methods/getHealth
[`getNetwork`]: ./rpc/api-reference/methods/getNetwork
[`getLedgers`]: ./rpc/api-reference/methods/getLedgers
[`getTransactions`]: ./rpc/api-reference/methods/getTransactions
[`getTransaction`]: ./rpc/api-reference/methods/getTransaction
[`getEvents`]: ./rpc/api-reference/methods/getEvents
[`sendTransaction`]: ./rpc/api-reference/methods/sendTransaction
[`getFeeStats`]: ./rpc/api-reference/methods/getFeeStats
[`simulateTransaction`]: ./rpc/api-reference/methods/simulateTransaction
[`getLedgerEntries`]: ./rpc/api-reference/methods/getLedgerEntries
