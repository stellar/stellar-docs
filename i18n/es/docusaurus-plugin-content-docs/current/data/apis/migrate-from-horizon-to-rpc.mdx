---
title: Migrar de Horizon a RPC
sidebar_position: 100
hide_table_of_contents: true
---

Las aplicaciones que usan la [API REST-like de Horizon] necesitarán actualizarse para usar la [API JSON-RPC RPC] al migrar de [Horizon] a [RPC]. Esta guía ofrece una visión general de las principales diferencias entre las dos APIs y cómo migrar tu aplicación.

## Formato de solicitud / respuesta

La API tipo REST de Horizon utiliza métodos HTTP y códigos de estado para comunicarse con los clientes. Las respuestas están en formato JSON HAL. Consulta [El formato de respuesta de Horizon].

La API JSON-RPC de RPC utiliza JSON-RPC 2.0 para comunicarse con los clientes. Las solicitudes a la API son objetos JSON que contienen una o más invocaciones de métodos. Las respuestas también son objetos JSON que contienen un resultado para cada invocación en la solicitud. Consulta [JSON-RPC].

Ambos formatos utilizan JSON para la estructura general, son relativamente simples y no requieren código cliente especial, aunque hay [SDKs] cliente disponibles. Algunos valores que contienen están codificados en XDR y pueden decodificarse usando los [SDKs] de Stellar.

## Mapeo de endpoint

Las aplicaciones que utilizan los siguientes endpoints de Horizon normalmente pueden migrar directamente a RPC usando los métodos referenciados.

Los endpoints sin asignaciones no tienen un reemplazo directo en la API RPC. Para crear una funcionalidad similar en una aplicación, considera asociarte con un indexador o usar la información a continuación para crear tu propia representación indexada de los endpoints de Horizon. Considera usar otros productos [Data] para casos de uso analíticos.

| Endpoint de Horizon                           | Método(s) RPC correspondiente(s)                                                      | Equivalente en Indexer                                                                                                                                                                                                                                                | Recursos de análisis                                                                                         |
| --------------------------------------------- | ------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------ |
| [`GET /`]                                     | [`getLatestLedger`] [`getVersionInfo`] [`getHealth`] [`getNetwork`]                   | No aplicable                                                                                                                                                                                                                                                          | [Guía para analistas](../analytics/hubble/analyst-guide/README.mdx)                                          |
| [`GET /ledgers`]                              | [`getLedgers`]                                                                        | Crea un [`getLedgers`] con historial completo, usando [Galexie](../indexers/build-your-own/galexie/README.mdx), para crear una vista histórica del ledger.                                                                                                            | [Ledgers](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#ledgers)                       |
| [`GET /ledgers/{seq}`]                        | [`getLedgers`] (con filtro para secuencia)                                            | Usa una vista [`getLedgers`] con historial completo, filtrada por secuencia del ledger                                                                                                                                                                                | [Ledgers](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#ledgers)                       |
| [`GET /ledgers/{seq}/transactions`]           | [`getTransactions`] (con filtro por secuencia del ledger)                             | Usa [`getTransactions`] con filtro por secuencia del ledger para obtener las transacciones de un ledger específico                                                                                                                                                    | [Transacciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#transactions)            |
| [`GET /ledgers/{seq}/operations`]             | [`getTransactions`]                                                                   | Usa [`getTransactions`] para el ledger dado, luego analiza el XDR de la transacción para operaciones individuales.                                                                                                                                                    | [Operaciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#operations)                |
| [`GET /ledgers/{seq}/payments`]               | [`getEvents`] [`getTransactions`] ⚠️                                                  | Usa [`getEvents`] (específicamente eventos CAP-67 cuando estén disponibles) y analiza el meta XDR de [`getTransactions`] para identificar operaciones parecidas a pagos.                                                                                              | [Pagos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#payments)                        |
| [`GET /ledgers/{seq}/effects`]                | [`getEvents`] [`getTransactions`] ⚠️                                                  | Usa [`getEvents`] (cuando se amplíe para cubrir todos los efectos con CAP-67) y analiza el meta XDR de [`getTransactions`] para obtener datos relevantes.                                                                                                             | [Efectos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#effects)                       |
| [`POST /transactions`]                        | [`sendTransaction`]                                                                   | No aplicable                                                                                                                                                                                                                                                          | No aplicable                                                                                                 |
| [`POST /transactions_async`]                  | [`sendTransaction`]                                                                   | No aplicable                                                                                                                                                                                                                                                          | No aplicable                                                                                                 |
| [`GET /transactions`]                         | [`getTransactions`]                                                                   | Usa [`getTransactions`] para crear una lista histórica de transacciones                                                                                                                                                                                               | [Transacciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#transactions)            |
| [`GET /transactions/{hash}`]                  | [`getTransaction`]                                                                    | Usa getTransaction para recuperar una transacción específica por su hash                                                                                                                                                                                              | [Transacciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#transactions)            |
| [`GET /transactions/{hash}/operations`]       | [`getTransaction`]                                                                    | Filtra [`getTransaction`] por hash y luego analiza su XDR para obtener operaciones                                                                                                                                                                                    | [Operaciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#operations)                |
| [`GET /transactions/{hash}/payments`]         | No existe equivalente directo en RPC; usa [`getEvents`] o analiza [`getTransactions`] | Filtra [`getTransaction`] por hash y analiza sus eventos y tipos de operación para identificar pagos.                                                                                                                                                                 | [Pagos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#payments)                        |
| [`GET /transactions/{hash}/effects`]          | No existe equivalente directo en RPC; usa [`getEvents`] o analiza [`getTransactions`] | Filtra [`getTransaction`] por hash y analiza sus eventos y metadata para obtener datos relevantes.                                                                                                                                                                    | [Efectos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#effects)                       |
| [`GET /operations`]                           | [`getTransactions`]                                                                   | Ingiere todos los ledgers/transacciones históricas y crea y crea una vista de operaciones para filtrar.                                                                                                                                                               | [Operaciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#operations)                |
| [`GET /operations/{id}`]                      | No existe equivalente directo en RPC                                                  | Almacena el ID de operación de Horizon y mapea de vuelta a la secuencia del ledger y al índice de la transacción para recuperar la transacción relevante vía [`getTransactions`].                                                                                     | [Operaciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#operations)                |
| [`GET /operations/{id}/effects`]              | No existe equivalente directo en RPC                                                  | Recupera la operación por ID (como arriba) y luego analiza su transacción asociada y eventos para obtener efectos.                                                                                                                                                    | [Efectos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#effects)                       |
| [`GET /fee_stats`]                            | [`getFeeStats`] [`simulateTransaction`]                                               | Datos indexados no recomendados.                                                                                                                                                                                                                                      | [Estadísticas de tarifas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#fee-stats)     |
| [`GET /accounts`]                             | No existe equivalente directo en RPC                                                  | Ingiere todo el historial de ledger vía [`getLedgers`] para crear y mantener una lista completa de cuentas.                                                                                                                                                           | [Cuentas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#accounts)                      |
| [`GET /accounts/{address}`]                   | [`getLedgerEntries`]                                                                  | Usa [`getLedgerEntries`] para una dirección específica de cuenta. Nota: RPC no proporcionará información de líneas de confianza asociadas con la cuenta directamente, como lo hace Horizon. Necesitarás derivar esta información a partir de las entradas del ledger. | [Cuentas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#accounts)                      |
| [`GET /claimable_balances`]                   | No existe equivalente directo en RPC                                                  | Ingiere todo el historial del ledger vía [`getLedgers`] para crear y mantener una lista completa de saldos reclamables.                                                                                                                                               | [Saldos reclamables](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#claimable-balances) |
| [`GET /claimable_balances/{id}`]              | [`getLedgerEntries`]                                                                  | Usa [`getLedgerEntries`] para recuperar un saldo reclamable específico por ID.                                                                                                                                                                                        | [Saldos reclamables](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#claimable-balances) |
| [`GET /claimable_balances/{id}/transactions`] | No existe equivalente directo en RPC                                                  | Rastrea las transacciones que interactúan con un saldo reclamable específico a partir de sus datos históricos de ledger.                                                                                                                                              | [Saldos reclamables](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#claimable-balances) |
| [`GET /claimable_balances/{id}/operations`]   | No existe equivalente directo en RPC                                                  | Rastrea las operaciones relacionadas con un saldo reclamable específico a partir de los datos históricos del ledger.                                                                                                                                                  | [Saldos reclamables](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#claimable-balances) |
| [`GET /liquidity_pools`]                      | No existe equivalente directo en RPC                                                  | Ingiere todo el historial del ledger vía [`getLedgers`] para crear y mantener una lista completa de fondos de liquidez.                                                                                                                                               | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /liquidity_pools/{id}`]                 | [`getLedgerEntries`]                                                                  | Usa [`getLedgerEntries`] para recuperar un fondo de liquidez específico por ID.                                                                                                                                                                                       | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /liquidity_pools/{id}/transactions`]    | No existe equivalente directo en RPC                                                  | Rastrea las transacciones que interactúan con un fondo de liquidez específico a partir de sus datos históricos de ledger.                                                                                                                                             | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /liquidity_pools/{id}/operations`]      | No existe equivalente directo en RPC                                                  | Rastrea las operaciones relacionadas con un fondo de liquidez específico a partir de los datos históricos del ledger.                                                                                                                                                 | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /liquidity_pools/{id}/effects`]         | No existe equivalente directo en RPC                                                  | Rastrea efectos relacionados con un fondo de liquidez específico a partir de los datos históricos del ledger.                                                                                                                                                         | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /liquidity_pools/{id}/trades`]          | No existe equivalente directo en RPC                                                  | Infiera operaciones relacionadas con un fondo de liquidez específico a partir de los datos históricos del ledger (por ejemplo, de [`getEvents`] y metadatos de [`getTransactions`]).                                                                                  | [Fondos de Liquidez](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#liquidity-pools)    |
| [`GET /offers`]                               | No existe equivalente directo en RPC                                                  | Ingiere todo el historial del ledger vía [`getLedgers`] para crear y mantener una lista completa de ofertas.                                                                                                                                                          | [Ofertas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#offers)                        |
| [`GET /offers/{id}`]                          | [`getLedgerEntries`]                                                                  | Usa [`getLedgerEntries`] para recuperar una oferta específica por ID.                                                                                                                                                                                                 | [Ofertas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#offers)                        |
| [`GET /offers/{id}/trades`]                   | No existe equivalente directo en RPC                                                  | Infiera operaciones relacionadas con una oferta específica a partir de los datos históricos del ledger (por ejemplo, de [`getEvents`] y metadatos de [`getTransactions`]).                                                                                            | [Ofertas](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#offers)                        |
| [`GET /payments`]                             | [`getEvents`] [`getTransactions`] ⚠️                                                  | Usa [`getEvents`] (eventos CAP-67) y procesa metadatos de [`getTransactions`] para operaciones parecidas a pagos a lo largo de toda la historia.                                                                                                                      | [Pagos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#payments)                        |
| [`GET /effects`]                              | [`getEvents`] [`getTransactions`] ⚠️                                                  | Usa [`getEvents`] (cuando se amplíe) y procesa metadatos de [`getTransactions`] para derivar efectos a lo largo de toda la historia.                                                                                                                                  | [Efectos](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#effects)                       |
| [`GET /trades`]                               | [`getEvents`] [`getTransactions`] ⚠️                                                  | Infiera operaciones a partir de metadatos de [`getEvents`] y [`getTransactions`] a lo largo de toda la historia, ya que no existe un "evento de operación" directo en RPC.                                                                                            | [Operaciones](../analytics/hubble/analyst-guide/queries-for-horizon-like-data.mdx#trades)                    |

:::tip

El método [`getTransactions`] puede usarse para recuperar eventos agrupados por transacción. Los eventos están contenidos en el meta XDR de la transacción (campo `resultMetaXdr`).

:::

:::warning

El método [`getEvents`] no es un reemplazo directo de los endpoints de Horizon.

El método devuelve un flujo de eventos que actualmente solo incluye eventos de contratos en el protocolo actual. En un futuro cercano, como resultado de [CAP-67], este método se ampliará para incluir eventos de operaciones no relacionadas con contratos.

Mientras tanto, el método [`getTransactions`] puede usarse para recuperar el meta XDR de transacciones que contienen operaciones no relacionadas con contratos para determinar qué movimientos de valor han ocurrido. El meta XDR también contiene eventos de contratos.

:::

[CAP-67]: https://github.com/stellar/stellar-protocol/blob/master/core/cap-0067.md
[Horizon]: ./horizon/README.mdx
[RPC]: ./rpc/README.mdx
[REST-like API de Horizon]: ./horizon/api-reference/README.mdx
[Formato de respuesta de Horizon]: ./horizon/api-reference/structure/response-format.mdx
[API JSON-RPC RPC]: ./rpc/api-reference/README.mdx
[JSON-RPC]: ./rpc/api-reference/structure/json-rpc.mdx
[Data]: ../analytics/README.mdx
[SDKs]: ../../tools/sdks/README.mdx
[`GET /`]: ./horizon/api-reference/README.mdx
[`GET /ledgers`]: ./horizon/api-reference/list-all-ledgers.api.mdx
[`GET /ledgers/{seq}`]: ./horizon/api-reference/retrieve-a-ledger.api.mdx
[`GET /ledgers/{seq}/transactions`]: ./horizon/api-reference/retrieve-a-ledgers-transactions.api.mdx
[`GET /ledgers/{seq}/operations`]: ./horizon/api-reference/retrieve-a-ledgers-operations.api.mdx
[`GET /ledgers/{seq}/payments`]: ./horizon/api-reference/retrieve-a-ledgers-payments.api.mdx
[`GET /ledgers/{seq}/effects`]: ./horizon/api-reference/retrieve-a-ledgers-effects.api.mdx
[`POST /transactions`]: ./horizon/api-reference/submit-a-transaction.api.mdx
[`POST /transactions_async`]: ./horizon/api-reference/submit-async-transaction.api.mdx
[`GET /transactions`]: ./horizon/api-reference/list-all-transactions.api.mdx
[`GET /transactions/{hash}`]: ./horizon/api-reference/retrieve-a-transaction.api.mdx
[`GET /transactions/{hash}/operations`]: ./horizon/api-reference/retrieve-a-transactions-operations.api.mdx
[`GET /transactions/{hash}/payments`]: ./horizon/api-reference/retrieve-a-transactions-payments.api.mdx
[`GET /transactions/{hash}/effects`]: ./horizon/api-reference/retrieve-a-transactions-effects.api.mdx
[`GET /operations`]: ./horizon/api-reference/list-all-operations.api.mdx
[`GET /operations/{id}`]: ./horizon/api-reference/retrieve-an-operation.api.mdx
[`GET /operations/{id}/effects`]: ./horizon/api-reference/retrieve-an-operations-effects.api.mdx
[`GET /fee_stats`]: ./horizon/api-reference/README.mdx
[`GET /accounts`]: ./horizon/api-reference/list-all-accounts.api.mdx
[`GET /accounts/{address}`]: ./horizon/api-reference/retrieve-an-account.api.mdx
[`GET /claimable_balances`]: ./horizon/api-reference/list-all-claimable-balances.api.mdx
[`GET /claimable_balances/{id}`]: ./horizon/api-reference/retrieve-a-claimable-balance.api.mdx
[`GET /claimable_balances/{id}/transactions`]: ./horizon/api-reference/cb-retrieve-related-transactions.api.mdx
[`GET /claimable_balances/{id}/operations`]: ./horizon/api-reference/cb-retrieve-related-operations.api.mdx
[`GET /liquidity_pools`]: ./horizon/api-reference/list-liquidity-pools.api.mdx
[`GET /liquidity_pools/{id}`]: ./horizon/api-reference/retrieve-a-liquidity-pool.api.mdx
[`GET /liquidity_pools/{id}/transactions`]: ./horizon/api-reference/lp-retrieve-related-transactions.api.mdx
[`GET /liquidity_pools/{id}/operations`]: ./horizon/api-reference/lp-retrieve-related-operations.api.mdx
[`GET /liquidity_pools/{id}/effects`]: ./horizon/api-reference/retrieve-related-effects.api.mdx
[`GET /liquidity_pools/{id}/trades`]: ./horizon/api-reference/retrieve-related-trades.api.mdx
[`GET /offers`]: ./horizon/api-reference/get-all-offers.api.mdx
[`GET /offers/{id}`]: ./horizon/api-reference/get-offer-by-offer-id.api.mdx
[`GET /offers/{id}/trades`]: ./horizon/api-reference/get-trades-by-offer-id.api.mdx
[`GET /payments`]: ./horizon/api-reference/list-all-payments.api.mdx
[`GET /effects`]: ./horizon/api-reference/list-all-effects.api.mdx
[`GET /trades`]: ./horizon/api-reference/get-all-trades.api.mdx
[`getLatestLedger`]: ./rpc/api-reference/methods/getLatestLedger.mdx
[`getVersionInfo`]: ./rpc/api-reference/methods/getVersionInfo.mdx
[`getHealth`]: ./rpc/api-reference/methods/getHealth.mdx
[`getNetwork`]: ./rpc/api-reference/methods/getNetwork.mdx
[`getLedgers`]: ./rpc/api-reference/methods/getLedgers.mdx
[`getTransactions`]: ./rpc/api-reference/methods/getTransactions.mdx
[`getTransaction`]: ./rpc/api-reference/methods/getTransaction.mdx
[`getEvents`]: ./rpc/api-reference/methods/getEvents.mdx
[`sendTransaction`]: ./rpc/api-reference/methods/sendTransaction.mdx
[`getFeeStats`]: ./rpc/api-reference/methods/getFeeStats.mdx
[`simulateTransaction`]: ./rpc/api-reference/methods/simulateTransaction.mdx
[`getLedgerEntries`]: ./rpc/api-reference/methods/getLedgerEntries.mdx
