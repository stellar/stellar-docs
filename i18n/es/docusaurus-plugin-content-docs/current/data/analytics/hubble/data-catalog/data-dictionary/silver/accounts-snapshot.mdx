---
title: Instantánea de Cuentas
sidebar_position: 10
description: ""
---

<div className="scoped-data-dictionary-table">

## Metadatos de la Tabla

| Propiedad             | Configuración                                                                                   |
| --------------------- | ----------------------------------------------------------------------------------------------- |
| Clave Natural         | account_id, valid_from                                                                          |
| Campo(s) de partición | valid_to (partición MENSUAL)                                                                    |
| Campo(s) agrupados    | account_id                                                                                      |
| Documentación         | [dbt docs](http://www.stellar-dbt-docs.com/#!/model/model.stellar_dbt_public.accounts_snapshot) |

## Detalles de Columnas

| Nombre                | Descripción                                                                                                                                                                                                                             | Tipo de Datos | Valores del Dominio                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ¿Requerido? | Notas                                                                                                                                                                                                                                |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| account_id            | El identificador único de la cuenta.                                                                                                                                                                                                    | STRING        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          |                                                                                                                                                                                                                                      |
| balance               | La cantidad de unidades de XLM que posee la cuenta.                                                                                                                                                                                     | FLOAT         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | La tabla `accounts` solo reporta saldos monetarios para XLM. Cualquier otra clase de activo se informa en la tabla `trust_lines`.                                                                                                    |
| buying_liabilities    | La suma de todas las ofertas de compra que posee esta cuenta solo para XLM.                                                                                                                                                             | FLOAT         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | La tabla `accounts` solo reporta saldos monetarios para XLM. Cualquier otra clase de activo se informa en la tabla `trust_lines`. Para ofertas de compra, la cuenta debe poseer la cantidad de activo para completar la transacción. |
| selling_liabilities   | La suma de todas las ofertas de venta que posee esta cuenta solo para XLM.                                                                                                                                                              | FLOAT         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | La tabla `accounts` solo reporta saldos monetarios para XLM. Cualquier otra clase de activo se informa en la tabla `trust_lines`.                                                                                                    |
| sequence_number       | El número de secuencia actual de la cuenta. El número de secuencia controla las operaciones aplicadas a una cuenta. Las operaciones deben enviar un número de secuencia único incrementado en 1.                                        | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Clave Natural. Campo Requerido.                                                                                                                                                                                                      |
| num_subentries        | El número total de entradas ledger vinculadas a esta cuenta. Las entradas ledger incluyen: trustlines, ofertas, signatarios y entradas de datos.                                                                                        | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Cada entrada en un ledger ocupa espacio, que es costoso de almacenar. El saldo mínimo se calcula como (2 + num_subentries - num_sponsoring + num_sponsored) \* 0.5XLM.                                                               |
| inflation_destination | Obsoleto: La dirección de la cuenta para recibir un pago de inflación cuando se desembolsa.                                                                                                                                             | STRING        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | La inflación se discontinuó en 2019 por voto de los validadores.                                                                                                                                                                     |
| flags                 | Indica la habilitación/deshabilitación de ciertos privilegios del emisor del activo.                                                                                                                                                    | INTEGER       | <ul><li>0 - Ninguno, por defecto</li><li>1 - Autenticación requerida (todas las trustlines por defecto no son confiables y requieren establecimiento manual de confianza)</li><li>2 - Autenticación revocable (permite revocar trustlines si la cuenta ya no confía en el activo)</li><li>4 - Autenticación inmutable (todas las flags de autenticación son solo lectura cuando se establecen)</li><li>8 - Autenticación con recuperación habilitada (el activo puede ser recuperado del usuario)</li></ul> | Sí          | Las flags pueden tener valores: 0=Ninguno, 1=Autenticación requerida, 2=Autenticación revocable, 4=Autenticación inmutable, 8=Autenticación con recuperación habilitada.                                                             |
| home_domain           | URL del dominio principal vinculado a la billetera.                                                                                                                                                                                     | STRING        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          |                                                                                                                                                                                                                                      |
| master_weight         | El peso de la clave maestra, que es la llave privada de esta cuenta.                                                                                                                                                                    | INTEGER       | Enteros desde 1 hasta 255                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Sí          | Si la clave maestra = 0, la cuenta está bloqueada.                                                                                                                                                                                   |
| threshold_low         | La suma del peso de todas las firmas requeridas para operaciones de umbral bajo.                                                                                                                                                        | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Bajo: Permitir confianza, establecer flags de trust line, incrementar secuencia, reclamar saldo reclutable.                                                                                                                          |
| threshold_medium      | La suma del peso de todas las firmas requeridas para operaciones de umbral medio.                                                                                                                                                       | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Medio: Todo lo demás.                                                                                                                                                                                                                |
| threshold_high        | La suma del peso de todas las firmas requeridas para operaciones de umbral alto.                                                                                                                                                        | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Alto: Fusión de cuentas, establecer opciones.                                                                                                                                                                                        |
| last_modified_ledger  | El número de secuencia ledger cuando la entrada ledger fue modificada por última vez.                                                                                                                                                   | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Clave Natural. Campo agrupado. La eliminación no cuenta como modificación.                                                                                                                                                           |
| ledger_entry_change   | Código que describe el tipo de cambio aplicado a la entrada ledger.                                                                                                                                                                     | INTEGER       | <ul><li>0 - Entrada ledger creada</li><li>1 - Entrada ledger actualizada</li><li>2 - Entrada ledger eliminada</li><li>3 - Estado de entrada ledger (valor de la entrada)</li></ul>                                                                                                                                                                                                                                                                                                                          | Sí          | Valores: 0=Creada, 1=Actualizada (no válido para saldos reclutables), 2=Eliminada.                                                                                                                                                   |
| deleted               | Indica si la entrada ledger ha sido eliminada.                                                                                                                                                                                          | BOOLEAN       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Una vez eliminada, no puede recuperarse.                                                                                                                                                                                             |
| sponsor               | La dirección de la cuenta del patrocinador que paga las reservas para esta entrada ledger.                                                                                                                                              | STRING        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          | Los patrocinadores pueden ser cuentas, firmantes, saldos reclutables o líneas de confianza.                                                                                                                                          |
| num_sponsored         | El número de reservas patrocinadas para esta cuenta.                                                                                                                                                                                    | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          | Por defecto es 0.                                                                                                                                                                                                                    |
| num_sponsoring        | El número de reservas patrocinadas por esta cuenta.                                                                                                                                                                                     | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          | Por defecto es 0.                                                                                                                                                                                                                    |
| sequence_ledger       | El número ledger sin signo de 32 bits que indica la antigüedad del número de secuencia.                                                                                                                                                 | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          | Refleja la última vez que una cuenta tocó su número de secuencia.                                                                                                                                                                    |
| sequence_time         |                                                                                                                                                                                                                                         | TIMESTAMP     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          |                                                                                                                                                                                                                                      |
| batch_id              | Representación en cadena del id de ejecución para un DAG dado en Airflow. Toma la forma de `scheduled__<batch_end_date>-<dag_alias>`. Los ids de lote son únicos para el lote y ayudan con la supervisión y capacidades de reejecución. | string        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          |                                                                                                                                                                                                                                      |
| batch_run_date        | La fecha de inicio para el intervalo del lote.                                                                                                                                                                                          | DATETIME      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Representa el intervalo de ledgers procesados.                                                                                                                                                                                       |
| closed_at             | Marca de tiempo en UTC cuando este ledger se cerró y confirmó.                                                                                                                                                                          | TIMESTAMP     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Los ledgers cierran aproximadamente cada 5 segundos.                                                                                                                                                                                 |
| ledger_sequence       | El número de secuencia de este ledger.                                                                                                                                                                                                  | INTEGER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Campo agrupado. Único por ledger.                                                                                                                                                                                                    |
| batch_insert_ts       | La marca temporal en UTC cuando un lote de registros se insertó en la base de datos.                                                                                                                                                    | TIMESTAMP     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Útil para ingeniería de datos, no para análisis ad hoc.                                                                                                                                                                              |
| airflow_start_ts      | La marca temporal cuando inicia el trabajo airflow.                                                                                                                                                                                     | STRING        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Se usa para detectar trabajos de llenado histórico.                                                                                                                                                                                  |
| valid_from            | La marca temporal cuando esta fila de imagen fue insertada por primera vez y se volvió efectiva.                                                                                                                                        | TIMESTAMP     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Sí          | Ayuda a rastrear cambios en el tiempo.                                                                                                                                                                                               |
| valid_to              | La marca temporal cuando esta fila deja de ser válida.                                                                                                                                                                                  | TIMESTAMP     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No          | Si es nulo, la configuración está actualmente activa.                                                                                                                                                                                |

## Ejemplos de Preguntas Comerciales

1. Consulta en un punto en el tiempo (saldo al momento)

```sql
SELECT account_id, balance
FROM `crypto-stellar.snapshots.accounts_snapshot`
WHERE account_id = 'ACC123'
  DATE('2025-01-15') BETWEEN DATE(valid_from) AND COALESCE(DATE(valid_to), '9999-12-31')
LIMIT 100
```

2. Instantánea activa (solo registros actuales)

```sql
SELECT account_id, balance, home_domain
FROM `crypto-stellar.snapshots.accounts_snapshot`
WHERE valid_to IS NULL
LIMIT 100
```

3. Cambios en febrero de 2025 (poda de particiones)

```sql
SELECT account_id, COUNT(*) AS num_changes
FROM `crypto-stellar.snapshots.accounts_snapshot`
WHERE DATE_TRUNC(valid_to, MONTH) = '2025-02-01'
GROUP BY account_id
LIMIT 100
```

</div>
