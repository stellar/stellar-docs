---
title: Imagen de Trustlines Snapshot
sidebar_position: 10
description: ""
---

<div className="scoped-data-dictionary-table">

## Metadatos de la tabla

| Propiedad             | Configuración                                                                                     |
| --------------------- | ------------------------------------------------------------------------------------------------- |
| Llave(s) Natural(es)  | account_id, asset_type, asset_issuer, asset_code, liquidity_pool_id, valid_from                   |
| Campo(s) de partición | valid_to (partición MENSUAL)                                                                      |
| Campo(s) agrupado(s)  | account_id, asset_id                                                                              |
| Documentación         | [dbt docs](http://www.stellar-dbt-docs.com/#!/model/model.stellar_dbt_public.trustlines_snapshot) |

## Detalles de columnas

| Nombre               | Descripción                                                                                                                                                                                                                                         | Tipo de dato | Valores del dominio                                                                                                                                                                                   | ¿Requerido? | Notas                                                                |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | -------------------------------------------------------------------- |
| ledger_key           | Llave única de ledger cuando el estado de la trustline cambió por última vez.                                                                                                                                                                       | STRING       |                                                                                                                                                                                                       | Sí          | Llave natural.                                                       |
| account_id           | Identificador único de la cuenta.                                                                                                                                                                                                                   | STRING       |                                                                                                                                                                                                       | Sí          |                                                                      |
| asset_type           | Tipo de código de activo: alfanumérico de 4 caracteres, 12 caracteres, o `native` (XLM).                                                                                                                                                            | STRING       | <ul><li>credit_alphanum4</li><li>credit_alphanum12</li><li>native</li></ul>                                                                                                                           | Sí          | XLM no tiene emisor ni código de activo, se muestra como `native`.   |
| asset_issuer         | Dirección de cuenta del emisor original del activo.                                                                                                                                                                                                 | STRING       |                                                                                                                                                                                                       | No          |                                                                      |
| asset_code           | Código de 4 o 12 caracteres del activo.                                                                                                                                                                                                             | STRING       |                                                                                                                                                                                                       | No          | La unicidad del activo = `código + emisor + tipo`.                   |
| asset_id             | Identificador codificado del activo.                                                                                                                                                                                                                | INTEGER      |                                                                                                                                                                                                       | No          | Derivado de código de activo + emisor + tipo.                        |
| liquidity_pool_id    | Identificador único para un liquidity pool.                                                                                                                                                                                                         | STRING       |                                                                                                                                                                                                       | Sí          | Llave natural. Campo agrupado.                                       |
| balance              | Número de unidades del activo que posee esta cuenta.                                                                                                                                                                                                | FLOAT        |                                                                                                                                                                                                       | Sí          |                                                                      |
| trust_line_limit     | Cantidad máxima de este activo que la cuenta acepta.                                                                                                                                                                                                | INTEGER      |                                                                                                                                                                                                       | Sí          | Establecido al abrir la trustline.                                   |
| buying_liabilities   | Suma de las ofertas de compra poseídas por esta cuenta (solo XLM).                                                                                                                                                                                  | FLOAT        |                                                                                                                                                                                                       | Sí          | Otros activos reportados en `trust_lines`.                           |
| selling_liabilities  | Suma de las ofertas de venta poseídas por esta cuenta (solo XLM).                                                                                                                                                                                   | FLOAT        |                                                                                                                                                                                                       | Sí          | Otros activos reportados en `trust_lines`.                           |
| flags                | Flags de privilegios del emisor aplicados al activo.                                                                                                                                                                                                | INTEGER      | <ul><li>0 - Ninguno, por defecto</li><li>1 - Autorizado</li><li>2 - Autorizado para mantener pasivos</li><li>4 - Clawback habilitado</li></ul>                                                        | Sí          | Los flags provienen de la cuenta del emisor.                         |
| last_modified_ledger | Número de secuencia del ledger cuando la entrada fue modificada por última vez.                                                                                                                                                                     | INTEGER      |                                                                                                                                                                                                       | Sí          | Llave natural. Campo agrupado. No es un proxy para eliminación.      |
| ledger_entry_change  | Código para el tipo de cambio de la entrada del ledger.                                                                                                                                                                                             | INTEGER      | <ul><li>0 - Entrada del Ledger creada</li><li>1 - Entrada del Ledger actualizada</li><li>2 - Entrada del Ledger eliminada</li><li>3 - Estado de la entrada del Ledger (valor de la entrada)</li></ul> | Sí          | Algunas entradas del ledger no pueden actualizarse.                  |
| deleted              | Indica si la entrada del ledger fue eliminada.                                                                                                                                                                                                      | BOOLEAN      | true, false                                                                                                                                                                                           | Sí          | Las entradas eliminadas permanecen en el historial.                  |
| sponsor              | Cuenta que paga las reservas por esta entrada del ledger.                                                                                                                                                                                           | STRING       |                                                                                                                                                                                                       | No          | Puede patrocinar cuentas, firmantes, saldos reclamables, trustlines. |
| batch_id             | Representación en cadena del ID de ejecución para un DAG determinado en Airflow. Toma la forma de `scheduled__<batch_end_date>-<dag_alias>`. Los IDs de batch son únicos para el batch y ayudan con la monitorización y capacidades de reejecución. | string       |                                                                                                                                                                                                       | Sí          |                                                                      |
| batch_run_date       | Fecha de inicio del intervalo del batch.                                                                                                                                                                                                            | DATETIME     |                                                                                                                                                                                                       | Sí          | Proxy para `closed_at`.                                              |
| closed_at            | Marca temporal del cierre del ledger en UTC.                                                                                                                                                                                                        | TIMESTAMP    |                                                                                                                                                                                                       | Sí          | Los ledgers cierran aproximadamente cada 5 segundos.                 |
| ledger_sequence      | Número de secuencia de este ledger.                                                                                                                                                                                                                 | INTEGER      |                                                                                                                                                                                                       | Sí          | Campo agrupado. Único, incrementa por cada ledger.                   |
| batch_insert_ts      | Marca temporal UTC cuando se insertó el lote de registros.                                                                                                                                                                                          | TIMESTAMP    |                                                                                                                                                                                                       | Sí          | Solo para análisis de ingeniería / reejecución.                      |
| airflow_start_ts     | Marca temporal de inicio de tarea de Airflow.                                                                                                                                                                                                       | STRING       |                                                                                                                                                                                                       | Sí          |                                                                      |
| valid_from           | Marca temporal cuando la fila se volvió efectiva.                                                                                                                                                                                                   | TIMESTAMP    |                                                                                                                                                                                                       | Sí          | Rastrea cambios históricos.                                          |
| valid_to             | Marca temporal cuando la fila ya no es válida.                                                                                                                                                                                                      | TIMESTAMP    |                                                                                                                                                                                                       | No          | Nulo = actualmente activo.                                           |

## Ejemplos de preguntas de negocio

1. ¿Cuál era el saldo de las trustlines de cada cuenta en una fecha dada?

```sql
SELECT
  account_id,
  asset_code,
  asset_issuer,
  balance
FROM `crypto-stellar.snapshots.trustlines_snapshot`
WHERE DATE(valid_from) <= DATE('2025-01-15')
  AND (DATE(valid_to) > DATE('2025-01-15') OR valid_to IS NULL)
  AND deleted = FALSE
  AND liquidity_pool_id = ''
LIMIT 100;
```

</div>
