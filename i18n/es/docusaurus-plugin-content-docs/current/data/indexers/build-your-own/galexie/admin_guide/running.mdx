---
title: Ejecutando
sidebar_position: 40
---

# Ejecutando

Con la imagen de Docker disponible y el archivo de configuración configurado, ahora estás listo para ejecutar Galexie y comenzar a exportar datos del ledger de Stellar al bucket de GCS.

## Uso de la Línea de Comandos

### Comando Append

Esta es la forma principal de ejecutar Galexie. El comando `append` opera en dos modos distintos:

- En modo continuo/infinito, comienza a exportar desde el ledger de inicio especificado y exporta continuamente nuevos ledgers que aparecen en la red hasta que el proceso sea interrumpido.
- En modo de rango fijo, exporta el rango especificado de ledgers y sale cuando ha terminado.

Sintaxis:

```shell
stellar-galexie append --start <start_ledger> [--end <end_ledger>] [--config-file <config_file>]
```

Argumentos:

`--start <start_ledger>` (requerido)

- El número de secuencia del ledger de inicio del rango que se está exportando.

`--end <end_ledger>` (opcional)

- El número de secuencia del ledger de fin del rango que se está exportando. Si no se especifica o se establece en 0, el exportador exportará continuamente nuevos ledgers a medida que aparezcan en la red.

`--config-file <config_file_path>` (opcional)

- La ruta al archivo de configuración. Si no se especifica, la aplicación buscará un archivo llamado `config.toml` en el directorio actual.

Ejemplo de uso:

```shell
docker run --platform linux/amd64 -d \
-v "$HOME/.config/gcloud/application_default_credentials.json":/.config/gcp/credentials.json:ro \
-e GOOGLE_APPLICATION_CREDENTIALS=/.config/gcp/credentials.json \
-v ${PWD}/config.toml:/config.toml \
stellar/stellar-galexie \
append --start 350000 --end 450000 --config-file config.toml
```

`--platform linux/amd64`

- Especifica la arquitectura de la plataforma (ajusta si es necesario para tu sistema).

`-v` Monta volúmenes para mapear tus credenciales locales de GCP y el archivo config.toml en el contenedor:

- `$HOME/.config/gcloud/application_default_credentials.json`: Tu archivo de credenciales locales de GCP.
- `${PWD}/config.toml`: Tu archivo de configuración local.

`-e GOOGLE_APPLICATION_CREDENTIALS=/.config/gcp/credentials.json`

- Establece la variable de entorno para credenciales dentro del contenedor.

`stellar/stellar-galexie`

- El nombre de la imagen de Docker.

#### Integridad de los Datos y Reanudación:

El comando append mantiene una estricta integridad secuencial dentro de cada sesión de exportación. Si se interrumpe y luego se reinicia con el mismo rango, automáticamente reanuda desde donde se detuvo antes de la interrupción, asegurando que no se pierda ningún ledger dentro de una sesión.

### Comando Scan-and-fill

El comando `scan-and-fill` es útil en casos donde hay huecos en los ledgers exportados en el lago de datos. El comando funciona escaneando todos los ledgers en el rango especificado, identificando los ledgers faltantes y exportando solo los ledgers que faltan mientras omite los ledgers existentes en el lago de datos.

El comando append asegura que no haya huecos en el rango exportado. Sin embargo, los huecos pueden ocurrir en el lago de datos debido a ciertos eventos, a menudo debido a intervención del usuario, como:

- Eliminación manual de ledgers del lago de datos. Por ejemplo, eliminar los ledgers 80-90 del rango 1-100.
- Ejecutando rangos de exportación no contiguos. Por ejemplo, exportando los rangos 1-50 y 60-100, dejando un hueco entre 50-60. En este caso, ejecutar el comando `append` con el rango 1-500 hace que Galexie reanude la exportación desde 101, sin llenar el hueco.

Sintaxis:

```shell
stellar-galexie scan-and-fill --start <start_ledger> --end <end_ledger> [--config-file <config_file>]
```

Argumentos:

`--start <start_ledger>` (requerido)

- El número de secuencia del ledger de inicio del rango que se está exportando.

`--end <end_ledger>` (requerido)

- El número de secuencia del ledger de fin del rango que se está exportando.

`--config-file <config_file_path>` (opcional):

- La ruta al archivo de configuración. Si no se especifica, el exportador buscará un archivo llamado “config.toml” en el directorio actual.

Ejemplo de uso:

```shell
docker run --platform linux/amd64 -d \
-v "$HOME/.config/gcloud/application_default_credentials.json":/.config/gcp/credentials.json:ro \
-e GOOGLE_APPLICATION_CREDENTIALS=/.config/gcp/credentials.json \
-v ${PWD}/config.toml:/config.toml \
stellar/stellar-galexie \
scan-and-fill --start 64000 --end 68000 --config-file config.toml
```
