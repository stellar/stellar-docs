---
title: Monitoreo
sidebar_position: 50
---

# Monitoreo

### Métricas

Galexie publica métricas a través de un punto final administrativo basado en HTTP, lo que facilita la supervisión de su rendimiento. Este punto final se puede configurar en el archivo `config.toml`, donde puedes especificar el puerto en el que se ponen a disposición las métricas. Los datos se exponen en formato Prometheus, lo que permite una fácil integración con los sistemas de monitoreo y alerta existentes.

El puerto administrativo se puede configurar en el archivo `config.toml` estableciendo la variable `admin_port`. Por defecto, el `admin_port` está configurado en `6061`

```toml
# Admin port configuration
# Specifies the port for hosting the HTTP service that publishes metrics.
admin_port = 6061
```

Con esta configuración, la URL para acceder al punto final de métricas será:

```
http://<host>:6061/metrics
```

Galexie emite varias métricas específicas de la aplicación para ayudar a rastrear el proceso de exportación:

- `galexie_last_exported_ledger`: El número de secuencia del ledger exportado más recientemente.
- `galexie_uploader_put_duration_seconds`: El tiempo tomado para cargar objetos al lago de datos.
- `galexie_uploader_object_size_bytes`: Tamaños comprimidos y no comprimidos de los objetos que se están subiendo.
- `galexie_upload_queue_length`: Número de objetos actualmente en cola y esperando para ser subidos.

Además de estas métricas específicas de la aplicación, Galexie también exporta métricas del sistema (por ejemplo, CPU, memoria, descriptores de archivo abiertos) y métricas de ingestión de Stellar Core como `galexie_ingest_ledger_fetch_duration_seconds`

Utiliza estas métricas para crear consultas que monitoreen el rendimiento y el proceso de exportación de Galexie. Aquí hay varias ejemplos de consultas útiles:

- Tiempos de Exportación: Consulta `galexie_uploader_put_duration_seconds` para monitorear los tiempos de carga promedio.
- Longitud de la Cola: Utiliza `galexie_upload_queue_length` para ver el número de objetos esperando ser subidos.
- Último Ledger Exportado: Realiza un seguimiento de `galexie_last_exported_ledger` para asegurarte de que las exportaciones de ledger estén actualizadas.

Para un inicio rápido, descarga nuestro tablero preconstruido de Grafana para Galexie [aquí](https://grafana.com/grafana/dashboards/22285-stellar-galexie/). Este tablero proporciona consultas y visualizaciones preconfiguradas para ayudarte a monitorear la salud de Galexie. Puedes personalizarlo para adaptarlo a tus necesidades específicas.

### Registro

Galexie emite logs a stdout y genera una línea de log para cada objeto que se exporta para ayudar a monitorear el progreso.

Ejemplo de logs:

```
INFO[2024-11-07T17:40:37.795-08:00] Uploading: FFFFFF37--200-299/FFFFFF37--200.xdr.zstd  pid=98734 service=galexie
INFO[2024-11-07T17:40:37.892-08:00] Uploaded FFFFFF37--200-299/FFFFFF37--200.xdr.zstd successfully  pid=98734 service=galexie
```
