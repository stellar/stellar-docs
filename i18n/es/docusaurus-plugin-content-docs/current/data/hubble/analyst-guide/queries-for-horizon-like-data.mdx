---
title: Consultas para datos tipo Horizon/RPC
sidebar_position: 50
---

[Horizon](../../horizon/README.mdx) y [RPC](../../rpc/README.mdx) ambos proporcionan endpoints API para recuperar datos de la red Stellar. Las siguientes consultas de ejemplo recuperan los mismos datos usando Hubble con el beneficio añadido de poder devolver datos históricos.

## Cuentas

[horizon/cuentas](../../horizon/api-reference/resources/accounts/README.mdx)

Los usuarios interactúan con la red Stellar a través de las cuentas. Todo lo demás en el contable —activos, ofertas, líneas de confianza, etc.—son propiedad de cuentas y las cuentas deben autorizar todos los cambios en el contable mediante transacciones firmadas.

Más información sobre [accounts](../../../learn/glossary.mdx#account).

### Información general de la cuenta y saldo XLM

```sql
select
  account_id
  , sequence_number como secuencia
  , sequence_ledger
  , sequence_time
  , num_subentradas
  , home_domain
  , last_modified_ledger
  , balance
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_estelar. ccounts`
donde true
  -- parámetro de cuenta_id equivalente
  y account_id=<account_id>
  -- filtra al rango específico de fecha o fecha
  y batch_run_date entre '2024-01-01' y '2024-01-02'
órdenes por desc cerrado
```

### Información de saldo de activos no XLM

```sql
select
  account_id
  , asset_code
  , asset_issuer
  , asset_type
  , balance
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. rust_lines`
donde true
  -- parámetro de account_id equivalente
  y account_id=<account_id>
  -- filtra al rango específico de fecha o fecha
  y batch_run_date entre '2024-01-01' y '2024-01-02'
órdenes por desc cerrado
```

### Información del firmante de cuenta

```sql
selecciona
  cuenta_id
  , signer
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. ccount_signers`
donde true
  -- parámetro account_id equivalente
  y account_id=<account_id>
  -- filtra al rango específico de fecha o fecha
  y batch_run_date entre '2024-01-01' y '2024-01-02'
orden por desc cerrado
```

### Listar todas las cuentas

```sql
selecciona
  account_id
de `crypto-stellar.crypto_stellar_dbt.accounts_current`
donde true
-- el límite no reduce la cantidad de datos que consulta BigQuery
límite 1000
```

### Recuperar las transacciones de una cuenta

```sql
select
  id
  , transaction_hash
  , ledger_sequence
  , operation_count
  , con éxito
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_estelar. istory_transactions`
donde true
  -- parámetro de cuenta_id equivalente
  y cuenta=<account_id>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_at >= timestamp(current_date)
-- el límite no reduce la cantidad de datos BigQuery queries
límite 1000
```

### Recuperar las operaciones de una cuenta

```sql
select
  op_account_id
  , op_id
  , type_string
  , ledger_sequence
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_stellar_dbt. nriched_history_operations`
donde true
  -- equivalente account_id parámetro
  y op_account_id=<account_id>
  -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y closed_at >= timestamp(current_date)
-- límite no reduce la cantidad de consultas BigQuery
límite 1000
```

### Recuperar los pagos de una cuenta

```sql
select
  op_account_id
  , transaction_id
  , transaction_hash
  , op_id
  , ledger_sequence
  , `from`
  , `to`
  , asset_code
  , asset_issuer
  , asset_type
  , cantidad
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt. nriched_history_operations`
donde true
  -- parámetro de account_id equivalente
  y op_account_id=<account_id>
  y escribe (0, 1, 2, 13, 8) -- crear_cuenta, pago, path_payment_strict_recieve, path_payment_strict_send, and account_merge
  -- highly recommended to provide a date range to reduce amount of data queried
  and closed_at >= timestamp(current_date)
-- limit does not reduce the amount of data BigQuery queries
limit 1000
```

### Recuperar los efectos de una cuenta

```sql
select
  eho.op_account_id
  , he.operation_id
  , eho.type_string
  , él. etails.asset_code
  , he.details.asset_issuer
  , he.details.asset_type
  , él. etails.amount
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar.history_effects` como él
  interno unirse a `crypto-stellar.crypto_stellar_dbt. nriched_history_operations` as eho
    on he.operation_id = eho.op_id
    y eho. losed_at >= timestamp(current_date)
donde true
  -- parámetro de cuenta_id equivalente
  y op_account_id=<account_id>
  -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y él. losed_at >= timestamp(current_date)
-- el límite no reduce la cantidad de datos BigQuery queries
limit 1000
```

### Recuperar ofertas de una cuenta

```sql
select
  seller_id
  , offer_id
  , selling_asset_code
  , buying_asset_code
  , cantidad
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_stellar_dbt.offers_current`
donde true
  -- parámetro de account_id equivalente
  y seller_id=<account_id>
```

### Recuperar las operaciones de una cuenta

```sql
con selling_side como (
  seleccione
    selling_account_address como account_id
    , history_operation_id
    , selling_asset_code
    , buying_asset_code
    , selling_amount as amount
    -- por favor vea el esquema de tabla para más columnas y datos disponibles
  de `crypto-stellar. rypto_estelar. istory_trades`
  donde true
    -- parámetro de account_id equivalente
    y selling_account_address=<account_id>
    -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos consultados
    y batch_run_date >= current_date
),
buying_side as (
  select
    buying_account_address as account_id
    , history_operation_id
    , selling_asset_code
    , comprando_asset_code
    , buying_amount como cantidad
    -- por favor vea el esquema de tabla para más columnas y datos disponibles
  de `crypto-stellar. rypto_estelar. istory_trades`
  donde true
    -- parámetro de cuenta_id equivalente
    y buying_account_address=<account_id>
    -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos solicitados
    y batch_run_date >= current_date
),
union_data como (
  select
    account_id
    , history_operation_id
    , selling_asset_code
    , comprando_valor_código
    , cantidad
  del lado de venta
  unión todos
  seleccione
    account_id
    , history_operation_id
    , selling_asset_code
    , comprando_asset_code
    cantidad
  de compra_lado
)

seleccione * de union_data
```

## Activos

[horizon/activos](../../horizon/api-reference/resources/assets/README.mdx)

Los activos son representaciones del valor emitido en la red Stellar. Un activo consiste en un tipo, código y emisor.

Más información sobre [assets](../../../learn/glossary.mdx#asset).

### Listar todos los recursos

```sql
con activos como (
  seleccione
    asset_code
    , asset_issuer
    -- por favor vea el esquema de tabla para más columnas y datos disponibles
  de `crypto-stellar. rypto_estelar. istory_assets`
  donde verdadero
    -- parámetros equivalentes asset_code/asset_issuer
    y asset_code=<asset code>
    y asset_issuer=<asset issuer>
),
cuentas como (
  seleccione
    count(ac. ccount_id) como num_cuentas
    , provincia(ac. lags=1) as authorized_accounts
    , sum(balance) as amount
  from assets
    join `crypto-stellar. rypto_stellar_dbt.trust_lines_current` como ac
      en assets.asset_code = ac.asset_code
      y assets.asset_issuer = ac. sset_emisor
  donde verdadero
),
piscinas de liquididad como (
  seleccione
    cuenta(*) como num_liquidity_pools
    , suma(lpc. sset_a_amount) como liquididada_pools_amount
  de los activos
    únase a `crypto-stellar.crypto_stellar_dbt. iquidity_pools_current` como lpc
      en assets.asset_code = lpc.asset_a_code
      y assets.asset_issuer = lpc. sset_a_emisor
  donde verdadero
),
current_claimable_balances como (
  -- TODO: Esto debería ser sustituido por la tabla claimable_balances_current cuando esté disponible
  SELECT
    cb. alance_id
    , cb.asset_code
    , cb.asset_issuer
    , cb. sset_amount
    , cb.deleted
    , cb. ast_modified_ledger
    , row_number() over(particin por cb.balance_id, cb.asset_code, cb. sset_issuer order by last_modified_ledger desc, deleted desc) as rn
  FROM assets
    join `crypto-stellar. rypto_stellar.claimable_balances` como cb
      en activos. sset_code = cb.asset_code
      y assets.asset_issuer = cb. sset_issuer
  donde verdadero
  orden por last_modified_ledger asc
),
claimable_balances como (
seleccione
    count(*) como num_claimable_balances
    , suma(asset_amount) como claimable_balances_amount
  de current_claimable_balances
  donde verdadero
    y rn = 1
    y eliminado = false
)

seleccione
  *
de los activos
  unir cuentas en verdadero
  unir liquidity_pools en true
  unir claimable_balances en true
```

### Obtener información del contrato de activos estelar para un activo

```sql
select
  count(balance_holder) as num_contracts
  , suma(parse_big)[video] (balance)) * .0000001 as contracts_amount
from `crypto-stellar. rypto_stellar_dbt.contract_data_current`
donde verdadero
  y contract_id = <SAC contract id>
  y balance != ""
```

## Saldos reclamables

[horizon/claimable_balances](../../horizon/api-reference/resources/claimablebalances/README.mdx)

Un Balance Claimable representa la transferencia de la propiedad de algún importe de un activo. Los saldos admisibles proporcionan un mecanismo para establecer un pago que se puede reclamar en el futuro. Esto le permite realizar pagos a cuentas que actualmente no son capaces de aceptarlas.

### Listar todos los saldos reclamables

```sql
current_claimable_balances como (
  -- TODO: Esto debería reemplazarse con la tabla claimable_balances_current cuando esté disponible
  seleccione
    balance_id
    , asset_code
    , asset_issuer
    , asset_amount
    , borrado
    , last_modified_ledger
    -- por favor vea el esquema de tabla para más columnas disponibles y datos
    , row_number() sobre(partición por balance_id, asset_code, asset_issuer orden por last_modified_ledger desc, descripción eliminada) como rn
  de `crypto-stellar. rypto_estelar. laimable_balances` como cb
  donde true
    -- equivalentes parámetros asset_code/asset_issuer
    y asset_code=<asset code>
    y asset_issuer=<asset issuer>
  pedidos por last_modified_ledger asc
)
select
  *
de current_claimable_balances
donde true
  y rn = 1
  y eliminado = false
  -- otros filtros para sponsor y reclamantes
  --y sponsor = <sponsor address>
  --y reclamantes. estación = <account address>
```

### Recuperar un saldo reclamable

```sql
con activos como (
  -- Utilizado para filtrar a un activo específico
  seleccione
    asset_code
    , asset_issuer
  de `crypto-stellar. rypto_estelar. istory_assets`
  donde verdadero
    -- parámetros equivalentes asset_code/asset_issuer
    y asset_code=<asset code>
    y asset_issuer=<asset issuer>
),
current_claimable_balances como (
  -- TODO: Esto debería ser reemplazado con la tabla actual de claimable_balances_when available
  select
    cb. alance_id
    , cb.asset_code
    , cb.asset_issuer
    , cb. sset_amount
    , cb.deleted
    , cb. ast_modified_ledger
    -- por favor vea el esquema de tabla para más columnas y datos disponibles
    , row_number() sobre(particin por cb. alance_id, cb.asset_code, cb. sset_issuer order by last_modified_ledger desc, deleted desc) as rn
  from assets
    join `crypto-stellar. rypto_stellar.claimable_balances` como cb
      en activos. sset_code = cb.asset_code
      y assets.asset_issuer = cb. sset_issuer
  donde verdadero
  orden por last_modified_ledger asc
)
select
  *
de current_claimable_balances
donde true
  y rn = 1
  y eliminado = false
  y balance_id = <claimable balance id>
```

### Recuperar operaciones y transacciones relacionadas

```sql
selecciona
  op_id
  , transaction_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt. nriched_history_operations`
donde verdadero
  y balance_id = <claimable_balance_id>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_at entre <start> y <end>
```

## Efectos

[horizon/efectos](../../horizon/api-reference/resources/effects/README.mdx)

Los efectos representan cambios específicos que ocurren en el contable como resultado de operaciones exitosas, pero no necesariamente se reflejan directamente en el contable o la historia, ya que las transacciones y las operaciones lo son.

### Listar todos los efectos

```sql
selecciona
  tipo
  , type_string
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. istory_effects`
donde verdadero
  -- Opciones opcionales de filtrado
  --y operation_id = <operation id>
  --y dirección = <account address>
  --y detalles. iquidity_pool_id = <liquidity pool id>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrados entre <start> y <end>
```

## Ledgers

[horizon/ledgers](../../horizon/api-reference/resources/ledgers/README.mdx)

Cada registrador almacena el estado de la red en un momento en el tiempo y contiene todos los cambios - transacciones, operaciones, efectos, etc. - a ese estado.

Más información sobre [ledgers](../../../learn/glossary.mdx#ledger).

### Listar todos los Ledgers

```sql
seleccione
  secuencia
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar. istory_ledgers`
donde verdadero
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrar entre <start> y <end>
```

### Recuperar transacciones y operaciones de Ledger’s

```sql
seleccione
  ledger_sequence
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar_dbt. nriched_history_operations`
donde verdadero
  y ledger_sequence = <ledger sequence>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_at entre <start> y <end>
```

### Recuperar los pagos de un Ledger

```sql
seleccione
  ledger_sequence
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar_dbt. nriched_history_operations` como eho
donde verdadero
  y escriba (0, 1, 2, 8, 13) -- create_account, payment, path_payment_strict_recieve, path_payment_strict_send, and account_merge
  and ledger_sequence = <ledger sequence>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_at entre <start> y <end>
```

## Piscinas de liquidez

[horizon/liquidity_pools](../../horizon/api-reference/resources/liquiditypools/README.mdx)

Los Pools de liquidez proporcionan una forma simple y no interactiva de operar con grandes cantidades de capital y permiten grandes volúmenes de operación.

### Listar piscinas de liquidez

```sql
select
  liquidity_pool_id
  , comisión
  , trustline_count
  , asset_a_code
  , asset_a_issuer
  , asset_a_amount
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt.liquididad_pools_current`
donde es verdadero
```

### Recuperar una herramienta de liquidez

```sql
select
  liquidity_pool_id
  , comisión
  , trustline_count
  , asset_a_code
  , asset_a_issuer
  , asset_a_amount
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt.liquidity_pools_current`
donde verdadero
  y liquididada_pool_id = <liquidity_pool_id>
```

### Recuperar las transacciones y operaciones de un grupo de liquidez

```sql
selecciona
  op_id
  , transaction_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt.enriched_history_operations`
donde verdadero
  y liquididada_pool_id = <liquidity_pool_id>
```

### Recuperar las operaciones relacionadas con un fondo de liquidez

```sql
seleccione
  selling_liquidity_pool_id
  , selling_amount
  , buying_amount
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar.history_trades`
donde verdadero
  y selling_liquidity_pool_id = <liquidity pool id>
```

## Ofertas

[horizon/offers](../../horizon/api-reference/resources/offers/README.mdx)

Las ofertas son declaraciones sobre la cantidad de un activo que una cuenta quiere comprar o vender.

Más información sobre [offers](../../../learn/glossary.mdx#decentralized-exchange).

### Listar todas las ofertas

```sql
select
  offer_id
  , seller_id
  , selling_asset_code
  , selling_asset_issuer
  , cantidad
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_stellar_dbt. ffers_current`
donde true
  -- filtro opcional por cuenta
  --y vended_id = <account address>
  y cerrado_a entre <start> y <end>
```

### Recuperar una oferta

```sql
select
  offer_id
  , seller_id
  , selling_asset_code
  , selling_asset_issuer
  , cantidad
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_stellar_dbt. ffers_current`
donde true
  y offer_id = <offer id>
  y cerrado_a entre <start> y <end>
```

### Recuperar las operaciones de una oferta

```sql
seleccione
  selling_offer_id
  , selling_amount
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. istory_trades`
donde verdadero
  y selling_offer_id = <offer_id>
  -- offer_id también podría ser el buying_offer_id
  --y comprar_offer_id = <offer_id>
```

## Operaciones

[horizon/operaciones](../../horizon/api-reference/resources/operations/README.mdx)

Las operaciones son objetos que representan un cambio deseado en el contador: pagos, ofertas de cambio de moneda, cambios realizados en las opciones de la cuenta, etc. Las operaciones se envían a la red estelar agrupada en una Transacción.

Cada una de las operaciones de Stellar tiene un objeto de operación único.

### Listar todas las operaciones

```sql
seleccione
  op_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar_dbt. nriched_history_operations`
donde true
  -- opcional filtros
  --y op_source_account = <account address>
  --and ledger_sequence = <ledger sequence>
  --and liquidity_pool_id = <liquidity pool id>
  --and transaction_hash = <transaction hash>
  --and transaction_id = <transaction id>
  -- highly recommended to provide a date range to reduce amount of data queried
  and closed_at between <start> and <end>
```

### Listar todos los pagos

```sql
seleccione
  op_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar_dbt. nriched_history_operations` as eho
where true
  -- opcional filtros
  --y op_source_account = <account address>
  --and ledger_sequence = <ledger sequence>
  --and liquidity_pool_id = <liquidity pool id>
  --and transaction_hash = <transaction hash>
  --and transaction_id = <transaction id>
  and type in (0, 0, and type in 1, 2, 8, 13) -- crear_cuenta, pago, path_payment_strict_recieve, path_payment_strict_send, and account_merge
  -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y closed_at entre <start> y <end>
```

### Recuperar una Operación

```sql
seleccione
  op_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stellar_dbt. nriched_history_operations` como eho
donde verdadero
  -- op_id = <operation id>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_at entre <start> y <end>
```

### Recuperar los efectos de una operación

```sql
seleccione
  operation_id
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar.crypto_stella. istory_effects`
donde true
  operation_id = <operation id>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrar_a entre <start> y <end>
```

## Operaciones

[horizonte/trades](../../horizon/api-reference/resources/trades/README.mdx)

Cuando una oferta se cumple total o parcialmente, ocurre una operación. Las operaciones también pueden ser causadas por pagos exitosos en trayectorias, ya que los pagos en trayectos implican la realización de ofertas.

Se produce un intercambio entre dos partes: `base` y `contador`. Que es el que es arbitrario o determinado por la consulta que llama.

Más información sobre [trades](../../../learn/glossary.mdx#decentralized-exchange).

### Listar todas las operaciones

```sql
seleccione
  -- base_asset == selling_asset
  -- counter_asset == buying_asset
  selling_asset_code
  , selling_asset_issuer
  , selling_amount
  , buying_asset_code
  , comprando_asset_issuer
  buying_amount
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_estelar. istory_trades`
donde true
  -- columnas opcionales de filtro
  y selling_offer_id = <offer id>
  y buying_offer_id = <offer id>
  y selling_asset_code = <asset code>
  y selling_asset_issuer = <asset issuer>
  y selling_liquidity_pool_id = <liquidity pool id>
  y selling_account_address = <account address>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos solicitados
  y cerrados_entre <start> y <end>
```

## Transacciones

[horizon/transacciones](../../horizon/api-reference/resources/transactions/README.mdx)

Las transacciones son comandos que modifican el estado contable y consisten en una o más operaciones.

Más información sobre [transactions](../../../learn/glossary.mdx#transaction).

### Listar todas las transacciones

```sql
selecciona
  id
  , max_fee
  , operation_count
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. istory_transactions`
donde verdadero
  -- filtros opcionales
  --y cuenta = <account address>
  --y ledger_sequence = <ledger sequence>
  -- altamente recomendado para proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrado_a entre <start> y <end>
```

### Recuperar una transacción

```sql
selecciona
  id
  , max_fee
  , operation_count
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. istory_transactions`
donde verdadero
  e id = <transaction id>
  -- transaction_hash también está disponible
  --y transaction_hash = <transaction hash>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrados entre <start> y <end>
```

### Recuperar las operaciones de una transacción

```sql
select
  transaction_id
  , op_id
  , max_fee
  , operation_count
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt. nriched_history_operations`
donde verdadero
  y transaction_id = <transaction id>
  -- transaction_hash también está disponible
  --y transaction_hash = <transaction hash>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos solicitados
  y cerrado_a entre <start> y <end>
```

## Agregaciones comerciales

[horizon/trade_aggregations](../../horizon/api-reference/aggregations/trade-aggregations/README.mdx)

Una agregación comercial representa estadísticas agregadas sobre un par de activos (base y contador) durante un período de tiempo específico. Las agencias de comercio son útiles para los desarrolladores de clientes comerciales y proporcionan datos de comercio histórico.

### Lista de Agregaciones de Comercio

```sql
seleccione
  date(closed_at)
  , selling_asset_code
  , selling_asset_issuer
  , buying_asset_code
  , buying_asset_issuer
  , cuenta(1) como number_of_trades
  -- por favor vea el esquema de tabla para más columnas disponibles y datos
de `crypto-stellar. rypto_estelar. istory_trades`
donde true
  -- hay varias columnas a filtrar por
  -- y selling_asset_code = <asset code>
  -- y selling_asset_issuer = <asset issuer>
  -- y buying_asset_code = <asset code>
  -- y buying_asset_issuer = <asset issuer>
  -- y closed_at entre <start> y <end>
grupo por 1, ,3,4,5
```

## Estadísticas de comisión

[horizon/fee-stats](../../horizon/api-reference/aggregations/fee-stats/README.mdx)

Las estadísticas de comisión se utilizan para predecir qué comisión establecer para una transacción antes de enviarla a la red.

### Recuperar estadísticas de cuota

```sql
select
  day_agg
  , fee_charged_max
  , fee_charged_min
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt.fee_stats_agg`
donde verdadero
  y day_agg entre <start> y <end>
```

## getEvents

[rpc/getEvents](../../rpc/api-reference/methods/getEvents.mdx)

Los eventos de contrato y los eventos de diagnóstico se utilizan para información adicional relacionada con una invocación del contrato

```sql
select
  contract_id
  , topics_decoded
  , data_decoded
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_estelar. istory_contract_events`
donde es verdadero
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos consultados
  y cerrar entre <start> y <end>
```

## getLedgerentradas

[rpc/getLedgerEntries](../../rpc/api-reference/methods/getLedgerEntries.mdx)

Permite la recuperación de varios estados contables, fiables, ofertas, datos, saldos cobrables y pozos de liquidez. También proporciona acceso directo para inspeccionar el estado actual de un contrato, su código o cualquier otra entrada de contador

### Entradas de datos de contrato

```sql
seleccione
  ledger_key_hash
  , contract_id
  , balance_holder
  , balance
de `crypto-stellar.crypto_stellar_dbt.contract_data_current`
donde verdadero
  y ledger_key_hash = <ledger_key_hash>
```

### Contrato de Entradas de Código

```sql
seleccione
  ledger_key_hash
  , contract_code_hash
de `crypto-stellar.crypto_stellar_dbt.contract_code_current`
donde true
  y ledger_key_hash = <ledger_key_hash>
```

## recibir transacción

[rpc/getTransaction](../../rpc/api-reference/methods/getTransaction.mdx)

Las transacciones son comandos que modifican el estado contable y consisten en una o más operaciones.

Más información sobre [transactions](../../../learn/glossary.mdx#transaction).

```sql
select
  transaction_id
  , op_id
  , max_fee
  , operation_count
  -- por favor vea el esquema de tabla para más columnas y datos disponibles
de `crypto-stellar. rypto_stellar_dbt. nriched_history_operations`
donde verdadero
  y transaction_id = <transaction id>
  -- transaction_hash también está disponible
  --y transaction_hash = <transaction hash>
  -- altamente recomendado proporcionar un rango de fechas para reducir la cantidad de datos solicitados
  y cerrado_a entre <start> y <end>
```
