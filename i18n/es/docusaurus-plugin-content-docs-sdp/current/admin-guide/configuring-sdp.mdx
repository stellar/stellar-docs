---
title: Configurando la SDP
description: Comprender las opciones de configuraci贸n disponibles para la Stellar Disbursement Platform (SDP)
keywords:
  - SDP
  - configuration
sidebar_position: 45
---

Los servicios de la Stellar Disbursement Platform se pueden configurar utilizando un conjunto de opciones de configuraci贸n que se pasan a la l铆nea de comandos o se establecen como variables de entorno. Dependiendo de c贸mo est茅s utilizando y desplegando la SDP, estas configuraciones pueden establecerse en un ConfigMap en Kubernetes, como variables de entorno en un contenedor de Docker, pasadas como argumentos de l铆nea de comandos, etc.

En esta secci贸n, discutiremos las diferentes opciones de configuraci贸n disponibles para la SDP.

**Notas:**

- Las configuraciones etiquetadas con  son sensibles y deben almacenarse de forma segura.
- Estas configuraciones son v谩lidas para la versi贸n 2.x de la SDP.
- Todas las configuraciones se pueden pasar como variables de entorno o como flags de CLI. Por ejemplo, la variable de entorno `BASE_URL` podr铆a pasarse a trav茅s del flag `--base-url`. Los flags de CLI tienen prioridad sobre las variables de entorno, aunque las variables de entorno son m谩s convenientes.

## Servicio Central de la SDP

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git de stellar-disbursement-platform-backend](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform serve --help
```

</CodeExample>

### Configuraci贸n Operativa

La Configuraci贸n Operativa permite controlar m茅tricas, registros y otros aspectos operativos del Servicio Central de la SDP.

- `PORT` - El puerto en el que el Servicio Central de la SDP escuchar谩 las solicitudes HTTP entrantes. Por defecto: 8000.
- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `METRICS_PORT` - El puerto en el que el Servicio Central de la SDP expondr谩 sus m茅tricas. Por defecto: 8002.
- `METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a utilizar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave de cliente) del proyecto de Sentry. Si no se proporciona, Sentry no se utilizar谩.
- `ENVIRONMENT` - El entorno en el que se est谩 ejecutando la aplicaci贸n. Ejemplo: "development", "staging", "production". Por defecto: "development".
- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
- `BASE_URL` - La URL base del servidor backend de la SDP. Por defecto: "http://localhost:8000". Las URLs espec铆ficas del inquilino ser谩n configuradas durante el [proceso de aprovisionamiento del inquilino](./tenant-provisioning.mdx#creating-tenants).
- `SDP_UI_BASE_URL` - La URL base de la interfaz de usuario/dashboard de la SDP utilizada para enviar el enlace de invitaci贸n cuando se crea un nuevo usuario. Las URLs espec铆ficas del inquilino ser谩n configuradas durante el [proceso de aprovisionamiento del inquilino](./tenant-provisioning.mdx#creating-tenants).

### Configuraci贸n de Mensajer铆a

Messaging Configuration allows configuring the messaging service used to send messages to recipients and sdp dashboard users. La configuraci贸n por defecto est谩 establecida en "DRY_RUN", lo que significa que no se enviar谩n mensajes y los mensajes se registrar谩n en la consola. Esto se recomienda solo para fines de prueba.

- `EMAIL_SENDER_TYPE`: El tipo de mensajero utilizado para enviar invitaciones a nuevos usuarios del panel. Opciones: "DRY_RUN", "TWILIO_EMAIL", "AWS_EMAIL". Por defecto: "DRY_RUN".
- `SMS_SENDER_TYPE`: El tipo de mensajero utilizado para enviar mensajes SMS a los destinatarios. Opciones: "DRY_RUN", "TWILIO_SMS", "AWS_SMS". Por defecto: "DRY_RUN".

#### Configuraci贸n de AWS

Las siguientes configuraciones son requeridas al usar AWS SES o SNS para enviar correos electr贸nicos o mensajes SMS.

- `AWS_ACCESS_KEY_ID` -  La ID de clave de acceso de AWS.
- `AWS_REGION` - La regi贸n de AWS donde est谩 disponible el servicio SES.
- `AWS_SECRET_ACCESS_KEY` -  La clave de acceso secreto de AWS.
- `AWS_SES_SENDER_ID` - El correo electr贸nico que AWS SES utilizar谩 como remitente al enviar correos electr贸nicos. Requerido cuando `EMAIL_SENDER_TYPE` se establece en "AWS_EMAIL".
- `AWS_SNS_SENDER_ID` - La ID del remitente a utilizar al enviar mensajes SMS utilizando AWS SNS. Requerido cuando `SMS_SENDER_TYPE` se establece en "AWS_SMS".

#### Configuraci贸n de Twilio

Las siguientes configuraciones son requeridas cuando `SMS_SENDER_TYPE=TWILIO_SMS`.

- `TWILIO_ACCOUNT_SID` -  El SID de la cuenta de Twilio.
- `TWILIO_AUTH_TOKEN` -  El token de autenticaci贸n de Twilio.
- `TWILIO_SERVICE_SID` - El SID del servicio de Twilio.

Las siguientes configuraciones son requeridas cuando `EMAIL_SENDER_TYPE=TWILIO_EMAIL`.

- `TWILIO_SENDGRID_API_KEY` -  La clave API para el servicio de Twilio SendGrid (correo electr贸nico).
- `TWILIO_SENDGRID_SENDER_ADDRESS` - La direcci贸n de correo electr贸nico utilizada para enviar correos electr贸nicos a trav茅s de Twilio SendGrid.

#### Configuraci贸n General de Mensajer铆a

- `MAX_INVITATION_RESEND_ATTEMPTS` - El n煤mero m谩ximo de intentos para (auto) reenviar la invitaci贸n a las billeteras de los receptores. Por defecto: 3.

### Configuraci贸n de Stellar

La Configuraci贸n de Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase de paso de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon a utilizar para enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `SEP10_SIGNING_PUBLIC_KEY` - La clave p煤blica de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `SEP10_SIGNING_PRIVATE_KEY` -  La clave privada de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.

Las configuraciones restantes relacionadas con las cuentas de distribuci贸n se detallan en la secci贸n `Configuraci贸n de cuentas Stellar` de la [Gu铆a de Migraci贸n de 1.x a 2.x](./single-tenant-to-multi-tenant-migration.mdx#environment-variables).

### Configuraci贸n de Seguridad

La Configuraci贸n de Seguridad permite configurar los aspectos de seguridad del Servicio Central de la SDP.

- `CORS_ALLOWED_ORIGINS` - Especifica los dominios permitidos para hacer solicitudes de origen cruzado. "_" significa que se permiten todos los dominios. Los dominios pueden contener caracteres comod铆n, por ejemplo, "https://_.example.com".
- `SEP24_JWT_SECRET` -  El secreto utilizado para firmar el token JWT para transacciones SEP-24. Este secreto se utiliza durante el flujo de registro de billeteras receptoras.

#### Configuraci贸n de Autenticaci贸n de Dashboard

Las siguientes configuraciones est谩n relacionadas con la autenticaci贸n y autorizaci贸n de usuarios del panel.

- `RESET_TOKEN_EXPIRATION_HOURS` - El tiempo de expiraci贸n en horas del token de restablecimiento de contrase帽a. Por defecto: 24 (horas).
- `EC256_PUBLIC_KEY` - La clave p煤blica EC256 utilizada para validar la firma del token. Esta clave EC necesita ser al menos tan fuerte como prime256v1 (P-256).
- `EC256_PRIVATE_KEY` -  La clave privada EC256 utilizada para firmar el token de autenticaci贸n. Esta clave EC necesita ser al menos tan fuerte como prime256v1 (P-256).
- `DISABLE_MFA` - Deshabilita la Autenticaci贸n Multifactor (MFA) para los usuarios del panel de la SDP.
- `DISABLE_RECAPTCHA` - Deshabilita reCAPTCHA v2 de Google para los usuarios del panel de la SDP. Este flag no afecta el reCAPTCHA utilizado durante el flujo SEP-24.

#### Configuraci贸n de Recaptcha

Las siguientes configuraciones son requeridas al usar reCAPTCHA v2 de Google para proteger el Servicio Central de la SDP de bots. ReCaptcha se utiliza tanto para usuarios del panel como para receptores de fondos durante el flujo SEP-24.

- `RECAPTCHA_SITE_KEY` - La clave del sitio reCAPTCHA v2 de Google - No soy un robot.
- `RECAPTCHA_SITE_SECRET_KEY` -  La clave secreta del sitio reCAPTCHA utilizada para validar las respuestas de reCAPTCHA.

### Configuraci贸n de Anchor Platform

La Configuraci贸n de Anchor Platform permite configurar la plataforma de anclaje utilizada por el Servicio Central de la SDP.

- `ANCHOR_PLATFORM_BASE_PLATFORM_URL` - La URL base de la plataforma de anclaje.
- `ANCHOR_PLATFORM_BASE_SEP_URL` - La URL base de la implementaci贸n SEP-24 de la plataforma de anclaje.
- `ANCHOR_PLATFORM_OUTGOING_JWT_SECRET` -  El secreto JWT utilizado para crear un token JWT empleado para enviar solicitudes a la plataforma de anclaje.

### Configuraci贸n de Event Broker y Trabajos Programados

Para el procesamiento as铆ncrono, el Servicio Central de la SDP ofrece al usuario la opci贸n de utilizar ya sea el Event Broker o Trabajos Programados.

Las configuraciones para esta secci贸n se detallan en `Configuraciones de Event Broker y Scheduler` de la [Gu铆a de Migraci贸n de 1.x a 2.x](./single-tenant-to-multi-tenant-migration.mdx#environment-variables).

### Configuraci贸n de Multi-tenancy

Las configuraciones para esta secci贸n se detallan en `Variables de Entorno Generales` de la [Gu铆a de Migraci贸n de 1.x a 2.x](./single-tenant-to-multi-tenant-migration.mdx#environment-variables).

## Servicio de Env铆o de Transacciones (TSS)

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git de stellar-disbursement-platform-backend](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform tss --help
```

</CodeExample>

### Configuraci贸n General

- `QUEUE_POLLING_INTERVAL` - Intervalo de sondeo (segundos) para consultar la base de datos en busca de transacciones pendientes para procesar. Por defecto: 6.

### Configuraci贸n Operativa

La Configuraci贸n Operativa permite controlar m茅tricas, registros y otros aspectos operativos del Servicio de Env铆o de Transacciones (TSS)

- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `TSS_METRICS_PORT` - El puerto en el que el TSS expondr谩 sus m茅tricas. Por defecto: 9002.
- `TSS_METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a utilizar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave de cliente) del proyecto de Sentry. Si no se proporciona, Sentry no se utilizar谩.
- `ENVIRONMENT` - El entorno en el que se est谩 ejecutando la aplicaci贸n. Ejemplo: "development", "staging", "production". Por defecto: "development".
- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".

### Configuraci贸n de Stellar

La Configuraci贸n de Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase de paso de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon a utilizar para enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.

#### Configuraci贸n de Cuentas de Canal

Las siguientes configuraciones son requeridas para usar cuentas de canal para enviar transacciones a la red Stellar.

- `NUM_CHANNEL_ACCOUNTS` - N煤mero de cuentas de canal a utilizar para el env铆o de transacciones. Por defecto: 2.
- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave privada ed25519 compatible con Stellar utilizada para cifrar/descifrar las claves privadas de las cuentas de canal. Cuando no se establece, se configurar谩 con el valor de la opci贸n 'DISTRIBUTION_SEED'.

#### Configuraci贸n de Cuentas de Distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n utilizadas para enviar fondos a los destinatarios. Esta configuraci贸n debe coincidir con la configuraci贸n en el Servicio Central de la SDP. Para m谩s detalles, consulta la secci贸n `Configuraci贸n de cuentas Stellar` de la [Gu铆a de Migraci贸n de 1.x a 2.x](./single-tenant-to-multi-tenant-migration.mdx#environment-variables).

- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave privada ed25519 compatible con Stellar utilizada para cifrar/descifrar las claves privadas de las cuentas de distribuci贸n en memoria.
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta de distribuci贸n del HOST, utilizada para crear cuentas de canal.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta de distribuci贸n del HOST, utilizada para crear cuentas de canal.

### Configuraci贸n del Event Broker

Si se utiliza un Event Broker para el procesamiento as铆ncrono, ser谩 necesario configurar el TSS para usarlo. Para m谩s detalles, consulta las `Configuraciones de Event Broker y Scheduler` de la [Gu铆a de Migraci贸n de 1.x a 2.x](./single-tenant-to-multi-tenant-migration.mdx#environment-variables).

- `EVENT_BROKER_TYPE` - El tipo de broker de eventos a usar. Opciones: "KAFKA", "NONE". Predeterminado: "KAFKA".
- `BROKER_URLS` - Lista de URLs del Message Broker separadas por comas.
- `CONSUMER_GROUP_ID` - ID del grupo de consumidores del Message Broker.
- `KAFKA_SASL_USERNAME` -  Nombre de usuario de Kafka SASL.
- `KAFKA_SASL_PASSWORD` -  Contrase帽a de Kafka SASL.
- `KAFKA_SECURITY_PROTOCOL` - Protocolo de seguridad de Kafka. Opciones: PLAINTEXT, SASL_PLAINTEXT, SASL_SSL, SSL.
- `KAFKA_SSL_ACCESS_CERTIFICATE` -  Certificado de acceso SSL de Kafka en formato PEM que igualar谩 la Clave de Acceso de Kafka.
- `KAFKA_SSL_ACCESS_KEY` -  La Clave de Acceso de Kafka (keystore) en formato PEM.

## Tablero

El Tablero de SDP es una aplicaci贸n web que permite a los usuarios gestionar sus cuentas, ver el historial de transacciones, y m谩s. Las variables de entorno pueden establecerse ya sea en un objeto global `window._env_` o como variables `process.env`. Todas las variables de entorno utilizadas en este repositorio est谩n en el archivo `src/constants/envVariables.ts`, incluyendo tipos. La ubicaci贸n predeterminada del objeto `window._env_` es `public/settings/env-config.js`.

### Configuraci贸n General

- `API_URL` - La URL base del Servicio N煤cleo de SDP. Predeterminado: "http://localhost:8000".
- `STELLAR_EXPERT_URL` - La URL base del explorador Stellar Expert. Predeterminado: "https://stellar.expert/explorer/testnet".
- `HORIZON_URL` - La URL base del servidor Horizon. Predeterminado: "https://horizon-testnet.stellar.org".
- `RECAPTCHA_SITE_KEY` - La clave del sitio de Google reCAPTCHA v2 - No soy un robot. Esta clave necesita igualar la clave utilizada en el Servicio N煤cleo de SDP.
