---
title: Configuraci贸n
description: Comprender las opciones de configuraci贸n disponibles para la Stellar Disbursement Platform (SDP)
keywords:
  - SDP
  - configuration
sidebar_position: 40
---

Los servicios de la Stellar Disbursement Platform se pueden configurar utilizando un conjunto de opciones de configuraci贸n que se pasan a la l铆nea de comandos o se establecen como variables de entorno. Dependiendo de c贸mo est茅s utilizando y desplegando la SDP, estas configuraciones pueden establecerse en un ConfigMap en Kubernetes, como variables de entorno en un contenedor de Docker, pasadas como argumentos de l铆nea de comandos, etc.

En esta secci贸n, discutiremos las diferentes opciones de configuraci贸n disponibles para la SDP.

:::tip[Notes]

- Las configuraciones etiquetadas con  son sensibles y deben almacenarse de forma segura.
- Todas las configuraciones se pueden pasar como variables de entorno o como flags de CLI. Por ejemplo, la variable de entorno `BASE_URL` podr铆a pasarse a trav茅s del flag `--base-url`. Los flags de CLI tienen prioridad sobre las variables de entorno, aunque las variables de entorno son m谩s convenientes.

:::

## Servicio Central de la SDP

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git de stellar-disbursement-platform-backend](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform serve --help
```

</CodeExample>

### Configuraci贸n Operativa

La Configuraci贸n Operativa permite controlar m茅tricas, registros y otros aspectos operativos del Servicio Central de la SDP.

- `PORT` - El puerto en el que el Servicio Central de la SDP escuchar谩 las solicitudes HTTP entrantes. Por defecto: 8000.
- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `METRICS_PORT` - El puerto en el que el Servicio Central de la SDP expondr谩 sus m茅tricas. Por defecto: 8002.
- `METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a utilizar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave de cliente) del proyecto de Sentry. Si no se proporciona, Sentry no se utilizar谩.
- `ENVIRONMENT` - El entorno en el que se est谩 ejecutando la aplicaci贸n. Ejemplo: "development", "staging", "production". Por defecto: "development".
- `BASE_URL` - La URL base del servidor backend de la SDP. Por defecto: "http://localhost:8000". Las URLs espec铆ficas del inquilino se configurar谩n durante el [proceso de provisi贸n del inquilino](./advanced-configration#provisioning-tenants).
- `SDP_UI_BASE_URL` - La URL base de la interfaz de usuario/dashboard de la SDP utilizada para enviar el enlace de invitaci贸n cuando se crea un nuevo usuario. Las URLs espec铆ficas del inquilino se configurar谩n durante el [proceso de provisi贸n del inquilino](./advanced-configration#provisioning-tenants).

### Configuraci贸n de la base de datos

Las siguientes configuraciones est谩n relacionadas con la base de datos PostgreSQL utilizada por el servicio SDP Core.

- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
- `DB_MAX_OPEN_CONNS` - Conexiones m谩ximas abiertas por pool a la base de datos. Por defecto: 20.
- `DB_MAX_IDLE_CONNS` - Conexiones inactivas m谩ximas retenidas en el pool. Por defecto: 2.
- `DB_CONN_MAX_IDLE_TIME_SECONDS` - Cierra las conexiones inactivas despu茅s de N segundos. Por defecto: 10.
- `DB_CONN_MAX_LIFETIME_SECONDS` - Recicla las conexiones despu茅s de N segundos. Por defecto: 300.

### Configuraci贸n de Mensajer铆a

Messaging Configuration allows configuring the messaging service used to send messages to recipients and sdp dashboard users. La configuraci贸n por defecto est谩 establecida en "DRY_RUN", lo que significa que no se enviar谩n mensajes y los mensajes se registrar谩n en la consola. Esto se recomienda solo para fines de prueba.

- `EMAIL_SENDER_TYPE`: El tipo de mensajero utilizado para enviar invitaciones a nuevos usuarios del panel. Opciones: "DRY_RUN", "TWILIO_EMAIL", "AWS_EMAIL". Por defecto: "DRY_RUN".
- `SMS_SENDER_TYPE`: El tipo de mensajero utilizado para enviar mensajes SMS a los destinatarios. Opciones: "DRY_RUN", "TWILIO_SMS", "TWILIO_WHATSAPP", "AWS_SMS". Por defecto: "DRY_RUN".

#### Configuraci贸n de AWS

Las siguientes configuraciones son requeridas al usar AWS SES o SNS para enviar correos electr贸nicos o mensajes SMS.

- `AWS_ACCESS_KEY_ID` -  La ID de clave de acceso de AWS.
- `AWS_REGION` - La regi贸n de AWS donde est谩 disponible el servicio SES.
- `AWS_SECRET_ACCESS_KEY` -  La clave de acceso secreto de AWS.
- `AWS_SES_SENDER_ID` - El correo electr贸nico que AWS SES utilizar谩 como remitente al enviar correos electr贸nicos. Requerido cuando `EMAIL_SENDER_TYPE` se establece en "AWS_EMAIL".
- `AWS_SNS_SENDER_ID` - La ID del remitente a utilizar al enviar mensajes SMS utilizando AWS SNS. Requerido cuando `SMS_SENDER_TYPE` se establece en "AWS_SMS".

#### Configuraci贸n de Twilio

Las siguientes configuraciones son requeridas cuando `SMS_SENDER_TYPE=TWILIO_SMS`.

- `TWILIO_ACCOUNT_SID` -  El SID de la cuenta de Twilio.
- `TWILIO_AUTH_TOKEN` -  El token de autenticaci贸n de Twilio.
- `TWILIO_SERVICE_SID` - El SID del servicio de Twilio.

Las siguientes configuraciones son obligatorias cuando `SMS_SENDER_TYPE=TWILIO_WHATSAPP`.

- `TWILIO_ACCOUNT_SID` -  El SID de la cuenta de Twilio.
- `TWILIO_AUTH_TOKEN` -  El token de autenticaci贸n de Twilio.
- `TWILIO_SERVICE_SID` - El SID del servicio de Twilio.
- `TWILIO_WHATSAPP_FROM_NUMBER` - El n煤mero de WhatsApp Business utilizado para enviar mensajes (con el prefijo whatsapp:).
- `TWILIO_WHATSAPP_RECEIVER_INVITATION_TEMPLATE_SID` - El SID de contenido de Twilio para la plantilla de invitaci贸n de receptor de WhatsApp (comienza con HX).
- `TWILIO_WHATSAPP_RECEIVER_OTP_TEMPLATE_SID` - El SID de contenido de Twilio para la plantilla OTP de receptor de WhatsApp (comienza con HX).

Las siguientes configuraciones son requeridas cuando `EMAIL_SENDER_TYPE=TWILIO_EMAIL`.

- `TWILIO_SENDGRID_API_KEY` -  La clave API para el servicio de Twilio SendGrid (correo electr贸nico).
- `TWILIO_SENDGRID_SENDER_ADDRESS` - La direcci贸n de correo electr贸nico utilizada para enviar correos electr贸nicos a trav茅s de Twilio SendGrid.

#### Configuraci贸n General de Mensajer铆a

- `MAX_INVITATION_RESEND_ATTEMPTS` - El n煤mero m谩ximo de intentos para (auto) reenviar la invitaci贸n a las billeteras de los receptores. Por defecto: 3.

### Configuraci贸n de Stellar

La Configuraci贸n de Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase de paso de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon a utilizar para enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `SEP10_SIGNING_PUBLIC_KEY` - La clave p煤blica de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `SEP10_SIGNING_PRIVATE_KEY` -  La clave privada de la cuenta Stellar que firma las transacciones SEP-10. Tambi茅n se utiliza para firmar URLs.
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.
- `SEP10_CLIENT_ATTRIBUTION_REQUIRED` - Determina si se requiere la atribuci贸n del cliente SEP-10. Por defecto: true.

#### Configuraci贸n de Cuentas de Canal

La siguiente configuraci贸n es necesaria para usar el [CLI de channel-accounts](./cli-manual#channel-accounts-command) para gestionar las cuentas de canales.

- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para encriptar/desencriptar las claves privadas de las cuentas de canal. Si no est谩 configurado, tomar谩 por defecto el valor de `DISTRIBUTION_SEED`.

#### Configuraci贸n de Cuentas de Distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n utilizadas para enviar fondos a los destinatarios. Esta configuraci贸n debe coincidir con la configuraci贸n en el Servicio Central de la SDP.

- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para cifrar/descifrar las claves privadas de las cuentas de distribuci贸n en memoria.
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta de distribuci贸n Stellar del HOST. Se utiliza para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de inquilinos.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta de distribuci贸n Stellar del HOST. Se usa para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de inquilinos.

### Configuraci贸n de Seguridad

La Configuraci贸n de Seguridad permite configurar los aspectos de seguridad del Servicio Central de la SDP.

- `CORS_ALLOWED_ORIGINS` - Especifica los dominios permitidos para hacer solicitudes de origen cruzado. "_" significa que se permiten todos los dominios. Los dominios pueden contener caracteres comod铆n, por ejemplo, "https://_.example.com".
- `SEP24_JWT_SECRET` -  El secreto utilizado para firmar el token JWT para transacciones SEP-24. Este secreto se utiliza durante el flujo de registro de billeteras receptoras.

#### Configuraci贸n de Autenticaci贸n de Dashboard

Las siguientes configuraciones est谩n relacionadas con la autenticaci贸n y autorizaci贸n de usuarios del panel.

- `RESET_TOKEN_EXPIRATION_HOURS` - El tiempo de expiraci贸n en horas del token de restablecimiento de contrase帽a. Por defecto: 24 (horas).
- `EC256_PUBLIC_KEY` - La clave p煤blica EC256 utilizada para validar la firma del token. Esta clave EC necesita ser al menos tan fuerte como prime256v1 (P-256).
- `EC256_PRIVATE_KEY` -  La clave privada EC256 utilizada para firmar el token de autenticaci贸n. Esta clave EC necesita ser al menos tan fuerte como prime256v1 (P-256).
- `DISABLE_MFA` - Deshabilita la Autenticaci贸n Multifactor (MFA) para los usuarios del panel de la SDP.
- `DISABLE_RECAPTCHA` - Deshabilita reCAPTCHA v2 de Google para los usuarios del panel de la SDP. Este flag no afecta el reCAPTCHA utilizado durante el flujo SEP-24.

#### Configuraci贸n de Recaptcha

Las siguientes configuraciones son requeridas al usar reCAPTCHA v2 de Google para proteger el Servicio Central de la SDP de bots. ReCaptcha se utiliza tanto para usuarios del panel como para receptores de fondos durante el flujo SEP-24.

- `RECAPTCHA_SITE_KEY` - La clave del sitio reCAPTCHA v2 de Google - No soy un robot.
- `RECAPTCHA_SITE_SECRET_KEY` -  La clave secreta del sitio reCAPTCHA utilizada para validar las respuestas de reCAPTCHA.

### Configuraci贸n de trabajos en segundo plano

- `SCHEDULER_PAYMENT_JOB_SECONDS`: Intervalo en segundos para el trabajo que sincroniza pagos entre SDP y TSS. El m铆nimo es 5s.
- `SCHEDULER_RECEIVER_INVITATION_JOB_SECONDS`: Intervalo en segundos para el trabajo que env铆a invitaciones a receptores. El m铆nimo es 5s.

### Configuraci贸n de Multi-tenancy

- `ADMIN_ACCOUNT`: El nombre de usuario de la cuenta de administrador usada para autenticar solicitudes HTTP al servidor Admin. Las solicitudes dirigidas al Admin deben agregar el encabezado "Authorization", formateado como `"ADMIN_ACCOUNT:ADMIN_API_KEY"` codificado en Base64.
- `ADMIN_API_KEY`: La clave api de la cuenta de administrador usada para autenticar solicitudes HTTP al servidor Admin. Las solicitudes dirigidas al Admin deben agregar el encabezado "Authorization", formateado como `"ADMIN_ACCOUNT:ADMIN_API_KEY"` codificado en Base64.
- `ADMIN_PORT`: el puerto del servidor Admin usado para crear y administrar inquilinos. El valor predeterminado es 8003.
- `INSTANCE_NAME`: el nombre de la instancia SDP que se mostrar谩 en el archivo `stellar.toml`. Ejemplo: "SDP Testnet".
- `SINGLE_TENANT_MODE`: Cuando est谩 configurado en `"true"`, habilita el modo de inquilino 煤nico, 煤til para desarrollo local o configuraciones de un solo inquilino. Adem谩s de configurarlo en true, deber谩s configurar el inquilino predeterminado haciendo la solicitud [`POST /tenants/default-tenant`](../api-reference/default-tenant.api.mdx).
- `TENANT_XLM_BOOTSTRAP_AMOUNT`: La cantidad de XLM que la cuenta Stellar del HOST depositar谩 en la cuenta de distribuci贸n del inquilino para el arranque del inquilino.

### Configuraci贸n de integraci贸n Bridge

Las siguientes configuraciones son necesarias al usar la integraci贸n Bridge.

- `ENABLE_BRIDGE_INTEGRATION` - Determina si la integraci贸n Bridge est谩 habilitada.
- `BRIDGE_BASE_URL` - La URL base de la API Bridge. Por defecto: `"https://api.bridge.xyz"`.
- `BRIDGE_API_KEY` -  La clave API para la integraci贸n Bridge. Requerida si `ENABLE_BRIDGE_INTEGRATION` est谩 configurado como true.

## Servicio de Env铆o de Transacciones (TSS)

Para la configuraci贸n m谩s actualizada, puedes ejecutar el siguiente comando en el [repositorio git de stellar-disbursement-platform-backend](https://github.com/stellar/stellar-disbursement-platform-backend):

<CodeExample>

```bash
./stellar-disbursement-platform tss --help
```

</CodeExample>

### Configuraci贸n General

- `QUEUE_POLLING_INTERVAL` - Intervalo de sondeo (segundos) para consultar la base de datos en busca de transacciones pendientes para procesar. Por defecto: 6.

### Configuraci贸n Operativa

La Configuraci贸n Operativa permite controlar m茅tricas, registros y otros aspectos operativos del Servicio de Env铆o de Transacciones (TSS)

- `LOG_LEVEL` - Determina el nivel de verbosidad de los registros. Opciones: "TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", o "PANIC". Por defecto: "TRACE".
- `TSS_METRICS_PORT` - El puerto en el que el TSS expondr谩 sus m茅tricas. Por defecto: 9002.
- `TSS_METRICS_TYPE` - El tipo de m茅tricas a exponer. Opciones: "PROMETHEUS". Por defecto: "PROMETHEUS".
- `CRASH_TRACKER_TYPE` - El tipo de rastreador de fallos a utilizar. Opciones: "SENTRY", "DRY_RUN". Por defecto: "DRY_RUN".
- `SENTRY_DSN` -  La DSN (clave de cliente) del proyecto de Sentry. Si no se proporciona, Sentry no se utilizar谩.
- `ENVIRONMENT` - El entorno en el que se est谩 ejecutando la aplicaci贸n. Ejemplo: "development", "staging", "production". Por defecto: "development".

### Configuraci贸n de la base de datos

Las siguientes configuraciones est谩n relacionadas con la base de datos PostgreSQL utilizada por el servicio SDP Core.

- `DATABASE_URL` -  La cadena de conexi贸n para la base de datos PostgreSQL. El formato es `postgres://username:password@host:port/database?sslmode=disable`. Por defecto: "postgres://localhost:5432/sdp?sslmode=disable".
- `DB_MAX_OPEN_CONNS` - Conexiones m谩ximas abiertas por pool a la base de datos. Por defecto: 20.
- `DB_MAX_IDLE_CONNS` - Conexiones inactivas m谩ximas retenidas en el pool. Por defecto: 2.
- `DB_CONN_MAX_IDLE_TIME_SECONDS` - Cierra las conexiones inactivas despu茅s de N segundos. Por defecto: 10.
- `DB_CONN_MAX_LIFETIME_SECONDS` - Recicla las conexiones despu茅s de N segundos. Por defecto: 300.

### Configuraci贸n de Stellar

La Configuraci贸n de Stellar permite configurar cuentas, transacciones y otros ajustes relacionados con Stellar.

- `NETWORK_PASSPHRASE` - La frase de paso de la red Stellar. Por defecto "Test SDF Network ; September 2015".
- `HORIZON_URL` - La URL del servidor Horizon a utilizar para enviar transacciones. Por defecto "https://horizon-testnet.stellar.org/".
- `MAX_BASE_FEE` - La tarifa base m谩xima para enviar una transacci贸n Stellar. Por defecto: 10000.

#### Configuraci贸n de cuentas de canal

Las siguientes configuraciones son requeridas para usar cuentas de canal para enviar transacciones a la red Stellar.

- `NUM_CHANNEL_ACCOUNTS` - N煤mero de cuentas de canal a utilizar para el env铆o de transacciones. Por defecto: 2.
- `CHANNEL_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para cifrar/descifrar las claves privadas de las cuentas de canal. Cuando no se establece, se configurar谩 con el valor de la opci贸n 'DISTRIBUTION_SEED'.

#### Configuraci贸n de cuentas de distribuci贸n

Las siguientes configuraciones est谩n relacionadas con las cuentas de distribuci贸n usadas para enviar fondos a los destinatarios. Esta configuraci贸n debe coincidir con la configuraci贸n en el Servicio Central SDP.

- `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE` -  Una clave secreta Stellar ed25519 (que comienza con `S`) usada para encriptar/desencriptar las claves privadas en memoria de las cuentas de distribuci贸n.
- `DISTRIBUTION_PUBLIC_KEY` - La clave p煤blica de la cuenta de distribuci贸n Stellar del HOST. Se usa para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de inquilinos.
- `DISTRIBUTION_SEED` -  La clave privada de la cuenta de distribuci贸n Stellar del HOST. Se usa para distribuir fondos, crear cuentas de canal y cuentas de distribuci贸n de inquilinos.

## Tablero

El Tablero de SDP es una aplicaci贸n web que permite a los usuarios gestionar sus cuentas, ver el historial de transacciones, y m谩s. Las variables de entorno pueden establecerse ya sea en un objeto global `window._env_` o como variables `process.env`. Todas las variables de entorno utilizadas en este repositorio est谩n en el archivo `src/constants/envVariables.ts`, incluyendo tipos. La ubicaci贸n predeterminada del objeto `window._env_` es `public/settings/env-config.js`.

### Configuraci贸n General

- `API_URL` - La URL base del Servicio N煤cleo de SDP. Predeterminado: "http://localhost:8000".
- `STELLAR_EXPERT_URL` - La URL base del explorador Stellar Expert. Predeterminado: "https://stellar.expert/explorer/testnet".
- `HORIZON_URL` - La URL base del servidor Horizon. Predeterminado: "https://horizon-testnet.stellar.org".
- `RECAPTCHA_SITE_KEY` - La clave del sitio de Google reCAPTCHA v2 - No soy un robot. Esta clave necesita igualar la clave utilizada en el Servicio N煤cleo de SDP.
- `SINGLE_TENANT_MODE` - Cuando est谩 configurado en `"true"`, habilita el modo de un solo inquilino, 煤til para desarrollo local o configuraciones de un solo inquilino. Adem谩s de configurarlo en true, deber谩s configurar el inquilino predeterminado llamando a la solicitud [`POST /tenants/default-tenant`](../api-reference/default-tenant.api.mdx). Por defecto: "false".
