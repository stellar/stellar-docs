---
title: Puntos de integración de la Anchor Platform
sidebar_position: 60
---

Como se menciona en la guía de [Diseño y Arquitectura](./design-and-architecture), la Stellar Disbursement Platform consiste en varios servicios implementados juntos, donde la Anchor Platform es uno de ellos.

Por esa razón, hay algunos puntos de conexión entre las dos instancias que deben configurarse adecuadamente para que la Stellar Disbursement Platform funcione correctamente. Cubriremos estos puntos de integración en esta guía.

Ten en cuenta que para la implementación predeterminada de la Stellar Disbursement Platform, que se basa en valores predeterminados de Helm y en billeteras y activos predeterminados, no se necesita configuración adicional. Esta guía es para aquellos que desean personalizar la implementación cambiando las billeteras y activos disponibles en su instancia de SDP.

## Rol de la Anchor Platform en SDP

El flujo de Registro de Billetera se inicia dentro de la aplicación de billetera del destinatario. Esta aplicación interactúa con la [Anchor Platform] para iniciar el proceso de depósito [SEP-24] a través de la SDP (Stellar Disbursement Platform). La SDP recopila la información necesaria del destinatario para ejecutar finalmente el pago a él.

La Anchor Platform (AP) se utiliza para manejar la implementación de protocolos de interoperabilidad como [SEP-1], [SEP-10] y [SEP-24], haciendo que sus endpoints estén disponibles para las aplicaciones de billetera. La [Anchor Platform] está preconfigurada tanto en el gráfico Helm de [el repo] como en el archivo Docker Compose disponible en el directorio `dev`.

## Pasos para Configurar la Integración SDP-AnchorPlatform

Para asegurar una integración fluida entre la SDP y la [Anchor Platform], asegúrate de seguir estos pasos:

1. 🚨 **Paso Crítico**: Configura la Anchor Platform con `PLATFORM_SERVER_AUTH_TYPE: JWT`. Esta configuración es crucial para asegurar la API de backoffice de tu Anchor Platform a través de la autenticación de token JWT.
2. **Secretos Compartidos para la Autenticación de API**: El `SECRET_PLATFORM_API_AUTH_SECRET` en la Anchor Platform debe coincidir con `ANCHOR_PLATFORM_OUTGOING_JWT_SECRET` en la SDP.
3. **Secretos Compartidos para SEP-24**: Los secretos `SECRET_SEP24_INTERACTIVE_URL_JWT_SECRET` y `SECRET_SEP24_MORE_INFO_URL_JWT_SECRET` en la Anchor Platform deben alinearse con `SEP24_JWT_SECRET` en la SDP.
4. **Configuración de SEP-10**: El `SECRET_SEP10_SIGNING_SEED` en la Anchor Platform debe ser consistente con el `SEP10_SIGNING_PRIVATE_KEY` y el `SEP10_SIGNING_PUBLIC_KEY` en la SDP.

Al seguir estos pasos, garantizarás una integración segura y eficiente entre tus sistemas SDP y Anchor Platform.

## Sincronización Manual de Activos y Billeteras Personalizados

Actualmente, algunas configuraciones dentro de la Anchor Platform son estáticas y se cargan a través de variables de entorno. Por otro lado, la SDP lee estas mismas configuraciones de su base de datos y permite que un usuario propietario las modifique. Esta dinámica se refiere particularmente a las listas de activos y billeteras admitidos.

Mientras exploramos activamente formas de automatizar este proceso de sincronización, los ajustes manuales a la configuración de la Anchor Platform son necesarios cada vez que un activo o billetera se agrega o elimina en la SDP.

1. **(Requerido) Actualizar Activos Admitidos**: Cada vez que cambies la lista de activos admitidos en la SDP, es esencial actualizar la configuración `ASSETS_VALUE` de la Anchor Platform para reflejar estos cambios. Consulta los valores de Helm de [el repo] o los archivos Docker Compose para ejemplos.
2. **(Opcional, pero Recomendado) Billeteras y Dominios SEP-10**: Si utilizas la configuración `SEP10_CLIENT_ATTRIBUTION_REQUIRED: true` en la Anchor Platform - una práctica recomendada - también debes actualizar la `SEP10_CLIENT_ATTRIBUTION_ALLOW_LIST` para incluir dominios de billetera de confianza. Esto asegura que la Anchor Platform procesará solicitudes SEP-10 solo de billeteras de confianza.

Al adherirte a estas pautas, puedes asegurar una configuración consistente y segura entre tus instancias de SDP y Anchor Platform.

[sep-1]: https://stellar.org/protocol/sep-1
[sep-10]: https://stellar.org/protocol/sep-10
[sep-24]: https://stellar.org/protocol/sep-24
[Anchor Platform]: https://github.com/stellar/java-stellar-anchor-sdk
[el repo]: https://github.com/stellar/stellar-disbursement-platform-backend
