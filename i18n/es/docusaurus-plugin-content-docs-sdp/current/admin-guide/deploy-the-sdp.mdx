---
title: Despliegue
sidebar_position: 30
---

## Despliegue mediante Helm Charts

### Requisitos mínimos del sistema

- **Cuentas Stellar**: Necesitarás una **Cuenta de Distribución** (financiada) y una **Cuenta de Firma SEP-10**.
- **Certificados**: Al ejecutar el SDP en una configuración multiinquilino, necesitarás adquirir certificados TLS comodín para facilitar la provisión de inquilinos, ya que el SDP depende de subdominios para diferenciar entre ellos. Esto te permitirá provisionar inquilinos sin tener que configurar manualmente certificados TLS para cada inquilino. Puedes usar un servicio como [Let's Encrypt](https://letsencrypt.org/) o [Namecheap](https://www.namecheap.com/security/ssl-certificates/) para adquirir estos certificados.

| Componente     | Requisito | Nota                                                                                    |
| :------------- | :-------- | :-------------------------------------------------------------------------------------- |
| **Kubernetes** | v1.19+    | Para despliegue con Helm                                                                |
| **Helm**       | v3.14.0+  | Para despliegue con Helm                                                                |
| **PostgreSQL** | v14.0+    | Requerido para ambos métodos de despliegue                                              |
| **RAM**        | 4GB+      | Memoria mínima recomendada para ejecutar el stack completo en modo de un solo inquilino |

### Instalando el gráfico

#### 1. Agregar el Repositorio Helm de Stellar

Agrega el repositorio oficial de charts de Helm de Stellar a tu cliente local de Helm:

```shell
helm repo add stellar https://helm.stellar.org/charts
```

#### 2. Preparar la Configuración

Descarga el archivo de configuración mínima para usarlo como base:

```shell
curl -LJO https://raw.githubusercontent.com/stellar/stellar-disbursement-platform-backend/main/helmchart/sdp/minimal-values.yaml
```

Los siguientes parámetros pueden establecerse en el archivo `minimal-values.yaml` o sobrescribirse directamente vía CLI durante la instalación:

- `global.distributionPublicKey`: Clave pública de la cuenta de distribución.
- `global.distributionPrivateKey`: Clave privada de la cuenta de distribución.
- `global.sep10PublicKey`: Clave pública para autenticación SEP-10.
- `global.sep10PrivateKey`: Clave privada para autenticación SEP-10.
- `global.isPubnet`: Establecer en `true` para Mainnet.

Consulta el [Helm Chart README](https://github.com/stellar/stellar-disbursement-platform-backend/blob/develop/helmchart/sdp/README.md#parameters) para una lista completa de parámetros.

:::tip

Hay una explicación más detallada sobre cómo configurar el SDP en la [Guía de Configuración](configuring-sdp).

:::

#### 3. Instalar el Chart

Instala el chart usando tu archivo de valores personalizado. Puedes sobrescribir valores directamente vía CLI o modificar el archivo `minimal-values.yaml`.

```shell
helm install sdp -f minimal-values.yaml stellar/stellar-disbursement-platform \
     --set "global.distributionPublicKey=<YOUR_KEY>" \
     --set "global.distributionPrivateKey=<YOUR_SECRET>" \
     --set "global.sep10PublicKey=<YOUR_KEY>" \
     --set "global.sep10PrivateKey=<YOUR_SECRET>"
```

## Despliegue mediante Docker Compose

Esta sección describe cómo desplegar el SDP utilizando Docker Compose para un entorno similar a producción. A diferencia del entorno de desarrollo, esta configuración usa imágenes preconstruidas para producción y requiere una configuración explícita de variables de entorno y secretos.

### Requisitos mínimos del sistema

- **Cuentas Stellar**: Necesitarás una **Cuenta de Distribución** (financiada) y una **Cuenta de Firma SEP-10**.
- **Acceso a la red**: Acceso saliente a la red Stellar (Horizon/Soroban) y a cualquier integración de terceros (Twilio, AWS SES, etc.).

| Componente | Requisito | Nota                                                       |
| :--------- | :-------- | :--------------------------------------------------------- |
| **Docker** | v20.10+   | Requerido para orquestación de contenedores                |
| **RAM**    | 4GB+      | Memoria mínima recomendada para ejecutar el stack completo |

### Pasos del despliegue

#### 1. Clonar el repositorio

```shell
git clone https://github.com/stellar/stellar-disbursement-platform-backend.git
cd stellar-disbursement-platform-backend
```

#### 2. Crear archivo de entorno

Copia el archivo de entorno de ejemplo.

```shell
cp dev/.env.example dev/.env
```

#### 3. Configurar variables de entorno

Edita `dev/.env` y completa las siguientes variables con las claves de tu cuenta Stellar:

- `DISTRIBUTION_PUBLIC_KEY`
- `DISTRIBUTION_SEED`
- `SEP10_SIGNING_PUBLIC_KEY`
- `SEP10_SIGNING_PRIVATE_KEY`

Para despliegue en mainnet, establece: _ `NETWORK_TYPE=pubnet` _ `NETWORK_PASSPHRASE=Public Global Stellar Network ; September 2015` _ `HORIZON_URL=https://horizon.stellar.org` _ `DISABLE_MFA=false` (Aplicado por seguridad)

#### 4. Iniciar los servicios

```shell
docker compose -f dev/docker-compose.yml up -d
```
