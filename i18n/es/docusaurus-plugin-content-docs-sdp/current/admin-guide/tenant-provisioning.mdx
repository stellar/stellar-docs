---
title: Proveer un nuevo inquilino
description: Aprende c칩mo proveer y configurar un nuevo inquilino en la Stellar Disbursement Platform.
keywords:
  - SDP
  - configuration
  - tenant
  - provisioning
  - single-tenant
  - multi0tenant
sidebar_position: 48
---

Esta secci칩n cubre los pasos para proveer un nuevo inquilino en la Stellar Disbursement Platform (SDP). Un inquilino es una organizaci칩n o entidad aislada que utiliza la SDP para gestionar los desembolsos. Cada inquilino tiene su propia configuraci칩n, usuarios, desembolsos y, lo m치s importante, su propia fuente de fondos.

Los endpoints necesarios para gestionar inquilinos se pueden encontrar en la documentaci칩n de [Administraci칩n (Gesti칩n de Inquilinos)](../api-reference/admin.tag.mdx).

## Crear Inquilinos

Los inquilinos pueden ser creados a trav칠s del endpoint [POST /tenants](../api-reference/create-tenant.api.mdx). Como un inicio r치pido, puedes ejecutar el script [main.sh](https://github.com/stellar/stellar-disbursement-platform-backend/blob/develop/dev/main.sh) desde nuestro repositorio y asegurarte de reemplazarlo con los valores deseados.

Las siguientes secciones detallan c칩mo se utiliza cada campo en el proceso de aprovisionamiento y, para que puedas asegurarte de que los inquilinos est치n aprovisionados como se espera:

### `distribution_account_type`

Este es, con mucho, el campo m치s importante, ya que determina la fuente de fondos (cuenta de distribuci칩n) para el inquilino, as칤 como la forma en que se almacena el secreto para esta cuenta de distribuci칩n. Los posibles valores se describen a continuaci칩n:

- `DISTRIBUTION_ACCOUNT.STELLAR.DB_VAULT`
  - **Plataforma**: Stellar
  - **Ubicaci칩n de Almacenamiento del Secreto**: Base de datos, encriptada con `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE`
  - **Activos Admitidos**: Cualquier activo de Stellar
  - **Aislamiento de Clave/Secreto**: Segregado por inquilino
  - **Apropiado para**: Multi-inquilino y 칰nico inquilino
  - **쮺칩mo se configura?**: La cuenta de distribuci칩n se genera aleatoriamente y se financia durante el proceso de aprovisionamiento, y el secreto est치 encriptado y almacenado de manera segura en la base de datos.
  - **Rendimiento de transacciones**: Aproximadamente 40 transacciones por segundo.
- `DISTRIBUTION_ACCOUNT.CIRCLE.DB_VAULT`
  - **Plataforma**: [Circle]
  - **Ubicaci칩n de Almacenamiento del Secreto**: Base de datos, encriptada con `DISTRIBUTION_ACCOUNT_ENCRYPTION_PASSPHRASE`
  - **Activos Admitidos**: [USDC]/[EURC]
  - **Aislamiento de Clave/Secreto**: Segregado por inquilino
  - **Apropiado para**: Multi-inquilino y 칰nico inquilino
  - **쮺칩mo se configura?**: La clave de API de Circle es proporcionada por el propio inquilino una vez que tiene acceso al panel de control. El secreto est치 encriptado y almacenado de manera segura en la base de datos. El secreto est치 encriptado y almacenado de manera segura en la base de datos.
  - **Rendimiento de transacciones**: 丘멆잺 Limitado por los l칤mites de tasa de API de Circle.
- 游댮 `DISTRIBUTION_ACCOUNT.STELLAR.ENV`
  - **Plataforma**: Stellar
  - **Ubicaci칩n de Almacenamiento del Secreto**: Variable de entorno `DISTRIBUTION_SEED`
  - **Activos Admitidos**: Cualquier activo de Stellar
  - **Aislamiento de Clave/Secreto**: 游뚿 Mismo cuenta de distribuci칩n que el HOST
  - **Apropiado para**: Solo 칰nico inquilino
  - **쮺칩mo se configura?**: El inquilino usar치 la cuenta HOST **tal como est치**. El host es responsable de crear la cuenta y configurarla con el secreto `DISTRIBUTION_SEED`.
  - **Rendimiento de transacciones**: Aproximadamente 40 transacciones por segundo.

:::info

Una vez que se crea un inquilino, el `distribution_account_type` no se puede cambiar. Si deseas utilizar un tipo de cuenta de distribuci칩n diferente, necesitar치s crear un nuevo inquilino.

:::

### `name`

Este es el nombre del inquilino en la base de datos administrativa. Se utiliza para generar el esquema de base de datos por inquilino, y tambi칠n se usa en el panel de control para identificar al inquilino.

No se puede cambiar una vez que se crea el inquilino.

### `base_url`, y `sdp_ui_base_url`

Estas son las URLs que el inquilino utilizar치 para acceder a la API y al panel de control, respectivamente. Se utilizan para generar las URLs espec칤ficas del inquilino que se usan en el panel de control y en los mensajes dirigidos al usuario o al receptor.

Son importantes para permitir que el backend de la SDP dirija las solicitudes no autenticadas al inquilino correcto y para generar las URLs correctas en el panel de control.

### `owner_email`, `owner_first_name`, y `owner_last_name`

Esta es la informaci칩n del primer usuario en la organizaci칩n inquilina. Este usuario tendr치 el rol de `OWNER`, que les otorga acceso completo y control sobre el inquilino.

El correo electr칩nico, nombre y apellido pueden ser actualizados por el usuario una vez que se registre y acceda al panel de control.

### `organization_name`

Este campo se usa para completar el nombre del inquilino en el panel de control. Puede ser actualizado por el usuario propietario a trav칠s del panel de control.

## Modo 칔nico Inquilino

La plataforma est치 dise침ada para modo multi-inquilino, pero tambi칠n puede ser utilizada en modo 칰nico inquilino. Este es el 칰nico caso en el que se acepta configurar `DISTRIBUTION_ACCOUNT.STELLAR.ENV`, mientras que los otros modos todav칤a se aconsejan.

Para habilitar el modo 칰nico inquilino, necesitas seguir dos pasos:

1. Establecer la variable de entorno `SINGLE_TENANT_MODE=true`.
2. Como HOST, necesitas actualizar la base de datos configurando cu치l inquilino es el predeterminado llamando a [POST /tenants/default-tenant](../api-reference/default-tenant.api.mdx)

:::caution

Una vez que esta variable de entorno `SINGLE_TENANT_MODE` est칠 habilitada, todas las solicitudes relacionadas con inquilinos esperar치n que haya un inquilino por defecto y fallar치n con un c칩digo de estado `400` si no hay uno. La respuesta de la API incluir치 un mensaje indicando que falta el inquilino predeterminado.

:::

## Obteniendo Inquilinos

Los inquilinos pueden ser obtenidos a trav칠s de los endpoints [GET /tenants](../api-reference/get-all-tenants.api.mdx) y [GET /tenants/:id-or-name](../api-reference/retrieve-a-tenant.api.mdx).

## Eliminando Inquilinos

Los inquilinos pueden ser eliminados a trav칠s del endpoint [DELETE /tenants/:id](../api-reference/soft-delete-a-tenant.api.mdx). Este es un borrado suave y, a pesar de que el sistema no proporciona una forma de restaurarlo, la informaci칩n del inquilino no ser치 eliminada de la base de datos con la implementaci칩n actual.

## Actualizando Inquilinos

Algunos campos de un inquilino pueden ser actualizados a trav칠s del endpoint [PATCH /tenants/:id](../api-reference/update-a-tenant.api.mdx). La documentaci칩n de la API proporciona m치s detalles sobre qu칠 campos pueden ser actualizados.

[Circle]: https://www.circle.com
[USDC]: https://www.circle.com/en/usdc
[EURC]: https://www.circle.com/en/eurc
