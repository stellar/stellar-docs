---
title: Garantías de Entrega
sidebar_position: 30
---

## Garantías de Entrega

Dependiendo del sistema de mensajería que utilices, habrá diferentes garantías de entrega. el servicio de eventos utiliza Kafka como sistema de mensajería, por lo que las garantías de entrega dependerán de la configuración del productor y de la configuración del bróker que utilices. Dependiendo del número de particiones configuradas para el tema `TRANSACTION`, los eventos pueden ser entregados fuera de orden.

:::caution

Cualquier lógica de transacción que dependa del orden debería usar el `status` de la transacción y los campos `updated_at` para determinar el orden de los eventos.

:::

Las siguientes subsecciones describirán las garantías de entrega desde la perspectiva del cliente y del servidor comercial.

### Garantías de Entrega del Cliente

Para cada cliente, el servicio de eventos intentará entregar cada evento hasta tres veces con un retroceso exponencial. Si el evento no se entrega después de tres intentos debido a errores HTTP 4xx o 5xx, el evento será omitido. Si el cliente no es accesible después de tres intentos, el servicio de eventos dejará de intentar entregar cualquier evento a ese cliente.

### Garantías de Entrega del Servidor Comercial

El servicio de eventos intentará entregar cada evento al servidor comercial hasta tres veces con un retroceso exponencial. Si el evento no se entrega después de tres intentos debido a errores HTTP 4xx o 5xx, el evento será omitido. Si el servidor comercial no es accesible después de tres intentos, el servicio de eventos dejará de intentar entregar cualquier evento al servidor comercial.

:::note

Las garantías de entrega del servidor comercial son las mismas que las garantías de entrega del cliente. En el futuro, el servicio de eventos omitirá los eventos que no se entreguen a clientes que no sean accesibles.

:::
