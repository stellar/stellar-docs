Usar el Payment Observer te permite delegar este paso a la Anchor Platform. Para habilitar el Payment Observer, usa el flag `--stellar-observer` en la sección de comandos del [archivo compose](../../getting-started.mdx#configuration).

El Payment Observer rastreará todas las transacciones enviadas a la cuenta de distribución. Cuando se detecte la transacción con el memo esperado en la red, el estado cambiará automáticamente a `pending_anchor` y el evento será emitido (si se usa Kafka).

Para actualizar los estados de las transacciones, el observer realiza las solicitudes JSON-RPC correspondientes a la plataforma. Debe usar la siguiente URL.

<CodeExample>

```bash
# dev.env
PLATFORM_API_BASE_URL=http://platform-server:8085
```

</CodeExample>

:::caution

El Payment Observer no validará los montos. Es tu responsabilidad verificar que el monto enviado por el usuario sea correcto.

:::

:::info

Si ya tienes un sistema que monitorea pagos, asegúrate de que la lógica del sistema iguale la descripción a continuación:

Primero, espera a que la transacción se incluya en el ledger (usando un SDK). Esta transacción debe tener el memo esperado y la dirección de destino (cuenta de distribución). Una vez que esta transacción ha sido detectada y verificada, notifica al usuario que los fondos han sido recibidos usando la solicitud JSON-RPC [notify_onchain_funds_received](#funds-received-1).

:::

:::tip

El servicio de custodia de Fireblocks rastreará automáticamente las transacciones y notificará al usuario que los fondos han sido recibidos. Consulta la [documentación del servicio de custodia de Fireblocks][fireblocks] para más detalles.

:::

[fireblocks]: ../../custody-services/fireblocks/README.mdx
