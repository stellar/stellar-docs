---
id: get-rates
title: "Retrieve Rates"
description: "Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must"
sidebar_label: "Retrieve Rates"
hide_title: true
hide_table_of_contents: true
api: {"description":"Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must\nuse exchange rates that are communicated to the client application requesting the transaction. When clients make\nrequests to the Platform for these exchange rates, the Platform sends this request to the anchor to fetch it.\n\nRates can be [indicative](https://www.investopedia.com/terms/i/indicativequote.asp) or\n[firm](https://www.investopedia.com/terms/f/firmquote.asp). The anchor must provide an ID and expiration if the\nclient requests a firm rate.\n\nAnchors can provide discounted rates specific client applications. The Platform includes the `client_id` parameter\nfor this reason.\n\nEither `sell_amount` or `buy_amount` will be included in requests as parameters, but never both. In the same way,\neither `sell_delivery_method` and `buy_delivery_method` may be included in requests, but never both, since either\n`sell_asset` or `buy_asset` is a Stellar asset.\n","tags":["Rates","SEP-31","SEP-38"],"operationId":"getRates","parameters":[{"in":"query","name":"type","description":"The type of rate requested. If `firm`, the response must include `rate.id` and `rate.expires_at`.","schema":{"type":"string","enum":["indicative","firm"]},"required":true},{"in":"query","name":"client_id","description":"An identifier for the client application making the request. This ID can be used to offer different fees to different clients.\n\nClient IDs will be the Stellar public key the public key used to authenticate via SEP-10. Anchors must ensure\nthat the public key specified in the request matches a public key known to belong to the sending anchor.\n\nThis parameter will only be specified if the client is authenticated via SEP-10. Anchors can define whether or not\nauthentication is required for fetching indicative rates. Firm rates always require authentication.\n","schema":{"type":"string"}},{"in":"query","name":"sell_asset","description":"The asset the client application will send to the anchor in exchange for `buy_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true},{"in":"query","name":"buy_asset","description":"The asset the that the anchor will send in exchange for `sell_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true},{"in":"query","name":"sell_amount","description":"The amount of `sell_asset` the client application will send in exchange for `buy_asset`. Will not be used in\nconjuction with `buy_amount`.\n","schema":{"type":"string"}},{"in":"query","name":"buy_amount","description":"The amount of `buy_asset` the anchor will send in exchange for `sell_asset`. Will not be used in conjuction\nwith `sell_amount`.\n","schema":{"type":"string"}},{"in":"query","name":"country_code","description":"The [ISO 3166-1 alpha-3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) code of the user's current address.\nAnchors should expect this parameter to be provided if one of the assets of the buy/sell pair is fiat and it\nis available in two or more countries.\n","schema":{"type":"string"}},{"in":"query","name":"expire_after","description":"The client's desired `expires_at` date and time for the quote that can be used if this is a firm quote. This should\nbe a [UTC ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) string. Anchors should return `400 Bad\nRequest` if an expiration date on or after the requested value cannot be provided.\n","schema":{"type":"string"}},{"in":"query","name":"sell_delivery_method","description":"The method the client or user will use to deliver `sell_asset` to the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `buy_delivery_method`.\n","schema":{"type":"string"}},{"in":"query","name":"buy_delivery_method","description":"The method the client or user wants used to receive `buy_asset` from the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `sell_delivery_method`.\n","schema":{"type":"string"}}],"responses":{"200":{"description":"Success.","content":{"application/json":{"schema":{"type":"object","properties":{"rate":{"type":"object","properties":{"id":{"type":"string","description":"ID of the firm quote. NOT USED when `type=indicative`."},"expires_at":{"type":"string","format":"date-time","description":"Expiration for the quote. NOT USED when `type=indicative`."},"price":{"type":"string","description":"The conversion price offered by the anchor for one unit of `buy_asset` in terms of `sell_asset`, without including fees. In traditional finance, `buy_asset` would be referred to as the base asset and `sell_asset` as the counter asset. The formula `sell_amount - fee = price * buy_amount` must hold true ([ref](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#price-formulas))."},"sell_amount":{"type":"string","description":"The amount of `sell_asset` the anchor will exchange for `buy_asset`. It could be different from the `sell_amount` provided in the request, depending on how fees are applied by the Anchor."},"buy_amount":{"type":"string","description":"The amount of `buy_asset` the anchor will provide with `sell_asset`. It could be different from the `buy_amount` provided in the request, depending on how fees are applied by the Anchor."},"fee":{"type":"object","description":"An object describing the fees added on top of the rate provided via the `price` attribute.","properties":{"total":{"type":"string","description":"The total fee to be applied."},"asset":{"type":"string","description":"The asset the fee will be charged in. Must be represented in [Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format)."},"details":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"The name of the fee, for example `ACH fee`, `Brazilian conciliation fee`, `Service fee`, etc."},"description":{"type":"string","description":"A text describing the fee."},"amount":{"type":"string","description":"The amount of asset applied. If `fee.details` is provided, `sum(fee.details.amount)` should be equals `fee.total`."}},"required":["name","amount"],"title":"RateFeeDetailResponse"}}},"required":["total","asset"],"title":"RateFeeResponse"}},"required":["price","sell_amount","buy_amount"]}},"title":"RateResponse"}}}},"422":{"description":"Unprocessable Entity. This status should be returned when the anchor understood the request but cannot\nreturn a success response.\nIn these cases, the Platform will respond to the client application's request with a `400 Bad Request`\nand include the error message provided by the anchor in the response body.\n","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"id":{"type":"string"}},"required":["error"],"title":"Error"}}}},"500":{"description":"Error. The Platform will respond to the client application with the same response code and body.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"id":{"type":"string"}},"required":["error"],"title":"Error"}}}}},"method":"get","path":"/rate","info":{"version":"2.0.0","description":"The Synchronous Callbacks API specification for the Stellar Anchor Platform project.\n\nThe Synchronous Callbacks API defines requests made by the Platform while it is processing a request from a client application. The\nanchor's responses to these requests affect the Platform responses to the client application.\n","title":"Synchronous Callbacks API"},"postman":{"name":"Retrieve Rates","description":{"content":"Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must\nuse exchange rates that are communicated to the client application requesting the transaction. When clients make\nrequests to the Platform for these exchange rates, the Platform sends this request to the anchor to fetch it.\n\nRates can be [indicative](https://www.investopedia.com/terms/i/indicativequote.asp) or\n[firm](https://www.investopedia.com/terms/f/firmquote.asp). The anchor must provide an ID and expiration if the\nclient requests a firm rate.\n\nAnchors can provide discounted rates specific client applications. The Platform includes the `client_id` parameter\nfor this reason.\n\nEither `sell_amount` or `buy_amount` will be included in requests as parameters, but never both. In the same way,\neither `sell_delivery_method` and `buy_delivery_method` may be included in requests, but never both, since either\n`sell_asset` or `buy_asset` is a Stellar asset.\n","type":"text/plain"},"url":{"path":["rate"],"host":["{{baseUrl}}"],"query":[{"disabled":false,"description":{"content":"(Required) The type of rate requested. If `firm`, the response must include `rate.id` and `rate.expires_at`.","type":"text/plain"},"key":"type","value":""},{"disabled":false,"description":{"content":"An identifier for the client application making the request. This ID can be used to offer different fees to different clients.\n\nClient IDs will be the Stellar public key the public key used to authenticate via SEP-10. Anchors must ensure\nthat the public key specified in the request matches a public key known to belong to the sending anchor.\n\nThis parameter will only be specified if the client is authenticated via SEP-10. Anchors can define whether or not\nauthentication is required for fetching indicative rates. Firm rates always require authentication.\n","type":"text/plain"},"key":"client_id","value":""},{"disabled":false,"description":{"content":"(Required) The asset the client application will send to the anchor in exchange for `buy_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","type":"text/plain"},"key":"sell_asset","value":""},{"disabled":false,"description":{"content":"(Required) The asset the that the anchor will send in exchange for `sell_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","type":"text/plain"},"key":"buy_asset","value":""},{"disabled":false,"description":{"content":"The amount of `sell_asset` the client application will send in exchange for `buy_asset`. Will not be used in\nconjuction with `buy_amount`.\n","type":"text/plain"},"key":"sell_amount","value":""},{"disabled":false,"description":{"content":"The amount of `buy_asset` the anchor will send in exchange for `sell_asset`. Will not be used in conjuction\nwith `sell_amount`.\n","type":"text/plain"},"key":"buy_amount","value":""},{"disabled":false,"description":{"content":"The [ISO 3166-1 alpha-3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) code of the user's current address.\nAnchors should expect this parameter to be provided if one of the assets of the buy/sell pair is fiat and it\nis available in two or more countries.\n","type":"text/plain"},"key":"country_code","value":""},{"disabled":false,"description":{"content":"The client's desired `expires_at` date and time for the quote that can be used if this is a firm quote. This should\nbe a [UTC ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) string. Anchors should return `400 Bad\nRequest` if an expiration date on or after the requested value cannot be provided.\n","type":"text/plain"},"key":"expire_after","value":""},{"disabled":false,"description":{"content":"The method the client or user will use to deliver `sell_asset` to the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `buy_delivery_method`.\n","type":"text/plain"},"key":"sell_delivery_method","value":""},{"disabled":false,"description":{"content":"The method the client or user wants used to receive `buy_asset` from the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `sell_delivery_method`.\n","type":"text/plain"},"key":"buy_delivery_method","value":""}],"variable":[]},"header":[{"key":"Accept","value":"application/json"}],"method":"GET"}}
sidebar_class_name: "get api-method"
info_path: api/anchor-platform/callbacks/synchronous-callbacks-api
custom_edit_url: null
---

import { SepBadge } from "@site/src/components/SepBadge";

<SepBadge tags={"Rates,SEP-31,SEP-38"}/>

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Retrieve Rates



Transactions that involve two non-equivalent on & off-chain assets (such as USDC on Stellar and fiat EUR) must
use exchange rates that are communicated to the client application requesting the transaction. When clients make
requests to the Platform for these exchange rates, the Platform sends this request to the anchor to fetch it.

Rates can be [indicative](https://www.investopedia.com/terms/i/indicativequote.asp) or
[firm](https://www.investopedia.com/terms/f/firmquote.asp). The anchor must provide an ID and expiration if the
client requests a firm rate.

Anchors can provide discounted rates specific client applications. The Platform includes the `client_id` parameter
for this reason.

Either `sell_amount` or `buy_amount` will be included in requests as parameters, but never both. In the same way,
either `sell_delivery_method` and `buy_delivery_method` may be included in requests, but never both, since either
`sell_asset` or `buy_asset` is a Stellar asset.


<details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Query Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"in":"query","name":"type","description":"The type of rate requested. If `firm`, the response must include `rate.id` and `rate.expires_at`.","schema":{"type":"string","enum":["indicative","firm"]},"required":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"client_id","description":"An identifier for the client application making the request. This ID can be used to offer different fees to different clients.\n\nClient IDs will be the Stellar public key the public key used to authenticate via SEP-10. Anchors must ensure\nthat the public key specified in the request matches a public key known to belong to the sending anchor.\n\nThis parameter will only be specified if the client is authenticated via SEP-10. Anchors can define whether or not\nauthentication is required for fetching indicative rates. Firm rates always require authentication.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"sell_asset","description":"The asset the client application will send to the anchor in exchange for `buy_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"buy_asset","description":"The asset the that the anchor will send in exchange for `sell_asset` in\n[Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format).\n","schema":{"type":"string"},"required":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"sell_amount","description":"The amount of `sell_asset` the client application will send in exchange for `buy_asset`. Will not be used in\nconjuction with `buy_amount`.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"buy_amount","description":"The amount of `buy_asset` the anchor will send in exchange for `sell_asset`. Will not be used in conjuction\nwith `sell_amount`.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"country_code","description":"The [ISO 3166-1 alpha-3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) code of the user's current address.\nAnchors should expect this parameter to be provided if one of the assets of the buy/sell pair is fiat and it\nis available in two or more countries.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"expire_after","description":"The client's desired `expires_at` date and time for the quote that can be used if this is a firm quote. This should\nbe a [UTC ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) string. Anchors should return `400 Bad\nRequest` if an expiration date on or after the requested value cannot be provided.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"sell_delivery_method","description":"The method the client or user will use to deliver `sell_asset` to the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `buy_delivery_method`.\n","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"in":"query","name":"buy_delivery_method","description":"The method the client or user wants used to receive `buy_asset` from the Anchor. This value may affect the\nexpiration and price provided. The values used for this parameter is defined in the application's configuration.\nWill not be used in conjuction with `sell_delivery_method`.\n","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

Success.

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>rate</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"ID of the firm quote. NOT USED when `type=indicative`."}}></SchemaItem><SchemaItem collapsible={false} name={"expires_at"} required={false} schemaName={"date-time"} qualifierMessage={undefined} schema={{"type":"string","format":"date-time","description":"Expiration for the quote. NOT USED when `type=indicative`."}}></SchemaItem><SchemaItem collapsible={false} name={"price"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The conversion price offered by the anchor for one unit of `buy_asset` in terms of `sell_asset`, without including fees. In traditional finance, `buy_asset` would be referred to as the base asset and `sell_asset` as the counter asset. The formula `sell_amount - fee = price * buy_amount` must hold true ([ref](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#price-formulas))."}}></SchemaItem><SchemaItem collapsible={false} name={"sell_amount"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The amount of `sell_asset` the anchor will exchange for `buy_asset`. It could be different from the `sell_amount` provided in the request, depending on how fees are applied by the Anchor."}}></SchemaItem><SchemaItem collapsible={false} name={"buy_amount"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The amount of `buy_asset` the anchor will provide with `sell_asset`. It could be different from the `buy_amount` provided in the request, depending on how fees are applied by the Anchor."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>fee</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

An object describing the fees added on top of the rate provided via the `price` attribute.

</div><SchemaItem collapsible={false} name={"total"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The total fee to be applied."}}></SchemaItem><SchemaItem collapsible={false} name={"asset"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The asset the fee will be charged in. Must be represented in [Asset Identification Format](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0038.md#asset-identification-format)."}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>details</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"name"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The name of the fee, for example `ACH fee`, `Brazilian conciliation fee`, `Service fee`, etc."}}></SchemaItem><SchemaItem collapsible={false} name={"description"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"A text describing the fee."}}></SchemaItem><SchemaItem collapsible={false} name={"amount"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"The amount of asset applied. If `fee.details` is provided, `sum(fee.details.amount)` should be equals `fee.total`."}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"rate\": {\n    \"id\": \"string\",\n    \"expires_at\": \"2024-02-27T17:52:45.776Z\",\n    \"price\": \"string\",\n    \"sell_amount\": \"string\",\n    \"buy_amount\": \"string\",\n    \"fee\": {\n      \"total\": \"string\",\n      \"asset\": \"string\",\n      \"details\": [\n        {\n          \"name\": \"string\",\n          \"description\": \"string\",\n          \"amount\": \"string\"\n        }\n      ]\n    }\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"422"} value={"422"}><div>

Unprocessable Entity. This status should be returned when the anchor understood the request but cannot
return a success response.
In these cases, the Platform will respond to the client application's request with a `400 Bad Request`
and include the error message provided by the anchor in the response body.


</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"error"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"error\": \"string\",\n  \"id\": \"string\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"500"} value={"500"}><div>

Error. The Platform will respond to the client application with the same response code and body.

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"error"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"error\": \"string\",\n  \"id\": \"string\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
