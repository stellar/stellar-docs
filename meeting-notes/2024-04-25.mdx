---
title: "2024-04-25"
authors: naman
tags: [protocol]
---

<iframe
  src="https://drive.google.com/file/d/1WdZeRnjwl0FCxwtQhy2DNqMtNIiZIgtD/preview"
  width="640"
  height="360"
  allow="autoplay"
></iframe>

1. Garand discussed changes to the State Archival proposal based on feedback received at Meridian 2023. The proposed changes are:

- Previously, a downstream system called the ESS (Expired State Store) would store expired entries. In the new proposal, There is no ESS. All Archived entries, as well as all information required to generate restoration proofs for those entries, is stored directly in the History Archive.
- RPC nodes can generate proofs for archived state during preflight
- Captive-core can be directly queried for archived state, meaning that RPC/Horizon instances can potentially service queries for archival state

2. [The draft proposal](https://docs.google.com/document/d/1FAs3Yfo-o-gVqccrP29NSG8ysRvdEoyvuL7ywV4ijXI/edit#heading=h.1xwsoyifxbfm)
3. [Ongoing discussion](https://github.com/stellar/stellar-protocol/discussions/1480)
4. Snapshot size is TBD; it's a function of bucket list size as well as memory and historic demands placed on the RPC.
5. Bloom filters are the likely solution for proof of non-exitance though they come with trade-offs. They enable fast and cheap lookup but are probabilistic not deterministic.
6. Further comments are welcome.
